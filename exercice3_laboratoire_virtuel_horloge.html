<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module A.2 - Laboratoire Virtuel Horloge Biologique - Seconde Bac Pro</title>
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.6;
        }

        .exercice-container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            min-height: 100vh;
        }

        /* En-t√™te p√©dagogique obligatoire */
        .cadre-pedagogique {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .module-info h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #4fc3f7;
        }

        .objectif {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid var(--warning-pse);
        }

        .competences-travaillees {
            margin-top: 20px;
        }

        .competences-list {
            list-style: none;
            padding: 0;
        }

        .competences-list li {
            background: rgba(255,255,255,0.1);
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 5px solid var(--success-pse);
        }

        .niveau-cible {
            text-align: center;
            font-size: 1.1em;
            color: #4fc3f7;
            margin-top: 15px;
        }

        /* Exercice principal */
        .exercice-principal {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .section-titre {
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
            font-weight: bold;
        }

        .labo-interface {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border: 3px solid var(--primary-pse);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }

        .horloge-biologique {
            width: 100%;
            max-width: 500px;
            height: 400px;
            margin: 20px auto;
            background: radial-gradient(circle, #fff 0%, #f0f0f0 100%);
            border: 8px solid var(--dark-pse);
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .horloge-center {
            width: 30px;
            height: 30px;
            background: var(--primary-pse);
            border-radius: 50%;
            position: absolute;
            z-index: 10;
        }

        .heure-marker {
            position: absolute;
            font-size: 14px;
            font-weight: bold;
            color: var(--dark-pse);
        }

        .synchroniseur {
            position: absolute;
            padding: 8px 12px;
            border-radius: 20px;
            color: white;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .synchroniseur:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .synchroniseur.selected {
            border: 2px solid #fff;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .sync-lumiere { background: #ff9500; top: 10%; left: 50%; transform: translateX(-50%); }
        .sync-repas { background: #4CAF50; top: 30%; right: 10%; }
        .sync-travail { background: #2196F3; bottom: 30%; right: 10%; }
        .sync-loisirs { background: #9C27B0; bottom: 10%; left: 50%; transform: translateX(-50%); }
        .sync-sport { background: #FF5722; top: 50%; left: 10%; transform: translateY(-50%); }

        .melatonine-graph {
            width: 100%;
            height: 200px;
            background: #f8f9fa;
            border: 2px solid var(--primary-pse);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .courbe-melatonine {
            stroke: var(--success-pse);
            stroke-width: 3;
            fill: none;
        }

        .question-block {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .question-title {
            font-weight: bold;
            color: var(--dark-pse);
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .experience-block {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--success-pse);
        }

        .choix-container {
            display: grid;
            gap: 12px;
            margin-top: 15px;
        }

        .choix-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
        }

        .choix-option:hover {
            border-color: var(--primary-pse);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 134, 171, 0.2);
        }

        .choix-option.selected {
            border-color: var(--warning-pse);
            background: #fff3cd;
            transform: scale(1.02);
        }

        .choix-option.correct {
            border-color: var(--success-pse);
            background: #d4edda;
        }

        .choix-option.incorrect {
            border-color: var(--danger-pse);
            background: #f8d7da;
        }

        .manipulation-zone {
            background: linear-gradient(135deg, #fff3e0, #ffcc02);
            border: 3px dashed var(--warning-pse);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            min-height: 150px;
        }

        .element-manipulable {
            display: inline-block;
            padding: 10px 15px;
            margin: 5px;
            background: var(--primary-pse);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .element-manipulable:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(46, 134, 171, 0.3);
        }

        .element-manipulable.selected {
            background: var(--warning-pse);
            transform: scale(1.2);
        }

        .element-manipulable.used {
            background: var(--success-pse);
            transform: scale(0.9);
            opacity: 0.7;
        }

        .zone-depot {
            min-height: 100px;
            background: rgba(255, 255, 255, 0.8);
            border: 3px dashed #ccc;
            border-radius: 10px;
            margin: 15px 0;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .zone-depot.active {
            border-color: var(--success-pse);
            background: rgba(33, 150, 83, 0.1);
        }

        .btn-valider {
            background: linear-gradient(135deg, var(--success-pse), #27ae60);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-valider:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(33, 150, 83, 0.3);
        }

        .btn-valider:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .feedback-overlay {
            display: none;
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .feedback-overlay.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correction-explicite h4 {
            color: #ff6b6b;
            margin-bottom: 15px;
        }

        .bonne-reponse {
            background: rgba(33, 150, 83, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--success-pse);
        }

        .explication-pedagogique {
            background: rgba(255, 206, 84, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--warning-pse);
        }

        .score-section {
            text-align: center;
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .rgpd-notice {
            text-align: center;
            font-size: 0.9em;
            color: #666;
            margin-top: 30px;
            padding: 15px;
        }

        /* Responsive design */
        @media (min-width: 768px) {
            .exercice-container {
                padding: 20px;
                font-size: 17px;
            }
        }

        @media (min-width: 1024px) {
            .exercice-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 30px;
                font-size: 18px;
            }
        }

        .competence-c1 { border-left: 5px solid #E74C3C; }
        .competence-c3 { border-left: 5px solid #2ECC71; }
        .competence-c4 { border-left: 5px solid #F39C12; }

        .highlight {
            background: #fffacd;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .instructions-interaction {
            background: #e3f2fd;
            border: 2px solid var(--primary-pse);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .cycle-sommeil {
            display: flex;
            height: 80px;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .phase-sommeil {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .phase-sommeil:hover {
            transform: scale(1.05);
            z-index: 5;
        }

        .lent-leger { background: #81C784; flex: 2; }
        .lent-profond { background: #4CAF50; flex: 3; }
        .paradoxal { background: #FF7043; flex: 2; }

        .phase-sommeil.selected {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255,255,255,0.8);
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="exercice-container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module A.2 : Les rythmes biologiques - Le sommeil</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Pr√©server les rythmes biologiques, dont le sommeil, pour √™tre en bonne sant√© tout en respectant les rythmes sociaux.
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li class="competence-c1"><strong>C1</strong> - Traiter une information</li>
                    <li class="competence-c3"><strong>C3</strong> - Expliquer un ph√©nom√®ne physiologique en lien avec une mesure de pr√©vention</li>
                    <li class="competence-c4"><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Seconde
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            <div class="section-titre">
                üß¨ Laboratoire Virtuel : Exploration de l'Horloge Biologique
            </div>

            <p><strong>Mission :</strong> En tant qu'assistant(e) de laboratoire, vous allez √©tudier le fonctionnement de l'horloge biologique humaine et ses synchroniseurs. Manipulez les √©l√©ments interactifs pour comprendre les m√©canismes physiologiques du sommeil.</p>

            <!-- EXP√âRIENCE 1 : HORLOGE BIOLOGIQUE -->
            <div class="experience-block">
                <h3>üî¨ EXP√âRIENCE 1 : Les Synchroniseurs de l'Horloge Biologique</h3>
                <p>Cliquez sur les synchroniseurs pour comprendre leur influence sur l'horloge biologique (situ√©e au centre du cerveau). Observez comment ils r√©gulent nos rythmes circadiens.</p>
                
                <div class="labo-interface">
                    <div class="horloge-biologique">
                        <!-- Marqueurs horaires -->
                        <div class="heure-marker" style="top: 5%; left: 50%; transform: translateX(-50%);">6h</div>
                        <div class="heure-marker" style="top: 50%; right: 5%; transform: translateY(-50%);">12h</div>
                        <div class="heure-marker" style="bottom: 5%; left: 50%; transform: translateX(-50%);">18h</div>
                        <div class="heure-marker" style="top: 50%; left: 5%; transform: translateY(-50%);">24h</div>
                        
                        <!-- Centre de l'horloge -->
                        <div class="horloge-center" title="Horloge biologique dans le cerveau"></div>
                        
                        <!-- Synchroniseurs cliquables -->
                        <div class="synchroniseur sync-lumiere" onclick="activerSynchroniseur('lumiere')" title="Alternance jour/nuit">
                            ‚òÄÔ∏è Lumi√®re
                        </div>
                        <div class="synchroniseur sync-repas" onclick="activerSynchroniseur('repas')" title="Horaires des repas">
                            üçΩÔ∏è Repas
                        </div>
                        <div class="synchroniseur sync-travail" onclick="activerSynchroniseur('travail')" title="Horaires de travail">
                            üíº Travail
                        </div>
                        <div class="synchroniseur sync-loisirs" onclick="activerSynchroniseur('loisirs')" title="Activit√©s sociales">
                            üé≠ Loisirs
                        </div>
                        <div class="synchroniseur sync-sport" onclick="activerSynchroniseur('sport')" title="Exercice physique">
                            üèÉ Sport
                        </div>
                    </div>
                    
                    <div id="info-synchroniseur" style="text-align: center; margin-top: 20px; min-height: 80px; background: rgba(255,255,255,0.8); border-radius: 10px; padding: 15px;">
                        <em>Cliquez sur un synchroniseur pour d√©couvrir son r√¥le...</em>
                    </div>
                </div>
            </div>

            <!-- QUESTION 1 -->
            <div class="question-block" id="question-1">
                <div class="question-title">
                    <strong>üî¨ EXP√âRIENCE 1 - COMP√âTENCE C1 (Traiter une information)</strong><br>
                    Apr√®s avoir explor√© les synchroniseurs, identifiez le synchroniseur PRINCIPAL de l'horloge biologique :
                </div>
                <div class="choix-container">
                    <div class="choix-option" data-correct="true" onclick="selectionner(this, 1)">
                        A) La lumi√®re (alternance jour/nuit) - synchroniseur principal, influence directe sur la production de m√©latonine
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 1)">
                        B) Les horaires de repas - synchroniseur le plus important pour r√©guler les rythmes
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 1)">
                        C) Le travail - d√©termine tous les autres rythmes biologiques
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 1)">
                        D) Tous les synchroniseurs ont la m√™me importance
                    </div>
                </div>
                <button class="btn-valider" onclick="valider(1)" disabled>Valider ma r√©ponse</button>
            </div>

            <div class="feedback-overlay" id="feedback-1">
                <div class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ LA BONNE R√âPONSE √âTAIT :</strong><br>
                        <span style="color: #28a745; font-weight: bold;">A) La lumi√®re - synchroniseur principal</span>
                    </div>
                    <div class="explication-pedagogique">
                        <strong>üí° EXPLICATION SCIENTIFIQUE :</strong><br>
                        ‚Ä¢ <span class="highlight">Synchroniseur principal</span> : la lumi√®re agit directement sur les cellules photor√©ceptrices de la r√©tine<br>
                        ‚Ä¢ <span class="highlight">M√©canisme</span> : ces cellules envoient l'information "jour/nuit" au cerveau<br>
                        ‚Ä¢ <span class="highlight">Cons√©quence</span> : d√©clenche ou bloque la production de m√©latonine (hormone du sommeil)<br><br>
                        <strong>üìä Hi√©rarchie :</strong> Lumi√®re (100%) > Rythmes sociaux (repas, travail, loisirs) = synchroniseurs secondaires<br><br>
                        <strong>üîë Point cl√© :</strong> Sans lumi√®re, l'horloge biologique se d√©synchronise rapidement !
                    </div>
                </div>
            </div>

            <!-- EXP√âRIENCE 2 : COURBE DE M√âLATONINE -->
            <div class="experience-block">
                <h3>üî¨ EXP√âRIENCE 2 : Production de M√©latonine sur 24h</h3>
                <p>Observez la courbe de production de m√©latonine d'une personne normale. Analysez les variations selon les heures.</p>
                
                <div class="labo-interface">
                    <div class="melatonine-graph">
                        <svg width="100%" height="100%" viewBox="0 0 400 200">
                            <!-- Axes -->
                            <line x1="40" y1="160" x2="360" y2="160" stroke="#333" stroke-width="2"/>
                            <line x1="40" y1="160" x2="40" y2="20" stroke="#333" stroke-width="2"/>
                            
                            <!-- Labels horaires -->
                            <text x="60" y="175" text-anchor="middle" font-size="12">6h</text>
                            <text x="120" y="175" text-anchor="middle" font-size="12">12h</text>
                            <text x="200" y="175" text-anchor="middle" font-size="12">18h</text>
                            <text x="280" y="175" text-anchor="middle" font-size="12">24h</text>
                            <text x="340" y="175" text-anchor="middle" font-size="12">6h</text>
                            
                            <!-- Labels m√©latonine -->
                            <text x="35" y="45" text-anchor="middle" font-size="12" transform="rotate(-90, 35, 45)">Taux √©lev√©</text>
                            <text x="35" y="120" text-anchor="middle" font-size="12" transform="rotate(-90, 35, 120)">Taux faible</text>
                            
                            <!-- Courbe de m√©latonine normale -->
                            <path d="M 60 140 Q 120 150, 180 120 Q 240 40, 300 50 Q 340 140, 340 140" 
                                  class="courbe-melatonine" id="courbe-normale"/>
                            
                            <!-- Zone jour/nuit -->
                            <rect x="60" y="20" width="140" height="140" fill="rgba(255, 255, 0, 0.1)" opacity="0.3"/>
                            <rect x="200" y="20" width="140" height="140" fill="rgba(0, 0, 100, 0.1)" opacity="0.3"/>
                            
                            <text x="130" y="35" text-anchor="middle" font-size="14" fill="#FF6B00">‚òÄÔ∏è JOUR</text>
                            <text x="270" y="35" text-anchor="middle" font-size="14" fill="#4A90E2">üåô NUIT</text>
                        </svg>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.8); border-radius: 10px;">
                        <strong>üìä Graphique :</strong> Production de m√©latonine sur 24h chez un individu sain
                    </div>
                </div>
            </div>

            <!-- QUESTION 2 -->
            <div class="question-block" id="question-2">
                <div class="question-title">
                    <strong>üî¨ EXP√âRIENCE 2 - COMP√âTENCE C3 (Expliquer un ph√©nom√®ne physiologique)</strong><br>
                    En analysant la courbe, expliquez √† quel moment la production de m√©latonine est maximale et pourquoi :
                </div>
                <div class="choix-container">
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 2)">
                        A) Maximum √† 12h car c'est le milieu de la journ√©e
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionner(this, 2)">
                        B) Maximum entre 2h et 4h du matin car l'obscurit√© stimule sa production
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 2)">
                        C) Maximum √† 18h pour pr√©parer le corps au sommeil
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 2)">
                        D) La production est constante sur 24h
                    </div>
                </div>
                <button class="btn-valider" onclick="valider(2)" disabled>Valider mon analyse</button>
            </div>

            <div class="feedback-overlay" id="feedback-2">
                <div class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ LA BONNE EXPLICATION √âTAIT :</strong><br>
                        <span style="color: #28a745; font-weight: bold;">B) Maximum entre 2h et 4h du matin car l'obscurit√© stimule sa production</span>
                    </div>
                    <div class="explication-pedagogique">
                        <strong>üí° M√âCANISME PHYSIOLOGIQUE :</strong><br>
                        ‚Ä¢ <span class="highlight">Obscurit√© d√©tect√©e</span> ‚Üí cellules photor√©ceptrices r√©tiniennes<br>
                        ‚Ä¢ <span class="highlight">Signal envoy√©</span> ‚Üí horloge biologique dans le cerveau<br>
                        ‚Ä¢ <span class="highlight">Production d√©clench√©e</span> ‚Üí glande pin√©ale s√©cr√®te la m√©latonine<br>
                        ‚Ä¢ <span class="highlight">Pic nocturne</span> ‚Üí entre 2h et 4h du matin (obscurit√© maximale)<br><br>
                        <strong>‚è∞ Chronologie :</strong><br>
                        - 21h : d√©but de production<br>
                        - 2-4h : pic maximum<br>
                        - 6h : arr√™t de production (lumi√®re du jour)<br><br>
                        <strong>üß† √Ä retenir :</strong> M√©latonine = "hormone de l'obscurit√©" !
                    </div>
                </div>
            </div>

            <!-- EXP√âRIENCE 3 : CYCLES DU SOMMEIL -->
            <div class="experience-block">
                <h3>üî¨ EXP√âRIENCE 3 : Composition d'un Cycle de Sommeil</h3>
                <p>Manipulez les phases du sommeil pour reconstituer un cycle complet de 90 minutes. Cliquez sur chaque phase pour d√©couvrir ses caract√©ristiques.</p>
                
                <div class="instructions-interaction">
                    <h5>üì± COMMENT MANIPULER :</h5>
                    <p><strong>1.</strong> Cliquez sur une phase de sommeil pour la s√©lectionner (elle s'illumine)<br>
                    <strong>2.</strong> Cliquez sur la zone de d√©p√¥t correspondante<br>
                    <strong>3.</strong> La phase se place automatiquement dans l'ordre correct !</p>
                </div>
                
                <div class="manipulation-zone">
                    <h4>üì¶ Phases disponibles :</h4>
                    <div class="element-manipulable" onclick="selectionnerElement(this, 'lent-leger')" data-phase="lent-leger">
                        Sommeil Lent L√©ger (20-25%)
                    </div>
                    <div class="element-manipulable" onclick="selectionnerElement(this, 'lent-profond')" data-phase="lent-profond">
                        Sommeil Lent Profond (35-40%)
                    </div>
                    <div class="element-manipulable" onclick="selectionnerElement(this, 'paradoxal')" data-phase="paradoxal">
                        Sommeil Paradoxal (20-25%)
                    </div>
                </div>
                
                <div class="cycle-sommeil" style="margin-top: 30px;">
                    <div class="zone-depot lent-leger" data-accept="lent-leger" onclick="placerElement(this)">
                        <span>Phase 1<br>Endormissement</span>
                    </div>
                    <div class="zone-depot lent-profond" data-accept="lent-profond" onclick="placerElement(this)">
                        <span>Phase 2<br>R√©cup√©ration physique</span>
                    </div>
                    <div class="zone-depot paradoxal" data-accept="paradoxal" onclick="placerElement(this)">
                        <span>Phase 3<br>R√©cup√©ration mentale</span>
                    </div>
                </div>
                
                <div id="phase-info" style="text-align: center; margin-top: 20px; min-height: 60px; background: rgba(255,255,255,0.9); border-radius: 10px; padding: 15px;">
                    <em>Cliquez sur une phase pour d√©couvrir ses caract√©ristiques...</em>
                </div>
            </div>

            <!-- QUESTION 3 -->
            <div class="question-block" id="question-3">
                <div class="question-title">
                    <strong>üî¨ EXP√âRIENCE 3 - COMP√âTENCE C3 (Expliquer un ph√©nom√®ne physiologique)</strong><br>
                    Apr√®s avoir manipul√© les phases, expliquez pourquoi le sommeil paradoxal est essentiel pour un √©tudiant :
                </div>
                <div class="choix-container">
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 3)">
                        A) Il permet de r√©parer les muscles fatigu√©s par le sport
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionner(this, 3)">
                        B) Il consolide la m√©moire et permet l'√©vacuation du stress mental
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 3)">
                        C) Il s√©cr√®te les hormones de croissance physique
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 3)">
                        D) Il n'est pas important, seul le sommeil profond compte
                    </div>
                </div>
                <button class="btn-valider" onclick="valider(3)" disabled>Valider mon explication</button>
            </div>

            <div class="feedback-overlay" id="feedback-3">
                <div class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ LA BONNE EXPLICATION √âTAIT :</strong><br>
                        <span style="color: #28a745; font-weight: bold;">B) Il consolide la m√©moire et permet l'√©vacuation du stress mental</span>
                    </div>
                    <div class="explication-pedagogique">
                        <strong>üí° R√îLES SP√âCIFIQUES DU SOMMEIL PARADOXAL :</strong><br>
                        ‚Ä¢ <span class="highlight">Consolidation m√©moire</span> : transfert des informations de la m√©moire √† court terme vers la m√©moire √† long terme<br>
                        ‚Ä¢ <span class="highlight">√âvacuation du stress</span> : r√©gulation √©motionnelle, "nettoyage" psychologique<br>
                        ‚Ä¢ <span class="highlight">Activit√© c√©r√©brale intense</span> : cerveau aussi actif qu'√† l'√©veil<br>
                        ‚Ä¢ <span class="highlight">Muscles rel√¢ch√©s</span> : tonus musculaire nul (paralysie temporaire)<br><br>
                        <strong>üéì Pour un √©tudiant :</strong> D√©ficit en sommeil paradoxal = difficult√©s d'apprentissage + stress accumul√© + baisse de performances<br><br>
                        <strong>‚ö†Ô∏è Diff√©rence :</strong> Sommeil lent profond = r√©cup√©ration PHYSIQUE / Sommeil paradoxal = r√©cup√©ration MENTALE
                    </div>
                </div>
            </div>

            <!-- EXP√âRIENCE 4 : HYGI√àNE DU SOMMEIL -->
            <div class="experience-block">
                <h3>üî¨ EXP√âRIENCE 4 : Solutions d'Hygi√®ne du Sommeil</h3>
                <p><strong>Cas d'√©tude :</strong> L√©a, 19 ans, √©tudiante en BTS, a des difficult√©s d'endormissement. Elle regarde des s√©ries jusqu'√† minuit, boit du caf√© apr√®s 16h et dort dans une chambre √† 22¬∞C avec des bruits de circulation.</p>
            </div>

            <!-- QUESTION 4 -->
            <div class="question-block" id="question-4">
                <div class="question-title">
                    <strong>üî¨ EXP√âRIENCE 4 - COMP√âTENCE C4 (Proposer une solution)</strong><br>
                    Proposez les meilleures solutions d'hygi√®ne du sommeil pour L√©a (s√©lection multiple autoris√©e) :
                </div>
                <div class="choix-container" style="position: relative;">
                    <div style="background: rgba(175, 56, 182, 0.1); padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9em; color: var(--secondary-pse); font-weight: bold;">
                        üìå S√©lection multiple autoris√©e
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionnerMultiple(this, 4)">
                        A) Arr√™ter les √©crans 1h avant le coucher pour √©viter la lumi√®re bleue
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionnerMultiple(this, 4)">
                        B) Baisser la temp√©rature de la chambre √† 17¬∞C
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionnerMultiple(this, 4)">
                        C) Prendre un somnif√®re tous les soirs
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionnerMultiple(this, 4)">
                        D) Ne plus boire de caf√© apr√®s 15h (√©limination 6h)
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionnerMultiple(this, 4)">
                        E) Utiliser des bouchons d'oreilles pour r√©duire les bruits
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionnerMultiple(this, 4)">
                        F) Faire du sport intense juste avant de se coucher
                    </div>
                </div>
                <button class="btn-valider" onclick="valider(4)" disabled>Valider mes solutions</button>
            </div>

            <div class="feedback-overlay" id="feedback-4">
                <div class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ LES BONNES SOLUTIONS √âTAIENT :</strong><br>
                        <span style="color: #28a745; font-weight: bold;">A) Arr√™ter √©crans 1h avant<br>B) Temp√©rature 17¬∞C<br>D) Pas de caf√© apr√®s 15h<br>E) Bouchons d'oreilles</span>
                    </div>
                    <div class="explication-pedagogique">
                        <strong>üí° JUSTIFICATIONS SCIENTIFIQUES :</strong><br>
                        ‚Ä¢ <span class="highlight">√âcrans 1h avant</span> : temps n√©cessaire pour que la production de m√©latonine reprenne<br>
                        ‚Ä¢ <span class="highlight">Temp√©rature 17¬∞C</span> : favorise la baisse de temp√©rature corporelle n√©cessaire au sommeil<br>
                        ‚Ä¢ <span class="highlight">Caf√© avant 15h</span> : dur√©e d'√©limination de la caf√©ine = 6h<br>
                        ‚Ä¢ <span class="highlight">Bouchons d'oreilles</span> : maintiennent les phases de sommeil profond<br><br>
                        <strong>‚ùå Solutions √† √©viter :</strong><br>
                        ‚Ä¢ <strong>Somnif√®res r√©guliers</strong> : cr√©ent d√©pendance et alt√®rent la qualit√© du sommeil naturel<br>
                        ‚Ä¢ <strong>Sport intense le soir</strong> : √©l√®ve temp√©rature corporelle et taux d'adr√©naline<br><br>
                        <strong>üéØ Principe :</strong> Favoriser les conditions naturelles du sommeil !
                    </div>
                </div>
            </div>

            <!-- QUESTION FINALE SYNTH√àSE -->
            <div class="question-block" id="question-5">
                <div class="question-title">
                    <strong>üî¨ SYNTH√àSE LABORATOIRE - COMP√âTENCE C1 (Traiter une information)</strong><br>
                    Apr√®s vos exp√©riences, identifiez la s√©quence CORRECTE de d√©synchronisation des rythmes biologiques :
                </div>
                <div class="choix-container">
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 5)">
                        A) Perturbation synchroniseurs ‚Üí Adaptation imm√©diate ‚Üí Retour √† la normale
                    </div>
                    <div class="choix-option" data-correct="true" onclick="selectionner(this, 5)">
                        B) Perturbation synchroniseurs ‚Üí Horloge biologique d√©r√©gl√©e ‚Üí Troubles divers ‚Üí Adaptation progressive
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 5)">
                        C) Troubles du sommeil ‚Üí Perturbation des synchroniseurs ‚Üí Horloge d√©r√©gl√©e
                    </div>
                    <div class="choix-option" data-correct="false" onclick="selectionner(this, 5)">
                        D) Les rythmes biologiques ne peuvent jamais se d√©synchroniser
                    </div>
                </div>
                <button class="btn-valider" onclick="valider(5)" disabled>Valider ma synth√®se</button>
            </div>

            <div class="feedback-overlay" id="feedback-5">
                <div class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ LA BONNE S√âQUENCE √âTAIT :</strong><br>
                        <span style="color: #28a745; font-weight: bold;">B) Perturbation synchroniseurs ‚Üí Horloge biologique d√©r√©gl√©e ‚Üí Troubles divers ‚Üí Adaptation progressive</span>
                    </div>
                    <div class="explication-pedagogique">
                        <strong>üí° M√âCANISME COMPLET DE D√âSYNCHRONISATION :</strong><br>
                        <strong>1Ô∏è‚É£ Perturbation des synchroniseurs</strong><br>
                        ‚Ä¢ Exemples : travail de nuit, d√©calage horaire, lumi√®re bleue tardive<br><br>
                        <strong>2Ô∏è‚É£ Horloge biologique d√©r√©gl√©e</strong><br>
                        ‚Ä¢ L'horloge interne ne sait plus "quelle heure il est"<br>
                        ‚Ä¢ Production d√©sordonn√©e de m√©latonine<br><br>
                        <strong>3Ô∏è‚É£ Troubles multiples</strong><br>
                        ‚Ä¢ Sommeil : difficult√©s d'endormissement, r√©veils fr√©quents<br>
                        ‚Ä¢ Physiologiques : troubles digestifs, fatigue<br>
                        ‚Ä¢ Psychologiques : irritabilit√©, difficult√©s de concentration<br><br>
                        <strong>4Ô∏è‚É£ Adaptation progressive</strong><br>
                        ‚Ä¢ Peut prendre plusieurs jours √† plusieurs semaines<br>
                        ‚Ä¢ D√©pend de l'√¢ge et de l'ampleur du d√©calage<br><br>
                        <strong>‚è±Ô∏è Temps d'adaptation :</strong> D√©calage horaire = 1 jour par heure de d√©calage !
                    </div>
                </div>
            </div>

            <!-- SCORE ET AUTO-√âVALUATION -->
            <div class="score-section" id="score-final" style="display: none;">
                <h2>üß¨ R√©sultats de votre Laboratoire Virtuel</h2>
                <div id="score-display"></div>
                <div id="competences-evaluation"></div>
                <p><strong>Excellente manipulation ! Vous avez explor√© les m√©canismes de l'horloge biologique.</strong><br>
                Vous comprenez maintenant les ph√©nom√®nes physiologiques du sommeil et leurs applications pratiques en hygi√®ne de vie.</p>
            </div>
        </main>

        <!-- RGPD FOOTER -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <script>
        const reponses = {};
        const reponsesMultiples = {};
        let questionsValidees = 0;
        const totalQuestions = 5;
        let elementSelectionne = null;

        const competencesScore = {
            'C1': { total: 0, reussies: 0 },
            'C3': { total: 0, reussies: 0 },
            'C4': { total: 0, reussies: 0 }
        };

        // Associer les questions aux comp√©tences
        const questionCompetences = {
            1: 'C1', 2: 'C3', 3: 'C3', 4: 'C4', 5: 'C1'
        };

        const questionsMultiples = [4]; // Question 4 √† s√©lection multiple

        // Donn√©es des synchroniseurs
        const synchroniseursInfo = {
            lumiere: {
                titre: "‚òÄÔ∏è Lumi√®re - Synchroniseur PRINCIPAL",
                description: "La lumi√®re r√©gule directement l'horloge biologique via les cellules photor√©ceptrices de la r√©tine. Elle contr√¥le la production de m√©latonine : lumi√®re = arr√™t de production, obscurit√© = d√©clenchement de production.",
                impact: "Impact majeur : 80% de l'influence sur l'horloge biologique"
            },
            repas: {
                titre: "üçΩÔ∏è Horaires des repas - Synchroniseur secondaire",
                description: "Les horaires r√©guliers de repas aident l'horloge biologique √† maintenir ses rythmes. La digestion suit aussi un rythme circadien naturel.",
                impact: "Impact mod√©r√© : aide √† la stabilisation des rythmes"
            },
            travail: {
                titre: "üíº Rythmes professionnels - Synchroniseur social",
                description: "Les horaires de travail structurent nos journ√©es et influencent indirectement l'horloge biologique. Le travail de nuit perturbe particuli√®rement cette synchronisation.",
                impact: "Impact variable selon la r√©gularit√© et les horaires"
            },
            loisirs: {
                titre: "üé≠ Activit√©s sociales - Synchroniseur comportemental",
                description: "Les activit√©s sociales et loisirs contribuent √† maintenir des rythmes r√©guliers. L'isolement social peut perturber les rythmes biologiques.",
                impact: "Impact indirect mais important pour l'√©quilibre g√©n√©ral"
            },
            sport: {
                titre: "üèÉ Exercice physique - Synchroniseur m√©tabolique",
                description: "L'activit√© physique r√©guli√®re renforce la synchronisation des rythmes. Elle am√©liore la qualit√© du sommeil et aide √† maintenir l'horloge biologique.",
                impact: "Impact positif sur la qualit√© du sommeil et la r√©gularit√© des rythmes"
            }
        };

        // Donn√©es des phases de sommeil
        const phasesInfo = {
            'lent-leger': {
                titre: "Sommeil Lent L√©ger",
                description: "Phase de transition entre l'√©veil et le sommeil profond. Repr√©sente 45-55% du sommeil total. On peut se r√©veiller facilement. Activit√© c√©r√©brale et musculaire ralentie.",
                duree: "15-20 minutes par cycle"
            },
            'lent-profond': {
                titre: "Sommeil Lent Profond",
                description: "Phase de r√©cup√©ration physique maximale. S√©cr√©tion d'hormone de croissance, r√©paration tissulaire, consolidation du syst√®me immunitaire. Tr√®s difficile de r√©veiller.",
                duree: "20-40 minutes par cycle (plus long en d√©but de nuit)"
            },
            'paradoxal': {
                titre: "Sommeil Paradoxal",
                description: "Phase de r√©cup√©ration mentale et de m√©morisation. Activit√© c√©r√©brale intense (comme √† l'√©veil), mouvements oculaires rapides, r√™ves nombreux, muscles compl√®tement rel√¢ch√©s.",
                duree: "10-20 minutes par cycle (plus long en fin de nuit)"
            }
        };

        function activerSynchroniseur(type) {
            // D√©sactiver tous les synchroniseurs
            document.querySelectorAll('.synchroniseur').forEach(s => s.classList.remove('selected'));
            
            // Activer le synchroniseur cliqu√©
            document.querySelector(`.sync-${type}`).classList.add('selected');
            
            // Afficher les informations
            const info = synchroniseursInfo[type];
            document.getElementById('info-synchroniseur').innerHTML = `
                <h4>${info.titre}</h4>
                <p>${info.description}</p>
                <p style="color: var(--primary-pse); font-weight: bold; margin-top: 10px;">${info.impact}</p>
            `;
        }

        function selectionnerElement(element, phase) {
            // D√©s√©lectionner l'√©l√©ment pr√©c√©dent
            if (elementSelectionne) {
                elementSelectionne.classList.remove('selected');
            }
            
            // S√©lectionner le nouvel √©l√©ment
            elementSelectionne = element;
            element.classList.add('selected');
            
            // Afficher les informations de la phase
            const info = phasesInfo[phase];
            document.getElementById('phase-info').innerHTML = `
                <h4>${info.titre}</h4>
                <p>${info.description}</p>
                <p style="color: var(--primary-pse); font-weight: bold; margin-top: 10px;">Dur√©e: ${info.duree}</p>
            `;
        }

        function placerElement(zoneDepot) {
            if (!elementSelectionne) return;
            
            const phaseAcceptee = zoneDepot.getAttribute('data-accept');
            const phaseElement = elementSelectionne.getAttribute('data-phase');
            
            if (phaseAcceptee === phaseElement) {
                // Placement r√©ussi
                elementSelectionne.classList.add('used');
                elementSelectionne.classList.remove('selected');
                zoneDepot.classList.add('active');
                zoneDepot.innerHTML = `<strong>‚úÖ ${elementSelectionne.textContent}</strong>`;
                elementSelectionne.style.pointerEvents = 'none';
                elementSelectionne = null;
                
                // V√©rifier si toutes les zones sont remplies
                const zonesRemplies = document.querySelectorAll('.zone-depot.active').length;
                if (zonesRemplies === 3) {
                    document.getElementById('phase-info').innerHTML = `
                        <h4 style="color: var(--success-pse);">üéâ Cycle complet reconstitu√© !</h4>
                        <p>Bravo ! Vous avez correctement assembl√© un cycle de sommeil de 90 minutes. 
                        Une nuit compl√®te n√©cessite 4 √† 5 cycles cons√©cutifs pour assurer une r√©cup√©ration optimale.</p>
                    `;
                }
            } else {
                // Mauvais placement - animation d'erreur
                zoneDepot.style.background = 'rgba(235, 87, 87, 0.3)';
                setTimeout(() => {
                    zoneDepot.style.background = '';
                }, 500);
            }
        }

        function selectionner(element, questionNum) {
            // D√©s√©lectionner les autres options
            const options = element.parentElement.querySelectorAll('.choix-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // S√©lectionner l'option cliqu√©e
            element.classList.add('selected');
            reponses[questionNum] = element.getAttribute('data-correct') === 'true';
            
            // Activer le bouton de validation
            const btnValider = document.querySelector(`#question-${questionNum} .btn-valider`);
            btnValider.disabled = false;
        }

        function selectionnerMultiple(element, questionNum) {
            // Toggle de la s√©lection
            element.classList.toggle('selected');
            
            // Stocker les s√©lections multiples
            if (!reponsesMultiples[questionNum]) {
                reponsesMultiples[questionNum] = [];
            }
            
            const isCorrect = element.getAttribute('data-correct') === 'true';
            const index = Array.from(element.parentElement.children).indexOf(element) - 1; // -1 pour le div info
            
            if (element.classList.contains('selected')) {
                reponsesMultiples[questionNum].push({correct: isCorrect, index: index});
            } else {
                reponsesMultiples[questionNum] = reponsesMultiples[questionNum].filter(r => r.index !== index);
            }
            
            // Activer le bouton si au moins une s√©lection
            const btnValider = document.querySelector(`#question-${questionNum} .btn-valider`);
            btnValider.disabled = reponsesMultiples[questionNum].length === 0;
        }

        function valider(questionNum) {
            const questionBlock = document.getElementById(`question-${questionNum}`);
            const feedbackOverlay = document.getElementById(`feedback-${questionNum}`);
            const options = questionBlock.querySelectorAll('.choix-option');
            
            // Marquer toutes les r√©ponses visuellement
            options.forEach(opt => {
                if (opt.getAttribute('data-correct') === 'true') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
                opt.style.pointerEvents = 'none';
            });

            // Calculer le score pour les questions multiples
            let isCorrect = false;
            if (questionsMultiples.includes(questionNum)) {
                // Pour les questions multiples, v√©rifier si toutes les bonnes r√©ponses sont s√©lectionn√©es
                const selections = reponsesMultiples[questionNum] || [];
                const correctSelections = selections.filter(s => s.correct).length;
                const incorrectSelections = selections.filter(s => !s.correct).length;
                
                // Compter le nombre de bonnes r√©ponses attendues (excluant le div info)
                const correctOptions = Array.from(options).filter(opt => opt.getAttribute('data-correct') === 'true');
                const totalCorrectOptions = correctOptions.length;
                
                isCorrect = (correctSelections === totalCorrectOptions && incorrectSelections === 0);
            } else {
                isCorrect = reponses[questionNum];
            }

            // Mettre √† jour le score des comp√©tences
            const competence = questionCompetences[questionNum];
            competencesScore[competence].total++;
            if (isCorrect) {
                competencesScore[competence].reussies++;
            }

            // Afficher le feedback
            feedbackOverlay.classList.add('show');
            
            // D√©sactiver le bouton
            const btnValider = questionBlock.querySelector('.btn-valider');
            btnValider.disabled = true;
            btnValider.textContent = 'Exp√©rience termin√©e ‚úì';
            
            questionsValidees++;
            
            // Afficher le score final si toutes les questions sont termin√©es
            if (questionsValidees === totalQuestions) {
                setTimeout(afficherScoreFinal, 1000);
            }
        }

        function afficherScoreFinal() {
            const scoreSection = document.getElementById('score-final');
            const scoreDisplay = document.getElementById('score-display');
            const competencesEval = document.getElementById('competences-evaluation');
            
            // Calculer le score total
            let bonnesReponses = Object.values(competencesScore).reduce((sum, comp) => sum + comp.reussies, 0);
            const totalPossible = Object.values(competencesScore).reduce((sum, comp) => sum + comp.total, 0);
            const pourcentage = Math.round((bonnesReponses / totalPossible) * 100);
            
            scoreDisplay.innerHTML = `
                <h3>Score Laboratoire : ${bonnesReponses}/${totalPossible} (${pourcentage}%)</h3>
            `;
            
            let evalHtml = '<h4>üß¨ Ma√Ætrise des Comp√©tences Scientifiques :</h4>';
            for (const [comp, scores] of Object.entries(competencesScore)) {
                const pourcentComp = scores.total > 0 ? Math.round((scores.reussies / scores.total) * 100) : 0;
                let niveau = '';
                let badge = '';
                if (pourcentComp >= 80) { niveau = 'Expert en laboratoire'; badge = 'üî¨'; }
                else if (pourcentComp >= 60) { niveau = 'Bon manipulateur'; badge = '‚úÖ'; }
                else if (pourcentComp >= 40) { niveau = 'Apprenti chercheur'; badge = 'üìä'; }
                else { niveau = '√Ä consolider'; badge = 'üìö'; }
                
                evalHtml += `<p><strong>${comp}</strong> : ${scores.reussies}/${scores.total} - ${badge} ${niveau}</p>`;
            }
            
            competencesEval.innerHTML = evalHtml;
            scoreSection.style.display = 'block';
            scoreSection.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>