<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C.4 - Simulation Responsable S√©curit√© - Premi√®re Bac Pro</title>
    <style>
        /* Import OpenDyslexie pour accessibilit√© */
        @import url('https://fonts.googleapis.com/css2?family=OpenDyslexic:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap');

        /* Variables CSS */
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
            
            --competence-c1: #E74C3C;
            --competence-c2: #3498DB;
            --competence-c3: #2ECC71;
            --competence-c4: #F39C12;
            --competence-c5: #9B59B6;
            --competence-c6: #1ABC9C;
        }

        /* Reset et base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'OpenDyslexic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Responsive Mobile-First */
        .container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .container {
                padding: 20px;
                max-width: 95vw;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 900px;
                padding: 30px;
            }
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 8px solid var(--primary-pse);
        }

        .cadre-pedagogique h2 {
            color: var(--primary-pse);
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .module-info .objectif {
            background: rgba(46, 134, 171, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-pse);
        }

        .competences-travaillees h3 {
            color: var(--dark-pse);
            margin: 20px 0 15px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .competences-list {
            list-style: none;
            padding: 0;
        }

        .competences-list li {
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 5px solid;
            background: rgba(255,255,255,0.7);
            font-size: 0.95rem;
        }

        .competences-list li:nth-child(1) { border-left-color: var(--competence-c2); }
        .competences-list li:nth-child(2) { border-left-color: var(--competence-c3); }
        .competences-list li:nth-child(3) { border-left-color: var(--competence-c4); }
        .competences-list li:nth-child(4) { border-left-color: var(--competence-c6); }

        .niveau-cible {
            background: linear-gradient(45deg, var(--warning-pse), #FFD93D);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            font-weight: 600;
            margin-top: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Exercice principal */
        .exercice-principal {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .scenario-intro {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .scenario-intro h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .scenario-intro .urgence-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-weight: 600;
            border: 2px solid rgba(255,255,255,0.3);
        }

        /* Instructions utilisateur */
        .instructions-interaction {
            background: #E3F2FD;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .instructions-interaction h5 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .instructions-interaction p {
            color: #424242;
            font-size: 0.9rem;
            margin: 0;
        }

        /* Questions interactives */
        .question-container {
            background: #ffffff;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-left: 6px solid var(--competence-c2);
        }

        .question-title {
            color: var(--dark-pse);
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .question-context {
            background: #FFF9E6;
            border-left: 4px solid var(--warning-pse);
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 10px 10px 0;
            font-style: italic;
        }

        /* Boutons de choix - Clic-s√©lection */
        .choice-buttons {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .choice-btn {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 3px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
            color: var(--dark-pse);
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            border-color: var(--primary-pse);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 134, 171, 0.2);
        }

        .choice-btn.selected {
            border-color: var(--warning-pse);
            background: linear-gradient(145deg, #FFF3CD, #FFF8DC);
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(242, 153, 74, 0.3);
        }

        .choice-btn.correct {
            border-color: var(--success-pse);
            background: linear-gradient(145deg, #D4EDDA, #C3E6CB);
            color: #155724;
        }

        .choice-btn.incorrect {
            border-color: var(--danger-pse);
            background: linear-gradient(145deg, #F8D7DA, #F1C6C8);
            color: #721c24;
        }

        .choice-btn::before {
            content: '';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .choice-btn.selected::before {
            background: var(--warning-pse);
            border-color: var(--warning-pse);
        }

        .choice-btn.correct::before {
            content: '‚úì';
            background: var(--success-pse);
            border-color: var(--success-pse);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .choice-btn.incorrect::before {
            content: '‚úó';
            background: var(--danger-pse);
            border-color: var(--danger-pse);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        /* Feedback explicite avec fond opaque */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8); /* Opaque pour lisibilit√© mobile */
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .feedback-card {
            background: linear-gradient(145deg, #ffffff, #f8f9fa); /* Compl√®tement opaque */
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .feedback-header.correct {
            color: var(--success-pse);
        }

        .feedback-header.incorrect {
            color: var(--danger-pse);
        }

        .feedback-header h4 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .correction-explicite {
            background: #ffffff; /* Fond opaque */
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--success-pse);
        }

        .explication-competence {
            background: rgba(46, 134, 171, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .astuce-bac {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: 500;
        }

        /* Boutons d'action */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-pse), #4A90E2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--secondary-pse), #C44569);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        /* Progression */
        .progress-container {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }

        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, var(--success-pse), #27AE60);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        /* Score et comp√©tences */
        .score-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .score-item {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-top: 4px solid;
        }

        .score-item.c2 { border-color: var(--competence-c2); }
        .score-item.c3 { border-color: var(--competence-c3); }
        .score-item.c4 { border-color: var(--competence-c4); }
        .score-item.c6 { border-color: var(--competence-c6); }

        /* Sigles explicites */
        .sigle-explication {
            background: #E8F5E8;
            border: 2px solid var(--success-pse);
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .sigle-explication strong {
            color: var(--success-pse);
        }

        /* Timer d'urgence */
        .urgence-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* RGPD Footer √©pur√© */
        .rgpd-notice {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 10px;
            margin-top: 30px;
            font-size: 0.9rem;
        }

        /* Responsive ajustements */
        @media (max-width: 767px) {
            .choice-buttons {
                gap: 10px;
            }
            
            .choice-btn {
                padding: 15px;
                font-size: 0.95rem;
            }
            
            .feedback-card {
                margin: 10px;
                padding: 20px;
            }
            
            .urgence-timer {
                position: relative;
                width: 100%;
                text-align: center;
                margin: 10px 0;
            }
        }

        /* √âtats cach√©s */
        .hidden {
            display: none;
        }

        /* Animation d'entr√©e */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module C.4 : L'assistance et le secours en milieu professionnel</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Agir de mani√®re responsable face √† une situation d'urgence en milieu professionnel
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li><strong>C3</strong> - Expliquer une disposition r√©glementaire en lien avec une mesure de pr√©vention</li>
                    <li><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                    <li><strong>C6</strong> - Communiquer √† l'√©crit et √† l'oral avec une syntaxe claire et un vocabulaire adapt√©</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- Timer d'urgence -->
        <div class="urgence-timer" id="timer">
            ‚è∞ URGENCE EN COURS
        </div>

        <!-- Exercice principal -->
        <div class="exercice-principal">
            <!-- Scenario d'introduction -->
            <div class="scenario-intro">
                <h3>üö® VOUS √äTES RESPONSABLE S√âCURIT√â</h3>
                <p>Il est 10h30, vous √™tes en r√©union quand l'alarme incendie retentit dans votre entreprise de 150 salari√©s. 
                C'est VOTRE responsabilit√© d'organiser les secours et de prendre les bonnes d√©cisions.</p>
                <div class="urgence-badge">SITUATION D'URGENCE R√âELLE</div>
            </div>

            <!-- Instructions d'interaction -->
            <div class="instructions-interaction">
                <h5>üì± COMMENT MANIPULER :</h5>
                <p><strong>1.</strong> Lisez chaque situation d'urgence attentivement
                <strong>2.</strong> Cliquez sur votre d√©cision (elle se surligne en orange)
                <strong>3.</strong> Validez pour voir les cons√©quences de vos choix
                <strong>4.</strong> Apprenez des explications d√©taill√©es</p>
            </div>

            <!-- Question 1 -->
            <div class="question-container" id="question1">
                <h4 class="question-title">üî• PREMI√àRE D√âCISION : L'ALARME RETENTIT</h4>
                <div class="question-context">
                    <strong>Contexte :</strong> L'alarme incendie vient de se d√©clencher. Vous √™tes en r√©union avec 5 coll√®gues au 2√®me √©tage. 
                    Que faites-vous EN PREMIER en tant que responsable s√©curit√© ?
                </div>

                <div class="sigle-explication">
                    <strong>Rappel :</strong> En tant que responsable s√©curit√©, vous devez appliquer les proc√©dures internes de l'entreprise et coordonner l'√©vacuation.
                </div>

                <div class="choice-buttons">
                    <div class="choice-btn" data-choice="A" data-correct="false">
                        <strong>A)</strong> J'appelle imm√©diatement les pompiers (18) depuis la salle de r√©union
                    </div>
                    <div class="choice-btn" data-choice="B" data-correct="true">
                        <strong>B)</strong> Je fais √©vacuer imm√©diatement la salle de r√©union et je me dirige vers le point de rassemblement
                    </div>
                    <div class="choice-btn" data-choice="C" data-correct="false">
                        <strong>C)</strong> Je cherche d'abord la source de l'incendie pour √©valuer la gravit√©
                    </div>
                    <div class="choice-btn" data-choice="D" data-correct="false">
                        <strong>D)</strong> J'attends quelques minutes pour voir si c'est un exercice
                    </div>
                </div>

                <button class="btn btn-primary" onclick="validateQuestion(1)" id="validate1" style="display: none;">
                    VALIDER MA D√âCISION
                </button>
            </div>

            <!-- Question 2 (cach√©e initialement) -->
            <div class="question-container hidden" id="question2">
                <h4 class="question-title">üèÉ‚Äç‚ôÇÔ∏è DEUXI√àME D√âCISION : AU POINT DE RASSEMBLEMENT</h4>
                <div class="question-context">
                    <strong>Contexte :</strong> Vous √™tes arriv√© au point de rassemblement. Vous constatez que 2 personnes manquent : Marie du service comptabilit√© et Jean de l'atelier. 
                    Les autres salari√©s vous regardent et attendent vos instructions.
                </div>

                <div class="sigle-explication">
                    <strong>SAMU :</strong> Service d'Aide M√©dicale Urgente (num√©ro 15) - Urgences m√©dicales<br>
                    <strong>Pompiers :</strong> Num√©ro 18 - Incendies et secours d'urgence aux personnes
                </div>

                <div class="choice-buttons">
                    <div class="choice-btn" data-choice="A" data-correct="false">
                        <strong>A)</strong> Je retourne dans le b√¢timent pour chercher les 2 personnes manquantes
                    </div>
                    <div class="choice-btn" data-choice="B" data-correct="true">
                        <strong>B)</strong> J'appelle imm√©diatement les pompiers (18) et je signale les 2 personnes manquantes
                    </div>
                    <div class="choice-btn" data-choice="C" data-correct="false">
                        <strong>C)</strong> J'envoie 2 volontaires chercher Marie et Jean dans le b√¢timent
                    </div>
                    <div class="choice-btn" data-choice="D" data-correct="false">
                        <strong>D)</strong> J'attends encore 5 minutes avant d'alerter les secours
                    </div>
                </div>

                <button class="btn btn-primary" onclick="validateQuestion(2)" id="validate2" style="display: none;">
                    VALIDER MA D√âCISION
                </button>
            </div>

            <!-- Question 3 (cach√©e initialement) -->
            <div class="question-container hidden" id="question3">
                <h4 class="question-title">üìû TROISI√àME D√âCISION : MESSAGE D'ALERTE</h4>
                <div class="question-context">
                    <strong>Contexte :</strong> Vous √™tes au t√©l√©phone avec les pompiers. L'op√©rateur vous demande des informations pr√©cises pour envoyer les secours adapt√©s. 
                    Que dites-vous EN PREMIER ?
                </div>

                <div class="sigle-explication">
                    <strong>Message d'alerte efficace :</strong> Qui appelle - O√π est l'urgence - Quoi s'est pass√© - Combien de personnes - Quel est l'√©tat des victimes
                </div>

                <div class="choice-buttons">
                    <div class="choice-btn" data-choice="A" data-correct="false">
                        <strong>A)</strong> "Il y a le feu dans notre entreprise, venez vite !"
                    </div>
                    <div class="choice-btn" data-choice="B" data-correct="true">
                        <strong>B)</strong> "Je suis M. Dupont, responsable s√©curit√©. Entreprise M√©tal Plus, 15 rue des Acacias √† Nantes. Alarme incendie d√©clench√©e, 2 personnes manquantes sur 150 salari√©s."
                    </div>
                    <div class="choice-btn" data-choice="C" data-correct="false">
                        <strong>C)</strong> "Bonjour, on a un probl√®me dans l'entreprise, il faut que vous veniez"
                    </div>
                    <div class="choice-btn" data-choice="D" data-correct="false">
                        <strong>D)</strong> "Urgence ! 2 personnes sont en danger ! D√©p√™chez-vous !"
                    </div>
                </div>

                <button class="btn btn-primary" onclick="validateQuestion(3)" id="validate3" style="display: none;">
                    VALIDER MA D√âCISION
                </button>
            </div>

            <!-- Question 4 (cach√©e initialement) -->
            <div class="question-container hidden" id="question4">
                <h4 class="question-title">‚öñÔ∏è QUATRI√àME D√âCISION : OBLIGATION L√âGALE</h4>
                <div class="question-context">
                    <strong>Contexte :</strong> Un coll√®gue vous signale qu'il a vu Jean (une des personnes manquantes) s'effondrer pr√®s de l'entr√©e principale, mais il y a beaucoup de fum√©e. 
                    Que dit la loi sur votre obligation d'assistance ?
                </div>

                <div class="sigle-explication">
                    <strong>Code p√©nal article 223-6 :</strong> Obligation de porter assistance √† toute personne en danger, SANS risque pour soi ou autrui. Sinon : jusqu'√† 5 ans de prison et 75 000‚Ç¨ d'amende.
                </div>

                <div class="choice-buttons">
                    <div class="choice-btn" data-choice="A" data-correct="false">
                        <strong>A)</strong> Je dois absolument aller sauver Jean moi-m√™me, sinon je risque la prison
                    </div>
                    <div class="choice-btn" data-choice="B" data-correct="true">
                        <strong>B)</strong> Je dois porter assistance SANS risque pour moi : j'informe les pompiers de la position exacte de Jean
                    </div>
                    <div class="choice-btn" data-choice="C" data-correct="false">
                        <strong>C)</strong> Je ne suis pas oblig√© d'agir car je ne suis pas secouriste professionnel
                    </div>
                    <div class="choice-btn" data-choice="D" data-correct="false">
                        <strong>D)</strong> Seul le directeur de l'entreprise a cette obligation l√©gale
                    </div>
                </div>

                <button class="btn btn-primary" onclick="validateQuestion(4)" id="validate4" style="display: none;">
                    VALIDER FINAL
                </button>
            </div>

            <!-- Progression -->
            <div class="progress-container">
                <h4>Progression de la simulation</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                </div>
                <span id="progressText">Question 1 sur 4</span>
            </div>

            <!-- Score final (cach√© initialement) -->
            <div class="score-display hidden" id="finalScore">
                <div class="score-item c2">
                    <h5>C2 - Analyse</h5>
                    <div id="scoreC2">-</div>
                </div>
                <div class="score-item c3">
                    <h5>C3 - R√©glementation</h5>
                    <div id="scoreC3">-</div>
                </div>
                <div class="score-item c4">
                    <h5>C4 - Solutions</h5>
                    <div id="scoreC4">-</div>
                </div>
                <div class="score-item c6">
                    <h5>C6 - Communication</h5>
                    <div id="scoreC6">-</div>
                </div>
            </div>
        </div>

        <!-- RGPD Footer √©pur√© -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <!-- Overlay de feedback (cach√© par d√©faut) -->
    <div class="feedback-overlay hidden" id="feedbackOverlay">
        <div class="feedback-card" id="feedbackCard">
            <div class="feedback-header" id="feedbackHeader">
                <h4 id="feedbackTitle">R√©sultat</h4>
                <p id="feedbackSubtitle">Analyse de votre d√©cision</p>
            </div>
            
            <div class="correction-explicite" id="correctionSection">
                <h4>‚ùå CORRECTION</h4>
                <div id="correctAnswer">La bonne r√©ponse √©tait :</div>
                <div id="explanation">Explication d√©taill√©e</div>
            </div>

            <div class="explication-competence" id="competenceExplanation">
                <strong>Comp√©tence travaill√©e :</strong> <span id="competenceText"></span>
            </div>

            <div class="astuce-bac" id="astuceBac">
                <strong>üí° ASTUCE BAC :</strong> <span id="astuceText"></span>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="nextQuestion()">QUESTION SUIVANTE</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentQuestion = 1;
        let selectedChoices = {};
        let scores = { C2: 0, C3: 0, C4: 0, C6: 0 };
        
        // Donn√©es des questions
        const questionData = {
            1: {
                competence: 'C2',
                correctAnswer: 'B',
                explanations: {
                    'A': 'Incorrect. En urgence, la priorit√© est d\'√©vacuer d\'abord, puis d\'alerter depuis un lieu s√ªr.',
                    'B': 'Correct ! En tant que responsable, vous devez donner l\'exemple et √©vacuer imm√©diatement. L\'alerte se fait depuis le point de rassemblement.',
                    'C': 'Incorrect et DANGEREUX ! Ne jamais rechercher la source pendant une alarme - risque d\'intoxication ou de br√ªlures.',
                    'D': 'Incorrect. Toute alarme doit √™tre prise au s√©rieux. En cas de doute, on √©vacue TOUJOURS.'
                },
                correctExplanation: 'L\'√©vacuation imm√©diate est la priorit√© absolue. Le responsable s√©curit√© doit montrer l\'exemple.',
                competenceText: 'C2 - Vous devez analyser la situation d\'urgence et prioriser les actions : 1) √âvacuer 2) Alerter 3) Intervenir',
                astuce: '√Ä l\'√©preuve : Retenez l\'ordre EXACT des priorit√©s en urgence : Prot√©ger ‚Üí Alerter ‚Üí Secourir (PAS)'
            },
            2: {
                competence: 'C4',
                correctAnswer: 'B',
                explanations: {
                    'A': 'Incorrect et INTERDIT ! Un responsable ne doit jamais se mettre en danger - risque de faire une victime suppl√©mentaire.',
                    'B': 'Correct ! Alerter les professionnels est la solution appropri√©e. Ils ont l\'√©quipement pour intervenir en s√©curit√©.',
                    'C': 'Incorrect et INTERDIT ! Envoyer des non-professionnels dans un b√¢timent en feu est de la mise en danger d\'autrui.',
                    'D': 'Incorrect. En cas de personnes manquantes, l\'alerte doit √™tre imm√©diate.'
                },
                correctExplanation: 'Seuls les professionnels √©quip√©s peuvent intervenir dans un b√¢timent en feu.',
                competenceText: 'C4 - Proposer la solution adapt√©e : faire appel aux secours professionnels √©quip√©s et form√©s',
                astuce: '√Ä l\'√©preuve : JAMAIS de h√©ro√Øsme ! La bonne solution est toujours celle qui ne met personne en danger suppl√©mentaire.'
            },
            3: {
                competence: 'C6',
                correctAnswer: 'B',
                explanations: {
                    'A': 'Incorrect. Message trop vague, manque d\'informations cruciales pour les secours.',
                    'B': 'Correct ! Message complet : Qui - O√π - Quoi - Combien - √âtat. Toutes les infos n√©cessaires aux secours.',
                    'C': 'Incorrect. Message trop flou, les secours ne peuvent pas agir efficacement.',
                    'D': 'Incorrect. Trop √©motionnel, manque les informations pratiques essentielles.'
                },
                correctExplanation: 'Un message d\'alerte efficace contient : identit√©, lieu pr√©cis, nature du probl√®me, nombre de personnes, √©tat des victimes.',
                competenceText: 'C6 - Communiquer avec pr√©cision et efficacit√© dans l\'urgence avec un vocabulaire adapt√© aux professionnels',
                astuce: '√Ä l\'√©preuve : M√©morisez la structure QUI-O√ô-QUOI-COMBIEN-√âTAT pour tout message d\'alerte efficace.'
            },
            4: {
                competence: 'C3',
                correctAnswer: 'B',
                explanations: {
                    'A': 'Incorrect. L\'obligation d\'assistance ne doit JAMAIS mettre le sauveteur en danger.',
                    'B': 'Correct ! L\'article 223-6 impose l\'assistance SANS risque. Informer les secours professionnels EST une assistance l√©gale.',
                    'C': 'Incorrect. Tout citoyen a l\'obligation l√©gale de porter assistance, pas seulement les professionnels.',
                    'D': 'Incorrect. L\'obligation d\'assistance concerne TOUS les citoyens, pas seulement les dirigeants.'
                },
                correctExplanation: 'L\'article 223-6 du Code p√©nal impose l\'assistance sans risque pour soi ou autrui.',
                competenceText: 'C3 - Expliquer la disposition r√©glementaire : obligation d\'assistance avec la condition "sans risque"',
                astuce: '√Ä l\'√©preuve : L\'obligation d\'assistance a TOUJOURS cette limite : "sans risque pour soi ou autrui".'
            }
        };

        // Fonction de s√©lection de choix
        function selectChoice(element, questionNum) {
            // D√©s√©lectionner les autres choix de la m√™me question
            const questionContainer = document.getElementById(`question${questionNum}`);
            const allChoices = questionContainer.querySelectorAll('.choice-btn');
            allChoices.forEach(choice => choice.classList.remove('selected'));
            
            // S√©lectionner le choix cliqu√©
            element.classList.add('selected');
            
            // Stocker le choix s√©lectionn√©
            selectedChoices[questionNum] = element.getAttribute('data-choice');
            
            // Afficher le bouton de validation
            document.getElementById(`validate${questionNum}`).style.display = 'inline-block';
        }

        // Fonction de validation de question
        function validateQuestion(questionNum) {
            const selectedChoice = selectedChoices[questionNum];
            if (!selectedChoice) return;

            const questionContainer = document.getElementById(`question${questionNum}`);
            const allChoices = questionContainer.querySelectorAll('.choice-btn');
            const data = questionData[questionNum];

            // Marquer visuellement toutes les r√©ponses
            allChoices.forEach(choice => {
                const choiceLetter = choice.getAttribute('data-choice');
                const isCorrect = choiceLetter === data.correctAnswer;
                const isSelected = choiceLetter === selectedChoice;

                if (isCorrect) {
                    choice.classList.add('correct');
                } else if (isSelected) {
                    choice.classList.add('incorrect');
                }
            });

            // Calculer le score pour la comp√©tence
            if (selectedChoice === data.correctAnswer) {
                scores[data.competence] += 25; // 100% divis√© par 4 questions
            }

            // Afficher le feedback
            showFeedback(questionNum, selectedChoice === data.correctAnswer, data);
            
            // Cacher le bouton de validation
            document.getElementById(`validate${questionNum}`).style.display = 'none';
        }

        // Fonction d'affichage du feedback
        function showFeedback(questionNum, isCorrect, data) {
            const overlay = document.getElementById('feedbackOverlay');
            const header = document.getElementById('feedbackHeader');
            const title = document.getElementById('feedbackTitle');
            const subtitle = document.getElementById('feedbackSubtitle');
            const correctionSection = document.getElementById('correctionSection');
            const correctAnswer = document.getElementById('correctAnswer');
            const explanation = document.getElementById('explanation');
            const competenceExplanation = document.getElementById('competenceExplanation');
            const competenceText = document.getElementById('competenceText');
            const astuceBac = document.getElementById('astuceBac');
            const astuceText = document.getElementById('astuceText');

            // Configuration du header
            if (isCorrect) {
                header.className = 'feedback-header correct';
                title.textContent = '‚úÖ EXCELLENTE D√âCISION !';
                subtitle.textContent = 'Vous avez agi comme un professionnel de la s√©curit√©';
                correctionSection.style.display = 'none';
            } else {
                header.className = 'feedback-header incorrect';
                title.textContent = '‚ùå D√âCISION √Ä AM√âLIORER';
                subtitle.textContent = 'Analysons ensemble la meilleure solution';
                correctionSection.style.display = 'block';
                
                // Afficher la correction explicite
                correctAnswer.innerHTML = `<strong>‚úÖ LA BONNE R√âPONSE √âTAIT :</strong><br>
                    <span style="color: #28a745; font-weight: bold;">Option ${data.correctAnswer}</span>`;
                explanation.innerHTML = `<strong>üí° EXPLICATION :</strong> ${data.correctExplanation}`;
            }

            // Explication de la comp√©tence
            competenceText.textContent = data.competenceText;

            // Astuce BAC
            astuceText.textContent = data.astuce;

            // Afficher l'overlay avec animation
            overlay.classList.remove('hidden');
            overlay.querySelector('.feedback-card').classList.add('slide-in');
        }

        // Fonction pour passer √† la question suivante
        function nextQuestion() {
            const overlay = document.getElementById('feedbackOverlay');
            overlay.classList.add('hidden');

            if (currentQuestion < 4) {
                // Cacher la question actuelle
                document.getElementById(`question${currentQuestion}`).style.display = 'none';
                
                // Afficher la question suivante
                currentQuestion++;
                const nextQuestionElement = document.getElementById(`question${currentQuestion}`);
                nextQuestionElement.classList.remove('hidden');
                nextQuestionElement.classList.add('slide-in');
                
                // Mettre √† jour la progression
                updateProgress();
            } else {
                // Fin de l'exercice - afficher le score final
                showFinalScore();
            }
        }

        // Fonction de mise √† jour de la progression
        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const percentage = (currentQuestion - 1) / 4 * 100;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `Question ${currentQuestion} sur 4`;
        }

        // Fonction d'affichage du score final
        function showFinalScore() {
            // Cacher la derni√®re question
            document.getElementById(`question${currentQuestion}`).style.display = 'none';
            
            // Mettre √† jour la progression √† 100%
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            progressBar.style.width = '100%';
            progressText.innerHTML = '<strong>‚úÖ SIMULATION TERMIN√âE</strong>';
            
            // Afficher les scores
            const finalScore = document.getElementById('finalScore');
            finalScore.classList.remove('hidden');
            finalScore.classList.add('slide-in');
            
            document.getElementById('scoreC2').textContent = `${scores.C2}/25 pts`;
            document.getElementById('scoreC3').textContent = `${scores.C3}/25 pts`;
            document.getElementById('scoreC4').textContent = `${scores.C4}/25 pts`;
            document.getElementById('scoreC6').textContent = `${scores.C6}/25 pts`;

            // Message de f√©licitations
            const scenarioIntro = document.querySelector('.scenario-intro');
            const totalScore = scores.C2 + scores.C3 + scores.C4 + scores.C6;
            let message = '';
            
            if (totalScore >= 80) {
                message = 'üèÜ EXCELLENT ! Vous avez les r√©flexes d\'un vrai responsable s√©curit√© !';
            } else if (totalScore >= 60) {
                message = 'üëç BIEN ! Quelques points √† revoir mais vous ma√Ætrisez les bases.';
            } else {
                message = 'üìö √Ä AM√âLIORER ! R√©visez les proc√©dures de s√©curit√© et recommencez.';
            }
            
            scenarioIntro.innerHTML = `
                <h3>${message}</h3>
                <p>Score total : ${totalScore}/100 points</p>
                <div class="urgence-badge">SIMULATION TERMIN√âE</div>
            `;

            // Cacher le timer
            document.getElementById('timer').style.display = 'none';
        }

        // Event listeners pour les clics sur les choix
        document.addEventListener('DOMContentLoaded', function() {
            const allChoices = document.querySelectorAll('.choice-btn');
            allChoices.forEach(choice => {
                choice.addEventListener('click', function() {
                    const questionContainer = this.closest('.question-container');
                    const questionId = questionContainer.id;
                    const questionNum = questionId.replace('question', '');
                    selectChoice(this, questionNum);
                });
            });

            // Animation du timer
            let timerCount = 0;
            setInterval(() => {
                timerCount++;
                const timer = document.getElementById('timer');
                if (timer.style.display !== 'none') {
                    timer.textContent = `‚è∞ URGENCE - ${Math.floor(timerCount/60)}:${(timerCount%60).toString().padStart(2, '0')}`;
                }
            }, 1000);
        });
    </script>
</body>
</html>