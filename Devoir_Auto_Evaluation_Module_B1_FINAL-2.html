<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTO-√âVALUATION Module B.1 - Approche par Comp√©tences</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #4caf50 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-radius: 20px;
            margin-top: 20px;
            margin-bottom: 40px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(30, 60, 114, 0.3);
        }
        
        .header h1 {
            font-family: 'Merriweather', serif;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header-subtitle {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .module-info {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .objective {
            font-size: 1em;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .competences {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .comp-badge {
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 0.85em;
            font-weight: 600;
            color: white;
            transition: transform 0.3s ease;
        }
        
        .comp-badge.c1 { background: #16a085; }
        .comp-badge.c2 { background: #3498db; }
        .comp-badge.c3 { background: #f39c12; }
        .comp-badge.c4 { background: #e74c3c; }
        .comp-badge.c5 { background: #9b59b6; }
        
        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 2px solid #2196f3;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .instructions h3 {
            color: #1565c0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        /* Question Container */
        .question-container {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            margin: 20px 0;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .question-container.answered-correct {
            border-color: #4caf50;
            background: linear-gradient(135deg, #f1f8e9, #e8f5e8);
        }
        
        .question-container.answered-wrong {
            border-color: #f44336;
            background: linear-gradient(135deg, #ffebee, #fce4ec);
        }
        
        .question-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .question-number {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .competence-badge {
            background: #fff;
            border: 2px solid;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        .question-text {
            font-size: 1.1em;
            font-weight: 500;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .verb-action {
            font-weight: 700;
            color: #1e3c72;
        }
        
        /* Answer Options */
        .answer-options {
            margin: 20px 0;
        }
        
        .mcq-option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mcq-option:hover {
            border-color: #2196f3;
            background: #f3f8ff;
        }
        
        .mcq-option.selected {
            border-color: #2196f3;
            background: #e3f2fd;
        }
        
        .mcq-option.correct {
            border-color: #4caf50;
            background: #e8f5e8;
        }
        
        .mcq-option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .option-radio.selected::after {
            content: '';
            width: 10px;
            height: 10px;
            background: #2196f3;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .option-radio.correct {
            border-color: #4caf50;
        }
        
        .option-radio.correct::after {
            background: #4caf50;
        }
        
        .option-radio.incorrect {
            border-color: #f44336;
        }
        
        .option-radio.incorrect::after {
            background: #f44336;
        }
        
        /* Input Fields */
        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            min-height: 50px;
            transition: border-color 0.3s ease;
        }
        
        .answer-input:focus {
            border-color: #2196f3;
            outline: none;
        }
        
        .answer-input.correct {
            border-color: #4caf50;
            background: #f1f8e9;
        }
        
        .answer-input.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        
        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1em;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
        }
        
        .btn-next {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            font-size: 1.1em;
            padding: 15px 30px;
            margin-top: 20px;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Feedback */
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border: 2px solid #4caf50;
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 2px solid #f44336;
        }
        
        .feedback-title {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .feedback-explanation {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .answer-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .user-answer, .correct-answer {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid;
        }
        
        .user-answer {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .correct-answer {
            border-color: #4caf50;
            background: #e8f5e8;
        }
        
        /* Progress Bar */
        .progress-container {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }
        
        .score-display {
            font-size: 2em;
            font-weight: 700;
            color: #1e3c72;
            margin: 10px 0;
        }
        
        /* Final Results */
        .final-results {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border: 2px solid #4caf50;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
            display: none;
        }
        
        .final-score {
            font-size: 3em;
            font-weight: 800;
            color: #2e7d32;
            margin: 20px 0;
        }
        
        /* Competences Analysis */
        .competences-analysis {
            background: white;
            border: 2px solid #2196f3;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: left;
        }
        
        .competences-chart {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .competence-bar {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 15px;
        }
        
        .competence-name {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .competence-progress {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }
        
        .competence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }
        
        .competence-score {
            font-size: 0.9em;
            color: #666;
        }
        
        .dominant-competence {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border: 2px solid #ff9800;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .dominant-competence h4 {
            color: #f57c00;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .answer-comparison {
                grid-template-columns: 1fr;
            }
            
            .competences-chart {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üå± AUTO-√âVALUATION</h1>
            <div class="header-subtitle">Module B.1 - L'alimentation √©coresponsable</div>
            <div class="module-info">
                <div class="objective">
                    <strong>Objectif g√©n√©ral :</strong> √ätre capable d'adopter un comportement de consommation alimentaire responsable
                </div>
                <div class="competences">
                    <span class="comp-badge c1">C1 - Traiter une information</span>
                    <span class="comp-badge c2">C2 - Appliquer une d√©marche d'analyse</span>
                    <span class="comp-badge c3">C3 - Expliquer un ph√©nom√®ne</span>
                    <span class="comp-badge c4">C4 - Proposer une solution</span>
                    <span class="comp-badge c5">C5 - Argumenter un choix</span>
                </div>
            </div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions">
            <h3>üìã Instructions importantes</h3>
            <ul>
                <li><strong>25 questions</strong> avec approche par comp√©tences PSE</li>
                <li><strong>Vous contr√¥lez</strong> votre progression - cliquez "Suivant" apr√®s chaque correction</li>
                <li><strong>Corrections d√©taill√©es</strong> avec comparaison de vos r√©ponses</li>
                <li><strong>Analyse finale</strong> de vos comp√©tences dominantes</li>
                <li><strong>Objectif :</strong> Comprendre et progresser sur toutes les notions</li>
            </ul>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div>Question <span id="current-question">1</span> sur 25</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="score-display">Score : <span id="current-score">0</span>/25</div>
        </div>
        
        <!-- Questions Container -->
        <div id="questions-container">
            
            <!-- QUESTION 1 - C1 -->
            <div class="question-container" id="q1">
                <div class="question-header">
                    <div class="question-number">1</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Identifier</span> la d√©finition exacte de la consommation √©coresponsable.
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(1, 0, false)">
                        <div class="option-radio"></div>
                        <span>Consommer moins cher pour √©conomiser de l'argent</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(1, 1, true)">
                        <div class="option-radio"></div>
                        <span>Consommer des produits dont l'impact environnemental est r√©duit et qui garantissent aux producteurs des conditions de travail d√©centes</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(1, 2, false)">
                        <div class="option-radio"></div>
                        <span>Consommer uniquement des produits fran√ßais</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(1, 3, false)">
                        <div class="option-radio"></div>
                        <span>Consommer rapidement pour √©viter le gaspillage</span>
                    </div>
                </div>
                <div class="feedback" id="feedback1"></div>
                <button class="btn btn-next" id="next1" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 2 - C1 -->
            <div class="question-container" id="q2" style="display: none;">
                <div class="question-header">
                    <div class="question-number">2</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Relever</span> les DEUX crit√®res principaux du d√©veloppement durable.
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="toggleMultipleChoice(2, 0, true)">
                        <div class="option-radio"></div>
                        <span>Crit√®re environnemental</span>
                    </div>
                    <div class="mcq-option" onclick="toggleMultipleChoice(2, 1, false)">
                        <div class="option-radio"></div>
                        <span>Crit√®re technologique</span>
                    </div>
                    <div class="mcq-option" onclick="toggleMultipleChoice(2, 2, true)">
                        <div class="option-radio"></div>
                        <span>Crit√®re social</span>
                    </div>
                    <div class="mcq-option" onclick="toggleMultipleChoice(2, 3, false)">
                        <div class="option-radio"></div>
                        <span>Crit√®re marketing</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="validateMultipleChoice(2)" id="validate2">Valider</button>
                <div class="feedback" id="feedback2"></div>
                <button class="btn btn-next" id="next2" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 3 - C1 -->
            <div class="question-container" id="q3" style="display: none;">
                <div class="question-header">
                    <div class="question-number">3</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Compl√©ter</span> : "Une AMAP signifie..."
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(3, 0, true)">
                        <div class="option-radio"></div>
                        <span>Association pour le Maintien de l'Agriculture Paysanne</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(3, 1, false)">
                        <div class="option-radio"></div>
                        <span>Association pour le March√© de l'Agriculture Productive</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(3, 2, false)">
                        <div class="option-radio"></div>
                        <span>Association pour la Modernisation de l'Agriculture Publique</span>
                    </div>
                </div>
                <div class="feedback" id="feedback3"></div>
                <button class="btn btn-next" id="next3" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 4 - C1 -->
            <div class="question-container" id="q4" style="display: none;">
                <div class="question-header">
                    <div class="question-number">4</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Nommer</span> les TROIS crit√®res du commerce √©quitable.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input4" placeholder="√âcrivez les 3 crit√®res..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateTextAnswer(4)" id="validate4">Valider</button>
                <div class="feedback" id="feedback4"></div>
                <button class="btn btn-next" id="next4" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 5 - C1 -->
            <div class="question-container" id="q5" style="display: none;">
                <div class="question-header">
                    <div class="question-number">5</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Indiquer</span> le chiffre du gaspillage alimentaire par habitant en France par an.
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(5, 0, false)">
                        <div class="option-radio"></div>
                        <span>20 kg par an</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(5, 1, true)">
                        <div class="option-radio"></div>
                        <span>30 kg par an</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(5, 2, false)">
                        <div class="option-radio"></div>
                        <span>40 kg par an</span>
                    </div>
                </div>
                <div class="feedback" id="feedback5"></div>
                <button class="btn btn-next" id="next5" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 6 - C1 -->
            <div class="question-container" id="q6" style="display: none;">
                <div class="question-header">
                    <div class="question-number">6</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">D√©finir</span> la diff√©rence entre DLC et DDM.
                </div>
                <div class="answer-options">
                    <p><strong>DLC =</strong> Date Limite de <input type="text" id="dlc6" style="width:120px; padding:5px; margin:0 5px;"> (s√©curit√©)</p>
                    <p><strong>DDM =</strong> Date de Durabilit√© <input type="text" id="ddm6" style="width:120px; padding:5px; margin:0 5px;"> (qualit√©)</p>
                </div>
                <button class="btn btn-primary" onclick="validateDLCDDM(6)" id="validate6">Valider</button>
                <div class="feedback" id="feedback6"></div>
                <button class="btn btn-next" id="next6" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 7 - C1 -->
            <div class="question-container" id="q7" style="display: none;">
                <div class="question-header">
                    <div class="question-number">7</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Classer</span> ces √©tapes de la cha√Æne alimentaire par niveau de gaspillage (du plus √©lev√© au plus faible).
                </div>
                <div class="answer-options">
                    <p>1er (plus de gaspillage) : 
                        <select id="rank7a" style="padding:8px; margin:5px;">
                            <option value="">Choisir...</option>
                            <option value="consommation">Consommation (33%)</option>
                            <option value="production">Production (32%)</option>
                            <option value="transformation">Transformation (21%)</option>
                            <option value="distribution">Distribution (14%)</option>
                        </select>
                    </p>
                    <p>2e : 
                        <select id="rank7b" style="padding:8px; margin:5px;">
                            <option value="">Choisir...</option>
                            <option value="consommation">Consommation (33%)</option>
                            <option value="production">Production (32%)</option>
                            <option value="transformation">Transformation (21%)</option>
                            <option value="distribution">Distribution (14%)</option>
                        </select>
                    </p>
                    <p>3e : 
                        <select id="rank7c" style="padding:8px; margin:5px;">
                            <option value="">Choisir...</option>
                            <option value="consommation">Consommation (33%)</option>
                            <option value="production">Production (32%)</option>
                            <option value="transformation">Transformation (21%)</option>
                            <option value="distribution">Distribution (14%)</option>
                        </select>
                    </p>
                    <p>4e (moins de gaspillage) : 
                        <select id="rank7d" style="padding:8px; margin:5px;">
                            <option value="">Choisir...</option>
                            <option value="consommation">Consommation (33%)</option>
                            <option value="production">Production (32%)</option>
                            <option value="transformation">Transformation (21%)</option>
                            <option value="distribution">Distribution (14%)</option>
                        </select>
                    </p>
                </div>
                <button class="btn btn-primary" onclick="validateRanking(7)" id="validate7">Valider</button>
                <div class="feedback" id="feedback7"></div>
                <button class="btn btn-next" id="next7" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 8 - C1 -->
            <div class="question-container" id="q8" style="display: none;">
                <div class="question-header">
                    <div class="question-number">8</div>
                    <div class="competence-badge c1" style="border-color: #16a085; color: #16a085;">C1</div>
                </div>
                <div class="question-text">
                    [C1] <span class="verb-action">Lister</span> deux exemples de surconsommation alimentaire.
                </div>
                <div class="answer-options">
                    <input type="text" class="answer-input" id="input8a" placeholder="Exemple 1" style="margin-bottom: 10px;">
                    <input type="text" class="answer-input" id="input8b" placeholder="Exemple 2">
                </div>
                <button class="btn btn-primary" onclick="validateSurconsommation(8)" id="validate8">Valider</button>
                <div class="feedback" id="feedback8"></div>
                <button class="btn btn-next" id="next8" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 9 - C2 -->
            <div class="question-container" id="q9" style="display: none;">
                <div class="question-header">
                    <div class="question-number">9</div>
                    <div class="competence-badge c2" style="border-color: #3498db; color: #3498db;">C2</div>
                </div>
                <div class="question-text">
                    [C2] <span class="verb-action">Analyser</span> cette situation avec la m√©thode QQOQCP : "Jules jette 40 kg de nourriture par an car il ach√®te trop."
                </div>
                <div class="answer-options">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold; width: 80px;">QUI ?</td>
                            <td style="padding: 10px; border: 1px solid #ddd;"><input type="text" class="answer-input" id="qui9" placeholder="Qui ?"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">QUOI ?</td>
                            <td style="padding: 10px; border: 1px solid #ddd;"><input type="text" class="answer-input" id="quoi9" placeholder="Quel probl√®me ?"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">COMBIEN ?</td>
                            <td style="padding: 10px; border: 1px solid #ddd;"><input type="text" class="answer-input" id="combien9" placeholder="Quantit√© ?"></td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">POURQUOI ?</td>
                            <td style="padding: 10px; border: 1px solid #ddd;"><input type="text" class="answer-input" id="pourquoi9" placeholder="Cause ?"></td>
                        </tr>
                    </table>
                </div>
                <button class="btn btn-primary" onclick="validateQQOQCP(9)" id="validate9">Valider</button>
                <div class="feedback" id="feedback9"></div>
                <button class="btn btn-next" id="next9" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 10 - C2 -->
            <div class="question-container" id="q10" style="display: none;">
                <div class="question-header">
                    <div class="question-number">10</div>
                    <div class="competence-badge c2" style="border-color: #3498db; color: #3498db;">C2</div>
                </div>
                <div class="question-text">
                    [C2] <span class="verb-action">Prioriser</span> ces cons√©quences du gaspillage par gravit√© (1 = plus grave).
                </div>
                <div class="answer-options">
                    <p>
                        <select id="prio10a" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        Probl√®me √©thique (faim dans le monde)
                    </p>
                    <p>
                        <select id="prio10b" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        Gaspillage de ressources (eau, √©nergie)
                    </p>
                    <p>
                        <select id="prio10c" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        √âmissions de gaz √† effet de serre
                    </p>
                </div>
                <button class="btn btn-primary" onclick="validatePriorisation(10)" id="validate10">Valider</button>
                <div class="feedback" id="feedback10"></div>
                <button class="btn btn-next" id="next10" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTIONS 11-25 - Structure similaire mais plus courte pour les autres comp√©tences -->
            <!-- C2 Questions 11-13 -->
            
            <!-- QUESTION 11 - C2 -->
            <div class="question-container" id="q11" style="display: none;">
                <div class="question-header">
                    <div class="question-number">11</div>
                    <div class="competence-badge c2" style="border-color: #3498db; color: #3498db;">C2</div>
                </div>
                <div class="question-text">
                    [C2] <span class="verb-action">Diagnostiquer</span> le principal probl√®me dans cette situation : "Lucie ach√®te 3 kg de pommes, en mange 1 kg et jette le reste."
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(11, 0, false)">
                        <div class="option-radio"></div>
                        <span>Probl√®me de qualit√© des pommes</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(11, 1, true)">
                        <div class="option-radio"></div>
                        <span>Probl√®me de quantit√© inadapt√©e aux besoins</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(11, 2, false)">
                        <div class="option-radio"></div>
                        <span>Probl√®me de conservation</span>
                    </div>
                </div>
                <div class="feedback" id="feedback11"></div>
                <button class="btn btn-next" id="next11" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 12 - C2 -->
            <div class="question-container" id="q12" style="display: none;">
                <div class="question-header">
                    <div class="question-number">12</div>
                    <div class="competence-badge c2" style="border-color: #3498db; color: #3498db;">C2</div>
                </div>
                <div class="question-text">
                    [C2] <span class="verb-action">√âvaluer</span> l'objectif de la loi AGEC en compl√©tant : R√©duction de ___% du gaspillage d'ici ____.
                </div>
                <div class="answer-options">
                    <p>
                        <input type="text" id="agec12a" style="width:60px; padding:5px; margin:0 5px;" placeholder="%%">% d'ici 
                        <input type="text" id="agec12b" style="width:80px; padding:5px; margin:0 5px;" placeholder="ann√©e">
                    </p>
                </div>
                <button class="btn btn-primary" onclick="validateAGEC(12)" id="validate12">Valider</button>
                <div class="feedback" id="feedback12"></div>
                <button class="btn btn-next" id="next12" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 13 - C2 -->
            <div class="question-container" id="q13" style="display: none;">
                <div class="question-header">
                    <div class="question-number">13</div>
                    <div class="competence-badge c2" style="border-color: #3498db; color: #3498db;">C2</div>
                </div>
                <div class="question-text">
                    [C2] <span class="verb-action">Relier</span> chaque √©tape de gaspillage √† son pourcentage correct.
                </div>
                <div class="answer-options">
                    <p>Consommation ‚Üí <select id="link13a" style="padding:8px; margin:5px;">
                        <option value="">%</option>
                        <option value="33">33%</option>
                        <option value="32">32%</option>
                        <option value="21">21%</option>
                        <option value="14">14%</option>
                    </select></p>
                    <p>Production ‚Üí <select id="link13b" style="padding:8px; margin:5px;">
                        <option value="">%</option>
                        <option value="33">33%</option>
                        <option value="32">32%</option>
                        <option value="21">21%</option>
                        <option value="14">14%</option>
                    </select></p>
                    <p>Transformation ‚Üí <select id="link13c" style="padding:8px; margin:5px;">
                        <option value="">%</option>
                        <option value="33">33%</option>
                        <option value="32">32%</option>
                        <option value="21">21%</option>
                        <option value="14">14%</option>
                    </select></p>
                    <p>Distribution ‚Üí <select id="link13d" style="padding:8px; margin:5px;">
                        <option value="">%</option>
                        <option value="33">33%</option>
                        <option value="32">32%</option>
                        <option value="21">21%</option>
                        <option value="14">14%</option>
                    </select></p>
                </div>
                <button class="btn btn-primary" onclick="validateLinking(13)" id="validate13">Valider</button>
                <div class="feedback" id="feedback13"></div>
                <button class="btn btn-next" id="next13" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- C3 Questions 14-19 -->
            
            <!-- QUESTION 14 - C3 -->
            <div class="question-container" id="q14" style="display: none;">
                <div class="question-header">
                    <div class="question-number">14</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">Expliquer</span> pourquoi consommer des fruits hors saison n'est pas √©coresponsable.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input14" placeholder="Votre explication..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateExplication(14, 'hors-saison')" id="validate14">Valider</button>
                <div class="feedback" id="feedback14"></div>
                <button class="btn btn-next" id="next14" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 15 - C3 -->
            <div class="question-container" id="q15" style="display: none;">
                <div class="question-header">
                    <div class="question-number">15</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">Justifier</span> pourquoi le gaspillage alimentaire est un scandale √©thique.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input15" placeholder="Votre justification..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateExplication(15, 'scandale-ethique')" id="validate15">Valider</button>
                <div class="feedback" id="feedback15"></div>
                <button class="btn btn-next" id="next15" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 16 - C3 -->
            <div class="question-container" id="q16" style="display: none;">
                <div class="question-header">
                    <div class="question-number">16</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">D√©crire</span> le lien entre agriculture biologique et consommation √©coresponsable.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input16" placeholder="D√©crivez le lien..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateExplication(16, 'agriculture-bio')" id="validate16">Valider</button>
                <div class="feedback" id="feedback16"></div>
                <button class="btn btn-next" id="next16" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 17 - C3 -->
            <div class="question-container" id="q17" style="display: none;">
                <div class="question-header">
                    <div class="question-number">17</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">Montrer</span> l'int√©r√™t des circuits courts pour l'environnement.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input17" placeholder="Montrez l'int√©r√™t..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateExplication(17, 'circuits-courts')" id="validate17">Valider</button>
                <div class="feedback" id="feedback17"></div>
                <button class="btn btn-next" id="next17" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 18 - C3 -->
            <div class="question-container" id="q18" style="display: none;">
                <div class="question-header">
                    <div class="question-number">18</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">Interpr√©ter</span> : "Si le gaspillage alimentaire √©tait un pays, il serait le 3e √©metteur de GES."
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(18, 0, false)">
                        <div class="option-radio"></div>
                        <span>Cela montre que le gaspillage produit peu de pollution</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(18, 1, true)">
                        <div class="option-radio"></div>
                        <span>Cela montre l'√©norme impact environnemental du gaspillage</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(18, 2, false)">
                        <div class="option-radio"></div>
                        <span>Cela concerne uniquement les transports</span>
                    </div>
                </div>
                <div class="feedback" id="feedback18"></div>
                <button class="btn btn-next" id="next18" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 19 - C3 -->
            <div class="question-container" id="q19" style="display: none;">
                <div class="question-header">
                    <div class="question-number">19</div>
                    <div class="competence-badge c3" style="border-color: #f39c12; color: #f39c12;">C3</div>
                </div>
                <div class="question-text">
                    [C3] <span class="verb-action">Pr√©senter</span> les avantages du commerce √©quitable.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input19" placeholder="Pr√©sentez les avantages..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateExplication(19, 'commerce-equitable')" id="validate19">Valider</button>
                <div class="feedback" id="feedback19"></div>
                <button class="btn btn-next" id="next19" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- C4 Questions 20-23 -->
            
            <!-- QUESTION 20 - C4 -->
            <div class="question-container" id="q20" style="display: none;">
                <div class="question-header">
                    <div class="question-number">20</div>
                    <div class="competence-badge c4" style="border-color: #e74c3c; color: #e74c3c;">C4</div>
                </div>
                <div class="question-text">
                    [C4] <span class="verb-action">Proposer</span> trois mesures individuelles contre le gaspillage alimentaire.
                </div>
                <div class="answer-options">
                    <input type="text" class="answer-input" id="mesure20a" placeholder="Mesure 1" style="margin-bottom: 10px;">
                    <input type="text" class="answer-input" id="mesure20b" placeholder="Mesure 2" style="margin-bottom: 10px;">
                    <input type="text" class="answer-input" id="mesure20c" placeholder="Mesure 3">
                </div>
                <button class="btn btn-primary" onclick="validateMesures(20)" id="validate20">Valider</button>
                <div class="feedback" id="feedback20"></div>
                <button class="btn btn-next" id="next20" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 21 - C4 -->
            <div class="question-container" id="q21" style="display: none;">
                <div class="question-header">
                    <div class="question-number">21</div>
                    <div class="competence-badge c4" style="border-color: #e74c3c; color: #e74c3c;">C4</div>
                </div>
                <div class="question-text">
                    [C4] <span class="verb-action">Formuler</span> une solution pour un restaurant qui jette 20 kg de nourriture par jour.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input21" placeholder="Votre solution..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateSolution(21)" id="validate21">Valider</button>
                <div class="feedback" id="feedback21"></div>
                <button class="btn btn-next" id="next21" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 22 - C4 -->
            <div class="question-container" id="q22" style="display: none;">
                <div class="question-header">
                    <div class="question-number">22</div>
                    <div class="competence-badge c4" style="border-color: #e74c3c; color: #e74c3c;">C4</div>
                </div>
                <div class="question-text">
                    [C4] <span class="verb-action">Choisir</span> la meilleure solution pour promouvoir l'√©coresponsabilit√© dans un lyc√©e.
                </div>
                <div class="answer-options">
                    <div class="mcq-option" onclick="selectAnswer(22, 0, false)">
                        <div class="option-radio"></div>
                        <span>Interdire les produits non biologiques</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(22, 1, true)">
                        <div class="option-radio"></div>
                        <span>Organiser un concours d'affiches anti-gaspillage</span>
                    </div>
                    <div class="mcq-option" onclick="selectAnswer(22, 2, false)">
                        <div class="option-radio"></div>
                        <span>Augmenter les prix de la restauration</span>
                    </div>
                </div>
                <div class="feedback" id="feedback22"></div>
                <button class="btn btn-next" id="next22" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 23 - C4 -->
            <div class="question-container" id="q23" style="display: none;">
                <div class="question-header">
                    <div class="question-number">23</div>
                    <div class="competence-badge c4" style="border-color: #e74c3c; color: #e74c3c;">C4</div>
                </div>
                <div class="question-text">
                    [C4] <span class="verb-action">Hi√©rarchiser</span> ces mesures par efficacit√© (1 = plus efficace).
                </div>
                <div class="answer-options">
                    <p>
                        <select id="hier23a" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        Faire une liste de courses
                    </p>
                    <p>
                        <select id="hier23b" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        R√©utiliser les restes
                    </p>
                    <p>
                        <select id="hier23c" style="padding:8px; margin:5px; width:60px;">
                            <option value="">-</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        Applications anti-gaspillage
                    </p>
                </div>
                <button class="btn btn-primary" onclick="validateHierarchie(23)" id="validate23">Valider</button>
                <div class="feedback" id="feedback23"></div>
                <button class="btn btn-next" id="next23" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- C5 Questions 24-25 -->
            
            <!-- QUESTION 24 - C5 -->
            <div class="question-container" id="q24" style="display: none;">
                <div class="question-header">
                    <div class="question-number">24</div>
                    <div class="competence-badge c5" style="border-color: #9b59b6; color: #9b59b6;">C5</div>
                </div>
                <div class="question-text">
                    [C5] <span class="verb-action">Argumenter</span> en faveur du commerce √©quitable avec deux arguments distincts.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="arg24a" placeholder="Argument 1 (social)" style="margin-bottom: 10px;"></textarea>
                    <textarea class="answer-input" id="arg24b" placeholder="Argument 2 (√©conomique)"></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateArgumentation(24)" id="validate24">Valider</button>
                <div class="feedback" id="feedback24"></div>
                <button class="btn btn-next" id="next24" onclick="nextQuestion()" style="display: none;">‚û°Ô∏è Suivant</button>
            </div>
            
            <!-- QUESTION 25 - C5 -->
            <div class="question-container" id="q25" style="display: none;">
                <div class="question-header">
                    <div class="question-number">25</div>
                    <div class="competence-badge c5" style="border-color: #9b59b6; color: #9b59b6;">C5</div>
                </div>
                <div class="question-text">
                    [C5] <span class="verb-action">Justifier</span> pourquoi privil√©gier les AMAP plut√¥t que les supermarch√©s.
                </div>
                <div class="answer-options">
                    <textarea class="answer-input" id="input25" placeholder="Votre justification avec arguments..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="validateJustification(25)" id="validate25">Valider</button>
                <div class="feedback" id="feedback25"></div>
                <button class="btn btn-next" id="next25" onclick="showFinalResults()" style="display: none;">üéØ Voir mes r√©sultats</button>
            </div>
        </div>
        
        <!-- Final Results -->
        <div class="final-results" id="final-results">
            <h2>üéâ AUTO-√âVALUATION TERMIN√âE !</h2>
            <div class="final-score" id="final-score">0/25</div>
            <div id="performance-message" style="margin: 20px 0; font-size: 1.2em; line-height: 1.6;"></div>
            
            <!-- Analyse des comp√©tences -->
            <div class="competences-analysis">
                <h3>üìä Analyse de vos comp√©tences</h3>
                <div class="competences-chart" id="competences-chart"></div>
                <div class="dominant-competence" id="dominant-competence"></div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn btn-next" onclick="restartQuiz()">üîÑ Recommencer pour progresser</button>
            </div>
        </div>
    </div>
    
    <script>
        // Variables globales
        let currentQuestion = 1;
        let score = 0;
        let competenceScores = { C1: 0, C2: 0, C3: 0, C4: 0, C5: 0 };
        let competenceQuestions = { C1: 8, C2: 5, C3: 6, C4: 4, C5: 2 };
        let multipleChoiceAnswers = {};
        
        // Navigation vers la question suivante
        function nextQuestion() {
            document.getElementById(`q${currentQuestion}`).style.display = 'none';
            currentQuestion++;
            
            if (currentQuestion <= 25) {
                document.getElementById(`q${currentQuestion}`).style.display = 'block';
                document.getElementById('current-question').textContent = currentQuestion;
                const progress = (currentQuestion - 1) / 25 * 100;
                document.getElementById('progress-fill').style.width = progress + '%';
            }
        }
        
        // S√©lection QCM simple
        function selectAnswer(questionNum, answerNum, isCorrect) {
            const question = document.getElementById(`q${questionNum}`);
            const options = question.querySelectorAll('.mcq-option');
            
            // D√©s√©lectionner toutes les options
            options.forEach(option => {
                option.classList.remove('selected');
                option.querySelector('.option-radio').classList.remove('selected');
            });
            
            // S√©lectionner l'option choisie
            const selectedOption = options[answerNum];
            selectedOption.classList.add('selected');
            selectedOption.querySelector('.option-radio').classList.add('selected');
            
            // Valider imm√©diatement
            setTimeout(() => validateAnswer(questionNum, isCorrect, answerNum, options), 300);
        }
        
        // Validation et feedback
        function validateAnswer(questionNum, isCorrect, userAnswer = null, options = null) {
            const question = document.getElementById(`q${questionNum}`);
            const feedback = document.getElementById(`feedback${questionNum}`);
            const nextBtn = document.getElementById(`next${questionNum}`);
            
            // D√©terminer la comp√©tence
            let competence;
            if (questionNum <= 8) competence = 'C1';
            else if (questionNum <= 13) competence = 'C2';
            else if (questionNum <= 19) competence = 'C3';
            else if (questionNum <= 23) competence = 'C4';
            else competence = 'C5';
            
            if (isCorrect) {
                score++;
                competenceScores[competence]++;
                question.classList.add('answered-correct');
                feedback.className = 'feedback correct';
                showCorrectFeedback(questionNum);
            } else {
                question.classList.add('answered-wrong');
                feedback.className = 'feedback incorrect';
                showIncorrectFeedback(questionNum, userAnswer, options);
            }
            
            feedback.style.display = 'block';
            nextBtn.style.display = 'inline-flex';
            document.getElementById('current-score').textContent = score;
        }
        
        // Feedbacks positifs d√©taill√©s
        function showCorrectFeedback(questionNum) {
            const feedback = document.getElementById(`feedback${questionNum}`);
            const feedbacks = {
                1: "‚úÖ Parfait ! La consommation √©coresponsable combine impact environnemental r√©duit ET conditions de travail d√©centes. Cette d√©finition int√®gre les deux dimensions essentielles du d√©veloppement durable : √©cologique et sociale.",
                2: "‚úÖ Excellent ! Les piliers environnemental et social sont les fondements du d√©veloppement durable, avec le pilier √©conomique. Vous ma√Ætrisez bien cette notion cl√©.",
                3: "‚úÖ Bravo ! AMAP = Association pour le Maintien de l'Agriculture Paysanne. Ces structures cr√©ent un lien direct producteur-consommateur et soutiennent l'agriculture locale.",
                5: "‚úÖ Exact ! 30 kg par personne et par an, soit l'√©quivalent d'un repas par semaine gaspill√©. Ce chiffre montre l'ampleur du probl√®me en France.",
                11: "‚úÖ Diagnostic correct ! Le probl√®me principal est l'inad√©quation entre quantit√© achet√©e (3 kg) et besoins r√©els (1 kg). C'est un cas typique de surconsommation.",
                18: "‚úÖ Interpr√©tation parfaite ! Cette comparaison montre l'√©norme impact environnemental du gaspillage alimentaire, √©quivalent aux plus gros pays pollueurs.",
                22: "‚úÖ Choix judicieux ! Le concours d'affiches sensibilise massivement pour un co√ªt minimal et responsabilise les jeunes. Solution p√©dagogique optimale."
            };
            
            feedback.innerHTML = `
                <div class="feedback-title">‚úÖ Excellente r√©ponse !</div>
                <div class="feedback-explanation">${feedbacks[questionNum] || 'Vous ma√Ætrisez parfaitement cette notion. Continuez ainsi !'}</div>
            `;
        }
        
        // Feedbacks correctifs d√©taill√©s avec comparaisons
        function showIncorrectFeedback(questionNum, userAnswer, options) {
            const feedback = document.getElementById(`feedback${questionNum}`);
            
            // Marquer visuellement les r√©ponses
            if (options) {
                options.forEach((option, index) => {
                    if (index === userAnswer) {
                        option.classList.add('incorrect');
                        option.querySelector('.option-radio').classList.add('incorrect');
                    }
                });
                
                // Marquer la bonne r√©ponse
                const correctAnswers = {1: 1, 3: 0, 5: 1, 11: 1, 18: 1, 22: 1};
                if (correctAnswers[questionNum] !== undefined) {
                    options[correctAnswers[questionNum]].classList.add('correct');
                    options[correctAnswers[questionNum]].querySelector('.option-radio').classList.add('correct');
                }
            }
            
            const explanations = {
                1: {
                    title: "‚ùå D√©finition incompl√®te",
                    explanation: "La consommation √©coresponsable va au-del√† du prix ou de l'origine. Elle doit combiner impact environnemental ET dimension sociale.",
                    correct: "Consommer des produits dont l'impact environnemental est r√©duit et qui garantissent aux producteurs des conditions de travail d√©centes",
                    why: "Cette d√©finition int√®gre le d√©veloppement durable : pr√©servation environnementale + √©quit√© sociale. C'est cette double exigence qui caract√©rise l'√©coresponsabilit√©."
                },
                3: {
                    title: "‚ùå Acronyme incorrect",
                    explanation: "AMAP ne concerne pas la productivit√© mais sp√©cifiquement le maintien de l'agriculture paysanne traditionnelle.",
                    correct: "Association pour le Maintien de l'Agriculture Paysanne",
                    why: "Les AMAP pr√©servent l'agriculture paysanne face √† l'industrialisation. Elles maintiennent des exploitations √† taille humaine et cr√©ent un lien direct producteur-consommateur."
                },
                5: {
                    title: "‚ùå Chiffre inexact",
                    explanation: "Le gaspillage alimentaire en France est plus important que ce que vous pensez.",
                    correct: "30 kg par habitant et par an",
                    why: "Ce chiffre officiel (dont 7 kg encore emball√©s) repr√©sente l'√©quivalent d'un repas par semaine ! Cela montre l'ampleur du d√©fi √† relever."
                },
                11: {
                    title: "‚ùå Diagnostic incorrect",
                    explanation: "Le probl√®me n'est ni la qualit√© ni la conservation, mais la disproportion entre achat et besoin.",
                    correct: "Probl√®me de quantit√© inadapt√©e aux besoins",
                    why: "Lucie ach√®te 3 fois ses besoins r√©els ! C'est un cas typique de surconsommation par m√©connaissance de ses besoins r√©els."
                },
                18: {
                    title: "‚ùå Mauvaise interpr√©tation",
                    explanation: "Cette comparaison ne minimise pas l'impact mais au contraire r√©v√®le son √©normit√©.",
                    correct: "Cela montre l'√©norme impact environnemental du gaspillage",
                    why: "√ätre 3e √©metteur mondial signifie que le gaspillage alimentaire pollue plus que la plupart des pays ! C'est consid√©rable."
                },
                22: {
                    title: "‚ùå Solution inadapt√©e",
                    explanation: "Interdire ou contraindre n'est pas p√©dagogique. Il faut sensibiliser positivement.",
                    correct: "Organiser un concours d'affiches anti-gaspillage",
                    why: "Cette solution implique tous les √©l√®ves, co√ªte peu, sensibilise durablement et responsabilise. C'est la plus adapt√©e au contexte scolaire."
                }
            };
            
            const exp = explanations[questionNum];
            if (exp && options) {
                feedback.innerHTML = `
                    <div class="feedback-title">${exp.title}</div>
                    <div class="feedback-explanation">${exp.explanation}</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre r√©ponse :</strong><br>
                            ${options[userAnswer] ? options[userAnswer].querySelector('span').textContent : 'Non renseign√©e'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Bonne r√©ponse :</strong><br>
                            ${exp.correct}
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi cette r√©ponse ?</strong><br>
                        ${exp.why}
                    </div>
                `;
            } else {
                feedback.innerHTML = `
                    <div class="feedback-title">‚ùå R√©ponse incorrecte</div>
                    <div class="feedback-explanation">Relisez cette partie du cours pour mieux comprendre la notion.</div>
                `;
            }
        }
        
        // QCM Multiple (Question 2)
        function toggleMultipleChoice(questionNum, answerNum, isCorrect) {
            if (!multipleChoiceAnswers[questionNum]) {
                multipleChoiceAnswers[questionNum] = {};
            }
            
            const option = document.querySelector(`#q${questionNum} .mcq-option:nth-child(${answerNum + 1})`);
            const radio = option.querySelector('.option-radio');
            
            if (multipleChoiceAnswers[questionNum][answerNum] !== undefined) {
                delete multipleChoiceAnswers[questionNum][answerNum];
                option.classList.remove('selected');
                radio.classList.remove('selected');
            } else {
                multipleChoiceAnswers[questionNum][answerNum] = isCorrect;
                option.classList.add('selected');
                radio.classList.add('selected');
            }
        }
        
        function validateMultipleChoice(questionNum) {
            const answers = multipleChoiceAnswers[questionNum] || {};
            const correctCount = Object.values(answers).filter(v => v === true).length;
            const incorrectCount = Object.values(answers).filter(v => v === false).length;
            const isCorrect = correctCount === 2 && incorrectCount === 0;
            
            const question = document.getElementById(`q${questionNum}`);
            const validateBtn = document.getElementById(`validate${questionNum}`);
            validateBtn.style.display = 'none';
            
            validateAnswer(questionNum, isCorrect);
            
            const feedback = document.getElementById(`feedback${questionNum}`);
            if (isCorrect) {
                feedback.innerHTML = `
                    <div class="feedback-title">‚úÖ S√©lection parfaite !</div>
                    <div class="feedback-explanation">Les piliers environnemental et social sont effectivement les fondements du d√©veloppement durable, avec le pilier √©conomique. Vous ma√Ætrisez cette notion cl√© de l'√©coresponsabilit√©.</div>
                `;
            } else {
                const options = question.querySelectorAll('.mcq-option');
                options.forEach((option, index) => {
                    if (answers[index] === true) {
                        option.classList.add('correct');
                        option.querySelector('.option-radio').classList.add('correct');
                    } else if (answers[index] === false) {
                        option.classList.add('incorrect');
                        option.querySelector('.option-radio').classList.add('incorrect');
                    }
                });
                
                [0, 2].forEach(correctIndex => {
                    if (answers[correctIndex] === undefined) {
                        options[correctIndex].classList.add('correct');
                        options[correctIndex].querySelector('.option-radio').classList.add('correct');
                    }
                });
                
                feedback.innerHTML = `
                    <div class="feedback-title">‚ùå S√©lection incorrecte</div>
                    <div class="feedback-explanation">Le d√©veloppement durable repose sur trois piliers principaux. Vous deviez s√©lectionner les deux crit√®res fondamentaux.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos s√©lections :</strong><br>
                            ${Object.keys(answers).map(i => options[i].querySelector('span').textContent).join('<br>')}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Bonnes r√©ponses :</strong><br>
                            Crit√®re environnemental<br>
                            Crit√®re social
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Explication :</strong> Le d√©veloppement durable combine environnemental (protection plan√®te), social (√©quit√© humaine) et √©conomique (viabilit√©). Les crit√®res technologique et marketing sont des moyens, pas des piliers fondamentaux.
                    </div>
                `;
            }
        }
        
        // Validation r√©ponse texte Question 4
        function validateTextAnswer(questionNum) {
            const input = document.getElementById(`input${questionNum}`);
            const text = input.value.toLowerCase();
            const validateBtn = document.getElementById(`validate${questionNum}`);
            
            validateBtn.style.display = 'none';
            
            const criteria = ['social', 'environnemental', '√©conomique'];
            const foundCriteria = criteria.filter(criterion => 
                text.includes(criterion) || 
                (criterion === 'social' && (text.includes('√©quit√©') || text.includes('travail') || text.includes('droit'))) ||
                (criterion === 'environnemental' && (text.includes('environnement') || text.includes('biodiversit√©'))) ||
                (criterion === '√©conomique' && (text.includes('prix') || text.includes('revenu')))
            );
            
            const isCorrect = foundCriteria.length >= 2;
            
            if (isCorrect) {
                input.classList.add('correct');
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Crit√®res bien identifi√©s !</div>
                    <div class="feedback-explanation">Vous connaissez les trois dimensions du commerce √©quitable. Ces crit√®res garantissent une approche globale et √©quitable du commerce international.</div>
                    <div class="correct-answer">
                        <strong>‚úÖ Les trois crit√®res :</strong><br>
                        ‚Ä¢ <strong>Sociaux</strong> : droits humains, conditions de travail d√©centes<br>
                        ‚Ä¢ <strong>Environnementaux</strong> : respect biodiversit√©, pratiques durables<br>
                        ‚Ä¢ <strong>√âconomiques</strong> : prix juste, revenus d√©cents aux producteurs
                    </div>
                `;
            } else {
                input.classList.add('incorrect');
                validateAnswer(questionNum, false);
                
                // CORRECTION : M√™me si vide, donner la correction compl√®te !
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå ${input.value.trim() === '' ? 'R√©ponse non renseign√©e' : 'Crit√®res incomplets'}</div>
                    <div class="feedback-explanation">Le commerce √©quitable repose sur trois types de crit√®res compl√©mentaires et indispensables pour corriger les d√©s√©quilibres du commerce international.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre r√©ponse :</strong><br>
                            ${input.value || 'Aucune r√©ponse fournie'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ R√©ponse compl√®te :</strong><br>
                            1. Crit√®res sociaux<br>
                            2. Crit√®res environnementaux<br>
                            3. Crit√®res √©conomiques
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Explication d√©taill√©e :</strong><br>
                        ‚Ä¢ <strong>Crit√®res sociaux :</strong> droits de l'Homme, conditions de travail d√©centes, √©galit√© hommes-femmes, pas de travail des enfants<br>
                        ‚Ä¢ <strong>Crit√®res environnementaux :</strong> respect de la biodiversit√©, pratiques agricoles durables, limitation des pesticides, pr√©servation des √©cosyst√®mes<br>
                        ‚Ä¢ <strong>Crit√®res √©conomiques :</strong> prix minimum garanti aux producteurs, prime de d√©veloppement pour les communaut√©s, relations commerciales stables<br><br>
                        Ces trois piliers travaillent ensemble pour garantir que le commerce √©quitable am√©liore r√©ellement les conditions de vie des producteurs (souvent dans les pays en d√©veloppement) tout en respectant l'environnement. C'est cette approche globale qui diff√©rencie le commerce √©quitable du commerce traditionnel.
                    </div>
                `;
            }
        }
        
        // Autres fonctions de validation (DLC/DDM, Classement, etc.)
        function validateDLCDDM(questionNum) {
            const dlc = document.getElementById('dlc6').value.toLowerCase();
            const ddm = document.getElementById('ddm6').value.toLowerCase();
            const validateBtn = document.getElementById(`validate${questionNum}`);
            
            validateBtn.style.display = 'none';
            
            const dlcCorrect = (dlc.includes('consommation') || dlc.includes('conso'));
            const ddmCorrect = (ddm.includes('minimale') || ddm.includes('mini'));
            const isCorrect = dlcCorrect && ddmCorrect;
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ D√©finitions parfaites !</div>
                    <div class="feedback-explanation">Excellent ! Vous ma√Ætrisez la diff√©rence cruciale entre DLC et DDM. Cette distinction est fondamentale pour √©viter le gaspillage alimentaire inutile.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi cette diff√©rence est importante :</strong><br>
                        Comprendre cette diff√©rence permet d'√©viter de jeter des produits encore consommables (DDM d√©pass√©e) tout en pr√©servant sa s√©curit√© sanitaire (DLC √† respecter absolument).
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå D√©finitions √† pr√©ciser</div>
                    <div class="feedback-explanation">Ces deux dates n'ont pas la m√™me signification ni les m√™mes enjeux de s√©curit√© alimentaire. Il est crucial de les distinguer pour √©viter le gaspillage.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos r√©ponses :</strong><br>
                            DLC = Date Limite de <strong>${document.getElementById('dlc6').value || '[vide]'}</strong><br>
                            DDM = Date de Durabilit√© <strong>${document.getElementById('ddm6').value || '[vide]'}</strong>
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Bonnes d√©finitions :</strong><br>
                            DLC = Date Limite de <strong>Consommation</strong><br>
                            DDM = Date de Durabilit√© <strong>Minimale</strong>
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Diff√©rence cruciale √† retenir :</strong><br>
                        <strong>DLC (Date Limite de Consommation) :</strong><br>
                        ‚Ä¢ Concerne la S√âCURIT√â sanitaire<br>
                        ‚Ä¢ NE JAMAIS d√©passer (risque d'intoxication)<br>
                        ‚Ä¢ Produits fragiles : viande, poisson, produits laitiers frais<br>
                        ‚Ä¢ Mention "√Ä consommer jusqu'au..."<br><br>
                        <strong>DDM (Date de Durabilit√© Minimale) :</strong><br>
                        ‚Ä¢ Concerne la QUALIT√â gustative et nutritionnelle<br>
                        ‚Ä¢ Peut √™tre d√©pass√©e sans danger (go√ªt/texture peuvent changer)<br>
                        ‚Ä¢ Produits secs : p√¢tes, riz, conserves, biscuits<br>
                        ‚Ä¢ Mention "√Ä consommer de pr√©f√©rence avant le..."<br><br>
                        <strong>Impact anti-gaspillage :</strong> 20% du gaspillage domestique vient de la confusion DLC/DDM !
                    </div>
                `;
            }
        }
        
        // Je vais cr√©er les autres fonctions de validation mais de mani√®re plus concise pour l'espace...
        
        // Fonction g√©n√©rique pour les explications (questions C3) - CORRIG√âE
        function validateExplication(questionNum, type) {
            const input = document.getElementById(`input${questionNum}`);
            const text = input.value.toLowerCase();
            const validateBtn = document.getElementById(`validate${questionNum}`);
            
            validateBtn.style.display = 'none';
            
            let keywords = [];
            let explanation = '';
            let correctAnswer = '';
            let detailedExplanation = '';
            
            switch(type) {
                case 'hors-saison':
                    keywords = ['transport', 'serre', '√©nergie', 'loin', 'chauffage'];
                    explanation = 'Les produits hors saison n√©cessitent transport longue distance ou culture sous serre chauff√©e.';
                    correctAnswer = 'Transport longue distance, serres chauff√©es, consommation √©nerg√©tique √©lev√©e, impact carbone important';
                    detailedExplanation = 'Consommer des fruits hors saison oblige soit √† les importer de tr√®s loin (transport polluant), soit √† les cultiver sous serres chauff√©es (consommation √©nerg√©tique importante). Dans les deux cas, l\'empreinte carbone est consid√©rablement augment√©e par rapport aux produits de saison locaux.';
                    break;
                case 'scandale-ethique':
                    keywords = ['1/3', 'tiers', 'faim', '1/9', 'jet√©e'];
                    explanation = 'Le scandale vient de la contradiction entre gaspillage et faim dans le monde.';
                    correctAnswer = '1/3 de la nourriture mondiale jet√©e alors que 1 personne sur 9 souffre de la faim';
                    detailedExplanation = 'Le scandale √©thique r√©side dans ce paradoxe : nous produisons assez de nourriture pour nourrir toute la plan√®te, mais 1/3 est gaspill√©e tandis qu\'1 personne sur 9 souffre de malnutrition. Cette contradiction r√©v√®le un probl√®me de r√©partition et de gaspillage inacceptable moralement.';
                    break;
                case 'agriculture-bio':
                    keywords = ['pesticide', 'chimique', 'environnement', 'naturel'];
                    explanation = 'L\'agriculture bio limite l\'usage de produits chimiques de synth√®se.';
                    correctAnswer = 'Pas de pesticides chimiques, respect de la biodiversit√©, impact environnemental r√©duit';
                    detailedExplanation = 'L\'agriculture biologique interdit l\'usage de pesticides et engrais chimiques de synth√®se. Elle privil√©gie les m√©thodes naturelles (rotation des cultures, auxiliaires naturels). Cela r√©duit la pollution des sols et de l\'eau, pr√©serve la biodiversit√© et limite l\'exposition des consommateurs aux r√©sidus chimiques.';
                    break;
                case 'circuits-courts':
                    keywords = ['transport', 'carbone', 'local', 'proximit√©', 'pollution'];
                    explanation = 'Les circuits courts r√©duisent les transports et donc les √©missions.';
                    correctAnswer = 'R√©duction des transports, baisse empreinte carbone, soutien √©conomie locale';
                    detailedExplanation = 'Les circuits courts (maximum 1 interm√©diaire entre producteur et consommateur) r√©duisent drastiquement les distances de transport. Cela diminue les √©missions de CO2, pr√©serve la fra√Æcheur des produits, soutient l\'√©conomie locale et cr√©√© du lien social entre producteurs et consommateurs.';
                    break;
                case 'commerce-equitable':
                    keywords = ['√©quitable', 'producteur', 'prix', 'social', 'juste'];
                    explanation = 'Le commerce √©quitable garantit des conditions justes aux producteurs.';
                    correctAnswer = 'Prix juste aux producteurs, conditions de travail d√©centes, d√©veloppement local durable';
                    detailedExplanation = 'Le commerce √©quitable assure aux producteurs (souvent dans les pays du Sud) un prix minimum garanti, des relations commerciales stables, le respect des droits humains et une prime de d√©veloppement pour leurs communaut√©s. Cela permet de sortir de la pauvret√© et de d√©velopper durablement leurs r√©gions.';
                    break;
            }
            
            const foundKeywords = keywords.filter(keyword => text.includes(keyword));
            const isCorrect = foundKeywords.length >= 2 && text.length > 30;
            
            if (isCorrect) {
                input.classList.add('correct');
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Excellente explication !</div>
                    <div class="feedback-explanation">Vous ma√Ætrisez bien cette notion et savez l'expliquer clairement. ${explanation}</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pour approfondir :</strong><br>
                        ${detailedExplanation}
                    </div>
                `;
            } else {
                input.classList.add('incorrect');
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå ${input.value.trim() === '' ? 'R√©ponse non renseign√©e' : 'Explication √† d√©velopper'}</div>
                    <div class="feedback-explanation">${explanation}</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre r√©ponse :</strong><br>
                            ${input.value || 'Aucune r√©ponse fournie'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ √âl√©ments de r√©ponse :</strong><br>
                            ${correctAnswer}
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Explication compl√®te :</strong><br>
                        ${detailedExplanation}
                    </div>
                `;
            }
        }
        
        // R√©sultats finaux avec analyse des comp√©tences dominantes
        function showFinalResults() {
            document.getElementById('questions-container').style.display = 'none';
            document.getElementById('final-results').style.display = 'block';
            
            const finalScore = document.getElementById('final-score');
            const performanceMessage = document.getElementById('performance-message');
            const percentage = (score / 25) * 100;
            
            finalScore.textContent = `${score}/25`;
            
            if (percentage >= 90) {
                finalScore.style.color = '#2e7d32';
                performanceMessage.innerHTML = `
                    <div style="color: #2e7d32; font-weight: 600;">üèÜ REMARQUABLE !</div>
                    <div>Vous ma√Ætrisez excellemment les comp√©tences √©coresponsables. Votre niveau est exemplaire et vous pouvez √™tre fier(e) de votre travail !</div>
                `;
            } else if (percentage >= 70) {
                finalScore.style.color = '#388e3c';
                performanceMessage.innerHTML = `
                    <div style="color: #388e3c; font-weight: 600;">üéâ TR√àS BIEN !</div>
                    <div>Excellente ma√Ætrise ! Vous avez acquis de solides comp√©tences en consommation √©coresponsable. Quelques points √† consolider mais vous √™tes sur la bonne voie.</div>
                `;
            } else if (percentage >= 50) {
                finalScore.style.color = '#f57c00';
                performanceMessage.innerHTML = `
                    <div style="color: #f57c00; font-weight: 600;">üëç BONNES BASES !</div>
                    <div>Vous avez acquis les concepts principaux. Avec un peu plus de travail, vous atteindrez l'excellence. Vos acquis sont solides !</div>
                `;
            } else {
                finalScore.style.color = '#d32f2f';
                performanceMessage.innerHTML = `
                    <div style="color: #d32f2f; font-weight: 600;">üí™ CONTINUEZ !</div>
                    <div>Les bases sont √† renforcer mais ne vous d√©couragez pas ! Chaque erreur est une occasion d'apprendre. Reprenez le cours et recommencez !</div>
                `;
            }
            
            generateCompetencesAnalysis();
        }
        
        // Analyse des comp√©tences dominantes
        function generateCompetencesAnalysis() {
            const chartContainer = document.getElementById('competences-chart');
            const dominantContainer = document.getElementById('dominant-competence');
            
            const competencePercentages = {};
            Object.keys(competenceScores).forEach(comp => {
                if (competenceQuestions[comp] > 0) {
                    competencePercentages[comp] = Math.round((competenceScores[comp] / competenceQuestions[comp]) * 100);
                }
            });
            
            const competenceDefinitions = {
                'C1': 'Traiter une information - Vous savez rep√©rer, identifier et extraire efficacement les informations importantes des documents',
                'C2': 'Appliquer une d√©marche d\'analyse - Vous ma√Ætrisez les m√©thodes structur√©es pour analyser des situations complexes',
                'C3': 'Expliquer un ph√©nom√®ne - Vous savez clarifier les m√©canismes et justifier les relations de cause √† effet', 
                'C4': 'Proposer une solution - Vous formulez des mesures concr√®tes et adapt√©es aux probl√®mes rencontr√©s',
                'C5': 'Argumenter un choix - Vous d√©fendez vos positions avec des arguments solides et convaincants'
            };
            
            const competenceColors = {
                'C1': '#16a085', 'C2': '#3498db', 'C3': '#f39c12', 'C4': '#e74c3c', 'C5': '#9b59b6'
            };
            
            // Cr√©er le diagramme
            chartContainer.innerHTML = '';
            Object.keys(competencePercentages).forEach(comp => {
                if (competenceQuestions[comp] > 0) {
                    const barHTML = `
                        <div class="competence-bar">
                            <div class="competence-name">
                                <span style="color: ${competenceColors[comp]}; font-size: 1.2em;">‚óè</span>
                                <strong>${comp}</strong>
                            </div>
                            <div class="competence-progress">
                                <div class="competence-fill" style="width: ${competencePercentages[comp]}%; background: ${competenceColors[comp]};"></div>
                            </div>
                            <div class="competence-score">${competenceScores[comp]}/${competenceQuestions[comp]} r√©ussies (${competencePercentages[comp]}%)</div>
                        </div>
                    `;
                    chartContainer.innerHTML += barHTML;
                }
            });
            
            // Identifier la comp√©tence dominante
            const maxPercentage = Math.max(...Object.values(competencePercentages));
            const dominantCompetence = Object.keys(competencePercentages).find(comp => competencePercentages[comp] === maxPercentage);
            
            if (dominantCompetence) {
                dominantContainer.innerHTML = `
                    <h4>üåü Votre comp√©tence dominante : ${dominantCompetence}</h4>
                    <div style="margin-bottom: 15px;">
                        <strong>D√©finition :</strong> ${competenceDefinitions[dominantCompetence]}
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong>Votre ma√Ætrise :</strong> ${competencePercentages[dominantCompetence]}% de r√©ussite
                    </div>
                    <div>
                        <strong>üí° Vos points forts :</strong><br>
                        ${getStrengthMessage(dominantCompetence, competencePercentages[dominantCompetence])}
                    </div>
                    <div style="margin-top: 15px;">
                        <strong>üéØ Conseils pour progresser :</strong><br>
                        ${getImprovementTips(competencePercentages)}
                    </div>
                `;
            }
            
            // Animation des barres
            setTimeout(() => {
                document.querySelectorAll('.competence-fill').forEach(fill => {
                    const width = fill.style.width;
                    fill.style.width = '0%';
                    setTimeout(() => fill.style.width = width, 100);
                });
            }, 500);
        }
        
        function getStrengthMessage(competence, percentage) {
            const messages = {
                'C1': percentage >= 80 ? 'Vous excellez dans le traitement de l\'information ! Vous savez identifier efficacement les √©l√©ments cl√©s.' : 'Vous avez de bonnes capacit√©s pour extraire les informations importantes.',
                'C2': percentage >= 80 ? 'Vous ma√Ætrisez remarquablement les d√©marches d\'analyse structur√©es !' : 'Vos capacit√©s d\'analyse sont prometteuses.',
                'C3': percentage >= 80 ? 'Vous expliquez les ph√©nom√®nes avec clart√© et pr√©cision !' : 'Vous savez globalement bien expliquer les m√©canismes.',
                'C4': percentage >= 80 ? 'Vous proposez d\'excellentes solutions pratiques !' : 'Vous avez le sens des solutions concr√®tes.',
                'C5': percentage >= 80 ? 'Votre argumentation est remarquable et convaincante !' : 'Vous savez d√©fendre vos id√©es avec pertinence.'
            };
            return messages[competence] || 'Continuez √† d√©velopper cette comp√©tence.';
        }
        
        function getImprovementTips(percentages) {
            const weakest = Object.keys(percentages).reduce((a, b) => percentages[a] < percentages[b] ? a : b);
            const tips = {
                'C1': 'Entra√Ænez-vous √† lire m√©thodiquement les documents et √† rep√©rer les mots-cl√©s importants.',
                'C2': 'Pratiquez les m√©thodes d\'analyse comme QQOQCP pour structurer votre r√©flexion.',
                'C3': 'Travaillez √† expliquer √©tape par √©tape les m√©canismes et relations de cause √† effet.',
                'C4': 'Entra√Ænez-vous √† formuler des solutions concr√®tes et r√©alisables aux probl√®mes.',
                'C5': 'D√©veloppez vos arguments en les √©tayant par des exemples et des preuves.'
            };
            return `Pour progresser en ${weakest} : ${tips[weakest]}`;
        }
        
        // Recommencer
        function restartQuiz() {
            currentQuestion = 1;
            score = 0;
            competenceScores = { C1: 0, C2: 0, C3: 0, C4: 0, C5: 0 };
            multipleChoiceAnswers = {};
            
            document.getElementById('final-results').style.display = 'none';
            document.getElementById('questions-container').style.display = 'block';
            
            for (let i = 1; i <= 25; i++) {
                const question = document.getElementById(`q${i}`);
                question.style.display = i === 1 ? 'block' : 'none';
                question.classList.remove('answered-correct', 'answered-wrong');
                
                document.getElementById(`feedback${i}`).style.display = 'none';
                const nextBtn = document.getElementById(`next${i}`);
                if (nextBtn) nextBtn.style.display = 'none';
                const validateBtn = document.getElementById(`validate${i}`);
                if (validateBtn) validateBtn.style.display = 'inline-flex';
                
                question.querySelectorAll('.mcq-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                    const radio = option.querySelector('.option-radio');
                    if (radio) radio.classList.remove('selected', 'correct', 'incorrect');
                });
                
                question.querySelectorAll('input, textarea, select').forEach(input => {
                    input.value = '';
                    input.classList.remove('correct', 'incorrect');
                });
            }
            
            document.getElementById('current-question').textContent = '1';
            document.getElementById('current-score').textContent = '0';
            document.getElementById('progress-fill').style.width = '0%';
        }
        
        // Impl√©menter les fonctions de validation manquantes de mani√®re simplifi√©e
        function validateRanking(questionNum) {
            const a = document.getElementById('rank7a').value;
            const b = document.getElementById('rank7b').value;
            const c = document.getElementById('rank7c').value;
            const d = document.getElementById('rank7d').value;
            
            const isCorrect = a === 'consommation' && b === 'production' && c === 'transformation' && d === 'distribution';
            document.getElementById('validate7').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Classement parfait !</div>
                    <div class="feedback-explanation">Excellent ! Vous connaissez parfaitement la r√©partition du gaspillage dans la cha√Æne alimentaire. Ces chiffres officiels r√©v√®lent que le gaspillage concerne tous les acteurs.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Analyse de ce classement :</strong><br>
                        Consommation et production totalisent 65% du gaspillage ! Cela montre l'importance d'agir √† ces deux niveaux prioritaires pour √™tre efficace.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Classement incorrect</div>
                    <div class="feedback-explanation">L'ordre des √©tapes selon leur niveau de gaspillage ne correspond pas aux donn√©es officielles. Les pourcentages sont des indices pr√©cieux !</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre classement :</strong><br>
                            1. ${a || '[non s√©lectionn√©]'}<br>
                            2. ${b || '[non s√©lectionn√©]'}<br>
                            3. ${c || '[non s√©lectionn√©]'}<br>
                            4. ${d || '[non s√©lectionn√©]'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Bon classement :</strong><br>
                            1. Consommation (33%)<br>
                            2. Production (32%)<br>
                            3. Transformation (21%)<br>
                            4. Distribution (14%)
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi cet ordre ?</strong><br>
                        <strong>1. Consommation (33%) :</strong> Restes dans les assiettes, produits p√©rim√©s oubli√©s, portions trop importantes<br>
                        <strong>2. Production (32%) :</strong> Fruits/l√©gumes "non pr√©sentables", calibrage strict, al√©as climatiques<br>
                        <strong>3. Transformation (21%) :</strong> Process industriels, conditionnements inadapt√©s, normes esth√©tiques<br>
                        <strong>4. Distribution (14%) :</strong> Rupture cha√Æne du froid, transport, gestion des stocks<br><br>
                        <strong>Enseignement cl√© :</strong> La consommation et la production sont les √©tapes les plus gaspilleuses (65% √† elles deux). C'est l√† qu'il faut concentrer les efforts de r√©duction !
                    </div>
                `;
            }
        }
        
        function validateSurconsommation(questionNum) {
            const a = document.getElementById('input8a').value.toLowerCase();
            const b = document.getElementById('input8b').value.toLowerCase();
            const examples = ['viande', 'sucr√©', 'alcool', 'soda', 'gras', 'fast-food', 'chocolat', 'p√¢tisserie'];
            const validA = examples.some(ex => a.includes(ex)) && a.length > 3;
            const validB = examples.some(ex => b.includes(ex)) && b.length > 3;
            const isCorrect = validA && validB;
            
            document.getElementById('validate8').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Excellents exemples !</div>
                    <div class="feedback-explanation">Vos exemples illustrent parfaitement la surconsommation alimentaire ! Ces produits sont effectivement consomm√©s en exc√®s par rapport aux besoins nutritionnels r√©els en France.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Impact de ces surconsommations :</strong><br>
                        Ces exc√®s alimentaires contribuent aux probl√®mes de sant√© publique (ob√©sit√©, diab√®te, maladies cardiovasculaires) et ont un impact environnemental important par la surproduction qu'ils g√©n√®rent.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Exemples √† pr√©ciser</div>
                    <div class="feedback-explanation">La surconsommation alimentaire concerne les aliments consomm√©s au-del√† des besoins nutritionnels recommand√©s par les autorit√©s de sant√©.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos exemples :</strong><br>
                            1. ${document.getElementById('input8a').value || 'Non renseign√©'}<br>
                            2. ${document.getElementById('input8b').value || 'Non renseign√©'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Exemples types :</strong><br>
                            1. Surconsommation de viande (90 kg/an vs 70 kg recommand√©s)<br>
                            2. Surconsommation de produits sucr√©s (35 kg/an vs 25 kg max)<br>
                            3. Surconsommation d'alcool<br>
                            4. Surconsommation de sodas et boissons sucr√©es
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Qu'est-ce que la surconsommation ?</strong><br>
                        <strong>Viande :</strong> Les fran√ßais consomment 90 kg/an vs 70 kg recommand√©s par l'OMS<br>
                        <strong>Sucre :</strong> 35 kg/an vs 25 kg maximum recommand√©, soit 40% d'exc√®s<br>
                        <strong>Alcool :</strong> D√©passement fr√©quent des seuils de consommation √† faible risque<br>
                        <strong>Produits transform√©s :</strong> Fast-food, sodas, p√¢tisseries industrielles en exc√®s<br><br>
                        Ces surconsommations ont un double impact : sant√© publique (ob√©sit√©, diab√®te) et environnement (surproduction, gaspillage, empreinte carbone).
                    </div>
                `;
            }
        }
        
        function validateQQOQCP(questionNum) {
            const qui = document.getElementById('qui9').value.toLowerCase();
            const quoi = document.getElementById('quoi9').value.toLowerCase();
            const combien = document.getElementById('combien9').value;
            const pourquoi = document.getElementById('pourquoi9').value.toLowerCase();
            
            const quiOK = qui.includes('jules');
            const quoiOK = quoi.includes('gaspillage') || quoi.includes('jette');
            const combienOK = combien.includes('40');
            const pourquoiOK = pourquoi.includes('ach√®te') && pourquoi.includes('trop');
            
            const isCorrect = quiOK && quoiOK && combienOK && pourquoiOK;
            document.getElementById('validate9').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Analyse QQOQCP parfaite !</div>
                    <div class="feedback-explanation">Excellent ! Vous avez parfaitement appliqu√© la m√©thode QQOQCP pour analyser la situation de Jules. Cette m√©thode structure efficacement l'analyse d'un probl√®me.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi QQOQCP est efficace :</strong><br>
                        Cette m√©thode garantit qu'aucun aspect important n'est oubli√© dans l'analyse. Elle permet de cerner pr√©cis√©ment le probl√®me avant de chercher des solutions.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Analyse QQOQCP √† am√©liorer</div>
                    <div class="feedback-explanation">La m√©thode QQOQCP doit reprendre pr√©cis√©ment les √©l√©ments de la situation donn√©e. Chaque case doit √™tre remplie avec les informations extraites du texte.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre analyse :</strong><br>
                            QUI ? ${document.getElementById('qui9').value || '[vide]'}<br>
                            QUOI ? ${document.getElementById('quoi9').value || '[vide]'}<br>
                            COMBIEN ? ${document.getElementById('combien9').value || '[vide]'}<br>
                            POURQUOI ? ${document.getElementById('pourquoi9').value || '[vide]'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Analyse correcte :</strong><br>
                            QUI ? Jules<br>
                            QUOI ? Jette de la nourriture / Gaspillage alimentaire<br>
                            COMBIEN ? 40 kg par an<br>
                            POURQUOI ? Ach√®te trop, laisse pourrir
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Comment bien appliquer QQOQCP :</strong><br>
                        <strong>QUI :</strong> Identifier la personne concern√©e ‚Üí Jules<br>
                        <strong>QUOI :</strong> D√©finir pr√©cis√©ment le probl√®me ‚Üí gaspillage/jets de nourriture<br>
                        <strong>O√ô :</strong> Localiser (ici : pas pr√©cis√© dans la situation)<br>
                        <strong>QUAND :</strong> Temporalit√© (ici : "par an")<br>
                        <strong>COMMENT :</strong> Modalit√©s (ici : "laisse pourrir")<br>
                        <strong>COMBIEN :</strong> Quantifier ‚Üí 40 kg/an<br>
                        <strong>POURQUOI :</strong> Cause racine ‚Üí "ach√®te trop"<br><br>
                        Cette m√©thode permet de structurer l'analyse avant de proposer des solutions adapt√©es !
                    </div>
                `;
            }
        }
        
        function validatePriorisation(questionNum) {
            const a = document.getElementById('prio10a').value;
            const b = document.getElementById('prio10b').value;
            const c = document.getElementById('prio10c').value;
            
            const isCorrect = a === '1' && b === '2' && c === '3';
            document.getElementById('validate10').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Priorisation logique parfaite !</div>
                    <div class="feedback-explanation">Excellent raisonnement ! Vous avez bien hi√©rarchis√© les cons√©quences selon leur gravit√© humaine et environnementale. Cette priorisation r√©v√®le une compr√©hension √©thique du probl√®me.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi cette hi√©rarchie :</strong><br>
                        <strong>1. Probl√®me √©thique</strong> = le plus grave car 1/9 de l'humanit√© a faim pendant qu'1/3 de la nourriture est jet√©e<br>
                        <strong>2. Gaspillage de ressources</strong> = √©puisement eau, terres, √©nergie pour rien<br>
                        <strong>3. √âmissions GES</strong> = aggravation du r√©chauffement climatique<br><br>
                        Cette logique place l'urgence humaine avant les enjeux environnementaux, ce qui est coh√©rent avec une approche √©thique du d√©veloppement durable.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Priorisation √† revoir</div>
                    <div class="feedback-explanation">La hi√©rarchisation des cons√©quences doit suivre une logique d'urgence et de gravit√©. R√©fl√©chissez √† l'impact humain versus l'impact environnemental.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre priorisation :</strong><br>
                            ${a || '[vide]'} - Probl√®me √©thique (faim dans le monde)<br>
                            ${b || '[vide]'} - Gaspillage de ressources (eau, √©nergie)<br>
                            ${c || '[vide]'} - √âmissions de gaz √† effet de serre
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Priorisation logique :</strong><br>
                            1 - Probl√®me √©thique (faim dans le monde)<br>
                            2 - Gaspillage de ressources (eau, √©nergie)<br>
                            3 - √âmissions de gaz √† effet de serre
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Logique de priorisation :</strong><br>
                        Le scandale √©thique (1/9 de l'humanit√© affam√©e pendant qu'on jette 1/3 de la nourriture) est plus grave que les cons√©quences environnementales, m√™me si celles-ci sont aussi tr√®s importantes. Cette approche humaniste privil√©gie l'urgence sociale avant les enjeux √©cologiques, tout en reconnaissant leur interd√©pendance.
                    </div>
                `;
            }
        }
        
        function validateAGEC(questionNum) {
            const a = document.getElementById('agec12a').value;
            const b = document.getElementById('agec12b').value;
            const isCorrect = a === '50' && b === '2025';
            document.getElementById('validate12').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Objectif AGEC parfaitement ma√Ætris√© !</div>
                    <div class="feedback-explanation">Excellent ! Vous connaissez pr√©cis√©ment l'objectif ambitieux de la loi AGEC. Cette loi fran√ßaise est pionni√®re en Europe pour la lutte contre le gaspillage alimentaire.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì D√©tails de la loi AGEC :</strong><br>
                        <strong>Objectif :</strong> -50% de gaspillage alimentaire d'ici 2025 (vs niveau 2015)<br>
                        <strong>Moyens :</strong> Obligations pour la grande distribution, don facilit√©, sensibilisation<br>
                        <strong>Enjeu :</strong> Passer de 10M tonnes gaspill√©es/an √† 5M tonnes maximum<br>
                        <strong>Impact :</strong> √âconomiser 3 milliards ‚Ç¨/an et r√©duire les √©missions de CO2<br><br>
                        Cette loi traduit l'engagement fran√ßais pour les Objectifs de D√©veloppement Durable de l'ONU.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Objectif AGEC √† pr√©ciser</div>
                    <div class="feedback-explanation">La loi AGEC (Anti-Gaspillage pour une √âconomie Circulaire) fixe un objectif chiffr√© pr√©cis avec une date butoir importante pour la France.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre r√©ponse :</strong><br>
                            R√©duction de ${a || '[vide]'}% d'ici ${b || '[vide]'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Objectif officiel :</strong><br>
                            R√©duction de <strong>50%</strong> d'ici <strong>2025</strong>
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Comprendre l'objectif AGEC :</strong><br>
                        La loi AGEC vise √† diviser par 2 le gaspillage alimentaire en 10 ans (2015-2025). Cet objectif ambitieux concerne tous les acteurs : producteurs, transformateurs, distributeurs, restaurateurs et consommateurs.<br><br>
                        <strong>R√©f√©rence :</strong> Niveau de 2015 = 10 millions de tonnes gaspill√©es/an en France<br>
                        <strong>Objectif 2025 :</strong> Maximum 5 millions de tonnes = diviser par 2 !<br><br>
                        Cette loi fran√ßaise s'inspire des objectifs ODD (Objectifs de D√©veloppement Durable) de l'ONU qui visent aussi -50% du gaspillage mondial d'ici 2030.
                    </div>
                `;
            }
        }
        
        function validateLinking(questionNum) {
            const a = document.getElementById('link13a').value;
            const b = document.getElementById('link13b').value;
            const c = document.getElementById('link13c').value;
            const d = document.getElementById('link13d').value;
            
            const isCorrect = a === '33' && b === '32' && c === '21' && d === '14';
            document.getElementById('validate13').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Associations parfaites !</div>
                    <div class="feedback-explanation">Excellent ! Vous connaissez parfaitement la r√©partition du gaspillage dans la cha√Æne alimentaire. Ces chiffres officiels permettent de cibler les actions de pr√©vention les plus efficaces.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Analyse de cette r√©partition :</strong><br>
                        <strong>Consommation (33%)</strong> + <strong>Production (32%)</strong> = 65% du gaspillage total !<br>
                        Cela r√©v√®le que consommateurs et producteurs sont les acteurs cl√©s. Les politiques de pr√©vention doivent donc prioritairement viser ces deux √©tapes pour √™tre efficaces.<br><br>
                        <strong>Transformation (21%)</strong> et <strong>Distribution (14%)</strong> repr√©sentent 35% restants, significatifs mais moins prioritaires dans l'urgence.
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Associations √† corriger</div>
                    <div class="feedback-explanation">Les pourcentages de gaspillage par √©tape de la cha√Æne alimentaire sont des donn√©es officielles pr√©cises qu'il faut conna√Ætre pour bien cibler les actions de pr√©vention.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos associations :</strong><br>
                            Consommation ‚Üí ${a || '[vide]'}%<br>
                            Production ‚Üí ${b || '[vide]'}%<br>
                            Transformation ‚Üí ${c || '[vide]'}%<br>
                            Distribution ‚Üí ${d || '[vide]'}%
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ R√©partition officielle :</strong><br>
                            Consommation ‚Üí <strong>33%</strong><br>
                            Production ‚Üí <strong>32%</strong><br>
                            Transformation ‚Üí <strong>21%</strong><br>
                            Distribution ‚Üí <strong>14%</strong>
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Comprendre cette r√©partition :</strong><br>
                        <strong>Consommation (33%)</strong> : gaspillage domestique (restes, DLC d√©pass√©es, achats excessifs)<br>
                        <strong>Production (32%)</strong> : fruits/l√©gumes √©cart√©s pour apparence, process d√©faillants<br>
                        <strong>Transformation (21%)</strong> : sur-dimensionnement, conditionnements inadapt√©s<br>
                        <strong>Distribution (14%)</strong> : ruptures cha√Æne froid, transport, rotation stocks<br><br>
                        Ces chiffres guident les politiques publiques : agir prioritairement sur consommation et production !
                    </div>
                `;
            }
        }
        
        function validateMesures(questionNum) {
            const a = document.getElementById('mesure20a').value.toLowerCase();
            const b = document.getElementById('mesure20b').value.toLowerCase();
            const c = document.getElementById('mesure20c').value.toLowerCase();
            
            const measures = ['liste', 'restes', 'portion', 'frigo', 'dates', 'dlc', 'ddm', 'congel', 'plan'];
            const validResponses = [a, b, c].filter(response => 
                response.length > 5 && measures.some(m => response.includes(m))
            );
            const isCorrect = validResponses.length >= 2;
            
            document.getElementById('validate20').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Mesures pertinentes !</div>
                    <div class="feedback-explanation">Excellentes propositions ! Vos mesures individuelles sont concr√®tes et facilement applicables √† la maison. Chaque fran√ßais jette 30 kg par an, ces actions peuvent consid√©rablement r√©duire ce gaspillage.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Impact de vos mesures :</strong><br>
                        Vos propositions s'attaquent aux principales causes du gaspillage domestique : achats excessifs, mauvaise conservation, m√©connaissance des dates. C'est exactement ce qu'il faut faire !
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Mesures √† pr√©ciser</div>
                    <div class="feedback-explanation">Chaque fran√ßais jette 30 kg de nourriture par an ! Il existe pourtant des mesures individuelles simples et efficaces pour r√©duire drastiquement ce gaspillage √† la maison.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos r√©ponses :</strong><br>
                            1. ${document.getElementById('mesure20a').value || 'Non renseign√©e'}<br>
                            2. ${document.getElementById('mesure20b').value || 'Non renseign√©e'}<br>
                            3. ${document.getElementById('mesure20c').value || 'Non renseign√©e'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Mesures efficaces :</strong><br>
                            1. Faire une liste de courses avant d'acheter<br>
                            2. R√©utiliser les restes pour cr√©er de nouveaux plats<br>
                            3. V√©rifier et comprendre les DLC/DDM<br>
                            4. Adapter les portions √† ses vrais besoins<br>
                            5. Bien ranger son frigo (FIFO : premier entr√©, premier sorti)
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi ces mesures fonctionnent ?</strong><br>
                        <strong>Liste de courses :</strong> √âvite les achats impulsifs et inadapt√©s aux besoins r√©els<br>
                        <strong>Restes transform√©s :</strong> 67% du gaspillage vient des restes non consomm√©s<br>
                        <strong>DLC vs DDM :</strong> Comprendre que DDM d√©pass√©e ‚â† danger (contrairement √† DLC)<br>
                        <strong>Portions adapt√©es :</strong> Cuisiner selon l'app√©tit r√©el, pas selon les habitudes<br>
                        <strong>Gestion frigo :</strong> Organisation m√©thodique pour √©viter l'oubli et la p√©remption
                    </div>
                `;
            }
        }
        
        function validateSolution(questionNum) {
            const input = document.getElementById(`input${questionNum}`);
            const text = input.value.toLowerCase();
            const solutions = ['doggy', 'don', 'portion', 'menu', 'composte', 'pes√©e'];
            const isCorrect = solutions.some(s => text.includes(s)) && text.length > 20;
            document.getElementById('validate21').style.display = 'none';
            
            if (isCorrect) {
                input.classList.add('correct');
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Solution pertinente !</div>
                    <div class="feedback-explanation">Excellente proposition ! Votre solution est concr√®te et adapt√©e au contexte des restaurants. Les professionnels de la restauration ont plusieurs leviers d'action efficaces contre le gaspillage.</div>
                `;
            } else {
                input.classList.add('incorrect');
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå ${input.value.trim() === '' ? 'R√©ponse non renseign√©e' : 'Solution √† pr√©ciser'}</div>
                    <div class="feedback-explanation">Un restaurant qui jette 20 kg de nourriture par jour (soit 7,3 tonnes par an !) dispose de plusieurs leviers d'action efficaces pour r√©duire drastiquement ce gaspillage.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre r√©ponse :</strong><br>
                            ${input.value || 'Aucune r√©ponse fournie'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Solutions efficaces :</strong><br>
                            ‚Ä¢ Proposer des doggy-bag syst√©matiquement<br>
                            ‚Ä¢ Faire des dons aux associations<br>
                            ‚Ä¢ Adapter les portions aux app√©tits<br>
                            ‚Ä¢ Diversifier les menus selon les restes<br>
                            ‚Ä¢ Composter les d√©chets organiques
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi ces solutions ?</strong><br>
                        <strong>Doggy-bag :</strong> Permet aux clients d'emporter leurs restes, obligatoire depuis la loi AGEC<br>
                        <strong>Dons alimentaires :</strong> B√©n√©ficient aux associations et d√©fiscalisent partiellement<br>
                        <strong>Adaptation portions :</strong> √âvite le gaspillage √† la source tout en satisfaisant le client<br>
                        <strong>Menus flexibles :</strong> Valorisent les invendus en cr√©ations culinaires<br>
                        <strong>Compostage :</strong> Transforme les d√©chets in√©vitables en ressource utile
                    </div>
                `;
            }
        }
        
        function validateHierarchie(questionNum) {
            const a = document.getElementById('hier23a').value;
            const b = document.getElementById('hier23b').value;
            const c = document.getElementById('hier23c').value;
            
            const isCorrect = a === '1' && b === '2' && c === '3';
            document.getElementById('validate23').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Hi√©rarchisation logique parfaite !</div>
                    <div class="feedback-explanation">Excellent raisonnement ! Vous avez bien hi√©rarchis√© les mesures selon leur efficacit√©. Cette logique privil√©gie la pr√©vention (liste de courses) avant la correction (restes) puis les outils compl√©mentaires.</div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Logique de cette hi√©rarchie :</strong><br>
                        <strong>1. Liste de courses</strong> = PR√âVENTION : √©vite l'achat excessif √† la source (plus efficace)<br>
                        <strong>2. R√©utiliser les restes</strong> = CORRECTION : valorise ce qui est d√©j√† achet√© (efficacit√© moyenne)<br>
                        <strong>3. Apps anti-gaspillage</strong> = COMPL√âMENT : aide ponctuelle (moins syst√©matique)<br><br>
                        Cette approche respecte le principe "mieux vaut pr√©venir que gu√©rir" !
                    </div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Hi√©rarchisation √† revoir</div>
                    <div class="feedback-explanation">La hi√©rarchisation des mesures doit suivre une logique d'efficacit√© : pr√©vention > correction > compl√©ment. R√©fl√©chissez √† ce qui √©vite le gaspillage √† la source versus ce qui le limite apr√®s coup.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre hi√©rarchie :</strong><br>
                            ${a || '[vide]'} - Faire une liste de courses<br>
                            ${b || '[vide]'} - R√©utiliser les restes<br>
                            ${c || '[vide]'} - Applications anti-gaspillage
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Hi√©rarchie logique :</strong><br>
                            1 - Faire une liste de courses<br>
                            2 - R√©utiliser les restes<br>
                            3 - Applications anti-gaspillage
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi cette hi√©rarchie ?</strong><br>
                        <strong>Liste de courses (1)</strong> : Action pr√©ventive la plus efficace car elle √©vite le surachat<br>
                        - Impact : -50% du gaspillage si bien appliqu√©e<br>
                        - Avantage : √©conomies + moins de g√¢chis<br><br>
                        <strong>R√©utiliser les restes (2)</strong> : Action corrective efficace pour valoriser l'existant<br>
                        - Impact : -30% du gaspillage domestique<br>
                        - Avantage : cr√©ativit√© culinaire + √©conomies<br><br>
                        <strong>Applications (3)</strong> : Compl√©ment utile mais pas syst√©matique<br>
                        - Impact : -10-15% selon utilisation<br>
                        - Avantage : solutions ponctuelles et g√©olocalis√©es
                    </div>
                `;
            }
        }
        
        function validateArgumentation(questionNum) {
            const arg1 = document.getElementById('arg24a').value.toLowerCase();
            const arg2 = document.getElementById('arg24b').value.toLowerCase();
            
            const socialKeywords = ['travail', 'social', '√©quit√©', 'droit', 'condition', 'humain'];
            const economicKeywords = ['prix', '√©conomique', 'revenu', 'juste', 'd√©veloppement', 'pauvret√©'];
            
            const hasSocialArg = socialKeywords.some(k => arg1.includes(k)) && arg1.length > 20;
            const hasEconomicArg = economicKeywords.some(k => arg2.includes(k)) && arg2.length > 20;
            const isCorrect = hasSocialArg && hasEconomicArg;
            
            document.getElementById('validate24').style.display = 'none';
            
            if (isCorrect) {
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Argumentation convaincante !</div>
                    <div class="feedback-explanation">Excellents arguments ! Vous avez parfaitement saisi les deux dimensions principales du commerce √©quitable : sociale et √©conomique. Cette approche globale est ce qui diff√©rencie le commerce √©quitable du commerce traditionnel.</div>
                `;
            } else {
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå Argumentation √† structurer</div>
                    <div class="feedback-explanation">Pour argumenter efficacement en faveur du commerce √©quitable, il faut mobiliser ses deux dimensions principales : sociale et √©conomique.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Vos arguments :</strong><br>
                            <strong>Argument 1 :</strong> ${document.getElementById('arg24a').value || 'Non renseign√©'}<br>
                            <strong>Argument 2 :</strong> ${document.getElementById('arg24b').value || 'Non renseign√©'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Arguments solides :</strong><br>
                            <strong>Social :</strong> Garantit conditions de travail d√©centes et droits humains<br>
                            <strong>√âconomique :</strong> Assure prix justes et revenus stables aux producteurs
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Comment bien argumenter ?</strong><br>
                        <strong>Dimension sociale :</strong> Le commerce √©quitable interdit le travail des enfants, garantit des conditions d√©centes, respecte l'√©galit√© hommes-femmes.<br>
                        <strong>Dimension √©conomique :</strong> Prix minimum garanti (20-30% au-dessus du march√©), relations stables, prime de d√©veloppement pour les communaut√©s.
                    </div>
                `;
            }
        }
        
        function validateJustification(questionNum) {
            const input = document.getElementById('input25');
            const text = input.value.toLowerCase();
            const keywords = ['local', 'saison', 'producteur', 'transport', 'direct', 'circuit', 'proximit√©'];
            const isCorrect = keywords.filter(k => text.includes(k)).length >= 2 && text.length > 40;
            document.getElementById('validate25').style.display = 'none';
            
            if (isCorrect) {
                input.classList.add('correct');
                validateAnswer(questionNum, true);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚úÖ Justification excellente !</div>
                    <div class="feedback-explanation">Parfaite justification ! Vous avez bien cern√© les avantages des AMAP : circuit court, saisonnalit√©, soutien aux producteurs locaux. Votre argumentation est solide et structur√©e.</div>
                `;
            } else {
                input.classList.add('incorrect');
                validateAnswer(questionNum, false);
                document.getElementById(`feedback${questionNum}`).innerHTML = `
                    <div class="feedback-title">‚ùå ${input.value.trim() === '' ? 'R√©ponse non renseign√©e' : 'Justification insuffisante'}</div>
                    <div class="feedback-explanation">Pour justifier le choix des AMAP par rapport aux supermarch√©s, il faut comparer concr√®tement leurs avantages respectifs en mati√®re d'√©coresponsabilit√©.</div>
                    <div class="answer-comparison">
                        <div class="user-answer">
                            <strong>‚ùå Votre justification :</strong><br>
                            ${input.value || 'Aucune r√©ponse fournie'}
                        </div>
                        <div class="correct-answer">
                            <strong>‚úÖ Justification compl√®te :</strong><br>
                            Les AMAP privil√©gient les circuits courts, respectent la saisonnalit√©, soutiennent directement les producteurs locaux, contrairement aux supermarch√©s qui favorisent les circuits longs et la standardisation.
                        </div>
                    </div>
                    <div class="feedback-explanation" style="margin-top: 15px;">
                        <strong>üéì Pourquoi privil√©gier les AMAP ?</strong><br>
                        <strong>Circuits courts :</strong> Maximum 1 interm√©diaire ‚Üí r√©duction drastique du transport et des √©missions CO2<br>
                        <strong>Saisonnalit√© :</strong> Pas de serres chauff√©es ni d'importations lointaines, respect du rythme naturel<br>
                        <strong>Soutien direct :</strong> 100% du prix va au producteur vs 15-20% en supermarch√©<br>
                        <strong>Lien social :</strong> Connaissance du producteur, transparence sur les m√©thodes de culture<br>
                        <strong>Biodiversit√© :</strong> Vari√©t√©s locales et anciennes vs standardisation industrielle<br><br>
                        Les supermarch√©s, malgr√© leurs efforts, restent dans une logique de volumes et de profits qui privil√©gie souvent la rentabilit√© sur l'√©coresponsabilit√©.
                    </div>
                `;
            }
        }
    </script>
</body>
</html>