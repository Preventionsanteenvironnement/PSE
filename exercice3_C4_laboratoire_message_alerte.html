<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C.4 - Laboratoire Message d'Alerte - Premi√®re Bac Pro</title>
    <style>
        /* Import OpenDyslexie pour accessibilit√© */
        @import url('https://fonts.googleapis.com/css2?family=OpenDyslexic:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap');

        /* Variables CSS */
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
            
            --competence-c1: #E74C3C;
            --competence-c2: #3498DB;
            --competence-c3: #2ECC71;
            --competence-c4: #F39C12;
            --competence-c5: #9B59B6;
            --competence-c6: #1ABC9C;
        }

        /* Reset et base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'OpenDyslexic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Responsive Mobile-First */
        .container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .container {
                padding: 20px;
                max-width: 95vw;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1000px;
                padding: 30px;
            }
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 8px solid var(--primary-pse);
        }

        .cadre-pedagogique h2 {
            color: var(--primary-pse);
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .module-info .objectif {
            background: rgba(46, 134, 171, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-pse);
        }

        .competences-travaillees h3 {
            color: var(--dark-pse);
            margin: 20px 0 15px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .competences-list {
            list-style: none;
            padding: 0;
        }

        .competences-list li {
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 5px solid;
            background: rgba(255,255,255,0.7);
            font-size: 0.95rem;
        }

        .competences-list li:nth-child(1) { border-left-color: var(--competence-c1); }
        .competences-list li:nth-child(2) { border-left-color: var(--competence-c2); }
        .competences-list li:nth-child(3) { border-left-color: var(--competence-c4); }
        .competences-list li:nth-child(4) { border-left-color: var(--competence-c6); }

        .niveau-cible {
            background: linear-gradient(45deg, var(--warning-pse), #FFD93D);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            font-weight: 600;
            margin-top: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Exercice principal */
        .exercice-principal {
            background: rgba(255,255,255,0.98);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        /* En-t√™te laboratoire */
        .lab-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .lab-header::before {
            content: 'üî¨';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            opacity: 0.3;
        }

        .lab-header h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .lab-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-weight: 600;
            border: 2px solid rgba(255,255,255,0.3);
        }

        /* Instructions d'interaction */
        .instructions-interaction {
            background: #E3F2FD;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .instructions-interaction h5 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .instructions-interaction p {
            color: #424242;
            font-size: 0.9rem;
            margin: 0;
        }

        /* Workspace de construction */
        .message-workspace {
            background: #ffffff;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            position: relative;
        }

        .workspace-title {
            color: var(--primary-pse);
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        /* T√©l√©phone virtuel */
        .phone-container {
            background: linear-gradient(145deg, #2C3E50, #34495E);
            border-radius: 25px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            max-width: 350px;
            margin: 20px auto;
        }

        .phone-screen {
            background: #000000;
            border-radius: 15px;
            padding: 20px 15px;
            color: #00ff00;
            font-family: monospace;
            font-size: 0.9rem;
            min-height: 200px;
            position: relative;
            overflow-y: auto;
            max-height: 300px;
        }

        .phone-header {
            color: #ffff00;
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        .call-display {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.85rem;
            white-space: pre-wrap;
        }

        .operator-response {
            color: #ffaa00;
            font-style: italic;
            margin: 5px 0;
        }

        /* Zones de construction du message */
        .message-builder {
            display: grid;
            gap: 20px;
            margin: 25px 0;
        }

        .builder-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 5px solid;
            position: relative;
        }

        .builder-section.qui { border-color: var(--competence-c1); }
        .builder-section.ou { border-color: var(--competence-c2); }
        .builder-section.quoi { border-color: var(--competence-c6); }
        .builder-section.combien { border-color: var(--competence-c4); }
        .builder-section.etat { border-color: var(--competence-c3); }

        .section-title {
            font-weight: 600;
            color: var(--dark-pse);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }

        /* √âl√©ments √† s√©lectionner */
        .element-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }

        .element-option {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 3px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            font-size: 0.9rem;
        }

        .element-option:hover {
            border-color: var(--primary-pse);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(46, 134, 171, 0.2);
        }

        .element-option.selected {
            border-color: var(--success-pse);
            background: linear-gradient(145deg, #D4EDDA, #C3E6CB);
            transform: scale(1.02);
            color: #155724;
        }

        .element-option.used {
            opacity: 0.6;
            pointer-events: none;
            background: #e9ecef;
            color: #6c757d;
        }

        .element-option::after {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .element-option.selected::after {
            content: '‚úì';
            background: var(--success-pse);
            border-color: var(--success-pse);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }

        /* Zone de construction du message */
        .message-construction {
            background: rgba(255, 255, 255, 0.9);
            border: 3px dashed var(--primary-pse);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            min-height: 150px;
            position: relative;
        }

        .construction-placeholder {
            color: #6c757d;
            font-style: italic;
            text-align: center;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100px;
        }

        .message-preview {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--success-pse);
            display: none;
        }

        .message-preview.active {
            display: block;
        }

        .preview-label {
            font-weight: 600;
            color: var(--success-pse);
            margin-bottom: 10px;
        }

        /* Num√©ros d'urgence */
        .emergency-numbers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .emergency-number {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 3px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .emergency-number:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .emergency-number.selected {
            border-color: var(--warning-pse);
            background: linear-gradient(145deg, #FFF3CD, #FFF8DC);
            transform: scale(1.05);
        }

        .number-display {
            font-size: 2rem;
            font-weight: bold;
            color: var(--danger-pse);
            margin-bottom: 10px;
        }

        .number-service {
            font-weight: 600;
            color: var(--dark-pse);
            margin-bottom: 5px;
        }

        .number-description {
            font-size: 0.85rem;
            color: #6c757d;
        }

        /* Sc√©narios d'accident */
        .scenario-container {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            position: relative;
        }

        .scenario-container::before {
            content: 'üö®';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            opacity: 0.5;
        }

        .scenario-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .scenario-details {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        /* Feedback et validation */
        .validation-container {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-pse), #4A90E2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, var(--success-pse), #27AE60);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, var(--warning-pse), #FFD93D);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Feedback explicite avec fond opaque */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8); /* Opaque pour lisibilit√© mobile */
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .feedback-card {
            background: linear-gradient(145deg, #ffffff, #f8f9fa); /* Compl√®tement opaque */
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-height: 80vh;
            overflow-y: auto;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .feedback-header.correct {
            color: var(--success-pse);
        }

        .feedback-header.incorrect {
            color: var(--warning-pse);
        }

        .feedback-header h4 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .correction-explicite {
            background: #ffffff; /* Fond opaque */
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--success-pse);
        }

        .explication-competence {
            background: rgba(46, 134, 171, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .astuce-bac {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: 500;
        }

        /* Progress tracker */
        .progress-tracker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
        }

        .progress-item {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            border-top: 4px solid;
            background: rgba(255,255,255,0.8);
        }

        .progress-item.qui { border-color: var(--competence-c1); }
        .progress-item.ou { border-color: var(--competence-c2); }
        .progress-item.quoi { border-color: var(--competence-c6); }
        .progress-item.combien { border-color: var(--competence-c4); }
        .progress-item.etat { border-color: var(--competence-c3); }

        .progress-item h5 {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .progress-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 auto;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-status.complete {
            background: var(--success-pse);
            color: white;
        }

        .progress-status.complete::after {
            content: '‚úì';
            font-size: 12px;
            font-weight: bold;
        }

        /* Sigles explicites */
        .sigle-explication {
            background: #E8F5E8;
            border: 2px solid var(--success-pse);
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .sigle-explication strong {
            color: var(--success-pse);
        }

        /* RGPD Footer √©pur√© */
        .rgpd-notice {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 10px;
            margin-top: 30px;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 767px) {
            .element-options {
                grid-template-columns: 1fr;
            }
            
            .emergency-numbers {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .phone-container {
                margin: 15px 0;
            }
            
            .number-display {
                font-size: 1.5rem;
            }
        }

        /* √âtats cach√©s */
        .hidden {
            display: none;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 1s infinite;
        }

        /* Effet de compl√©tion */
        .completion-effect {
            position: relative;
            overflow: hidden;
        }

        .completion-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
            animation: shine 0.8s ease-out;
        }

        @keyframes shine {
            to { left: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module C.4 : L'assistance et le secours en milieu professionnel</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Agir de mani√®re responsable face √† une situation d'urgence en milieu professionnel
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                    <li><strong>C6</strong> - Communiquer √† l'√©crit et √† l'oral avec une syntaxe claire et un vocabulaire adapt√©</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- Exercice principal -->
        <div class="exercice-principal">
            <!-- En-t√™te laboratoire -->
            <div class="lab-header">
                <h3>üî¨ LABORATOIRE VIRTUEL : CONSTRUCTION DU MESSAGE D'ALERTE PARFAIT</h3>
                <p>Apprenez √† construire un message d'alerte efficace √©tape par √©tape pour sauver des vies en situation d'urgence</p>
                <div class="lab-badge">EXP√âRIMENTATION INTERACTIVE</div>
            </div>

            <!-- Instructions d'interaction -->
            <div class="instructions-interaction">
                <h5>üì± COMMENT MANIPULER :</h5>
                <p><strong>1.</strong> Choisissez le num√©ro d'urgence appropri√© pour le sc√©nario
                <strong>2.</strong> S√©lectionnez les bons √©l√©ments pour chaque partie du message (QUI-O√ô-QUOI-COMBIEN-√âTAT)
                <strong>3.</strong> Voyez votre message se construire en temps r√©el dans le t√©l√©phone virtuel
                <strong>4.</strong> Validez pour tester l'efficacit√© de votre message d'alerte</p>
            </div>

            <!-- Sc√©nario d'urgence -->
            <div class="scenario-container" id="currentScenario">
                <div class="scenario-title">üö® SC√âNARIO 1 : ACCIDENT DE MANUTENTION</div>
                <div class="scenario-details">
                    <p><strong>Lieu :</strong> Entrep√¥t LogiStock, Zone industrielle Nord, 25 rue des Entrepreneurs, 44300 Nantes</p>
                    <p><strong>Accident :</strong> Pierre, cariste de 28 ans, a chut√© de son chariot √©l√©vateur (hauteur 2 m√®tres)</p>
                    <p><strong>√âtat :</strong> Pierre est conscient mais ne peut pas bouger sa jambe droite, se plaint de douleurs vives</p>
                    <p><strong>Contexte :</strong> 14h45, √©quipe de 12 personnes pr√©sente, acc√®s parking possible pour ambulance</p>
                    <p><strong>T√©moin :</strong> Vous √™tes Sophie Martin, responsable logistique, vous avez vu l'accident</p>
                </div>
            </div>

            <!-- S√©lection du num√©ro d'urgence -->
            <div class="message-workspace">
                <h4 class="workspace-title">üìû √âTAPE 1 : CHOISIR LE NUM√âRO D'URGENCE</h4>
                
                <div class="sigle-explication">
                    <strong>Rappel :</strong> 
                    <strong>SAMU (15) :</strong> Service d'Aide M√©dicale Urgente - Urgences m√©dicales<br>
                    <strong>Pompiers (18) :</strong> Secours aux personnes, incendies, accidents<br>
                    <strong>Num√©ro europ√©en (112) :</strong> Urgences depuis l'√©tranger<br>
                    <strong>SMS (114) :</strong> Personnes sourdes et malentendantes
                </div>

                <div class="emergency-numbers">
                    <div class="emergency-number" data-number="15" data-correct="true">
                        <div class="number-display">15</div>
                        <div class="number-service">SAMU</div>
                        <div class="number-description">Urgences m√©dicales</div>
                    </div>
                    <div class="emergency-number" data-number="18" data-correct="true">
                        <div class="number-display">18</div>
                        <div class="number-service">POMPIERS</div>
                        <div class="number-description">Secours aux personnes</div>
                    </div>
                    <div class="emergency-number" data-number="112" data-correct="false">
                        <div class="number-display">112</div>
                        <div class="number-service">EUROPE</div>
                        <div class="number-description">Depuis l'√©tranger</div>
                    </div>
                    <div class="emergency-number" data-number="114" data-correct="false">
                        <div class="number-display">114</div>
                        <div class="number-service">SMS</div>
                        <div class="number-description">Sourds/malentendants</div>
                    </div>
                </div>
            </div>

            <!-- Construction du message -->
            <div class="message-workspace">
                <h4 class="workspace-title">üí¨ √âTAPE 2 : CONSTRUIRE LE MESSAGE D'ALERTE</h4>
                
                <div class="message-builder">
                    <!-- QUI appelle -->
                    <div class="builder-section qui">
                        <div class="section-title">
                            <div class="section-icon" style="background: var(--competence-c1);">1</div>
                            <strong>QUI appelle ? (Identit√© + num√©ro)</strong>
                        </div>
                        <div class="element-options">
                            <div class="element-option" data-type="qui" data-correct="true">
                                "Je suis Sophie Martin, responsable logistique"
                            </div>
                            <div class="element-option" data-type="qui" data-correct="false">
                                "Bonjour, je vous appelle pour un probl√®me"
                            </div>
                            <div class="element-option" data-type="qui" data-correct="true">
                                "Mon num√©ro : 06 45 78 32 19"
                            </div>
                            <div class="element-option" data-type="qui" data-correct="false">
                                "C'est urgent, venez vite !"
                            </div>
                        </div>
                    </div>

                    <!-- O√ô se passe l'accident -->
                    <div class="builder-section ou">
                        <div class="section-title">
                            <div class="section-icon" style="background: var(--competence-c2);">2</div>
                            <strong>O√ô se passe l'accident ? (Adresse pr√©cise)</strong>
                        </div>
                        <div class="element-options">
                            <div class="element-option" data-type="ou" data-correct="true">
                                "Entrep√¥t LogiStock, 25 rue des Entrepreneurs, 44300 Nantes"
                            </div>
                            <div class="element-option" data-type="ou" data-correct="false">
                                "Dans un entrep√¥t √† Nantes"
                            </div>
                            <div class="element-option" data-type="ou" data-correct="false">
                                "Zone industrielle Nord"
                            </div>
                            <div class="element-option" data-type="ou" data-correct="true">
                                "Parking accessible pour ambulance c√¥t√© rue"
                            </div>
                        </div>
                    </div>

                    <!-- QUOI s'est pass√© -->
                    <div class="builder-section quoi">
                        <div class="section-title">
                            <div class="section-icon" style="background: var(--competence-c6);">3</div>
                            <strong>QUOI s'est-il pass√© ? (Nature de l'accident)</strong>
                        </div>
                        <div class="element-options">
                            <div class="element-option" data-type="quoi" data-correct="true">
                                "Chute de chariot √©l√©vateur, hauteur 2 m√®tres"
                            </div>
                            <div class="element-option" data-type="quoi" data-correct="false">
                                "Accident de travail dans l'entrep√¥t"
                            </div>
                            <div class="element-option" data-type="quoi" data-correct="false">
                                "Un employ√© est bless√©"
                            </div>
                            <div class="element-option" data-type="quoi" data-correct="true">
                                "Accident √† 14h45, j'ai √©t√© t√©moin direct"
                            </div>
                        </div>
                    </div>

                    <!-- COMBIEN de personnes -->
                    <div class="builder-section combien">
                        <div class="section-title">
                            <div class="section-icon" style="background: var(--competence-c4);">4</div>
                            <strong>COMBIEN de victimes ? (Nombre exact)</strong>
                        </div>
                        <div class="element-options">
                            <div class="element-option" data-type="combien" data-correct="true">
                                "Une seule victime : Pierre, cariste, 28 ans"
                            </div>
                            <div class="element-option" data-type="combien" data-correct="false">
                                "Plusieurs bless√©s dans l'entrep√¥t"
                            </div>
                            <div class="element-option" data-type="combien" data-correct="false">
                                "Je ne sais pas exactement combien"
                            </div>
                            <div class="element-option" data-type="combien" data-correct="false">
                                "Toute l'√©quipe est en danger"
                            </div>
                        </div>
                    </div>

                    <!-- √âTAT de la victime -->
                    <div class="builder-section etat">
                        <div class="section-title">
                            <div class="section-icon" style="background: var(--competence-c3);">5</div>
                            <strong>√âTAT de la victime ? (Conscience, respiration, blessures)</strong>
                        </div>
                        <div class="element-options">
                            <div class="element-option" data-type="etat" data-correct="true">
                                "Conscient, respire normalement"
                            </div>
                            <div class="element-option" data-type="etat" data-correct="false">
                                "Je ne sais pas, il ne bouge plus"
                            </div>
                            <div class="element-option" data-type="etat" data-correct="true">
                                "Ne peut pas bouger sa jambe droite, douleurs vives"
                            </div>
                            <div class="element-option" data-type="etat" data-correct="false">
                                "Il va bien, juste un peu secou√©"
                            </div>
                        </div>
                    </div>
                </div>

                <!-- T√©l√©phone virtuel avec aper√ßu du message -->
                <div class="phone-container">
                    <div class="phone-screen">
                        <div class="phone-header">üìû APPEL SAMU - EN COURS</div>
                        <div class="call-display">
                            <div class="operator-response">Op√©rateur : "SAMU 44, j'√©coute."</div>
                            <div id="messagePreview">
                                <em>Votre message appara√Ætra ici au fur et √† mesure...</em>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bouton de validation -->
                <div class="validation-container">
                    <button class="btn btn-success" onclick="validateMessage()" id="validateBtn" disabled>
                        üöÄ TESTER MON MESSAGE D'ALERTE
                    </button>
                    <p><em>S√©lectionnez au moins un √©l√©ment par section pour activer la validation</em></p>
                </div>
            </div>

            <!-- Progress tracker -->
            <div class="progress-tracker">
                <div class="progress-item qui">
                    <h5>QUI</h5>
                    <div class="progress-status" id="progressQui"></div>
                    <small>Identit√©</small>
                </div>
                <div class="progress-item ou">
                    <h5>O√ô</h5>
                    <div class="progress-status" id="progressOu"></div>
                    <small>Localisation</small>
                </div>
                <div class="progress-item quoi">
                    <h5>QUOI</h5>
                    <div class="progress-status" id="progressQuoi"></div>
                    <small>Nature accident</small>
                </div>
                <div class="progress-item combien">
                    <h5>COMBIEN</h5>
                    <div class="progress-status" id="progressCombien"></div>
                    <small>Nb victimes</small>
                </div>
                <div class="progress-item etat">
                    <h5>√âTAT</h5>
                    <div class="progress-status" id="progressEtat"></div>
                    <small>Bilan m√©dical</small>
                </div>
            </div>
        </div>

        <!-- RGPD Footer √©pur√© -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <!-- Overlay de feedback (cach√© par d√©faut) -->
    <div class="feedback-overlay hidden" id="feedbackOverlay">
        <div class="feedback-card" id="feedbackCard">
            <div class="feedback-header" id="feedbackHeader">
                <h4 id="feedbackTitle">R√©sultat de votre message d'alerte</h4>
                <p id="feedbackSubtitle">Analyse de l'efficacit√©</p>
            </div>
            
            <div class="correction-explicite" id="correctionSection">
                <h4>‚úÖ ANALYSE DU MESSAGE</h4>
                <div id="messageAnalysis">Analyse d√©taill√©e</div>
            </div>

            <div class="explication-competence" id="competenceExplanation">
                <strong>üí° Comp√©tences mobilis√©es :</strong>
                <div id="competencesList">
                    <p><strong>C1 :</strong> Traitement des informations essentielles (identit√©, localisation)</p>
                    <p><strong>C2 :</strong> Analyse de la situation d'urgence (prioriser les infos vitales)</p>
                    <p><strong>C4 :</strong> Solution de communication adapt√©e au service contact√©</p>
                    <p><strong>C6 :</strong> Communication claire et structur√©e en situation de stress</p>
                </div>
            </div>

            <div class="astuce-bac" id="astuceBac">
                <strong>üéØ ASTUCE BAC :</strong>
                <span id="astuceText">M√©morisez la structure QUI-O√ô-QUOI-COMBIEN-√âTAT. Message efficace = secours rapides = vies sauv√©es !</span>
            </div>

            <div class="validation-container">
                <button class="btn btn-warning" onclick="nextScenario()" id="nextScenarioBtn">SC√âNARIO SUIVANT</button>
                <button class="btn btn-primary" onclick="showSummary()" id="summaryBtn" style="display: none;">VOIR LE BILAN FINAL</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let selectedElements = {
            numero: null,
            qui: [],
            ou: [],
            quoi: [],
            combien: [],
            etat: []
        };
        let currentScenarioNumber = 1;
        let totalScenarios = 3;
        let scenarioScores = [];
        
        // Donn√©es des sc√©narios
        const scenarios = {
            1: {
                title: "ACCIDENT DE MANUTENTION",
                description: {
                    lieu: "Entrep√¥t LogiStock, Zone industrielle Nord, 25 rue des Entrepreneurs, 44300 Nantes",
                    accident: "Pierre, cariste de 28 ans, a chut√© de son chariot √©l√©vateur (hauteur 2 m√®tres)",
                    etat: "Pierre est conscient mais ne peut pas bouger sa jambe droite, se plaint de douleurs vives",
                    contexte: "14h45, √©quipe de 12 personnes pr√©sente, acc√®s parking possible pour ambulance",
                    temoin: "Vous √™tes Sophie Martin, responsable logistique, vous avez vu l'accident"
                },
                correctNumbers: ["15", "18"]
            },
            2: {
                title: "INCENDIE ATELIER",
                description: {
                    lieu: "Ateliers M√©talPro, 15 avenue de l'Industrie, 69100 Villeurbanne",
                    accident: "Feu √©lectrique sur machine-outil, fum√©es √©paisses dans l'atelier de soudure",
                    etat: "Pas de bless√© visible mais 2 soudeurs manquent √† l'appel dans la zone enfum√©e",
                    contexte: "10h30, 8 personnes √©vacu√©es, acc√®s pompiers par cour int√©rieure",
                    temoin: "Vous √™tes Alex Dupont, chef d'atelier, vous avez d√©clench√© l'alarme"
                },
                correctNumbers: ["18"]
            },
            3: {
                title: "MALAISE CARDIAQUE",
                description: {
                    lieu: "Bureau Assur-Conseil, 3√®me √©tage, 45 boulevard Haussmann, 75009 Paris",
                    accident: "Mme Durand, 55 ans, s'est effondr√©e lors d'une r√©union, ne r√©pond plus",
                    etat: "Inconsciente, respiration faible et irr√©guli√®re, l√®vres bleu√¢tres",
                    contexte: "15h20, 6 coll√®gues pr√©sents, ascenseur accessible pour brancardage",
                    temoin: "Vous √™tes Jordan Moreau, assistant(e) de direction, form√©(e) PSC1"
                },
                correctNumbers: ["15"]
            }
        };

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion des num√©ros d'urgence
            const emergencyNumbers = document.querySelectorAll('.emergency-number');
            emergencyNumbers.forEach(number => {
                number.addEventListener('click', function() {
                    selectEmergencyNumber(this);
                });
            });

            // Gestion des √©l√©ments du message
            const elementOptions = document.querySelectorAll('.element-option');
            elementOptions.forEach(option => {
                option.addEventListener('click', function() {
                    selectElement(this);
                });
            });
        });

        // Fonction de s√©lection du num√©ro d'urgence
        function selectEmergencyNumber(element) {
            // D√©s√©lectionner les autres
            const allNumbers = document.querySelectorAll('.emergency-number');
            allNumbers.forEach(num => num.classList.remove('selected'));
            
            // S√©lectionner le num√©ro cliqu√©
            element.classList.add('selected');
            selectedElements.numero = element.getAttribute('data-number');
            
            // Mettre √† jour le t√©l√©phone virtuel
            updatePhoneDisplay();
        }

        // Fonction de s√©lection des √©l√©ments du message
        function selectElement(element) {
            const type = element.getAttribute('data-type');
            const isCorrect = element.getAttribute('data-correct') === 'true';
            
            // Toggle la s√©lection
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                // Retirer de la s√©lection
                const index = selectedElements[type].findIndex(item => item.element === element);
                if (index > -1) {
                    selectedElements[type].splice(index, 1);
                }
            } else {
                element.classList.add('selected');
                // Ajouter √† la s√©lection
                selectedElements[type].push({
                    element: element,
                    text: element.textContent.trim(),
                    correct: isCorrect
                });
            }
            
            // Mettre √† jour l'affichage
            updatePhoneDisplay();
            updateProgress();
            updateValidationButton();
        }

        // Fonction de mise √† jour de l'affichage du t√©l√©phone
        function updatePhoneDisplay() {
            const messagePreview = document.getElementById('messagePreview');
            let message = '';
            
            if (selectedElements.numero) {
                const serviceMap = {
                    '15': 'SAMU',
                    '18': 'POMPIERS',
                    '112': 'EUROPE',
                    '114': 'SMS'
                };
                message += `<div class="operator-response">Op√©rateur ${serviceMap[selectedElements.numero]} : "J'√©coute."</div>`;
                message += '<br>';
            }
            
            // Construire le message avec les √©l√©ments s√©lectionn√©s
            const sections = ['qui', 'ou', 'quoi', 'combien', 'etat'];
            sections.forEach(section => {
                if (selectedElements[section] && selectedElements[section].length > 0) {
                    selectedElements[section].forEach(item => {
                        message += `<div style="color: #00ff00;">${item.text}</div>`;
                    });
                }
            });
            
            if (message === '') {
                message = '<em>Votre message appara√Ætra ici au fur et √† mesure...</em>';
            }
            
            messagePreview.innerHTML = message;
        }

        // Fonction de mise √† jour du progr√®s
        function updateProgress() {
            const sections = ['qui', 'ou', 'quoi', 'combien', 'etat'];
            sections.forEach(section => {
                const progressElement = document.getElementById(`progress${section.charAt(0).toUpperCase() + section.slice(1)}`);
                if (selectedElements[section] && selectedElements[section].length > 0) {
                    progressElement.classList.add('complete');
                } else {
                    progressElement.classList.remove('complete');
                }
            });
        }

        // Fonction de mise √† jour du bouton de validation
        function updateValidationButton() {
            const validateBtn = document.getElementById('validateBtn');
            const hasNumber = selectedElements.numero !== null;
            const sections = ['qui', 'ou', 'quoi', 'combien', 'etat'];
            const hasAllSections = sections.every(section => 
                selectedElements[section] && selectedElements[section].length > 0
            );
            
            validateBtn.disabled = !(hasNumber && hasAllSections);
            
            if (!validateBtn.disabled) {
                validateBtn.classList.add('pulse');
            } else {
                validateBtn.classList.remove('pulse');
            }
        }

        // Fonction de validation du message
        function validateMessage() {
            const scenario = scenarios[currentScenarioNumber];
            
            // Calculer le score
            let score = 0;
            let feedback = [];
            
            // V√©rifier le num√©ro d'urgence
            const isNumberCorrect = scenario.correctNumbers.includes(selectedElements.numero);
            if (isNumberCorrect) {
                score += 20;
                feedback.push(`‚úÖ <strong>Num√©ro d'urgence :</strong> ${selectedElements.numero} est appropri√© pour ce type d'urgence.`);
            } else {
                feedback.push(`‚ùå <strong>Num√©ro d'urgence :</strong> Pour ce type d'urgence, pr√©f√©rez ${scenario.correctNumbers.join(' ou ')}.`);
            }
            
            // V√©rifier chaque section
            const sections = ['qui', 'ou', 'quoi', 'combien', 'etat'];
            sections.forEach(section => {
                const sectionElements = selectedElements[section];
                const correctCount = sectionElements.filter(item => item.correct).length;
                const totalCount = sectionElements.length;
                
                if (correctCount > 0) {
                    score += 16; // 80 points / 5 sections = 16 points par section
                    feedback.push(`‚úÖ <strong>${section.toUpperCase()} :</strong> Informations pertinentes s√©lectionn√©es (${correctCount}/${totalCount} correctes).`);
                } else {
                    feedback.push(`‚ùå <strong>${section.toUpperCase()} :</strong> Informations insuffisantes ou inad√©quates.`);
                }
            });
            
            // Stocker le score du sc√©nario
            scenarioScores.push({
                scenario: currentScenarioNumber,
                score: score,
                maxScore: 100
            });
            
            // Afficher le feedback
            showMessageFeedback(score, feedback);
        }

        // Fonction d'affichage du feedback du message
        function showMessageFeedback(score, feedback) {
            const overlay = document.getElementById('feedbackOverlay');
            const header = document.getElementById('feedbackHeader');
            const title = document.getElementById('feedbackTitle');
            const subtitle = document.getElementById('feedbackSubtitle');
            const messageAnalysis = document.getElementById('messageAnalysis');
            const nextBtn = document.getElementById('nextScenarioBtn');
            const summaryBtn = document.getElementById('summaryBtn');
            
            // Configuration du header selon le score
            if (score >= 80) {
                header.className = 'feedback-header correct';
                title.textContent = 'üèÜ MESSAGE D\'ALERTE EXCELLENT !';
                subtitle.textContent = 'Les secours peuvent intervenir efficacement';
            } else if (score >= 60) {
                header.className = 'feedback-header correct';
                title.textContent = 'üëç MESSAGE D\'ALERTE CORRECT';
                subtitle.textContent = 'Quelques am√©liorations possibles';
            } else {
                header.className = 'feedback-header incorrect';
                title.textContent = 'üìö MESSAGE √Ä AM√âLIORER';
                subtitle.textContent = 'Revoyons les √©l√©ments essentiels';
            }
            
            // Afficher l'analyse d√©taill√©e
            messageAnalysis.innerHTML = `
                <h5>Score : ${score}/100 points</h5>
                ${feedback.map(item => `<p>${item}</p>`).join('')}
            `;
            
            // Gestion des boutons
            if (currentScenarioNumber < totalScenarios) {
                nextBtn.style.display = 'inline-block';
                summaryBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'none';
                summaryBtn.style.display = 'inline-block';
            }
            
            // Afficher l'overlay
            overlay.classList.remove('hidden');
            overlay.querySelector('.feedback-card').classList.add('slide-in');
        }

        // Fonction de passage au sc√©nario suivant
        function nextScenario() {
            const overlay = document.getElementById('feedbackOverlay');
            overlay.classList.add('hidden');
            
            if (currentScenarioNumber < totalScenarios) {
                currentScenarioNumber++;
                loadScenario(currentScenarioNumber);
                resetSelection();
            }
        }

        // Fonction de chargement d'un sc√©nario
        function loadScenario(scenarioNumber) {
            const scenario = scenarios[scenarioNumber];
            const scenarioContainer = document.getElementById('currentScenario');
            
            scenarioContainer.innerHTML = `
                <div class="scenario-title">üö® SC√âNARIO ${scenarioNumber} : ${scenario.title}</div>
                <div class="scenario-details">
                    <p><strong>Lieu :</strong> ${scenario.description.lieu}</p>
                    <p><strong>Accident :</strong> ${scenario.description.accident}</p>
                    <p><strong>√âtat :</strong> ${scenario.description.etat}</p>
                    <p><strong>Contexte :</strong> ${scenario.description.contexte}</p>
                    <p><strong>T√©moin :</strong> ${scenario.description.temoin}</p>
                </div>
            `;
            
            scenarioContainer.classList.add('slide-in');
        }

        // Fonction de remise √† z√©ro de la s√©lection
        function resetSelection() {
            selectedElements = {
                numero: null,
                qui: [],
                ou: [],
                quoi: [],
                combien: [],
                etat: []
            };
            
            // D√©s√©lectionner tous les √©l√©ments visuels
            const allSelected = document.querySelectorAll('.selected');
            allSelected.forEach(element => element.classList.remove('selected'));
            
            // R√©initialiser l'affichage
            updatePhoneDisplay();
            updateProgress();
            updateValidationButton();
        }

        // Fonction d'affichage du bilan final
        function showSummary() {
            const overlay = document.getElementById('feedbackOverlay');
            const card = document.getElementById('feedbackCard');
            
            const totalScore = scenarioScores.reduce((sum, scenario) => sum + scenario.score, 0);
            const maxTotalScore = scenarioScores.length * 100;
            const average = Math.round(totalScore / scenarioScores.length);
            
            let performance = '';
            let message = '';
            
            if (average >= 80) {
                performance = 'üèÜ EXPERT EN ALERTE';
                message = 'Vous ma√Ætrisez parfaitement la construction de messages d\'alerte efficaces !';
            } else if (average >= 60) {
                performance = 'üëç COMP√âTENT';
                message = 'Bonnes bases acquises, quelques perfectionnements √† apporter.';
            } else {
                performance = 'üìö EN APPRENTISSAGE';
                message = 'Continuez √† vous entra√Æner pour am√©liorer vos messages d\'alerte.';
            }

            card.innerHTML = `
                <div class="feedback-header correct">
                    <h4>${performance}</h4>
                    <p>Laboratoire de messages d'alerte termin√©</p>
                </div>
                
                <div style="text-align: center; padding: 20px;">
                    <h3>Score total : ${totalScore}/${maxTotalScore} points</h3>
                    <h4>Moyenne : ${average}/100</h4>
                    <p>${message}</p>
                </div>
                
                <div class="correction-explicite">
                    <h4>üìä D√âTAIL PAR SC√âNARIO</h4>
                    ${scenarioScores.map(scenario => `
                        <p><strong>Sc√©nario ${scenario.scenario} :</strong> ${scenario.score}/100 pts</p>
                    `).join('')}
                </div>
                
                <div class="explication-competence">
                    <strong>üí° COMP√âTENCES MA√éTRIS√âES :</strong>
                    <p><strong>C1 :</strong> Traitement efficace des informations d'urgence</p>
                    <p><strong>C2 :</strong> Analyse rapide de situations critiques</p>
                    <p><strong>C4 :</strong> Solutions de communication adapt√©es</p>
                    <p><strong>C6 :</strong> Expression claire sous contrainte temporelle</p>
                </div>
                
                <div class="astuce-bac">
                    <strong>üéØ M√âTHODE INFAILLIBLE POUR L'√âPREUVE :</strong><br>
                    ‚úÖ QUI : Identit√© + num√©ro de rappel<br>
                    ‚úÖ O√ô : Adresse compl√®te + acc√®s secours<br>
                    ‚úÖ QUOI : Nature pr√©cise de l'accident<br>
                    ‚úÖ COMBIEN : Nombre exact de victimes<br>
                    ‚úÖ √âTAT : Conscience + respiration + blessures visibles<br>
                    <strong>Ne jamais raccrocher en premier !</strong>
                </div>
                
                <div class="validation-container">
                    <button class="btn btn-primary" onclick="restartLab()">RECOMMENCER LE LABORATOIRE</button>
                </div>
            `;
            
            overlay.classList.remove('hidden');
        }

        // Fonction de red√©marrage du laboratoire
        function restartLab() {
            currentScenarioNumber = 1;
            scenarioScores = [];
            loadScenario(1);
            resetSelection();
            document.getElementById('feedbackOverlay').classList.add('hidden');
        }
    </script>
</body>
</html>