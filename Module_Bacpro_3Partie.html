<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module A.3 - Activit√© 2 (Contraction & Besoins)</title>
    <style>
        /* --- STYLES GLOBAUX --- */
        :root {
            --primary-color: #6c757d;
            --accent-color: #e67e22;
            --success-color: #28a745;
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --tooltip-bg: #2c3e50;
            --font-standard: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-dys: 'Comic Sans MS', 'Verdana', sans-serif;
        }

        body {
            font-family: var(--font-standard);
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            padding-top: 130px;
        }

        /* BARRES FIXES */
        #top-bar { position: fixed; top: 0; left: 0; width: 100%; z-index: 9999; background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #score-board { background-color: #2c3e50; color: white; padding: 10px 40px; display: flex; justify-content: space-between; align-items: center; height: 50px; }
        #tools-board { background-color: #e9ecef; padding: 10px 40px; display: flex; justify-content: flex-end; gap: 10px; align-items: center; border-bottom: 1px solid #ccc; }
        .btn-tool { padding: 5px 10px; border: 1px solid #ccc; background: white; cursor: pointer; border-radius: 4px; font-size: 0.9em; display: flex; align-items: center; gap: 5px; }
        .btn-tool:hover { background-color: #ddd; }
        .btn-print { background-color: #007bff; color: white; border-color: #007bff; font-weight: bold;}
        #score-display { font-size: 1.3em; font-weight: bold; color: #f1c40f; padding: 2px 10px; border-radius: 10px; transition: transform 0.3s; }
        .score-anim { transform: scale(1.4); color: #27ae60 !important; }

        .container { max-width: 950px; margin: 0 auto; background: var(--card-bg); padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 80vh; }

        /* EN-T√äTE */
        header { border-bottom: 2px solid #ddd; padding-bottom: 20px; margin-bottom: 30px; position: relative; }
        h1 { font-size: 2.5em; color: var(--primary-color); margin: 0; text-transform: uppercase; line-height: 1.1; }
        .module-tag { position: absolute; top: 0; right: 0; background: #999; color: white; padding: 10px 20px; font-size: 1.5em; font-weight: bold; border-radius: 0 0 0 15px; }
        .objective { background-color: #eee; padding: 10px 15px; border-radius: 8px; margin-top: 15px; display: inline-block; font-weight: 500; }
        .activity-title { font-size: 1.6em; color: var(--accent-color); font-weight: bold; margin-top: 30px; text-transform: uppercase; border-bottom: 2px dashed #ccc; padding-bottom: 10px; margin-bottom: 20px; }

        /* DOCUMENTS */
        .doc-box { border: 2px solid #ddd; padding: 20px; border-radius: 10px; background-color: #fff; margin-bottom: 30px; }
        .doc-box h3 { margin-top: 0; color: #555; background-color: #e2e6ea; padding: 8px 15px; border-radius: 5px; display: inline-block; }
        .doc-text { background-color: #f8f9fa; padding: 15px; border-left: 4px solid var(--primary-color); font-size: 1.05em; text-align: justify; margin-top: 15px; margin-bottom: 15px;}
        .doc-image img { max-width: 100%; border-radius: 8px; border: 1px solid #eee; display: block; margin: 10px auto; }

        /* VID√âO */
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; border-radius: 8px; margin: 15px 0; border: 3px solid #333; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* QUESTIONS & COMP√âTENCES */
        .question-card { background: white; border: 1px solid #eee; border-radius: 10px; padding: 20px; margin-bottom: 20px; transition: transform 0.2s; }
        .question-card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .question-title { display: flex; align-items: center; margin-bottom: 10px; flex-wrap: wrap; }
        .label-tag { display: inline-block; padding: 5px 10px; border-radius: 5px; color: white; font-weight: bold; min-width: 80px; text-align: center; margin-right: 10px; }
        .tag-doc { background-color: #6c757d; }

        .comp-badge { display: inline-block; background-color: #007bff; color: white; font-size: 0.75em; font-weight: bold; padding: 4px 8px; border-radius: 12px; margin-left: 10px; cursor: help; position: relative; vertical-align: middle; text-transform: uppercase; }
        .comp-c1 { background-color: #17a2b8; }
        .comp-c2 { background-color: #6610f2; }
        .comp-c3 { background-color: #fd7e14; }
        .comp-badge:hover::after { content: attr(data-desc); position: absolute; bottom: 125%; left: 50%; transform: translateX(-50%); background-color: var(--tooltip-bg); color: #fff; padding: 8px 12px; border-radius: 6px; font-size: 0.9rem; width: 280px; text-align: center; z-index: 100; box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: normal; text-transform: none; }
        .comp-badge:hover::before { content: ''; position: absolute; top: -5px; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: var(--tooltip-bg) transparent transparent transparent; bottom: 110%; }

        /* TABLEAUX & INPUTS */
        input[type="text"], select { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 1em; box-sizing: border-box; background: white;}
        .matching-table, .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .matching-table th, .matching-table td, .data-table th, .data-table td { border: 1px solid #ddd; padding: 10px; text-align: left; vertical-align: middle; }
        .matching-table th, .data-table th { background-color: #f1f1f1; text-align: center; }
        .calc-input { width: 80px !important; text-align: center; display: inline-block; font-weight: bold; }

        /* CHECKBOXES & RADIOS */
        input[type="radio"] { transform: scale(1.2); margin-right: 5px; }
        
        .actions { margin-top: 15px; display: flex; gap: 10px; }
        button { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: background 0.3s; }
        .btn-check { background-color: #333; color: white; } .btn-check:hover { background-color: #555; }
        .btn-solve { background-color: transparent; color: #999; text-decoration: underline; font-size: 0.9em;} .btn-solve:hover { color: #666; }

        .feedback { margin-top: 10px; font-weight: bold; padding: 10px; border-radius: 5px; display: none; }
        .feedback.correct { background-color: #d4edda; color: #155724; display: block;}
        .feedback.incorrect { background-color: #f8d7da; color: #721c24; display: block;}

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 40px; border-top: 2px solid #eee; padding-top: 20px; }
        .btn-nav { background-color: var(--accent-color); color: white; font-size: 1.1em; padding: 10px 30px; }
        .btn-nav:hover { background-color: #d35400; }

        .page-content { display: none; }
        .page-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ACCESSIBILIT√â */
        body.mode-dyslexic { font-family: var(--font-dys); letter-spacing: 0.05em; line-height: 2; }
        body.mode-contrast { --bg-color: #000; --card-bg: #000; --text-color: #ff0; background-color: #000; color: #ff0; }
        body.mode-contrast .container { border: 2px solid #ff0; box-shadow: none; }
        body.mode-contrast .question-card, body.mode-contrast .doc-box { background: #111; border: 1px solid #ff0; color: #fff; }
        body.mode-contrast input, body.mode-contrast select { background: #333; color: #fff; border-color: #ff0; }
        body.mode-large { font-size: 1.3em; }

        @media print {
            #top-bar { display: none !important; }
            body { padding-top: 0; background-color: white; }
            .container { box-shadow: none; border: none; width: 100%; max-width: 100%; padding: 0; }
            .actions, .btn-solve, .btn-check, .nav-buttons { display: none !important; }
            .doc-box { break-inside: avoid; }
            .video-container { display: none; } /* Pas de vid√©o √† l'impression */
            .page-content { display: block !important; page-break-after: always; }
        }
    </style>
</head>
<body>

<div id="top-bar">
    <div id="score-board">
        <span>Module A.3 - Activit√© 2 (Complet)</span>
        <span id="score-display">üèÜ Score : 0</span>
    </div>
    <div id="tools-board">
        <span>Accessibilit√© :</span>
        <button class="btn-tool" onclick="toggleDyslexic()">üß† Dys</button>
        <button class="btn-tool" onclick="toggleContrast()">üëÅÔ∏è Contraste</button>
        <button class="btn-tool" onclick="toggleSize()">üîç A+</button>
        <div style="width: 20px;"></div>
        <button class="btn-tool btn-print" onclick="window.print()">üñ®Ô∏è Imprimer</button>
    </div>
</div>

<div class="container">
    <header>
        <div class="module-tag">Module A.3</div>
        <h1>L'activit√© physique</h1>
        <div class="objective">
            <strong>Objectif :</strong> Pr√©senter le m√©canisme de la contraction musculaire en d√©crivant les besoins du muscle.
        </div>
    </header>

    <div id="page-1" class="page-content active">
        <div class="activity-title">ACTIVIT√â 2 : La contraction du muscle stri√© squelettique</div>

        <p>√Ä l'aide du document 4 :</p>

        <div class="doc-box">
            <h3>Doc 4 : Les myofibrilles, acteurs de la contraction du muscle</h3>
            
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/B76yhKyZdqk" title="Qu'est-ce que la contraction musculaire ?" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>

            <div class="doc-text">
                <p>Les myofibrilles constituant les fibres musculaires sont une succession de petites unit√©s compos√©es de filaments d‚Äôactine et de myosine. Lorsque le cerveau envoie le message nerveux ordonnant le mouvement (la contraction du muscle), les filaments d‚Äôactine glissent le long des filaments de myosine, ce qui engendre la r√©duction de la taille des myofibrilles, par encha√Ænement le muscle gonfle et se raccourcit.</p>
            </div>

            <div class="doc-image">
                <img src="doc4_myofibrilles.jpg" alt="Sch√©ma de la contraction : filaments d'actine et de myosine">
            </div>
        </div>

        <div class="question-card" id="q1">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 1</span>
                <strong>Identifier le muscle contract√© et le muscle rel√¢ch√© en l√©gendant les deux illustrations du sch√©ma.</strong>
                <span class="comp-badge comp-c1" data-desc="C1 : Identifier des √©l√©ments sur un sch√©ma.">C1</span>
            </div>
            <p>Regarde le sch√©ma en bas √† droite (les muscles dessin√©s) :</p>
            <table class="matching-table">
                <tr>
                    <th>Le muscle du HAUT (fin)</th>
                    <th>Le muscle du BAS (bomb√©)</th>
                </tr>
                <tr>
                    <td><input type="text" id="input-1a" placeholder="Contract√© ou Rel√¢ch√© ?"></td>
                    <td><input type="text" id="input-1b" placeholder="Contract√© ou Rel√¢ch√© ?"></td>
                </tr>
            </table>
            <div class="feedback" id="feedback-1"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ1()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ1()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q2">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 2</span>
                <strong>Relever la modification du biceps lors de la contraction musculaire.</strong>
                <span class="comp-badge comp-c1" data-desc="C1 : Relever des informations dans le texte.">C1</span>
            </div>
            <div class="input-group">
                <input type="text" placeholder="Le biceps est..." id="input-2">
            </div>
            <div class="feedback" id="feedback-2"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ2()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ2()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q3">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 3</span>
                <strong>Pr√©senter les m√©canismes de la contraction et du rel√¢chement musculaire en reliant les √©l√©ments correspondants.</strong>
                <span class="comp-badge comp-c3" data-desc="C3 : Expliquer un ph√©nom√®ne physiologique.">C3</span>
            </div>
            <p><em>Choisis la suite logique dans les menus d√©roulants :</em></p>
            <table class="matching-table">
                <tr><th style="width: 40%;">Modification des myofibrilles</th><th>Modification du muscle</th><th>Cons√©quences</th></tr>
                <tr>
                    <td>Les filaments d'actine <strong>glissent</strong> le long des filaments de myosine.</td>
                    <td>
                        <select id="mec-1a">
                            <option value="">-- Choisir --</option>
                            <option value="gonfle">Il gonfle et se raccourcit</option>
                            <option value="degonfle">Il d√©gonfle et s'allonge</option>
                        </select>
                    </td>
                    <td>
                        <select id="mec-1b">
                            <option value="">-- Choisir --</option>
                            <option value="contraction">Contraction du muscle</option>
                            <option value="relachement">Rel√¢chement du muscle</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Les filaments d'actine <strong>reprennent</strong> leur position d'origine.</td>
                    <td>
                         <select id="mec-2a">
                            <option value="">-- Choisir --</option>
                            <option value="gonfle">Il gonfle et se raccourcit</option>
                            <option value="degonfle">Il d√©gonfle et s'allonge</option>
                        </select>
                    </td>
                    <td>
                        <select id="mec-2b">
                            <option value="">-- Choisir --</option>
                            <option value="contraction">Contraction du muscle</option>
                            <option value="relachement">Rel√¢chement du muscle</option>
                        </select>
                    </td>
                </tr>
            </table>
            <div class="feedback" id="feedback-3"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ3()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ3()">R√©ponse</button></div>
        </div>

        <div class="nav-buttons" style="justify-content: flex-end;">
            <button class="btn-nav" onclick="changePage(2)">Suite : Les besoins du muscle ‚ûî</button>
        </div>
    </div>

    <div id="page-2" class="page-content">
        <div class="activity-title">Suite : Les besoins du muscle</div>
        <p>√Ä l'aide du document 5 :</p>

        <div class="doc-box">
            <h3>Doc 5 : La composition du sang en fonction de l'effort</h3>
            
            <div style="background-color: #eee; padding: 10px; margin-bottom: 10px; border-radius: 5px; font-size: 0.9em;">
                <strong>Donn√©es du sch√©ma (si l'image ne s'affiche pas) :</strong><br>
                <ul>
                    <li><strong>Muscle au REPOS :</strong>
                        <ul>
                            <li>Sang entrant : Glucose 90 mg | O2 20 mL | CO2 49 mL</li>
                            <li>Sang sortant : Glucose 80 mg | O2 15 mL | CO2 54 mL</li>
                        </ul>
                    </li>
                    <li><strong>Muscle en ACTIVIT√â :</strong>
                        <ul>
                            <li>Sang entrant : Glucose 90 mg | O2 20 mL | CO2 49 mL</li>
                            <li>Sang sortant : Glucose 50 mg | O2 11 mL | CO2 58 mL</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="doc-image">
                <img src="doc5_sang.jpg" alt="Sch√©ma des √©changes sanguins dans le muscle">
            </div>
        </div>

        <div class="question-card" id="q4">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 4</span>
                <strong>Indiquer les modifications de composition du sang lors de son passage au niveau d'un muscle au repos et en activit√©.</strong>
                <span class="comp-badge comp-c1" data-desc="C1 : Traiter l'information (Calculer).">C1</span>
            </div>
            <p><em>Compl√®te le tableau (Sortant - Entrant). Exemple : 80 - 90 = -10.</em></p>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th rowspan="2">√âl√©ments</th>
                        <th>Muscle au REPOS</th>
                        <th>Muscle en ACTIVIT√â</th>
                        <th rowspan="2">Tendance</th>
                    </tr>
                    <tr>
                        <th>Diff√©rence (mg ou mL)</th>
                        <th>Diff√©rence (mg ou mL)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Glucose</strong></td>
                        <td>80 - 90 = <input type="text" class="calc-input" id="cal-glu-repos" placeholder="-10"> mg</td>
                        <td>50 - 90 = <input type="text" class="calc-input" id="cal-glu-act" placeholder="-40"> mg</td>
                        <td style="text-align: left;">
                            <label><input type="radio" name="trend-glu" id="glu-down"> Diminution</label><br>
                            <label><input type="radio" name="trend-glu" id="glu-up"> Augmentation</label>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Dioxyg√®ne</strong></td>
                        <td>15 - 20 = <input type="text" class="calc-input" id="cal-o2-repos" placeholder="-5"> mL</td>
                        <td>11 - 20 = <input type="text" class="calc-input" id="cal-o2-act" placeholder="-9"> mL</td>
                        <td style="text-align: left;">
                            <label><input type="radio" name="trend-o2" id="o2-down"> Diminution</label><br>
                            <label><input type="radio" name="trend-o2" id="o2-up"> Augmentation</label>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Dioxyde de carbone</strong></td>
                        <td>54 - 49 = <input type="text" class="calc-input" id="cal-co2-repos" placeholder="+5"> mL</td>
                        <td>58 - 49 = <input type="text" class="calc-input" id="cal-co2-act" placeholder="+9"> mL</td>
                        <td style="text-align: left;">
                            <label><input type="radio" name="trend-co2" id="co2-down"> Diminution</label><br>
                            <label><input type="radio" name="trend-co2" id="co2-up"> Augmentation</label>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="feedback" id="feedback-4"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ4()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ4()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q5">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 5</span>
                <strong>En d√©duire les √©l√©ments consomm√©s et l'√©l√©ment rejet√©.</strong>
                <span class="comp-badge comp-c2" data-desc="C2 : D√©duire √† partir de donn√©es.">C2</span>
            </div>
            <div class="input-group">
                <label>Les √©l√©ments consomm√©s (ceux qui diminuent) :</label>
                <input type="text" id="input-consommes" placeholder="Ex: ... et ...">
            </div>
            <div class="input-group" style="margin-top:10px;">
                <label>L'√©l√©ment rejet√© (d√©chet qui augmente) :</label>
                <input type="text" id="input-rejete" placeholder="Ex: ...">
            </div>
            <div class="feedback" id="feedback-5"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ5()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ5()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q6">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 6</span>
                <strong>Identifier l'√©l√©ment nutritif qui est la source d'√©nergie du muscle.</strong>
                <span class="comp-badge comp-c1" data-desc="C1 : Identifier une information.">C1</span>
            </div>
            <div class="input-group"><input type="text" id="input-nutriment" placeholder="R√©ponse..."></div>
            <div class="feedback" id="feedback-6"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ6()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ6()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q7">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 7</span>
                <strong>Pr√©ciser la situation dans laquelle la consommation est la plus forte.</strong>
                <span class="comp-badge comp-c1" data-desc="C1 : Comparer des donn√©es.">C1</span>
            </div>
            <p>Le glucose est le plus consomm√© :</p>
            <label><input type="radio" name="q7-glu" value="repos"> Muscle au repos</label>
            <label><input type="radio" name="q7-glu" value="activite"> Muscle en activit√©</label>
            
            <p style="margin-top:10px;">Le dioxyg√®ne est le plus consomm√© :</p>
            <label><input type="radio" name="q7-o2" value="repos"> Muscle au repos</label>
            <label><input type="radio" name="q7-o2" value="activite"> Muscle en activit√©</label>

            <div class="feedback" id="feedback-7"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ7()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ7()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q8">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 8</span>
                <strong>En d√©duire quels sont les besoins du muscle lorsqu'il est en activit√©.</strong>
                <span class="comp-badge comp-c2" data-desc="C2 : D√©duire une conclusion.">C2</span>
            </div>
            <div class="input-group"><input type="text" id="input-besoins" placeholder="Le muscle a besoin de plus de..."></div>
            <div class="feedback" id="feedback-8"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ8()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ8()">R√©ponse</button></div>
        </div>

        <div class="question-card" id="q9">
            <div class="question-title">
                <span class="label-tag tag-doc">Question 9</span>
                <strong>Pr√©senter le m√©canisme de la contraction musculaire (Bilan).</strong>
                <span class="comp-badge comp-c3" data-desc="C3 : Expliquer un ph√©nom√®ne.">C3</span>
            </div>
            <p>Coche la bonne phrase de conclusion :</p>
            <div style="background: #f9f9f9; padding: 10px; border: 1px solid #eee; border-radius: 5px; margin-bottom: 5px;">
                <label style="cursor: pointer;">
                    <input type="radio" name="q9-bilan" value="wrong"> 
                    La contraction musculaire n√©cessite la consommation de dioxyde de carbone pour produire du dioxyg√®ne.
                </label>
            </div>
            <div style="background: #f9f9f9; padding: 10px; border: 1px solid #eee; border-radius: 5px;">
                <label style="cursor: pointer;">
                    <input type="radio" name="q9-bilan" value="correct"> 
                    La contraction musculaire n√©cessite la consommation de glucose et de dioxyg√®ne et va entra√Æner la production de d√©chets sous forme de dioxyde de carbone.
                </label>
            </div>

            <div class="feedback" id="feedback-9"></div>
            <div class="actions"><button class="btn-check" onclick="checkQ9()">V√©rifier</button><button class="btn-solve" onclick="showSolutionQ9()">R√©ponse</button></div>
        </div>

        <div class="nav-buttons">
            <button class="btn-nav" onclick="changePage(1)">‚¨Ö Retour Page 1</button>
            <button class="btn-nav" style="background-color: var(--success-color);" onclick="alert('Bravo ! Activit√© termin√©e.')">‚úÖ Terminer</button>
        </div>
    </div>

    <footer><p>√âditions Delagrave</p></footer>
</div>

<script>
    // --- UTILS ---
    function normalize(text) { return text.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim(); }
    
    // --- SCORE ---
    let score = 0;
    const answeredQuestions = new Set();
    function updateScoreDisplay() {
        const display = document.getElementById('score-display');
        display.innerHTML = `üèÜ Score : ${score}`;
        display.classList.add('score-anim');
        setTimeout(() => { display.classList.remove('score-anim'); }, 500);
    }
    function addPoint(id) {
        if (!answeredQuestions.has(id)) {
            score++;
            answeredQuestions.add(id);
            updateScoreDisplay();
        }
    }

    // --- CHECKERS PARTIE 1 ---

    // Q1 : Contract√© / Rel√¢ch√©
    function checkQ1() {
        const a = normalize(document.getElementById('input-1a').value); // Haut = Relach√©
        const b = normalize(document.getElementById('input-1b').value); // Bas = Contract√©
        let ok = (a.includes("relache") && b.includes("contracte"));
        
        const fb = document.getElementById('feedback-1');
        if(ok) {
            fb.innerHTML = "‚úÖ Correct ! +1 Point"; fb.className = "feedback correct"; addPoint("q1");
        } else {
            fb.innerHTML = "‚ùå Observe bien la forme du muscle (bomb√© ou fin)."; fb.className = "feedback incorrect";
        }
    }
    function showSolutionQ1() { document.getElementById('input-1a').value = "Muscle rel√¢ch√©"; document.getElementById('input-1b').value = "Muscle contract√©"; answeredQuestions.add("q1"); }

    // Q2 : Biceps
    function checkQ2() {
        const val = normalize(document.getElementById('input-2').value);
        if(val.includes("gonfle") || val.includes("raccourci") || val.includes("dur")) {
            document.getElementById('feedback-2').innerHTML = "‚úÖ Correct ! +1 Point"; document.getElementById('feedback-2').className = "feedback correct"; addPoint("q2");
        } else {
            document.getElementById('feedback-2').innerHTML = "‚ùå Le biceps devient plus gros et plus court."; document.getElementById('feedback-2').className = "feedback incorrect";
        }
    }
    function showSolutionQ2() { document.getElementById('input-2').value = "Le biceps est gonfl√© et raccourci."; answeredQuestions.add("q2"); }

    // Q3 : M√©canisme
    function checkQ3() {
        const m1a = document.getElementById('mec-1a').value; // gonfle
        const m1b = document.getElementById('mec-1b').value; // contraction
        const m2a = document.getElementById('mec-2a').value; // degonfle
        const m2b = document.getElementById('mec-2b').value; // relachement
        
        if(m1a == "gonfle" && m1b == "contraction" && m2a == "degonfle" && m2b == "relachement") {
            document.getElementById('feedback-3').innerHTML = "‚úÖ Parfait ! +1 Point"; document.getElementById('feedback-3').className = "feedback correct"; addPoint("q3");
        } else {
            document.getElementById('feedback-3').innerHTML = "‚ùå Erreur de logique."; document.getElementById('feedback-3').className = "feedback incorrect";
        }
    }
    function showSolutionQ3() {
        document.getElementById('mec-1a').value = "gonfle"; document.getElementById('mec-1b').value = "contraction";
        document.getElementById('mec-2a').value = "degonfle"; document.getElementById('mec-2b').value = "relachement";
        answeredQuestions.add("q3");
    }

    // --- CHECKERS PARTIE 2 ---

    // Q4 : Tableau
    function checkQ4() {
        const g1 = document.getElementById('cal-glu-repos').value.trim();
        const g2 = document.getElementById('cal-glu-act').value.trim();
        const gTrend = document.getElementById('glu-down').checked;
        
        const o1 = document.getElementById('cal-o2-repos').value.trim();
        const o2 = document.getElementById('cal-o2-act').value.trim();
        const oTrend = document.getElementById('o2-down').checked;

        const c1 = document.getElementById('cal-co2-repos').value.trim();
        const c2 = document.getElementById('cal-co2-act').value.trim();
        const cTrend = document.getElementById('co2-up').checked;

        let ok = true;
        if(g1 != "-10" || g2 != "-40" || !gTrend) ok = false;
        if(o1 != "-5" || o2 != "-9" || !oTrend) ok = false;
        if((c1 != "5" && c1 != "+5") || (c2 != "9" && c2 != "+9") || !cTrend) ok = false;

        if(ok) {
            document.getElementById('feedback-4').innerHTML = "‚úÖ Tableau correct ! +1 Point"; document.getElementById('feedback-4').className = "feedback correct"; addPoint("q4");
        } else {
            document.getElementById('feedback-4').innerHTML = "‚ùå V√©rifie tes calculs ou les cases coch√©es."; document.getElementById('feedback-4').className = "feedback incorrect";
        }
    }
    function showSolutionQ4() {
        document.getElementById('cal-glu-repos').value = "-10"; document.getElementById('cal-glu-act').value = "-40"; document.getElementById('glu-down').checked = true;
        document.getElementById('cal-o2-repos').value = "-5"; document.getElementById('cal-o2-act').value = "-9"; document.getElementById('o2-down').checked = true;
        document.getElementById('cal-co2-repos').value = "+5"; document.getElementById('cal-co2-act').value = "+9"; document.getElementById('co2-up').checked = true;
        answeredQuestions.add("q4");
    }

    // Q5 : Consomm√©s/Rejet√©
    function checkQ5() {
        const cons = normalize(document.getElementById('input-consommes').value);
        const rej = normalize(document.getElementById('input-rejete').value);
        if(cons.includes("glucose") && cons.includes("dioxygene") && (rej.includes("carbone") || rej.includes("co2"))) {
            document.getElementById('feedback-5').innerHTML = "‚úÖ Correct ! +1 Point"; document.getElementById('feedback-5').className="feedback correct"; addPoint("q5");
        } else { document.getElementById('feedback-5').innerHTML = "‚ùå Incomplet."; document.getElementById('feedback-5').className="feedback incorrect"; }
    }
    function showSolutionQ5() { document.getElementById('input-consommes').value = "Glucose et Dioxyg√®ne"; document.getElementById('input-rejete').value = "Dioxyde de carbone"; answeredQuestions.add("q5"); }

    // Q6 : Nutriment
    function checkQ6() {
        const val = normalize(document.getElementById('input-nutriment').value);
        if(val.includes("glucose")) {
            document.getElementById('feedback-6').innerHTML = "‚úÖ Correct ! +1 Point"; document.getElementById('feedback-6').className = "feedback correct"; addPoint("q6");
        } else { document.getElementById('feedback-6').innerHTML = "‚ùå Faux. C'est le sucre (glucose)."; document.getElementById('feedback-6').className = "feedback incorrect"; }
    }
    function showSolutionQ6() { document.getElementById('input-nutriment').value = "Le glucose"; answeredQuestions.add("q6"); }

    // Q7 : Comparaison
    function checkQ7() {
        const g = document.querySelector('input[name="q7-glu"]:checked')?.value;
        const o = document.querySelector('input[name="q7-o2"]:checked')?.value;
        if(g === "activite" && o === "activite") {
            document.getElementById('feedback-7').innerHTML = "‚úÖ Correct ! +1 Point"; document.getElementById('feedback-7').className="feedback correct"; addPoint("q7");
        } else { document.getElementById('feedback-7').innerHTML = "‚ùå Faux."; document.getElementById('feedback-7').className="feedback incorrect"; }
    }
    function showSolutionQ7() { document.querySelectorAll('input[value="activite"]').forEach(el => el.checked = true); answeredQuestions.add("q7"); }

    // Q8 : Besoins
    function checkQ8() {
        const val = normalize(document.getElementById('input-besoins').value);
        if(val.includes("plus") && val.includes("glucose") && val.includes("dioxygene")) {
            document.getElementById('feedback-8').innerHTML = "‚úÖ Correct ! +1 Point"; document.getElementById('feedback-8').className="feedback correct"; addPoint("q8");
        } else { document.getElementById('feedback-8').innerHTML = "‚ùå Faux."; document.getElementById('feedback-8').className="feedback incorrect"; }
    }
    function showSolutionQ8() { document.getElementById('input-besoins').value = "Le muscle a besoin de plus de glucose et de dioxyg√®ne."; answeredQuestions.add("q8"); }

    // Q9 : Bilan
    function checkQ9() {
        const val = document.querySelector('input[name="q9-bilan"]:checked')?.value;
        if(val === "correct") {
            document.getElementById('feedback-9').innerHTML = "‚úÖ Bravo ! +1 Point"; document.getElementById('feedback-9').className="feedback correct"; addPoint("q9");
        } else { document.getElementById('feedback-9').innerHTML = "‚ùå Faux."; document.getElementById('feedback-9').className="feedback incorrect"; }
    }
    function showSolutionQ9() { document.querySelector('input[value="correct"]').checked = true; answeredQuestions.add("q9"); }

    // --- NAVIGATION ---
    function changePage(num) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        document.getElementById(`page-${num}`).classList.add('active');
        window.scrollTo(0, 0);
    }

    // --- ACCESSIBILIT√â ---
    function toggleDyslexic() { document.body.classList.toggle('mode-dyslexic'); }
    function toggleContrast() { document.body.classList.toggle('mode-contrast'); }
    function toggleSize() { document.body.classList.toggle('mode-large'); }
</script>

</body>
</html>