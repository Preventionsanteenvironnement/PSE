<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C3 ‚Äì Pictogrammes de s√©curit√© ‚Äì Niveau 1 D√©couverte</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --obligation: #0ea5e9;
            --interdiction: #dc2626;
            --avertissement: #eab308;
            --incendie: #b91c1c;
            --secours: #16a34a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* =====================================================
           SOURCE INRS
           ===================================================== */
        .source-banner {
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .source-banner a {
            color: rgba(255,255,255,0.9);
            font-size: 11px;
            text-decoration: none;
        }
        
        .source-banner a:hover {
            text-decoration: underline;
        }
        
        /* =====================================================
           EN-T√äTE
           ===================================================== */
        .header {
            background: white;
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .module-badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 700;
        }
        
        .level-badge {
            background: var(--success);
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 15px;
        }
        
        .objectif-box {
            background: linear-gradient(135deg, #e0e7ff, #ede9fe);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 12px 12px 0;
        }
        
        .objectif-box strong {
            color: var(--primary);
            font-size: 12px;
            display: block;
            margin-bottom: 5px;
        }
        
        .objectif-box p {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
        }
        
        /* =====================================================
           NAVIGATION PHASES
           ===================================================== */
        .phase-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .phase-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            border: none;
            border-radius: 15px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255,255,255,0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .phase-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .phase-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .phase-btn.completed {
            background: var(--success);
            color: white;
        }
        
        /* =====================================================
           CONTENU PRINCIPAL
           ===================================================== */
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            min-height: 400px;
        }
        
        .phase {
            display: none;
        }
        
        .phase.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* =====================================================
           PHASE 1 : INTRODUCTION
           ===================================================== */
        .intro-section {
            text-align: center;
            padding: 20px;
        }
        
        .intro-section h2 {
            font-size: 22px;
            color: var(--dark);
            margin-bottom: 20px;
        }
        
        .intro-section p {
            font-size: 15px;
            color: #64748b;
            line-height: 1.8;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        .category-card {
            padding: 20px 15px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
        }
        
        .category-card.obligation { background: linear-gradient(135deg, #e0f2fe, #bae6fd); border: 2px solid var(--obligation); }
        .category-card.interdiction { background: linear-gradient(135deg, #fee2e2, #fecaca); border: 2px solid var(--interdiction); }
        .category-card.avertissement { background: linear-gradient(135deg, #fef9c3, #fef08a); border: 2px solid var(--avertissement); }
        .category-card.incendie { background: linear-gradient(135deg, #fee2e2, #fca5a5); border: 2px solid var(--incendie); }
        .category-card.secours { background: linear-gradient(135deg, #dcfce7, #bbf7d0); border: 2px solid var(--secours); }
        
        .category-card .shape {
            width: 50px;
            height: 50px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .category-card h4 {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .category-card p {
            font-size: 11px;
            color: #64748b;
            margin: 0;
        }
        
        .btn-start {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-family: inherit;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
        }
        
        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.5);
        }
        
        /* =====================================================
           PHASE 2 : APPRENTISSAGE FLASHCARDS
           ===================================================== */
        .learning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-title .icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .category-title h3 {
            font-size: 18px;
            color: var(--dark);
        }
        
        .progress-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .progress-bar {
            width: 150px;
            height: 10px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .flashcard-container {
            perspective: 1000px;
            margin: 30px auto;
            max-width: 400px;
        }
        
        .flashcard {
            position: relative;
            width: 100%;
            height: 350px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border: 3px solid #e2e8f0;
        }
        
        .flashcard-front img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin-bottom: 20px;
        }
        
        .flashcard-front .hint {
            font-size: 14px;
            color: #94a3b8;
            margin-top: 10px;
        }
        
        .flashcard-back {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            transform: rotateY(180deg);
        }
        
        .flashcard-back h4 {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .flashcard-back p {
            font-size: 14px;
            text-align: center;
            line-height: 1.6;
            opacity: 0.9;
        }
        
        .flashcard-back .category-badge {
            margin-top: 20px;
            padding: 8px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 50px;
            font-size: 12px;
            font-weight: 700;
        }
        
        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn-nav {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-nav.prev {
            background: #e2e8f0;
            color: var(--dark);
        }
        
        .btn-nav.next {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-nav:hover {
            transform: translateY(-2px);
        }
        
        .btn-nav:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* =====================================================
           PHASE 3 : QUIZ
           ===================================================== */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .score-display {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .score-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 700;
        }
        
        .score-item.points {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
        }
        
        .score-item.streak {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
        }
        
        .quiz-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .quiz-card img {
            width: 140px;
            height: 140px;
            object-fit: contain;
            margin-bottom: 20px;
        }
        
        .quiz-card h3 {
            font-size: 18px;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .quiz-option {
            padding: 18px 20px;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            background: white;
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .quiz-option:hover:not(:disabled) {
            border-color: var(--primary);
            background: #eef2ff;
            transform: translateY(-2px);
        }
        
        .quiz-option.correct {
            border-color: var(--success);
            background: #dcfce7;
            color: #166534;
        }
        
        .quiz-option.wrong {
            border-color: var(--danger);
            background: #fee2e2;
            color: #991b1b;
        }
        
        .quiz-option:disabled {
            cursor: default;
        }
        
        .feedback-box {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }
        
        .feedback-box.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .feedback-box.success {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border: 2px solid var(--success);
        }
        
        .feedback-box.error {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 2px solid var(--danger);
        }
        
        .feedback-box h4 {
            font-size: 18px;
            margin-bottom: 8px;
        }
        
        .feedback-box.success h4 { color: #166534; }
        .feedback-box.error h4 { color: #991b1b; }
        
        .feedback-box p {
            font-size: 13px;
            color: #64748b;
        }
        
        .btn-next-question {
            margin-top: 15px;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            background: var(--primary);
            color: white;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-next-question:hover {
            background: var(--secondary);
        }
        
        /* =====================================================
           PHASE 4 : R√âSULTATS
           ===================================================== */
        .results-section {
            text-align: center;
            padding: 30px;
        }
        
        .results-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 25px;
            background: linear-gradient(135deg, var(--success), #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .results-section h2 {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .results-section .message {
            font-size: 16px;
            color: #64748b;
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            padding: 25px 20px;
            border-radius: 15px;
            background: #f8fafc;
        }
        
        .stat-card .value {
            font-size: 36px;
            font-weight: 800;
            color: var(--primary);
        }
        
        .stat-card .label {
            font-size: 13px;
            color: #64748b;
            margin-top: 5px;
        }
        
        .btn-retry {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-family: inherit;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        
        .btn-retry:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.4);
        }
        
        .btn-next-level {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            font-family: inherit;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        
        .btn-next-level:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);
        }
        
        /* =====================================================
           RESPONSIVE
           ===================================================== */
        @media (max-width: 600px) {
            .header h1 { font-size: 20px; }
            .quiz-options { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr; }
            .flashcard { height: 320px; }
            .categories-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <!-- Source INRS -->
        <div class="source-banner">
            <a href="https://www.inrs.fr" target="_blank">üìö Source : INRS ‚Äì Institut National de Recherche et de S√©curit√© ‚Äì www.inrs.fr</a>
        </div>
        
        <!-- En-t√™te -->
        <div class="header">
            <div class="header-top">
                <span class="module-badge">MODULE C3 ‚Äì Th√©matique C</span>
                <span class="level-badge">‚≠ê NIVEAU 1 ‚Äì D√©couverte</span>
            </div>
            <h1>üõ°Ô∏è Les pictogrammes de s√©curit√©</h1>
            <p class="subtitle">La d√©marche de pr√©vention appliqu√©e √† une activit√© de travail</p>
            <div class="objectif-box">
                <strong>üéØ OBJECTIF DE LA S√âANCE</strong>
                <p>√ätre capable d'<strong>identifier</strong> et de <strong>nommer</strong> les pictogrammes de s√©curit√© les plus courants rencontr√©s en milieu professionnel.</p>
            </div>
        </div>
        
        <!-- Navigation phases -->
        <div class="phase-nav">
            <button class="phase-btn active" data-phase="intro" id="btn-intro">
                <span>üìñ</span> Introduction
            </button>
            <button class="phase-btn" data-phase="learn" id="btn-learn">
                <span>üé¥</span> Apprendre
            </button>
            <button class="phase-btn" data-phase="quiz" id="btn-quiz">
                <span>üéØ</span> Quiz
            </button>
            <button class="phase-btn" data-phase="results" id="btn-results">
                <span>üèÜ</span> R√©sultats
            </button>
        </div>
        
        <!-- Contenu principal -->
        <div class="main-content">
            
            <!-- PHASE 1 : Introduction -->
            <div class="phase active" id="phase-intro">
                <div class="intro-section">
                    <h2>Bienvenue dans l'apprentissage des pictogrammes ! üéâ</h2>
                    <p>
                        Les <strong>pictogrammes de s√©curit√©</strong> sont des images qui transmettent des informations importantes pour ta protection au travail. Ils sont universels : peu importe la langue, tout le monde peut les comprendre !
                    </p>
                    <p>
                        Dans ce niveau, tu vas d√©couvrir <strong>12 pictogrammes essentiels</strong> r√©partis en 5 familles. Chaque famille a sa couleur et sa forme !
                    </p>
                    
                    <div class="categories-grid">
                        <div class="category-card obligation">
                            <div class="shape">üîµ</div>
                            <h4>OBLIGATION</h4>
                            <p>Ce qu'il FAUT faire</p>
                        </div>
                        <div class="category-card interdiction">
                            <div class="shape">üî¥</div>
                            <h4>INTERDICTION</h4>
                            <p>Ce qu'il NE FAUT PAS faire</p>
                        </div>
                        <div class="category-card avertissement">
                            <div class="shape">‚ö†Ô∏è</div>
                            <h4>AVERTISSEMENT</h4>
                            <p>Attention DANGER !</p>
                        </div>
                        <div class="category-card incendie">
                            <div class="shape">üßØ</div>
                            <h4>INCENDIE</h4>
                            <p>√âquipements anti-feu</p>
                        </div>
                        <div class="category-card secours">
                            <div class="shape">üü¢</div>
                            <h4>SECOURS</h4>
                            <p>Aide et √©vacuation</p>
                        </div>
                    </div>
                    
                    <button class="btn-start" onclick="startLearning()">
                        C'est parti ! üöÄ
                    </button>
                </div>
            </div>
            
            <!-- PHASE 2 : Apprentissage -->
            <div class="phase" id="phase-learn">
                <div class="learning-header">
                    <div class="category-title">
                        <div class="icon" id="learn-category-icon" style="background: var(--obligation);">üîµ</div>
                        <h3 id="learn-category-name">Obligation</h3>
                    </div>
                    <div class="progress-info">
                        <div class="progress-bar">
                            <div class="progress-fill" id="learn-progress" style="width: 0%;"></div>
                        </div>
                        <span class="progress-text" id="learn-counter">1/12</span>
                    </div>
                </div>
                
                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-face flashcard-front">
                            <img id="flashcard-img" src="" alt="Pictogramme">
                            <p class="hint">üëÜ Clique pour voir la signification</p>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <h4 id="flashcard-name">Nom du pictogramme</h4>
                            <p id="flashcard-description">Description du pictogramme</p>
                            <span class="category-badge" id="flashcard-category">Cat√©gorie</span>
                        </div>
                    </div>
                </div>
                
                <div class="flashcard-nav">
                    <button class="btn-nav prev" id="btn-prev" onclick="prevCard()">
                        ‚Üê Pr√©c√©dent
                    </button>
                    <button class="btn-nav next" id="btn-next" onclick="nextCard()">
                        Suivant ‚Üí
                    </button>
                </div>
            </div>
            
            <!-- PHASE 3 : Quiz -->
            <div class="phase" id="phase-quiz">
                <div class="quiz-header">
                    <div class="progress-info">
                        <span class="progress-text">Question <span id="quiz-current">1</span>/12</span>
                        <div class="progress-bar" style="width: 200px;">
                            <div class="progress-fill" id="quiz-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="score-display">
                        <div class="score-item points">
                            ‚≠ê <span id="score-points">0</span> pts
                        </div>
                        <div class="score-item streak">
                            üî• <span id="score-streak">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-card">
                    <img id="quiz-img" src="" alt="Pictogramme">
                    <h3>Que signifie ce pictogramme ?</h3>
                </div>
                
                <div class="quiz-options" id="quiz-options">
                    <!-- Options g√©n√©r√©es dynamiquement -->
                </div>
                
                <div class="feedback-box" id="feedback-box">
                    <h4 id="feedback-title">Bravo !</h4>
                    <p id="feedback-text">C'est la bonne r√©ponse !</p>
                    <button class="btn-next-question" id="btn-next-question" onclick="nextQuestion()">
                        Question suivante ‚Üí
                    </button>
                </div>
            </div>
            
            <!-- PHASE 4 : R√©sultats -->
            <div class="phase" id="phase-results">
                <div class="results-section">
                    <div class="results-icon" id="results-icon">üèÜ</div>
                    <h2 id="results-title">F√©licitations !</h2>
                    <p class="message" id="results-message">Tu as termin√© le niveau 1 !</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="value" id="stat-score">0</div>
                            <div class="label">Points obtenus</div>
                        </div>
                        <div class="stat-card">
                            <div class="value" id="stat-correct">0/12</div>
                            <div class="label">Bonnes r√©ponses</div>
                        </div>
                        <div class="stat-card">
                            <div class="value" id="stat-streak">0</div>
                            <div class="label">Meilleure s√©rie</div>
                        </div>
                    </div>
                    
                    <button class="btn-retry" onclick="restartQuiz()">
                        üîÑ Recommencer
                    </button>
                    <button class="btn-next-level" onclick="goToNextLevel()">
                        Niveau 2 ‚Üí
                    </button>
                </div>
            </div>
            
        </div>
        
    </div>
    
    <script>
        // =====================================================
        // BASE DE DONN√âES DES PICTOGRAMMES - NIVEAU 1
        // =====================================================
        const pictogramsLevel1 = [
            // OBLIGATION (3)
            {
                id: 1,
                name: "Port des gants obligatoire",
                image: "pictogrammes/images/OBLIGATION-gants.jpg",
                category: "obligation",
                categoryName: "Obligation",
                color: "#0ea5e9",
                icon: "üîµ",
                description: "Tu dois porter des gants de protection pour manipuler certains produits ou mat√©riaux.",
                context: "Utilis√© dans les laboratoires, ateliers, cuisines professionnelles..."
            },
            {
                id: 2,
                name: "Port du casque obligatoire",
                image: "pictogrammes/images/OBLIGATION-casque.jpg",
                category: "obligation",
                categoryName: "Obligation",
                color: "#0ea5e9",
                icon: "üîµ",
                description: "Tu dois porter un casque de protection pour te prot√©ger la t√™te.",
                context: "Utilis√© sur les chantiers, dans les entrep√¥ts..."
            },
            {
                id: 3,
                name: "Port des chaussures de s√©curit√© obligatoire",
                image: "pictogrammes/images/OBLIGATION-chaussures.jpg",
                category: "obligation",
                categoryName: "Obligation",
                color: "#0ea5e9",
                icon: "üîµ",
                description: "Tu dois porter des chaussures de s√©curit√© pour prot√©ger tes pieds.",
                context: "Utilis√© dans les ateliers, entrep√¥ts, chantiers..."
            },
            
            // INTERDICTION (3)
            {
                id: 4,
                name: "Interdiction de fumer",
                image: "pictogrammes/images/INTERDIT-fumer.jpg",
                category: "interdiction",
                categoryName: "Interdiction",
                color: "#dc2626",
                icon: "üî¥",
                description: "Il est interdit de fumer dans cette zone.",
                context: "Pr√©sent dans presque tous les lieux de travail et √©tablissements."
            },
            {
                id: 5,
                name: "Flamme nue interdite",
                image: "pictogrammes/images/INTERDIT-flamme.jpg",
                category: "interdiction",
                categoryName: "Interdiction",
                color: "#dc2626",
                icon: "üî¥",
                description: "Interdiction d'approcher une flamme ou de produire du feu.",
                context: "Zones avec produits inflammables, stations-service..."
            },
            {
                id: 6,
                name: "Acc√®s interdit",
                image: "pictogrammes/images/INTERDIT-entrer.jpg",
                category: "interdiction",
                categoryName: "Interdiction",
                color: "#dc2626",
                icon: "üî¥",
                description: "L'entr√©e est interdite aux personnes non autoris√©es.",
                context: "Zones dangereuses, locaux techniques, r√©serves..."
            },
            
            // AVERTISSEMENT (2)
            {
                id: 7,
                name: "Danger √©lectrique",
                image: "pictogrammes/images/DANGER-electricite.jpg",
                category: "avertissement",
                categoryName: "Avertissement",
                color: "#eab308",
                icon: "‚ö†Ô∏è",
                description: "Attention ! Risque d'√©lectrocution. Zone avec courant √©lectrique dangereux.",
                context: "Armoires √©lectriques, transformateurs, lignes haute tension..."
            },
            {
                id: 8,
                name: "Danger de chute",
                image: "pictogrammes/images/DANGER-chute.jpg",
                category: "avertissement",
                categoryName: "Avertissement",
                color: "#eab308",
                icon: "‚ö†Ô∏è",
                description: "Attention ! Risque de chute en hauteur ou dans un trou.",
                context: "Escaliers, fosses, toits, √©chafaudages..."
            },
            
            // INCENDIE (2)
            {
                id: 9,
                name: "Extincteur",
                image: "pictogrammes/images/INCENDIE-extincteur.jpg",
                category: "incendie",
                categoryName: "Incendie",
                color: "#b91c1c",
                icon: "üßØ",
                description: "Indique l'emplacement d'un extincteur pour √©teindre un d√©but d'incendie.",
                context: "Pr√©sent dans tous les b√¢timents, pr√®s des sorties et zones √† risque."
            },
            {
                id: 10,
                name: "Alarme incendie",
                image: "pictogrammes/images/INCENDIE-alarme.jpg",
                category: "incendie",
                categoryName: "Incendie",
                color: "#b91c1c",
                icon: "üßØ",
                description: "Indique l'emplacement du d√©clencheur d'alarme incendie.",
                context: "Pr√®s des issues de secours, dans les couloirs..."
            },
            
            // SECOURS (2)
            {
                id: 11,
                name: "Sortie de secours",
                image: "pictogrammes/images/SECOURS-sortie-vers-droite.jpg",
                category: "secours",
                categoryName: "Secours",
                color: "#16a34a",
                icon: "üü¢",
                description: "Indique la direction vers une sortie de secours pour √©vacuer.",
                context: "Couloirs, escaliers, tous les b√¢timents recevant du public."
            },
            {
                id: 12,
                name: "Point de rassemblement",
                image: "pictogrammes/images/SECOURS-point-rassemblement.jpg",
                category: "secours",
                categoryName: "Secours",
                color: "#16a34a",
                icon: "üü¢",
                description: "Lieu o√π se regrouper apr√®s une √©vacuation d'urgence.",
                context: "√Ä l'ext√©rieur des b√¢timents, sur le parking..."
            }
        ];
        
        // =====================================================
        // VARIABLES GLOBALES
        // =====================================================
        let currentPhase = 'intro';
        let currentCardIndex = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let maxStreak = 0;
        let correctAnswers = 0;
        let shuffledQuestions = [];
        
        // =====================================================
        // NAVIGATION DES PHASES
        // =====================================================
        function setPhase(phase) {
            // Cacher toutes les phases
            document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.phase-btn').forEach(b => b.classList.remove('active'));
            
            // Afficher la phase s√©lectionn√©e
            document.getElementById('phase-' + phase).classList.add('active');
            document.getElementById('btn-' + phase).classList.add('active');
            
            currentPhase = phase;
        }
        
        // =====================================================
        // PHASE APPRENTISSAGE
        // =====================================================
        function startLearning() {
            setPhase('learn');
            currentCardIndex = 0;
            updateFlashcard();
        }
        
        function updateFlashcard() {
            const card = pictogramsLevel1[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            
            // Reset flip state
            flashcard.classList.remove('flipped');
            
            // Update content
            document.getElementById('flashcard-img').src = card.image;
            document.getElementById('flashcard-name').textContent = card.name;
            document.getElementById('flashcard-description').textContent = card.description;
            document.getElementById('flashcard-category').textContent = card.categoryName;
            
            // Update category display
            document.getElementById('learn-category-icon').textContent = card.icon;
            document.getElementById('learn-category-icon').style.background = card.color;
            document.getElementById('learn-category-name').textContent = card.categoryName;
            
            // Update progress
            const progress = ((currentCardIndex + 1) / pictogramsLevel1.length) * 100;
            document.getElementById('learn-progress').style.width = progress + '%';
            document.getElementById('learn-counter').textContent = (currentCardIndex + 1) + '/' + pictogramsLevel1.length;
            
            // Update buttons
            document.getElementById('btn-prev').disabled = currentCardIndex === 0;
            document.getElementById('btn-next').textContent = currentCardIndex === pictogramsLevel1.length - 1 ? 'Passer au Quiz ‚Üí' : 'Suivant ‚Üí';
        }
        
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }
        
        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateFlashcard();
            }
        }
        
        function nextCard() {
            if (currentCardIndex < pictogramsLevel1.length - 1) {
                currentCardIndex++;
                updateFlashcard();
            } else {
                startQuiz();
            }
        }
        
        // =====================================================
        // PHASE QUIZ
        // =====================================================
        function startQuiz() {
            setPhase('quiz');
            
            // Reset scores
            score = 0;
            streak = 0;
            maxStreak = 0;
            correctAnswers = 0;
            currentQuestionIndex = 0;
            
            // Shuffle questions
            shuffledQuestions = [...pictogramsLevel1].sort(() => Math.random() - 0.5);
            
            updateScoreDisplay();
            loadQuestion();
        }
        
        function loadQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            
            // Update image
            document.getElementById('quiz-img').src = question.image;
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
            document.getElementById('quiz-current').textContent = currentQuestionIndex + 1;
            
            // Generate options
            const options = generateOptions(question);
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option';
                btn.textContent = option.name;
                btn.onclick = () => checkAnswer(option.id === question.id, question);
                optionsContainer.appendChild(btn);
            });
            
            // Hide feedback
            document.getElementById('feedback-box').classList.remove('show');
        }
        
        function generateOptions(correctAnswer) {
            let options = [correctAnswer];
            let available = pictogramsLevel1.filter(p => p.id !== correctAnswer.id);
            
            // Add 3 random wrong answers
            while (options.length < 4 && available.length > 0) {
                const randomIndex = Math.floor(Math.random() * available.length);
                options.push(available[randomIndex]);
                available.splice(randomIndex, 1);
            }
            
            // Shuffle options
            return options.sort(() => Math.random() - 0.5);
        }
        
        function checkAnswer(isCorrect, question) {
            const buttons = document.querySelectorAll('.quiz-option');
            const feedbackBox = document.getElementById('feedback-box');
            
            // Disable all buttons
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === question.name) {
                    btn.classList.add('correct');
                } else if (!isCorrect && btn.classList.contains('quiz-option')) {
                    // Mark clicked wrong answer
                }
            });
            
            if (isCorrect) {
                correctAnswers++;
                streak++;
                maxStreak = Math.max(maxStreak, streak);
                score += 10 + (streak * 2); // Bonus for streak
                
                feedbackBox.className = 'feedback-box success show';
                document.getElementById('feedback-title').textContent = getPositiveFeedback();
                document.getElementById('feedback-text').textContent = question.context;
            } else {
                streak = 0;
                
                feedbackBox.className = 'feedback-box error show';
                document.getElementById('feedback-title').textContent = 'Pas tout √† fait...';
                document.getElementById('feedback-text').textContent = 'La bonne r√©ponse √©tait : ' + question.name;
                
                // Mark wrong answer
                buttons.forEach(btn => {
                    if (!btn.classList.contains('correct')) {
                        btn.classList.add('wrong');
                    }
                });
            }
            
            updateScoreDisplay();
            
            // Change button text if last question
            if (currentQuestionIndex === shuffledQuestions.length - 1) {
                document.getElementById('btn-next-question').textContent = 'Voir mes r√©sultats üèÜ';
            }
        }
        
        function getPositiveFeedback() {
            const messages = [
                'Bravo ! üéâ',
                'Excellent ! ‚≠ê',
                'Super ! üí™',
                'Parfait ! üåü',
                'G√©nial ! üöÄ',
                'Bien jou√© ! üëè'
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        function updateScoreDisplay() {
            document.getElementById('score-points').textContent = score;
            document.getElementById('score-streak').textContent = streak;
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        // =====================================================
        // PHASE R√âSULTATS
        // =====================================================
        function showResults() {
            setPhase('results');
            
            // Update stats
            document.getElementById('stat-score').textContent = score;
            document.getElementById('stat-correct').textContent = correctAnswers + '/' + shuffledQuestions.length;
            document.getElementById('stat-streak').textContent = maxStreak;
            
            // Customize message based on performance
            const percentage = (correctAnswers / shuffledQuestions.length) * 100;
            
            if (percentage === 100) {
                document.getElementById('results-icon').textContent = 'üèÜ';
                document.getElementById('results-title').textContent = 'Parfait !';
                document.getElementById('results-message').textContent = 'Tu as tout juste ! Tu ma√Ætrises les pictogrammes de base !';
            } else if (percentage >= 80) {
                document.getElementById('results-icon').textContent = 'üåü';
                document.getElementById('results-title').textContent = 'Excellent !';
                document.getElementById('results-message').textContent = 'Tr√®s bon r√©sultat ! Tu peux passer au niveau suivant.';
            } else if (percentage >= 60) {
                document.getElementById('results-icon').textContent = 'üëç';
                document.getElementById('results-title').textContent = 'Bien jou√© !';
                document.getElementById('results-message').textContent = 'C\'est un bon d√©but ! Continue √† t\'entra√Æner.';
            } else {
                document.getElementById('results-icon').textContent = 'üí™';
                document.getElementById('results-title').textContent = 'Continue !';
                document.getElementById('results-message').textContent = 'R√©vise les flashcards et r√©essaie, tu vas y arriver !';
            }
            
            // Mark phases as completed
            document.getElementById('btn-learn').classList.add('completed');
            document.getElementById('btn-quiz').classList.add('completed');
        }
        
        function restartQuiz() {
            startLearning();
        }
        
        function goToNextLevel() {
            window.location.href = 'C3_pictogrammes_niveau2.html';
        }
    </script>
    
</body>
</html>
