Voici le fichier HTML **complet et corrig√©**.

J'ai r√©par√© la fonction `buildUrl` tout en bas du fichier (dans la partie `<script type="module">`) pour √©liminer l'erreur de syntaxe qui bloquait le chargement. Vous pouvez copier l'int√©gralit√© du code ci-dessous et le sauvegarder dans votre fichier `quiz_01_eleve-18.html`.

```html
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSE - √âvaluation : Les ressources en √©nergie et le d√©veloppement durable</title>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://firestore.googleapis.com" crossorigin>
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #f0f2f5 0%, #e8ecef 100%); 
            color: #1a1a2e; line-height: 1.6; padding: 12px; 
            min-height: 100vh;
        }
        .container { 
            max-width: 900px; margin: 0 auto; background: #fff; 
            border-radius: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); overflow: hidden; 
        }
        .header { 
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 50%, #74b9ff 100%); 
            color: #fff; padding: 32px 30px; text-align: center; 
            position: relative; overflow: hidden;
        }
        .header::before {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: headerShimmer 6s ease-in-out infinite;
        }
        @keyframes headerShimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .header h1 { font-size: 1.6em; margin-bottom: 6px; font-weight: 700; position: relative; z-index: 1; }
        .header .subtitle { font-size: 1.05em; opacity: 0.95; position: relative; z-index: 1; }
        
        .competences-box { 
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%); 
            border-left: 5px solid #6c5ce7; margin: 24px 28px; padding: 18px 22px; 
            border-radius: 0 10px 10px 0; box-shadow: 0 4px 15px rgba(108, 92, 231, 0.08);
        }
        .competences-box h3 { color: #6c5ce7; margin-bottom: 12px; font-size: 1em; font-weight: 600; }
        .competences-box ul { list-style: none; padding: 0; display:flex; gap:12px; flex-wrap:wrap; }
        .comp-tag { 
            display: inline-block; background: linear-gradient(135deg, #6c5ce7, #8b5cf6); 
            color: #fff; padding: 2px 12px; border-radius: 6px; font-weight: 600; 
            font-size: 0.8em; box-shadow: 0 2px 4px rgba(108, 92, 231, 0.2);
        }
        .body-content { padding: 0 28px 28px; }
        .identification { 
            background: linear-gradient(135deg, #fff3e0 0%, #fff8f1 100%); 
            border: 2px solid #ff9800; border-radius: 12px; padding: 18px 22px; 
            margin: 24px 0; box-shadow: 0 4px 12px rgba(255, 152, 0, 0.1);
        }
        .identification h3 { color: #e65100; margin-bottom: 12px; font-weight: 600; }
        .identification label { font-weight: 600; font-size: 0.9em; margin-right:12px; }
        .identification input { 
            padding: 10px 14px; border: 2px solid #ffcc80; border-radius: 8px; 
            font-size: 0.95em; width: 200px; text-transform: uppercase; 
            transition: all 0.2s ease; font-weight: 600;
        }
        .identification input:focus {
            border-color: #ff9800; outline: none; 
            box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.1);
            transform: translateY(-1px);
        }
        
        .document-box { 
            background: linear-gradient(135deg, #fff8e1 0%, #fffbef 100%); 
            border: 1px solid #ffc107; border-radius: 10px; padding: 16px 20px; 
            margin: 16px 0; font-size: 0.9em; border-left: 6px solid #ffb74d; 
            box-shadow: 0 3px 10px rgba(255, 193, 7, 0.1);
        }
        .document-box h4 { 
            color: #f57f17; margin-bottom: 10px; font-size: 1.1em; 
            border-bottom: 2px solid #ffe0b2; padding-bottom: 6px; font-weight: 600;
        }

        .question-block { 
            background: linear-gradient(135deg, #fafbff 0%, #f8fafc 100%); 
            border: 2px solid #e2e8f0; border-radius: 12px; padding: 18px 20px; 
            margin: 16px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.06);
            transition: all 0.2s ease;
        }
        .question-block:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .q-label { 
            display: inline-block; background: linear-gradient(135deg, #6c5ce7, #8b5cf6); 
            color: #fff; width: 32px; height: 32px; line-height: 32px; text-align: center; 
            border-radius: 50%; font-size: 0.85em; font-weight: bold; margin-right: 10px; 
            box-shadow: 0 3px 8px rgba(108, 92, 231, 0.3);
        }
        .q-comp { 
            display: inline-block; background: linear-gradient(135deg, #e8eaf6, #f3e5f5); 
            color: #3949ab; padding: 3px 10px; border-radius: 6px; font-size: 0.75em; 
            font-weight: 600; margin-left: 8px; 
        }
        .q-points { 
            float: right; background: linear-gradient(135deg, #e0f7fa, #e1f5fe); 
            color: #006064; padding: 3px 12px; border-radius: 15px; font-size: 0.78em; 
            font-weight: 600; 
        }
        .q-text { 
            margin: 12px 0; font-size: 0.95em; font-weight: 500; color: #2c3e50; 
            line-height: 1.6;
        }
        
        .checkbox-group { display: flex; flex-direction: column; gap: 10px; margin-top: 12px; }
        .checkbox-group label { 
            display: flex; align-items: center; gap: 12px; padding: 12px 16px; 
            background: linear-gradient(135deg, #fff 0%, #fafafa 100%); 
            border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; 
            font-size: 0.9em; transition: all 0.2s ease;
        }
        .checkbox-group label:hover { 
            background: linear-gradient(135deg, #f3f0ff, #f8f5ff); 
            border-color: #a29bfe; transform: translateX(4px);
        }
        .checkbox-group input { width: 20px; height: 20px; accent-color: #6c5ce7; }
        
        .answer-input { 
            padding: 12px 16px; border: 3px solid #d1c4e9; border-radius: 8px; 
            font-size: 0.95em; width: 100%; max-width: 320px; 
            transition: all 0.2s ease; font-weight: 500;
            resize: none; overflow: hidden; min-height: 40px;
        }
        .answer-input:focus {
            border-color: #6c5ce7; outline: none;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
            transform: translateY(-1px);
        }
        .answer-select { 
            padding: 12px 16px; border: 3px solid #d1c4e9; border-radius: 8px; 
            font-size: 0.95em; background: #fff; width: 100%; font-weight: 500;
            transition: all 0.2s ease;
        }
        .answer-select:focus {
            border-color: #6c5ce7; outline: none;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }
        
        .eval-table { 
            width: 100%; border-collapse: collapse; font-size: 0.9em; 
            margin-top: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-radius: 8px; overflow: hidden;
        }
        .eval-table td { 
            padding: 12px; border-bottom: 1px solid #f0f0f0; 
            background: linear-gradient(135deg, #fff 0%, #fafafa 100%);
        }
        
        .submit-section { text-align: center; margin: 40px 0; }
        .submit-btn { 
            background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: #fff; 
            border: none; padding: 16px 48px; font-size: 1.1em; font-weight: 700; 
            border-radius: 50px; cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.3);
            position: relative; overflow: hidden;
        }
        .submit-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .submit-btn:hover::before { left: 100%; }
        .submit-btn:hover { 
            transform: translateY(-3px) scale(1.02); 
            box-shadow: 0 12px 35px rgba(108, 92, 231, 0.4); 
        }
        .submit-btn:disabled { 
            background: #bbb; cursor: not-allowed; transform: none; 
            box-shadow: none;
        }
        
        /* ANIMATIONS */
        .question-block { animation: slideInUp 0.5s ease-out; }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .body-content { padding: 0 16px 16px; }
            .competences-box { margin: 16px; }
            .identification { margin: 16px 0; padding: 16px; }
            .question-block { margin: 12px 0; padding: 16px; }
        }
    </style>
</head>
<body data-id-exercice="quiz_01">
<div class="container">
    <div class="header">
        <h1>√âvaluation : Les ressources en √©nergie et le d√©veloppement durable</h1>
        <div class="subtitle">Quiz Auto-Corrig√©</div>
    </div>
    <div class="competences-box">
        <h3>Comp√©tences √©valu√©es</h3>
        <ul><li><span class="comp-tag">C1</span></li><li><span class="comp-tag">C2</span></li><li><span class="comp-tag">C3</span></li><li><span class="comp-tag">C4</span></li></ul>
    </div>
    <div class="body-content">

    <div class="identification">
        <h3>Identification</h3>
        <div>
            <label for="code-eleve">Code √©l√®ve :</label>
            <input type="text" id="code-eleve" class="reponse-eleve" data-qid="code_eleve" placeholder="Votre code">
        </div>
    </div>

    
                        <div class="question-block">
                            <span class="q-label">1</span><span class="q-comp">C2</span><span class="q-points">2 pts</span>
                            <div class="q-text">Parmi les propositions suivantes, identifiez le groupe d'√©nergies consid√©r√©es comme 'renouvelables' (in√©puisables et respectueuses de l'environnement).</div>
                            <div class="checkbox-group">
                    <label><input type="radio" name="q_1770918151674_18" value="q_1770918151674_18_opt1" class="reponse-eleve" data-qid="q_1770918151674_18"> Le charbon, le p√©trole, le gaz et l'uranium.</label><label><input type="radio" name="q_1770918151674_18" value="q_1770918151674_18_opt2" class="reponse-eleve" data-qid="q_1770918151674_18"> Le solaire, l'√©olien, l'hydraulique et la biomasse.</label></div></div>
                        <div class="question-block">
                            <span class="q-label">2</span><span class="q-comp">C4</span><span class="q-points">1 pts</span>
                            <div class="q-text">Quels sont les gaz √† effet de serre (GES) dont l'accumulation dans l'atmosph√®re provoque le r√©chauffement climatique ? (Plusieurs r√©ponses possibles)</div>
                            <div class="checkbox-group">
                    <label><input type="radio" name="q_1770918152524_667" value="q_1770918152524_667_opt1" class="reponse-eleve" data-qid="q_1770918152524_667"> Le dioxyde de carbone (CO2)</label><label><input type="radio" name="q_1770918152524_667" value="q_1770918152524_667_opt2" class="reponse-eleve" data-qid="q_1770918152524_667"> Le m√©thane (CH4)</label><label><input type="radio" name="q_1770918152524_667" value="q_1770918152524_667_opt3" class="reponse-eleve" data-qid="q_1770918152524_667"> Le dioxyg√®ne (O2)</label><label><input type="radio" name="q_1770918152524_667" value="q_1770918152524_667_opt4" class="reponse-eleve" data-qid="q_1770918152524_667"> Le protoxyde d'azote (N2O)</label></div></div>
                    <div class="question-block">
                        <span class="q-label">3</span><span class="q-comp">C3</span><span class="q-points">1 pts</span>
                        <div class="q-text">L'√©nergie fissile (issue de l'uranium utilis√© dans les centrales nucl√©aires) est une √©nergie renouvelable.</div>
                        <div class="checkbox-group">
                            <label><input type="radio" name="q_1770918157472_225" value="vrai" class="reponse-eleve" data-qid="q_1770918157472_225"> Vrai</label>
                            <label><input type="radio" name="q_1770918157472_225" value="faux" class="reponse-eleve" data-qid="q_1770918157472_225"> Faux</label>
                        </div>
                    </div>
                
                    <div class="question-block">
                        <span class="q-label">4</span><span class="q-comp">C3</span><span class="q-points">1 pts</span>
                        <div class="q-text">L'empreinte carbone d'un produit (comme une voiture) ne prend en compte que la pollution √©mise lors de son utilisation, sans compter sa fabrication.</div>
                        <div class="checkbox-group">
                            <label><input type="radio" name="q_1770918158142_560" value="vrai" class="reponse-eleve" data-qid="q_1770918158142_560"> Vrai</label>
                            <label><input type="radio" name="q_1770918158142_560" value="faux" class="reponse-eleve" data-qid="q_1770918158142_560"> Faux</label>
                        </div>
                    </div>
                
                    <div class="question-block">
                        <span class="q-label">5</span><span class="q-comp">C1</span><span class="q-points">1 pts</span>
                        <div class="q-text">Sur un trajet Paris-Bordeaux, le train √©met beaucoup moins de CO2 par passager que l'avion.</div>
                        <div class="checkbox-group">
                            <label><input type="radio" name="q_1770918161017_33" value="vrai" class="reponse-eleve" data-qid="q_1770918161017_33"> Vrai</label>
                            <label><input type="radio" name="q_1770918161017_33" value="faux" class="reponse-eleve" data-qid="q_1770918161017_33"> Faux</label>
                        </div>
                    </div>
                
                    <div class="question-block">
                        <span class="q-label">6</span><span class="q-comp">C1</span><span class="q-points">1 pts</span>
                        <div class="q-text">Selon les objectifs de la conf√©rence mondiale sur le climat et les lois fran√ßaises, √† l'horizon de quelle ann√©e (√©crire l'ann√©e en 4 chiffres) les pays doivent-ils atteindre la 'neutralit√© carbone' ?</div>
                        <div><input type="number" class="reponse-eleve answer-input" data-qid="q_1770918162022_398" placeholder="Votre r√©ponse"></div>
                    </div>
                
                        <div class="question-block">
                            <span class="q-label">7</span><span class="q-comp">C1</span><span class="q-points">1 pts</span>
                            <div class="q-text">Dans un logement, quel est le poste qui consomme le plus d'√©nergie (environ 66% de la consommation totale) ?</div>
                            <div class="checkbox-group">
                    <label><input type="radio" name="q_1770918162992_630" value="q_1770918162992_630_opt1" class="reponse-eleve" data-qid="q_1770918162992_630"> Le chauffage</label><label><input type="radio" name="q_1770918162992_630" value="q_1770918162992_630_opt2" class="reponse-eleve" data-qid="q_1770918162992_630"> L'√©clairage et l'√©lectrom√©nager</label></div></div>
                    <div class="question-block">
                        <span class="q-label">8</span><span class="q-comp">C1</span><span class="q-points">1 pts</span>
                        <div class="q-text">Quel est le sigle (3 lettres) utilis√© pour d√©signer les 'Gaz √† Effet de Serre' ?</div>
                        <div><input type="text" class="reponse-eleve answer-input" data-qid="q_1770918164374_8" placeholder="Votre r√©ponse"></div>
                    </div>
                

    <div class="submit-section">
        <button class="submit-btn" id="btn-envoyer" onclick="window.tenterEnvoi()">Envoyer ma copie üì§</button>
        <p id="envoi-status" style="font-size:0.85em; color:#666; margin-top:12px;">Le syst√®me se charge...</p>
    </div>

    </div>
</div>

<script>
    const focus = { focusLeaves: 0, copyAttempts: 0 };
    function getAntiCheatOptions() {
        return (window.__PSE_BLUEPRINT && window.__PSE_BLUEPRINT.options) || { antiLeave: true, antiPaste: true, maxLeaves: 2 };
    }

    // Auto-resize pour les zones de texte
    function autoResize(el) {
        el.style.height = 'auto';
        el.style.height = el.scrollHeight + 'px';
    }

    // Appliquer l'auto-resize √† tous les champs texte
    document.addEventListener('DOMContentLoaded', function() {
        const textInputs = document.querySelectorAll('textarea, input[type="text"]');
        textInputs.forEach(input => {
            if (input.tagName === 'TEXTAREA') {
                input.addEventListener('input', () => autoResize(input));
                autoResize(input); // Taille initiale
            }
        });
    });

    document.addEventListener('visibilitychange', () => {
        const antiCheatOptions = getAntiCheatOptions();
        if (antiCheatOptions.antiLeave !== false && document.visibilityState === 'hidden') {
            focus.focusLeaves += 1;
        }
    });

    window.addEventListener('blur', () => {
        const antiCheatOptions = getAntiCheatOptions();
        if (antiCheatOptions.antiLeave !== false) {
            focus.focusLeaves += 1;
        }
    });

    document.addEventListener('copy', () => {
        focus.copyAttempts += 1;
    });

    document.addEventListener('paste', (event) => {
        const antiCheatOptions = getAntiCheatOptions();
        focus.copyAttempts += 1;
        if (antiCheatOptions.antiPaste !== false) {
            event.preventDefault();
        }
    });

    // Configuration Runner
    window.tenterEnvoi = async function() {
        const codeInput = document.getElementById('code-eleve');
        const code = (codeInput.value || '').trim().toUpperCase();
        if(!code || code.length < 2) { alert("Code √©l√®ve requis !"); return; }
        
        const btn = document.getElementById('btn-envoyer');
        btn.disabled = true;
        btn.textContent = "Envoi en cours...";

        if (typeof window.envoyerCopie === 'function') {
            try {
                const classeLS = (localStorage.getItem('userClasse') || '').trim();
                const elevePayload = classeLS
                    ? { code: code, classe: classeLS, blueprintEmbedded: true, focus: focus }
                    : { code: code, blueprintEmbedded: true, focus: focus };
                await window.envoyerCopie(code, { external: 0 }, elevePayload);
                btn.textContent = "‚úÖ Envoy√© !";
                btn.style.background = "linear-gradient(135deg, #2ecc71, #27ae60)";
            } catch(e) {
                console.error(e);
                alert("Erreur: " + e.message);
                btn.disabled = false;
                btn.textContent = "R√©essayer";
            }
        } else {
            alert("Syst√®me non pr√™t. Rechargez la page.");
            btn.disabled = false;
        }
    };
</script>


<script>
    window.__PSE_BLUEPRINT = {
  "id": "quiz_01",
  "devoirId": "quiz_01",
  "titre": "√âvaluation : Les ressources en √©nergie et le d√©veloppement durable",
  "niveau": "Bac Pro",
  "competences": [
    "C1",
    "C2",
    "C3",
    "C4"
  ],
  "version": "v1",
  "autocorrect": true,
  "options": {
    "antiLeave": true,
    "antiPaste": true,
    "maxLeaves": 2
  },
  "content": [
    {
      "type": "question",
      "qid": "q_1770918151674_18",
      "label": "1",
      "competence": "C2",
      "bareme": 2,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Parmi les propositions suivantes, identifiez le groupe d'√©nergies consid√©r√©es comme 'renouvelables' (in√©puisables et respectueuses de l'environnement).",
      "reponseCorrecte": "q_1770918151674_18_opt2",
      "reponseAttendue": "Les √©nergies renouvelables (solaire, √©olienne, hydraulique, biomasse, g√©othermie) se reconstituent rapidement et sont in√©puisables √† l'√©chelle humaine, contrairement aux √©nergies fossiles et fissiles (uranium) qui sont limit√©es (Voir L'essentiel en image p.251).",
      "options": [
        {
          "value": "q_1770918151674_18_opt1",
          "label": "Le charbon, le p√©trole, le gaz et l'uranium."
        },
        {
          "value": "q_1770918151674_18_opt2",
          "label": "Le solaire, l'√©olien, l'hydraulique et la biomasse."
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918152524_667",
      "label": "2",
      "competence": "C4",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Quels sont les gaz √† effet de serre (GES) dont l'accumulation dans l'atmosph√®re provoque le r√©chauffement climatique ? (Plusieurs r√©ponses possibles)",
      "reponseCorrecte": "q_1770918152524_667_opt1",
      "reponseAttendue": "Les principaux gaz √† effet de serre cit√©s dans le document 4 p.247 sont le dioxyde de carbone (CO2), le m√©thane (CH4) et le protoxyde d'azote (N2O). L'oxyg√®ne n'est pas un gaz √† effet de serre.",
      "options": [
        {
          "value": "q_1770918152524_667_opt1",
          "label": "Le dioxyde de carbone (CO2)"
        },
        {
          "value": "q_1770918152524_667_opt2",
          "label": "Le m√©thane (CH4)"
        },
        {
          "value": "q_1770918152524_667_opt3",
          "label": "Le dioxyg√®ne (O2)"
        },
        {
          "value": "q_1770918152524_667_opt4",
          "label": "Le protoxyde d'azote (N2O)"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918157472_225",
      "label": "3",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'√©nergie fissile (issue de l'uranium utilis√© dans les centrales nucl√©aires) est une √©nergie renouvelable.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918158142_560",
      "label": "4",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'empreinte carbone d'un produit (comme une voiture) ne prend en compte que la pollution √©mise lors de son utilisation, sans compter sa fabrication.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918161017_33",
      "label": "5",
      "competence": "C1",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "Sur un trajet Paris-Bordeaux, le train √©met beaucoup moins de CO2 par passager que l'avion.",
      "reponseCorrecte": "vrai",
      "reponseAttendue": "Vrai"
    },
    {
      "type": "question",
      "qid": "q_1770918162022_398",
      "label": "6",
      "competence": "C1",
      "bareme": 1,
      "inputType": "number",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Selon les objectifs de la conf√©rence mondiale sur le climat et les lois fran√ßaises, √† l'horizon de quelle ann√©e (√©crire l'ann√©e en 4 chiffres) les pays doivent-ils atteindre la 'neutralit√© carbone' ?",
      "reponseCorrecte": 2050,
      "reponseAttendue": "2050",
      "tolerance": 0
    },
    {
      "type": "question",
      "qid": "q_1770918162992_630",
      "label": "7",
      "competence": "C1",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Dans un logement, quel est le poste qui consomme le plus d'√©nergie (environ 66% de la consommation totale) ?",
      "reponseCorrecte": "q_1770918162992_630_opt1",
      "reponseAttendue": "C'est le chauffage qui repr√©sente la part la plus importante (66%) de la consommation √©nerg√©tique d'un logement, loin devant l'√©lectrom√©nager ou l'√©clairage (Voir graphique Doc 3 p.246).",
      "options": [
        {
          "value": "q_1770918162992_630_opt1",
          "label": "Le chauffage"
        },
        {
          "value": "q_1770918162992_630_opt2",
          "label": "L'√©clairage et l'√©lectrom√©nager"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918164374_8",
      "label": "8",
      "competence": "C1",
      "bareme": 1,
      "inputType": "texte_exact",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Quel est le sigle (3 lettres) utilis√© pour d√©signer les 'Gaz √† Effet de Serre' ?",
      "reponseCorrecte": [
        "GES",
        "G.E.S."
      ],
      "reponseAttendue": "GES OU G.E.S."
    }
  ],
  "questions": [
    {
      "type": "question",
      "qid": "q_1770918151674_18",
      "label": "1",
      "competence": "C2",
      "bareme": 2,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Parmi les propositions suivantes, identifiez le groupe d'√©nergies consid√©r√©es comme 'renouvelables' (in√©puisables et respectueuses de l'environnement).",
      "reponseCorrecte": "q_1770918151674_18_opt2",
      "reponseAttendue": "Les √©nergies renouvelables (solaire, √©olienne, hydraulique, biomasse, g√©othermie) se reconstituent rapidement et sont in√©puisables √† l'√©chelle humaine, contrairement aux √©nergies fossiles et fissiles (uranium) qui sont limit√©es (Voir L'essentiel en image p.251).",
      "options": [
        {
          "value": "q_1770918151674_18_opt1",
          "label": "Le charbon, le p√©trole, le gaz et l'uranium."
        },
        {
          "value": "q_1770918151674_18_opt2",
          "label": "Le solaire, l'√©olien, l'hydraulique et la biomasse."
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918152524_667",
      "label": "2",
      "competence": "C4",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Quels sont les gaz √† effet de serre (GES) dont l'accumulation dans l'atmosph√®re provoque le r√©chauffement climatique ? (Plusieurs r√©ponses possibles)",
      "reponseCorrecte": "q_1770918152524_667_opt1",
      "reponseAttendue": "Les principaux gaz √† effet de serre cit√©s dans le document 4 p.247 sont le dioxyde de carbone (CO2), le m√©thane (CH4) et le protoxyde d'azote (N2O). L'oxyg√®ne n'est pas un gaz √† effet de serre.",
      "options": [
        {
          "value": "q_1770918152524_667_opt1",
          "label": "Le dioxyde de carbone (CO2)"
        },
        {
          "value": "q_1770918152524_667_opt2",
          "label": "Le m√©thane (CH4)"
        },
        {
          "value": "q_1770918152524_667_opt3",
          "label": "Le dioxyg√®ne (O2)"
        },
        {
          "value": "q_1770918152524_667_opt4",
          "label": "Le protoxyde d'azote (N2O)"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918157472_225",
      "label": "3",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'√©nergie fissile (issue de l'uranium utilis√© dans les centrales nucl√©aires) est une √©nergie renouvelable.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918158142_560",
      "label": "4",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'empreinte carbone d'un produit (comme une voiture) ne prend en compte que la pollution √©mise lors de son utilisation, sans compter sa fabrication.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918161017_33",
      "label": "5",
      "competence": "C1",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "Sur un trajet Paris-Bordeaux, le train √©met beaucoup moins de CO2 par passager que l'avion.",
      "reponseCorrecte": "vrai",
      "reponseAttendue": "Vrai"
    },
    {
      "type": "question",
      "qid": "q_1770918162022_398",
      "label": "6",
      "competence": "C1",
      "bareme": 1,
      "inputType": "number",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Selon les objectifs de la conf√©rence mondiale sur le climat et les lois fran√ßaises, √† l'horizon de quelle ann√©e (√©crire l'ann√©e en 4 chiffres) les pays doivent-ils atteindre la 'neutralit√© carbone' ?",
      "reponseCorrecte": 2050,
      "reponseAttendue": "2050",
      "tolerance": 0
    },
    {
      "type": "question",
      "qid": "q_1770918162992_630",
      "label": "7",
      "competence": "C1",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Dans un logement, quel est le poste qui consomme le plus d'√©nergie (environ 66% de la consommation totale) ?",
      "reponseCorrecte": "q_1770918162992_630_opt1",
      "reponseAttendue": "C'est le chauffage qui repr√©sente la part la plus importante (66%) de la consommation √©nerg√©tique d'un logement, loin devant l'√©lectrom√©nager ou l'√©clairage (Voir graphique Doc 3 p.246).",
      "options": [
        {
          "value": "q_1770918162992_630_opt1",
          "label": "Le chauffage"
        },
        {
          "value": "q_1770918162992_630_opt2",
          "label": "L'√©clairage et l'√©lectrom√©nager"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918164374_8",
      "label": "8",
      "competence": "C1",
      "bareme": 1,
      "inputType": "texte_exact",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Quel est le sigle (3 lettres) utilis√© pour d√©signer les 'Gaz √† Effet de Serre' ?",
      "reponseCorrecte": [
        "GES",
        "G.E.S."
      ],
      "reponseAttendue": "GES OU G.E.S."
    }
  ],
  "items": [
    {
      "type": "question",
      "qid": "q_1770918151674_18",
      "label": "1",
      "competence": "C2",
      "bareme": 2,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Parmi les propositions suivantes, identifiez le groupe d'√©nergies consid√©r√©es comme 'renouvelables' (in√©puisables et respectueuses de l'environnement).",
      "reponseCorrecte": "q_1770918151674_18_opt2",
      "reponseAttendue": "Les √©nergies renouvelables (solaire, √©olienne, hydraulique, biomasse, g√©othermie) se reconstituent rapidement et sont in√©puisables √† l'√©chelle humaine, contrairement aux √©nergies fossiles et fissiles (uranium) qui sont limit√©es (Voir L'essentiel en image p.251).",
      "options": [
        {
          "value": "q_1770918151674_18_opt1",
          "label": "Le charbon, le p√©trole, le gaz et l'uranium."
        },
        {
          "value": "q_1770918151674_18_opt2",
          "label": "Le solaire, l'√©olien, l'hydraulique et la biomasse."
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918152524_667",
      "label": "2",
      "competence": "C4",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Quels sont les gaz √† effet de serre (GES) dont l'accumulation dans l'atmosph√®re provoque le r√©chauffement climatique ? (Plusieurs r√©ponses possibles)",
      "reponseCorrecte": "q_1770918152524_667_opt1",
      "reponseAttendue": "Les principaux gaz √† effet de serre cit√©s dans le document 4 p.247 sont le dioxyde de carbone (CO2), le m√©thane (CH4) et le protoxyde d'azote (N2O). L'oxyg√®ne n'est pas un gaz √† effet de serre.",
      "options": [
        {
          "value": "q_1770918152524_667_opt1",
          "label": "Le dioxyde de carbone (CO2)"
        },
        {
          "value": "q_1770918152524_667_opt2",
          "label": "Le m√©thane (CH4)"
        },
        {
          "value": "q_1770918152524_667_opt3",
          "label": "Le dioxyg√®ne (O2)"
        },
        {
          "value": "q_1770918152524_667_opt4",
          "label": "Le protoxyde d'azote (N2O)"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918157472_225",
      "label": "3",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'√©nergie fissile (issue de l'uranium utilis√© dans les centrales nucl√©aires) est une √©nergie renouvelable.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918158142_560",
      "label": "4",
      "competence": "C3",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "L'empreinte carbone d'un produit (comme une voiture) ne prend en compte que la pollution √©mise lors de son utilisation, sans compter sa fabrication.",
      "reponseCorrecte": "faux",
      "reponseAttendue": "Faux"
    },
    {
      "type": "question",
      "qid": "q_1770918161017_33",
      "label": "5",
      "competence": "C1",
      "bareme": 1,
      "inputType": "vrai_faux",
      "autocorrect": true,
      "questionText": "Sur un trajet Paris-Bordeaux, le train √©met beaucoup moins de CO2 par passager que l'avion.",
      "reponseCorrecte": "vrai",
      "reponseAttendue": "Vrai"
    },
    {
      "type": "question",
      "qid": "q_1770918162022_398",
      "label": "6",
      "competence": "C1",
      "bareme": 1,
      "inputType": "number",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Selon les objectifs de la conf√©rence mondiale sur le climat et les lois fran√ßaises, √† l'horizon de quelle ann√©e (√©crire l'ann√©e en 4 chiffres) les pays doivent-ils atteindre la 'neutralit√© carbone' ?",
      "reponseCorrecte": 2050,
      "reponseAttendue": "2050",
      "tolerance": 0
    },
    {
      "type": "question",
      "qid": "q_1770918162992_630",
      "label": "7",
      "competence": "C1",
      "bareme": 1,
      "inputType": "checkbox",
      "autocorrect": true,
      "questionText": "Dans un logement, quel est le poste qui consomme le plus d'√©nergie (environ 66% de la consommation totale) ?",
      "reponseCorrecte": "q_1770918162992_630_opt1",
      "reponseAttendue": "C'est le chauffage qui repr√©sente la part la plus importante (66%) de la consommation √©nerg√©tique d'un logement, loin devant l'√©lectrom√©nager ou l'√©clairage (Voir graphique Doc 3 p.246).",
      "options": [
        {
          "value": "q_1770918162992_630_opt1",
          "label": "Le chauffage"
        },
        {
          "value": "q_1770918162992_630_opt2",
          "label": "L'√©clairage et l'√©lectrom√©nager"
        }
      ]
    },
    {
      "type": "question",
      "qid": "q_1770918164374_8",
      "label": "8",
      "competence": "C1",
      "bareme": 1,
      "inputType": "texte_exact",
      "autocorrect": false,
      "besoinCorrectionManuelle": true,
      "questionText": "Quel est le sigle (3 lettres) utilis√© pour d√©signer les 'Gaz √† Effet de Serre' ?",
      "reponseCorrecte": [
        "GES",
        "G.E.S."
      ],
      "reponseAttendue": "GES OU G.E.S."
    }
  ]
};
</script>
        

<script type="module">
    const statusEl = document.getElementById("envoi-status");
    const segRaw = location.pathname.split("/").filter(Boolean)[0] || "";
    const seg = segRaw.includes(".") ? "" : segRaw;
    const prefixes = [];
    if (seg) prefixes.push("/" + seg);
    prefixes.push("/PSE");
    prefixes.push("");
    const uniquePrefixes = [...new Set(prefixes)];

    // Fonction corrig√©e (sans l'erreur de syntaxe const)
    function buildUrl(prefix, relPath) {
        const p = prefix || "";
        const base = p ? p.replace(/\/+$/, "") : "";
        const rel = String(relPath || "").replace(/^\/+/, "");
        return (base ? base + "/" : "/") + rel;
    }

    async function importWithPrefixes(fileRelativePath, optionalRelativePaths = []) {
        let lastError = null;
        const attempts = [];

        uniquePrefixes.forEach(prefix => attempts.push(buildUrl(prefix, fileRelativePath)));
        optionalRelativePaths.forEach(opt => {
            uniquePrefixes.forEach(prefix => attempts.push(buildUrl(prefix, opt)));
        });

        const uniqueAttempts = [...new Set(attempts)];

        for (const url of uniqueAttempts) {
            try {
                console.warn("Tentative import:", url);
                await import(url);
                return url;
            } catch (e) {
                lastError = e;
                console.warn("Import √©chou√©:", url, e);
            }
        }

        throw lastError || new Error("Impossible de charger le module: " + fileRelativePath);
    }

    try {
        statusEl.textContent = "Chargement des modules...";

        // --- CORRECTION DES LIENS ICI (On utilise mapse.fr directement) ---
        const annuaireUrl = "https://mapse.fr/annuaire.js";
        const runnerUrl = "https://mapse.fr/assets/pse-runner.js";

        await import(annuaireUrl);
        await import(runnerUrl);

        console.log("Modules charg√©s:", { annuaireUrl, runnerUrl, seg, prefixes: uniquePrefixes });
        statusEl.textContent = "Syst√®me pr√™t.";
    } catch(e) {
        console.error("Erreur modules:", e);
        statusEl.textContent = "Erreur de chargement des modules (v√©rifiez votre connexion).";
        statusEl.style.color = "red";
    }
</script>
</body>
</html>

```
