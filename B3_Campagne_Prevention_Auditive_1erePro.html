<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module B.3 - Campagne Pr√©vention Auditive - Premi√®re Bac Pro</title>
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'OpenDyslexie', Arial, sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
            min-height: 100vh;
            color: var(--dark-pse);
            line-height: 1.6;
        }

        .exercice-container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            font-size: 16px;
        }

        @media (min-width: 768px) {
            .exercice-container {
                padding: 20px;
                font-size: 17px;
            }
        }

        @media (min-width: 1024px) {
            .exercice-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 30px;
                font-size: 18px;
            }
        }

        .cadre-pedagogique {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border-left: 6px solid var(--primary-pse);
        }

        .module-info h2 {
            color: var(--primary-pse);
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .objectif {
            background: var(--light-pse);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .competences-travaillees h3 {
            color: var(--secondary-pse);
            margin: 20px 0 15px 0;
            font-size: 1.2em;
        }

        .competences-list {
            list-style: none;
            padding: 0;
        }

        .competences-list li {
            background: linear-gradient(90deg, #e3f2fd, #f3e5f5);
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-pse);
        }

        .niveau-cible {
            background: var(--warning-pse);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            font-weight: 600;
            margin-top: 15px;
        }

        .exercice-principal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .scenario-intro {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .scenario-intro::before {
            content: 'üì¢';
            font-size: 3em;
            position: absolute;
            top: 10px;
            right: 20px;
            opacity: 0.3;
        }

        .campagne-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid var(--primary-pse);
        }

        .campagne-title {
            color: var(--primary-pse);
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phase-campagne {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-top: 4px solid var(--secondary-pse);
            position: relative;
        }

        .phase-numero {
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--secondary-pse);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .cible-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .cible-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .cible-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .cible-card.selected {
            border: 3px solid var(--warning-pse);
            background: #fff3e0;
            transform: scale(1.05);
        }

        .cible-card.correct {
            border: 3px solid var(--success-pse);
            background: #e8f5e8;
        }

        .cible-card.incorrect {
            border: 2px solid var(--danger-pse);
            background: #ffebee;
        }

        .message-builder {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: white;
        }

        .message-input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            margin: 10px 0;
            background: rgba(255,255,255,0.9);
        }

        .message-input:focus {
            outline: none;
            background: white;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .support-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .support-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #ddd;
        }

        .support-item:hover {
            transform: scale(1.05);
            border-color: var(--primary-pse);
        }

        .support-item.selected {
            border-color: var(--success-pse);
            background: #e8f5e8;
        }

        .support-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .instructions-interaction {
            background: #fff3e0;
            border-left: 4px solid var(--warning-pse);
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .instructions-interaction h5 {
            color: var(--warning-pse);
            margin-bottom: 10px;
        }

        .apercu-campagne {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .apercu-campagne h3 {
            color: #64b5f6;
            margin-bottom: 20px;
            text-align: center;
        }

        .campagne-preview {
            background: white;
            color: var(--dark-pse);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
        }

        .slogan-display {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
            border-radius: 10px;
        }

        .btn-principal {
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-principal:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .btn-principal:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondaire {
            background: white;
            color: var(--primary-pse);
            border: 2px solid var(--primary-pse);
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin: 0 10px;
        }

        .btn-secondaire:hover {
            background: var(--primary-pse);
            color: white;
        }

        .evaluation-campagne {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid var(--primary-pse);
        }

        .critere-evaluation {
            background: white;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--success-pse);
        }

        .note-critere {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }

        .etoiles {
            display: flex;
            gap: 5px;
        }

        .etoile {
            font-size: 1.5em;
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s ease;
        }

        .etoile.active {
            color: #ffd700;
        }

        .etoile:hover,
        .etoile:hover ~ .etoile {
            color: #ffd700;
        }

        .correction-explicite {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            display: none;
        }

        .correction-explicite.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .bonne-reponse {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .explication-detaillee {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .astuce-bac {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #e65100;
        }

        .astuce-bac::before {
            content: 'üí° ASTUCE BAC : ';
            font-weight: bold;
        }

        .score-display {
            background: linear-gradient(135deg, #4caf50, #2196f3);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            margin: 20px 0;
            font-weight: 600;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--success-pse), #4caf50);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .rgpd-notice {
            background: #2c3e50;
            color: white;
            padding: 15px;
            text-align: center;
            margin-top: 40px;
            border-radius: 10px;
            font-size: 0.9em;
        }

        .element-clickable {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .element-clickable:hover {
            transform: scale(1.02);
        }

        .element-clickable.selected {
            border: 3px solid var(--warning-pse);
            background: #FFA726;
            transform: scale(1.1);
        }

        .element-clickable.used {
            opacity: 0.6;
            cursor: default;
        }

        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .feedback-card {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .close-feedback {
            float: right;
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px 10px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .statistiques-campagne {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-pse);
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .timeline-campagne {
            position: relative;
            margin: 30px 0;
        }

        .timeline-item {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid var(--primary-pse);
            position: relative;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: var(--primary-pse);
            border-radius: 50%;
        }

        .public-target {
            display: inline-block;
            background: var(--warning-pse);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
        }

        .impact-simulator {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .impact-gauge {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .impact-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="exercice-container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module B.3 : Le bruit au quotidien</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Mesurer l'incidence du bruit sur la sant√© et la vie sociale pour agir en citoyen responsable
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                    <li><strong>C5</strong> - Argumenter un choix</li>
                    <li><strong>C6</strong> - Communiquer √† l'√©crit et √† l'oral avec une syntaxe claire et un vocabulaire adapt√©</li>
                    <li><strong>C1</strong> - Traiter une information</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            <div class="scenario-intro">
                <h2>üì¢ SIMULATION GAMIFI√âE : Cr√©er une campagne de pr√©vention auditive</h2>
                <p><strong>Vous √™tes charg√©(e) de communication en sant√© publique !</strong><br>
                Votre mission : concevoir une campagne de sensibilisation innovante pour pr√©venir les risques auditifs chez les jeunes et en milieu professionnel.</p>
                
                <div style="margin-top: 20px; font-size: 1.1em;">
                    <strong>üéØ OBJECTIF :</strong> Cr√©er une campagne impactante qui sauve des oreilles !
                </div>
            </div>

            <div class="instructions-interaction">
                <h5>üì± COMMENT MANIPULER :</h5>
                <p><strong>1.</strong> Cliquez sur un √©l√©ment pour le s√©lectionner (il s'illumine)<br>
                <strong>2.</strong> Cliquez sur la zone de destination appropri√©e<br>
                <strong>3.</strong> Construisez votre campagne √©tape par √©tape !</p>
            </div>

            <!-- PHASE 1 : Analyse du public cible -->
            <div class="campagne-section">
                <h3 class="campagne-title">üéØ PHASE 1 : Identifier votre public cible</h3>
                
                <div class="phase-campagne">
                    <div class="phase-numero">1</div>
                    <h4>Qui voulez-vous sensibiliser ?</h4>
                    <p>Choisissez le public prioritaire pour votre campagne de pr√©vention auditive.</p>
                    
                    <div class="cible-selection">
                        <div class="cible-card element-clickable" data-cible="jeunes" onclick="selectionnerCible(this, 'jeunes')">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">üéß</div>
                            <h4>JEUNES 16-25 ANS</h4>
                            <p style="font-size: 0.9em; margin: 10px 0;">Concerts, √©couteurs, discoth√®ques</p>
                            <div class="public-target">Risque : Trauma sonore</div>
                        </div>
                        <div class="cible-card element-clickable" data-cible="travailleurs" onclick="selectionnerCible(this, 'travailleurs')">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">üë∑</div>
                            <h4>TRAVAILLEURS</h4>
                            <p style="font-size: 0.9em; margin: 10px 0;">Industrie, BTP, agriculture</p>
                            <div class="public-target">Risque : Exposition chronique</div>
                        </div>
                        <div class="cible-card element-clickable" data-cible="parents" onclick="selectionnerCible(this, 'parents')">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <h4>PARENTS</h4>
                            <p style="font-size: 0.9em; margin: 10px 0;">Protection des enfants</p>
                            <div class="public-target">R√¥le : Pr√©vention pr√©coce</div>
                        </div>
                        <div class="cible-card element-clickable" data-cible="seniors" onclick="selectionnerCible(this, 'seniors')">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">üë¥</div>
                            <h4>SENIORS 60+</h4>
                            <p style="font-size: 0.9em; margin: 10px 0;">Presbyacousie, d√©pistage</p>
                            <div class="public-target">Objectif : D√©pistage pr√©coce</div>
                        </div>
                    </div>

                    <div id="analysePublic" style="display: none;" class="bonne-reponse">
                        <h5 id="publicChoisi"></h5>
                        <div id="caracteristiquesPublic"></div>
                    </div>

                    <button class="btn-principal" onclick="validerCible()" id="validerCibleBtn" style="margin-top: 20px;" disabled>
                        Analyser ce public cible
                    </button>
                </div>
            </div>

            <!-- PHASE 2 : Cr√©ation du message cl√© -->
            <div class="campagne-section">
                <h3 class="campagne-title">üí¨ PHASE 2 : Construire votre message cl√©</h3>
                
                <div class="phase-campagne">
                    <div class="phase-numero">2</div>
                    <h4>Quel message voulez-vous faire passer ?</h4>
                    
                    <div class="message-builder">
                        <h5 style="margin-bottom: 15px;">üé® CR√âATEUR DE SLOGAN</h5>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="sloganeInput">Votre slogan accrocheur :</label>
                            <input type="text" id="sloganeInput" class="message-input" 
                                   placeholder="Ex: 'Tes oreilles n'ont qu'une vie, prot√®ge-les !'" 
                                   oninput="previewSlogan()">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="messageInput">Message principal (50-100 mots) :</label>
                            <textarea id="messageInput" class="message-input" rows="4" 
                                      placeholder="D√©veloppez votre argument principal..." 
                                      oninput="previewMessage()"></textarea>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div class="element-clickable" data-angle="peur" onclick="choisirAngle(this)" style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                                <strong>üò± ANGLE PEUR</strong><br>
                                <small>"Attention aux cons√©quences"</small>
                            </div>
                            <div class="element-clickable" data-angle="positif" onclick="choisirAngle(this)" style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                                <strong>üòä ANGLE POSITIF</strong><br>
                                <small>"Garder une bonne audition"</small>
                            </div>
                            <div class="element-clickable" data-angle="scientifique" onclick="choisirAngle(this)" style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                                <strong>üî¨ ANGLE SCIENTIFIQUE</strong><br>
                                <small>"Preuves et donn√©es"</small>
                            </div>
                            <div class="element-clickable" data-angle="temoignage" onclick="choisirAngle(this)" style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                                <strong>üí¨ T√âMOIGNAGES</strong><br>
                                <small>"Exp√©riences v√©cues"</small>
                            </div>
                        </div>
                    </div>

                    <button class="btn-principal" onclick="validerMessage()" id="validerMessageBtn" style="margin-top: 20px;">
                        Valider le message
                    </button>
                </div>
            </div>

            <!-- PHASE 3 : Choix des supports -->
            <div class="campagne-section">
                <h3 class="campagne-title">üì± PHASE 3 : S√©lectionner vos supports de communication</h3>
                
                <div class="phase-campagne">
                    <div class="phase-numero">3</div>
                    <h4>Sur quels supports diffuser votre campagne ?</h4>
                    <p>Choisissez 3 supports adapt√©s √† votre public cible.</p>
                    
                    <div class="support-gallery">
                        <div class="support-item element-clickable" data-support="reseaux" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üì±</div>
                            <strong>R√©seaux sociaux</strong><br>
                            <small>Instagram, TikTok, Snapchat</small>
                        </div>
                        <div class="support-item element-clickable" data-support="affichage" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üñºÔ∏è</div>
                            <strong>Affichage public</strong><br>
                            <small>M√©tro, abribus, lyc√©es</small>
                        </div>
                        <div class="support-item element-clickable" data-support="radio" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üìª</div>
                            <strong>Radio</strong><br>
                            <small>Spots publicitaires</small>
                        </div>
                        <div class="support-item element-clickable" data-support="video" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üé•</div>
                            <strong>Vid√©o</strong><br>
                            <small>YouTube, Web TV</small>
                        </div>
                        <div class="support-item element-clickable" data-support="influenceurs" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üåü</div>
                            <strong>Influenceurs</strong><br>
                            <small>Partenariats cibl√©s</small>
                        </div>
                        <div class="support-item element-clickable" data-support="evenements" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üé™</div>
                            <strong>√âv√©nements</strong><br>
                            <small>Concerts, festivals, salons</small>
                        </div>
                        <div class="support-item element-clickable" data-support="entreprises" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üè¢</div>
                            <strong>Milieu pro</strong><br>
                            <small>Formations, affiches</small>
                        </div>
                        <div class="support-item element-clickable" data-support="medical" onclick="selectionnerSupport(this)">
                            <div class="support-icon">üè•</div>
                            <strong>Milieu m√©dical</strong><br>
                            <small>Cabinets, hopitaux</small>
                        </div>
                    </div>

                    <div id="supportsSelectionnes" style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin: 20px 0; min-height: 60px;">
                        <strong>üìã VOS SUPPORTS S√âLECTIONN√âS (0/3) :</strong>
                        <div id="listeSupports" style="margin-top: 10px;"></div>
                    </div>

                    <button class="btn-principal" onclick="validerSupports()" id="validerSupportsBtn" style="margin-top: 15px;" disabled>
                        Valider la strat√©gie de diffusion
                    </button>
                </div>
            </div>

            <!-- PHASE 4 : Actions concr√®tes -->
            <div class="campagne-section">
                <h3 class="campagne-title">‚ö° PHASE 4 : D√©finir les actions de pr√©vention</h3>
                
                <div class="phase-campagne">
                    <div class="phase-numero">4</div>
                    <h4>Quelles actions concr√®tes proposez-vous ?</h4>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 25px 0;">
                        <div class="element-clickable" data-action="depistage" onclick="ajouterAction(this)" style="background: #e8f5e8; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">ü©∫</div>
                            <strong>D√âPISTAGES GRATUITS</strong><br>
                            <small>Audiom√©tries dans les lyc√©es/entreprises</small>
                        </div>
                        <div class="element-clickable" data-action="formations" onclick="ajouterAction(this)" style="background: #e3f2fd; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">üìö</div>
                            <strong>FORMATIONS</strong><br>
                            <small>Ateliers de sensibilisation interactifs</small>
                        </div>
                        <div class="element-clickable" data-action="equipements" onclick="ajouterAction(this)" style="background: #fff3e0; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">üõ°Ô∏è</div>
                            <strong>DISTRIBUTION EPI</strong><br>
                            <small>Bouchons d'oreille, casques gratuits</small>
                        </div>
                        <div class="element-clickable" data-action="appli" onclick="ajouterAction(this)" style="background: #f3e5f5; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">üì±</div>
                            <strong>APPLICATION MOBILE</strong><br>
                            <small>D√©cibelm√®tre et conseils personnalis√©s</small>
                        </div>
                        <div class="element-clickable" data-action="challenges" onclick="ajouterAction(this)" style="background: #ffebee; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">üèÜ</div>
                            <strong>CHALLENGES</strong><br>
                            <small>D√©fis et r√©compenses pour bonnes pratiques</small>
                        </div>
                        <div class="element-clickable" data-action="partenariats" onclick="ajouterAction(this)" style="background: #e8f5e8; padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #ddd;">
                            <div style="font-size: 2em; margin-bottom: 10px;">ü§ù</div>
                            <strong>PARTENARIATS</strong><br>
                            <small>Concerts, festivals "Oreilles responsables"</small>
                        </div>
                    </div>

                    <div id="actionsPlanifiees" style="background: #f5f5f5; padding: 20px; border-radius: 12px; margin: 20px 0;">
                        <strong>üìã PLAN D'ACTION :</strong>
                        <div id="listeActions" style="margin-top: 15px;"></div>
                    </div>

                    <button class="btn-principal" onclick="planifierActions()" id="planifierBtn" style="margin-top: 15px;">
                        Planifier les actions
                    </button>
                </div>
            </div>

            <!-- APER√áU DE LA CAMPAGNE -->
            <div class="campagne-section">
                <h3 class="campagne-title">üëÅÔ∏è APER√áU : Votre campagne de pr√©vention</h3>
                
                <div class="apercu-campagne">
                    <h3>üé® PR√âVISUALISATION DE VOTRE CAMPAGNE</h3>
                    
                    <div class="campagne-preview">
                        <div class="slogan-display" id="sloganPreview">
                            Votre slogan appara√Ætra ici
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <strong>üéØ PUBLIC CIBLE :</strong>
                                <div id="publicPreview" style="margin: 10px 0; padding: 10px; background: #e3f2fd; border-radius: 8px;">
                                    √Ä d√©finir
                                </div>
                            </div>
                            <div>
                                <strong>üì± SUPPORTS :</strong>
                                <div id="supportsPreview" style="margin: 10px 0; padding: 10px; background: #e8f5e8; border-radius: 8px;">
                                    √Ä s√©lectionner
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <strong>üí¨ MESSAGE PRINCIPAL :</strong>
                            <div id="messagePreview" style="margin: 10px 0; padding: 15px; background: #fff3e0; border-radius: 8px; font-style: italic;">
                                Votre message principal appara√Ætra ici
                            </div>
                        </div>

                        <div>
                            <strong>‚ö° ACTIONS PLANIFI√âES :</strong>
                            <div id="actionsPreview" style="margin: 10px 0; padding: 10px; background: #f3e5f5; border-radius: 8px;">
                                Aucune action s√©lectionn√©e
                            </div>
                        </div>
                    </div>

                    <div class="impact-simulator">
                        <h4>üìä SIMULATEUR D'IMPACT</h4>
                        <div style="margin: 15px 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>Port√©e estim√©e :</span>
                                <span id="porteeEstimee">0 personnes</span>
                            </div>
                            <div class="impact-gauge">
                                <div class="impact-fill" id="impactGauge" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>

                    <button class="btn-principal" onclick="lancerCampagne()" id="lancerBtn" style="margin: 20px auto; display: block; font-size: 1.2em; padding: 20px 40px;" disabled>
                        üöÄ LANCER LA CAMPAGNE !
                    </button>
                </div>
            </div>

            <!-- √âVALUATION DE LA CAMPAGNE -->
            <div class="campagne-section" id="evaluationSection" style="display: none;">
                <h3 class="campagne-title">‚≠ê √âVALUATION : Notez votre campagne</h3>
                
                <div class="evaluation-campagne">
                    <h4>√âvaluez votre travail selon les crit√®res professionnels :</h4>
                    
                    <div class="critere-evaluation">
                        <strong>üéØ CIBLAGE DU PUBLIC</strong>
                        <p>Le public choisi est-il pertinent pour la probl√©matique ?</p>
                        <div class="note-critere">
                            <span>Note :</span>
                            <div class="etoiles" data-critere="ciblage">
                                <span class="etoile" onclick="noterCritere('ciblage', 1)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('ciblage', 2)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('ciblage', 3)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('ciblage', 4)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('ciblage', 5)">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <div class="critere-evaluation">
                        <strong>üí¨ QUALIT√â DU MESSAGE</strong>
                        <p>Le slogan et le message sont-ils clairs et impactants ?</p>
                        <div class="note-critere">
                            <span>Note :</span>
                            <div class="etoiles" data-critere="message">
                                <span class="etoile" onclick="noterCritere('message', 1)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('message', 2)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('message', 3)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('message', 4)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('message', 5)">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <div class="critere-evaluation">
                        <strong>üì± CHOIX DES SUPPORTS</strong>
                        <p>Les supports correspondent-ils au public cible ?</p>
                        <div class="note-critere">
                            <span>Note :</span>
                            <div class="etoiles" data-critere="supports">
                                <span class="etoile" onclick="noterCritere('supports', 1)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('supports', 2)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('supports', 3)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('supports', 4)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('supports', 5)">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <div class="critere-evaluation">
                        <strong>‚ö° COH√âRENCE DES ACTIONS</strong>
                        <p>Les actions propos√©es sont-elles r√©alisables et efficaces ?</p>
                        <div class="note-critere">
                            <span>Note :</span>
                            <div class="etoiles" data-critere="actions">
                                <span class="etoile" onclick="noterCritere('actions', 1)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('actions', 2)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('actions', 3)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('actions', 4)">‚≠ê</span>
                                <span class="etoile" onclick="noterCritere('actions', 5)">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <button class="btn-principal" onclick="finaliserEvaluation()" id="finaliserBtn" style="margin-top: 20px;">
                        üéØ Finaliser l'√©valuation
                    </button>
                </div>
            </div>

            <!-- Score global -->
            <div class="score-display" id="scoreGlobal" style="display: none;">
                <h3>üì¢ BILAN DE VOTRE CAMPAGNE DE COMMUNICATION</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p id="messageScore"></p>
                
                <div class="statistiques-campagne" id="statistiquesCampagne" style="margin-top: 20px;">
                    <!-- Statistiques g√©n√©r√©es dynamiquement -->
                </div>
            </div>
        </main>

        <!-- Footer RGPD √©pur√© -->
        <div class="rgpd-notice">
            üîí <strong>Conformit√© RGPD :</strong> Cet exercice respecte votre anonymat.
        </div>
    </div>

    <!-- Overlay de feedback -->
    <div class="feedback-overlay" id="feedbackOverlay">
        <div class="feedback-card" id="feedbackCard">
            <!-- Contenu dynamique -->
        </div>
    </div>

    <script>
        // Variables globales
        let campagneData = {
            publicCible: null,
            slogan: '',
            message: '',
            angle: null,
            supports: [],
            actions: [],
            notes: { ciblage: 0, message: 0, supports: 0, actions: 0 }
        };
        let etapesCompletes = { cible: false, message: false, supports: false, actions: false };
        let impactSimule = 0;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            setupInteractions();
        });

        function setupInteractions() {
            document.querySelectorAll('.element-clickable').forEach(element => {
                element.addEventListener('click', function() {
                    if (!this.classList.contains('used')) {
                        this.classList.toggle('selected');
                    }
                });
            });
        }

        // PHASE 1 : S√©lection du public cible
        function selectionnerCible(element, cible) {
            // D√©s√©lectionner les autres
            document.querySelectorAll('.cible-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner la nouvelle cible
            element.classList.add('selected');
            campagneData.publicCible = cible;
            
            document.getElementById('validerCibleBtn').disabled = false;
            mettreAJourPreview();
        }

        function validerCible() {
            const cibles = {
                jeunes: {
                    nom: "JEUNES 16-25 ANS",
                    caracteristiques: "Utilisateurs intensifs d'√©couteurs, fr√©quentent concerts et discoth√®ques. Tr√®s connect√©s aux r√©seaux sociaux. Sensibles aux t√©moignages de pairs et √† l'esth√©tique moderne.",
                    risques: "Trauma sonore aigu, √©coute prolong√©e √† fort volume, n√©gligence des signes pr√©curseurs",
                    leviers: "Influence sociale, innovation technologique, gamification"
                },
                travailleurs: {
                    nom: "TRAVAILLEURS EXPOS√âS",
                    caracteristiques: "Exposition professionnelle quotidienne, contraintes de productivit√©. Sensibles aux aspects r√©glementaires et √©conomiques.",
                    risques: "Surdit√© professionnelle progressive, acouph√®nes chroniques, impact sur la vie sociale",
                    leviers: "Obligation l√©gale, formation, culture d'entreprise"
                },
                parents: {
                    nom: "PARENTS ET √âDUCATEURS", 
                    caracteristiques: "Responsables de la sant√© des enfants, cherchent des informations fiables. Relais √©ducatifs importants.",
                    risques: "M√©connaissance des seuils dangereux, normalisation du bruit ambiant",
                    leviers: "Responsabilit√© parentale, sant√© des enfants, preuves scientifiques"
                },
                seniors: {
                    nom: "SENIORS 60+",
                    caracteristiques: "Presbyacousie naturelle, r√©ticence aux appareils auditifs. Habitudes de soins bien √©tablies.",
                    risques: "Isolement social, d√©ni de la perte auditive, diagnostic tardif",
                    leviers: "Qualit√© de vie, maintien de l'autonomie, soutien m√©dical"
                }
            };

            const info = cibles[campagneData.publicCible];
            document.getElementById('publicChoisi').textContent = info.nom;
            document.getElementById('caracteristiquesPublic').innerHTML = `
                <div style="margin: 10px 0;"><strong>Profil :</strong> ${info.caracteristiques}</div>
                <div style="margin: 10px 0;"><strong>Risques principaux :</strong> ${info.risques}</div>
                <div style="margin: 10px 0;"><strong>Leviers de motivation :</strong> ${info.leviers}</div>
            `;
            
            document.getElementById('analysePublic').style.display = 'block';
            etapesCompletes.cible = true;
            document.getElementById('validerCibleBtn').disabled = true;
            
            afficherFeedback('Public cible valid√©', 
                `Excellent choix ! Votre analyse du public "${info.nom}" est pertinente. Les caract√©ristiques identifi√©es guideront vos choix de communication.`);
        }

        // PHASE 2 : Cr√©ation du message
        function previewSlogan() {
            const slogan = document.getElementById('sloganeInput').value;
            campagneData.slogan = slogan;
            document.getElementById('sloganPreview').textContent = slogan || 'Votre slogan appara√Ætra ici';
            mettreAJourPreview();
        }

        function previewMessage() {
            const message = document.getElementById('messageInput').value;
            campagneData.message = message;
            document.getElementById('messagePreview').textContent = message || 'Votre message principal appara√Ætra ici';
            mettreAJourPreview();
        }

        function choisirAngle(element) {
            document.querySelectorAll('[data-angle]').forEach(e => e.classList.remove('selected'));
            element.classList.add('selected');
            campagneData.angle = element.dataset.angle;

            // Conseils selon l'angle choisi
            const conseils = {
                peur: "Attention : l'angle de la peur peut cr√©er de l'√©vitement. √âquilibrez avec des solutions concr√®tes.",
                positif: "Excellent choix ! L'angle positif favorise l'adh√©sion et le passage √† l'action.",
                scientifique: "Approche cr√©dible, particuli√®rement efficace pour les publics √©duqu√©s.",
                temoignage: "Tr√®s impactant ! Les t√©moignages cr√©ent une identification forte."
            };

            setTimeout(() => {
                afficherFeedback('Angle de communication', conseils[campagneData.angle]);
            }, 500);
        }

        function validerMessage() {
            const slogan = document.getElementById('sloganeInput').value;
            const message = document.getElementById('messageInput').value;
            
            if (slogan.length < 5) {
                alert('Votre slogan doit faire au moins 5 caract√®res !');
                return;
            }
            
            if (message.length < 20) {
                alert('Votre message principal doit faire au moins 20 caract√®res !');
                return;
            }

            etapesCompletes.message = true;
            document.getElementById('validerMessageBtn').disabled = true;
            
            // Analyse de la qualit√© du message
            let score = 0;
            if (slogan.length <= 50) score += 2;
            if (message.length >= 50 && message.length <= 150) score += 2;
            if (campagneData.angle) score += 1;
            
            let feedback = score >= 4 ? 'Message excellent !' : score >= 3 ? 'Message correct' : 'Message √† am√©liorer';
            afficherFeedback('Message valid√©', `${feedback} (Score : ${score}/5). Un bon slogan est court et m√©morable, le message d√©veloppe l'argument principal.`);
        }

        // PHASE 3 : S√©lection des supports
        function selectionnerSupport(element) {
            if (element.classList.contains('selected')) {
                // D√©s√©lectionner
                element.classList.remove('selected');
                campagneData.supports = campagneData.supports.filter(s => s !== element.dataset.support);
            } else if (campagneData.supports.length < 3) {
                // S√©lectionner
                element.classList.add('selected');
                campagneData.supports.push(element.dataset.support);
            } else {
                element.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => element.style.animation = '', 500);
                return;
            }
            
            mettreAJourSupports();
            mettreAJourPreview();
        }

        function mettreAJourSupports() {
            const supportNames = {
                reseaux: 'üì± R√©seaux sociaux',
                affichage: 'üñºÔ∏è Affichage public', 
                radio: 'üìª Radio',
                video: 'üé• Vid√©o',
                influenceurs: 'üåü Influenceurs',
                evenements: 'üé™ √âv√©nements',
                entreprises: 'üè¢ Milieu professionnel',
                medical: 'üè• Milieu m√©dical'
            };

            document.getElementById('supportsSelectionnes').innerHTML = `
                <strong>üìã VOS SUPPORTS S√âLECTIONN√âS (${campagneData.supports.length}/3) :</strong>
                <div id="listeSupports" style="margin-top: 10px;">
                    ${campagneData.supports.map(s => `<div style="display: inline-block; background: var(--success-pse); color: white; padding: 5px 12px; border-radius: 15px; margin: 3px; font-size: 0.9em;">${supportNames[s]}</div>`).join('')}
                </div>
            `;

            document.getElementById('validerSupportsBtn').disabled = campagneData.supports.length !== 3;
        }

        function validerSupports() {
            etapesCompletes.supports = true;
            document.getElementById('validerSupportsBtn').disabled = true;
            
            // Analyse de coh√©rence public/supports
            const coherence = analyserCoherenceSupports();
            afficherFeedback('Supports valid√©s', 
                `S√©lection termin√©e ! Coh√©rence avec votre public cible : ${coherence.score}/5. ${coherence.conseil}`);
        }

        function analyserCoherenceSupports() {
            const coherences = {
                jeunes: { reseaux: 2, video: 2, influenceurs: 2, evenements: 1, affichage: 1 },
                travailleurs: { entreprises: 2, affichage: 2, radio: 1, medical: 1, video: 1 },
                parents: { affichage: 2, medical: 2, video: 1, radio: 1, reseaux: 1 },
                seniors: { medical: 2, radio: 2, affichage: 1, video: 1 }
            };

            const scores = coherences[campagneData.publicCible] || {};
            let totalScore = campagneData.supports.reduce((sum, support) => sum + (scores[support] || 0), 0);
            
            let conseil = totalScore >= 5 ? 'Excellente coh√©rence !' : 
                         totalScore >= 3 ? 'Bonne coh√©rence globale' : 
                         'Attention √† l\'ad√©quation public/supports';
                         
            return { score: totalScore, conseil };
        }

        // PHASE 4 : Actions de pr√©vention
        function ajouterAction(element) {
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                campagneData.actions = campagneData.actions.filter(a => a !== element.dataset.action);
            } else {
                element.classList.add('selected');
                campagneData.actions.push(element.dataset.action);
            }
            
            mettreAJourActions();
            mettreAJourPreview();
        }

        function mettreAJourActions() {
            const actionNames = {
                depistage: 'ü©∫ D√©pistages gratuits',
                formations: 'üìö Formations interactives',
                equipements: 'üõ°Ô∏è Distribution EPI',
                appli: 'üì± Application mobile',
                challenges: 'üèÜ Challenges et r√©compenses',
                partenariats: 'ü§ù Partenariats √©v√©nementiels'
            };

            document.getElementById('listeActions').innerHTML = 
                campagneData.actions.map(a => `
                    <div style="background: white; margin: 10px 0; padding: 12px; border-radius: 8px; border-left: 4px solid var(--primary-pse);">
                        ${actionNames[a]}
                    </div>
                `).join('');
                
            if (campagneData.actions.length === 0) {
                document.getElementById('listeActions').innerHTML = '<div style="color: #666; font-style: italic;">S√©lectionnez des actions ci-dessus</div>';
            }
        }

        function planifierActions() {
            if (campagneData.actions.length === 0) {
                alert('S√©lectionnez au moins une action !');
                return;
            }
            
            etapesCompletes.actions = true;
            document.getElementById('planifierBtn').disabled = true;
            
            afficherFeedback('Plan d\'action valid√©', 
                `${campagneData.actions.length} actions planifi√©es. Veillez √† la faisabilit√© budg√©taire et √† la mesure d'impact !`);
            
            // Activer le lancement de campagne si tout est compl√©t√©
            if (Object.values(etapesCompletes).every(etape => etape)) {
                document.getElementById('lancerBtn').disabled = false;
                document.getElementById('lancerBtn').style.animation = 'pulse 2s infinite';
            }
        }

        // Mise √† jour des previews
        function mettreAJourPreview() {
            // Public cible
            if (campagneData.publicCible) {
                const noms = { jeunes: 'Jeunes 16-25 ans', travailleurs: 'Travailleurs expos√©s', parents: 'Parents', seniors: 'Seniors 60+' };
                document.getElementById('publicPreview').textContent = noms[campagneData.publicCible];
            }
            
            // Supports
            if (campagneData.supports.length > 0) {
                document.getElementById('supportsPreview').textContent = campagneData.supports.length + ' supports s√©lectionn√©s';
            }
            
            // Actions
            if (campagneData.actions.length > 0) {
                document.getElementById('actionsPreview').textContent = campagneData.actions.length + ' actions planifi√©es';
            }
            
            // Impact simul√©
            calculerImpactEstime();
        }

        function calculerImpactEstime() {
            let portee = 0;
            
            // Calcul bas√© sur le public et les supports
            const multiplieurs = {
                jeunes: 1000,
                travailleurs: 500,  
                parents: 750,
                seniors: 300
            };
            
            if (campagneData.publicCible && campagneData.supports.length > 0) {
                portee = multiplieurs[campagneData.publicCible] * campagneData.supports.length * 2;
                portee += campagneData.actions.length * 200;
            }
            
            impactSimule = portee;
            document.getElementById('porteeEstimee').textContent = portee.toLocaleString() + ' personnes';
            document.getElementById('impactGauge').style.width = Math.min((portee / 10000) * 100, 100) + '%';
        }

        // Lancement de la campagne
        function lancerCampagne() {
            document.getElementById('evaluationSection').style.display = 'block';
            document.getElementById('lancerBtn').style.animation = '';
            document.getElementById('lancerBtn').disabled = true;
            
            // Scroll vers l'√©valuation
            document.getElementById('evaluationSection').scrollIntoView({ behavior: 'smooth' });
            
            afficherFeedback('üöÄ Campagne lanc√©e !', 
                'F√©licitations ! Votre campagne est maintenant en ligne. √âvaluez maintenant son efficacit√© selon les crit√®res professionnels.');
        }

        // Syst√®me d'√©valuation
        function noterCritere(critere, note) {
            campagneData.notes[critere] = note;
            
            // Mettre √† jour l'affichage des √©toiles
            const etoiles = document.querySelectorAll(`[data-critere="${critere}"] .etoile`);
            etoiles.forEach((etoile, index) => {
                if (index < note) {
                    etoile.classList.add('active');
                } else {
                    etoile.classList.remove('active');
                }
            });
            
            // V√©rifier si toutes les notes sont donn√©es
            const notesTotales = Object.values(campagneData.notes).filter(n => n > 0).length;
            document.getElementById('finaliserBtn').disabled = notesTotales < 4;
        }

        function finaliserEvaluation() {
            const notes = campagneData.notes;
            const moyenne = (notes.ciblage + notes.message + notes.supports + notes.actions) / 4;
            
            // Afficher le score final
            document.getElementById('scoreGlobal').style.display = 'block';
            document.getElementById('progressFill').style.width = (moyenne / 5) * 100 + '%';
            
            let message = '';
            if (moyenne >= 4.5) {
                message = `üèÜ CAMPAGNE EXCEPTIONNELLE (${moyenne.toFixed(1)}/5) - Vous ma√Ætrisez parfaitement la communication en sant√© publique !`;
            } else if (moyenne >= 3.5) {
                message = `üëç TR√àS BONNE CAMPAGNE (${moyenne.toFixed(1)}/5) - Excellentes comp√©tences en pr√©vention et communication.`;
            } else if (moyenne >= 2.5) {
                message = `üìà CAMPAGNE CORRECTE (${moyenne.toFixed(1)}/5) - Bonnes bases, approfondissez la coh√©rence public/supports.`;
            } else {
                message = `üìö √Ä AM√âLIORER (${moyenne.toFixed(1)}/5) - Travaillez la m√©thodologie de cr√©ation de campagne.`;
            }
            
            document.getElementById('messageScore').innerHTML = message;
            
            // G√©n√©rer les statistiques
            genererStatistiques(moyenne);
            
            document.getElementById('finaliserBtn').disabled = true;
        }

        function genererStatistiques(moyenne) {
            const stats = [
                { label: 'Port√©e estim√©e', value: (impactSimule/1000).toFixed(0) + 'K' },
                { label: 'Note globale', value: moyenne.toFixed(1) + '/5' },
                { label: 'Supports utilis√©s', value: campagneData.supports.length },
                { label: 'Actions planifi√©es', value: campagneData.actions.length }
            ];
            
            document.getElementById('statistiquesCampagne').innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <div class="stat-value">${stat.value}</div>
                    <div class="stat-label">${stat.label}</div>
                </div>
            `).join('');
        }

        // Affichage des feedbacks
        function afficherFeedback(titre, message) {
            const overlay = document.getElementById('feedbackOverlay');
            const card = document.getElementById('feedbackCard');
            
            card.innerHTML = `
                <button class="close-feedback" onclick="fermerFeedback()">√ó</button>
                <h3>üì¢ ${titre}</h3>
                <p style="margin: 15px 0; line-height: 1.6;">${message}</p>
                <div class="astuce-bac">Une bonne campagne de pr√©vention = public bien cibl√© + message adapt√© + supports coh√©rents + actions concr√®tes + √©valuation de l'impact !</div>
            `;
            
            overlay.style.display = 'flex';
        }

        function fermerFeedback() {
            document.getElementById('feedbackOverlay').style.display = 'none';
        }

        // Animation pulse pour les boutons
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>