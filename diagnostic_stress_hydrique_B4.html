<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module B.4 - Diagnostic Expert Stress Hydrique - Premi√®re Bac Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=OpenDyslexie&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'OpenDyslexie', Arial, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .exercice-container {
            width: 100%;
            max-width: 100vw;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(135deg, var(--primary-pse) 0%, var(--secondary-pse) 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .module-info h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .objectif {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1.1rem;
        }

        .competences-travaillees {
            margin-top: 20px;
        }

        .competences-list {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .competences-list li {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            border-left: 4px solid #fff;
        }

        .niveau-cible {
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* EXERCICE PRINCIPAL */
        .exercice-principal {
            padding: 30px 25px;
        }

        .scenario-intro {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .scenario-intro h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .diagnostic-zone {
            display: grid;
            gap: 25px;
            margin: 30px 0;
        }

        .donnees-panel {
            background: var(--light-pse);
            border-radius: 15px;
            padding: 25px;
            position: relative;
        }

        .donnees-panel h4 {
            color: var(--primary-pse);
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .carte-monde {
            background: linear-gradient(135deg, #a8e6cf, #88d8c0);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
        }

        .pays-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .pays-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
        }

        .pays-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .pays-card.selected {
            border: 3px solid var(--warning-pse);
            background: #FFA726;
            color: white;
            transform: scale(1.05);
        }

        .pays-card.correct {
            border: 3px solid var(--success-pse);
            background: var(--success-pse);
            color: white;
        }

        .pays-card.incorrect {
            border: 3px solid var(--danger-pse);
            background: var(--danger-pse);
            color: white;
        }

        .pays-nom {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .pays-stat {
            font-size: 0.9rem;
            color: #666;
        }

        .pays-card.selected .pays-stat,
        .pays-card.correct .pays-stat,
        .pays-card.incorrect .pays-stat {
            color: white;
        }

        .question-zone {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--primary-pse);
        }

        .question h4 {
            color: var(--primary-pse);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .destinations-zone {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .destination-box {
            background: var(--light-pse);
            border: 3px dashed #ccc;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .destination-box:hover {
            background: #e0e6ff;
            border-color: var(--primary-pse);
        }

        .destination-box.filled {
            background: var(--primary-pse);
            color: white;
            border-style: solid;
        }

        .instructions-interaction {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .instructions-interaction h5 {
            margin-bottom: 10px;
            color: #d63031;
        }

        .btn-principal {
            background: linear-gradient(135deg, var(--success-pse), #00b894);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 20px 0;
        }

        .btn-principal:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-principal:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* FEEDBACK */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .feedback-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .feedback-card {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .feedback-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .feedback-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .correction-explicite {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .correction-explicite h4 {
            color: #ff7675;
            margin-bottom: 15px;
        }

        .bonne-reponse {
            background: rgba(0, 184, 148, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #00b894;
        }

        .explication {
            background: rgba(255, 193, 7, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #fdcb6e;
        }

        .astuce-bac {
            background: rgba(116, 185, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #74b9ff;
        }

        .astuce-bac strong {
            color: #74b9ff;
        }

        .btn-fermer {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .btn-fermer:hover {
            background: rgba(255,255,255,0.1);
        }

        /* PROGRESSION */
        .progression-bar {
            background: var(--light-pse);
            border-radius: 10px;
            height: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progression-fill {
            background: linear-gradient(135deg, var(--success-pse), #00b894);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .score-display {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-pse);
            margin: 15px 0;
        }

        /* RGPD FOOTER */
        .rgpd-notice {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            font-size: 0.9rem;
            color: #6c757d;
            border-top: 1px solid #dee2e6;
        }

        /* RESPONSIVE */
        @media (min-width: 768px) {
            body {
                font-size: 17px;
                padding: 20px;
            }
            
            .exercice-container {
                max-width: 1000px;
            }
            
            .cadre-pedagogique {
                padding: 35px;
            }
            
            .exercice-principal {
                padding: 40px 35px;
            }
            
            .pays-data {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .destinations-zone {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (min-width: 1024px) {
            body {
                font-size: 18px;
                padding: 30px;
            }
            
            .exercice-container {
                max-width: 1200px;
            }
            
            .diagnostic-zone {
                grid-template-columns: 1fr;
            }
            
            .pays-data {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .highlight {
            animation: pulse 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="exercice-container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module B.4 : L'eau et le d√©veloppement durable</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Adopter un comportement √©coresponsable afin de pr√©server les ressources en eau
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li><strong>C3</strong> - Expliquer un ph√©nom√®ne environnemental en lien avec une mesure de pr√©vention</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            <div class="scenario-intro">
                <h3>üåç DIAGNOSTIC EXPERT : Stress Hydrique Mondial</h3>
                <p>Vous √™tes hydrog√©ologue √† l'ONU et devez analyser la situation mondiale des ressources en eau. Votre mission : diagnostiquer le niveau de stress hydrique de diff√©rents pays et proposer des solutions adapt√©es.</p>
            </div>

            <div class="progression-bar">
                <div class="progression-fill" id="progressionFill"></div>
            </div>
            <div class="score-display" id="scoreDisplay">Score : 0/100 points</div>

            <div class="diagnostic-zone">
                <div class="donnees-panel">
                    <h4>üìä Donn√©es hydrologiques mondiales</h4>
                    
                    <div class="instructions-interaction">
                        <h5>üì± COMMENT ANALYSER :</h5>
                        <p><strong>1.</strong> Cliquez sur un pays pour s√©lectionner (il s'illumine) 
                        <strong>2.</strong> Cliquez sur la zone de diagnostic appropri√©e 
                        <strong>3.</strong> Le diagnostic se place automatiquement !</p>
                    </div>

                    <div class="carte-monde">
                        <h5>üó∫Ô∏è Situation des ressources en eau (m¬≥/an/habitant)</h5>
                        <div class="pays-data" id="paysData">
                            <div class="pays-card" data-pays="France" data-niveau="3000">
                                <div class="pays-nom">üá´üá∑ France</div>
                                <div class="pays-stat">3 000 m¬≥/an/hab.</div>
                            </div>
                            <div class="pays-card" data-pays="Alg√©rie" data-niveau="500">
                                <div class="pays-nom">üá©üáø Alg√©rie</div>
                                <div class="pays-stat">500 m¬≥/an/hab.</div>
                            </div>
                            <div class="pays-card" data-pays="Canada" data-niveau="87000">
                                <div class="pays-nom">üá®üá¶ Canada</div>
                                <div class="pays-stat">87 000 m¬≥/an/hab.</div>
                            </div>
                            <div class="pays-card" data-pays="Tunisie" data-niveau="420">
                                <div class="pays-nom">üáπüá≥ Tunisie</div>
                                <div class="pays-stat">420 m¬≥/an/hab.</div>
                            </div>
                            <div class="pays-card" data-pays="√âgypte" data-niveau="650">
                                <div class="pays-nom">üá™üá¨ √âgypte</div>
                                <div class="pays-stat">650 m¬≥/an/hab.</div>
                            </div>
                            <div class="pays-card" data-pays="Br√©sil" data-niveau="43000">
                                <div class="pays-nom">üáßüá∑ Br√©sil</div>
                                <div class="pays-stat">43 000 m¬≥/an/hab.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-zone">
                    <h4>üéØ Mission 1 : Diagnostic du stress hydrique</h4>
                    <p><strong>Classifiez chaque pays selon son niveau de stress hydrique :</strong></p>
                    <p style="font-size: 0.9rem; color: #666; margin: 10px 0;">
                        üíß <strong>Rappel :</strong> P√©nurie extr√™me (&lt;1000 m¬≥) | Stress hydrique (1000-1700 m¬≥) | Situation normale (&gt;1700 m¬≥)
                    </p>

                    <div class="destinations-zone">
                        <div class="destination-box" data-category="p√©nurie" id="penurieZone">
                            <div>
                                <div style="font-size: 2rem; margin-bottom: 10px;">üö®</div>
                                <div><strong>P√âNURIE EXTR√äME</strong></div>
                                <div style="font-size: 0.9rem;">&lt; 1000 m¬≥/an/hab.</div>
                            </div>
                        </div>
                        <div class="destination-box" data-category="stress" id="stressZone">
                            <div>
                                <div style="font-size: 2rem; margin-bottom: 10px;">‚ö†Ô∏è</div>
                                <div><strong>STRESS HYDRIQUE</strong></div>
                                <div style="font-size: 0.9rem;">1000-1700 m¬≥/an/hab.</div>
                            </div>
                        </div>
                        <div class="destination-box" data-category="normal" id="normalZone">
                            <div>
                                <div style="font-size: 2rem; margin-bottom: 10px;">‚úÖ</div>
                                <div><strong>SITUATION NORMALE</strong></div>
                                <div style="font-size: 0.9rem;">&gt; 1700 m¬≥/an/hab.</div>
                            </div>
                        </div>
                    </div>

                    <button class="btn-principal" id="btnVerifier" disabled>
                        üîç ANALYSER LE DIAGNOSTIC
                    </button>
                </div>
            </div>
        </main>

        <!-- RGPD FOOTER -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <!-- FEEDBACK OVERLAY -->
    <div class="feedback-overlay" id="feedbackOverlay">
        <div class="feedback-card">
            <button class="btn-fermer" id="btnFermer">√ó</button>
            <div class="feedback-header">
                <div class="feedback-icon" id="feedbackIcon">üéØ</div>
                <div class="feedback-title" id="feedbackTitle">Diagnostic analys√© !</div>
            </div>
            <div id="feedbackContent"></div>
        </div>
    </div>

    <script>
        class DiagnosticStressHydrique {
            constructor() {
                this.paysSelectionne = null;
                this.diagnostics = {};
                this.score = 0;
                this.progression = 0;
                this.correctAnswers = {
                    'France': 'normal',
                    'Alg√©rie': 'p√©nurie', 
                    'Canada': 'normal',
                    'Tunisie': 'p√©nurie',
                    '√âgypte': 'p√©nurie',
                    'Br√©sil': 'normal'
                };
                this.init();
            }

            init() {
                this.attachEventListeners();
                this.updateUI();
            }

            attachEventListeners() {
                // S√©lection des pays
                document.querySelectorAll('.pays-card').forEach(card => {
                    card.addEventListener('click', (e) => this.selectPays(e.target.closest('.pays-card')));
                });

                // Zones de destination
                document.querySelectorAll('.destination-box').forEach(box => {
                    box.addEventListener('click', (e) => this.placerDiagnostic(e.target.closest('.destination-box')));
                });

                // Bouton v√©rifier
                document.getElementById('btnVerifier').addEventListener('click', () => this.verifierDiagnostic());
                
                // Fermer feedback
                document.getElementById('btnFermer').addEventListener('click', () => this.fermerFeedback());
                document.getElementById('feedbackOverlay').addEventListener('click', (e) => {
                    if (e.target.id === 'feedbackOverlay') this.fermerFeedback();
                });
            }

            selectPays(card) {
                // D√©s√©lectionner le pr√©c√©dent
                if (this.paysSelectionne) {
                    this.paysSelectionne.classList.remove('selected');
                }
                
                // S√©lectionner le nouveau (sauf s'il est d√©j√† diagnostiqu√©)
                if (!card.classList.contains('correct') && !card.classList.contains('incorrect')) {
                    this.paysSelectionne = card;
                    card.classList.add('selected');
                } else {
                    this.paysSelectionne = null;
                }
            }

            placerDiagnostic(zone) {
                if (!this.paysSelectionne) return;

                const pays = this.paysSelectionne.dataset.pays;
                const category = zone.dataset.category;
                
                // Enregistrer le diagnostic
                this.diagnostics[pays] = category;
                
                // Marquer le pays comme trait√©
                this.paysSelectionne.classList.remove('selected');
                this.paysSelectionne.style.opacity = '0.7';
                
                // R√©initialiser la s√©lection
                this.paysSelectionne = null;
                
                this.updateUI();
            }

            updateUI() {
                const totalPays = Object.keys(this.correctAnswers).length;
                const diagnosticsEffectues = Object.keys(this.diagnostics).length;
                
                this.progression = (diagnosticsEffectues / totalPays) * 100;
                
                document.getElementById('progressionFill').style.width = this.progression + '%';
                document.getElementById('scoreDisplay').textContent = `Diagnostic : ${diagnosticsEffectues}/${totalPays} pays analys√©s`;
                
                document.getElementById('btnVerifier').disabled = diagnosticsEffectues < totalPays;
            }

            verifierDiagnostic() {
                let correct = 0;
                let feedback = '';
                
                // Marquer les r√©ponses
                Object.keys(this.correctAnswers).forEach(pays => {
                    const card = document.querySelector(`[data-pays="${pays}"]`);
                    const userAnswer = this.diagnostics[pays];
                    const correctAnswer = this.correctAnswers[pays];
                    
                    if (userAnswer === correctAnswer) {
                        card.classList.add('correct');
                        correct++;
                    } else {
                        card.classList.add('incorrect');
                    }
                });
                
                this.score = Math.round((correct / Object.keys(this.correctAnswers).length) * 100);
                
                // G√©n√©rer le feedback
                feedback += '<div class="correction-explicite">';
                feedback += '<h4>‚ùå CORRECTION D√âTAILL√âE</h4>';
                
                feedback += '<div class="bonne-reponse">';
                feedback += '<strong>‚úÖ LES BONNES CLASSIFICATIONS √âTAIENT :</strong><br>';
                feedback += 'üö® <strong>P√©nurie extr√™me :</strong> Alg√©rie (500 m¬≥), Tunisie (420 m¬≥), √âgypte (650 m¬≥)<br>';
                feedback += '‚ö†Ô∏è <strong>Stress hydrique :</strong> Aucun pays dans cet exemple<br>';
                feedback += '‚úÖ <strong>Situation normale :</strong> France (3 000 m¬≥), Canada (87 000 m¬≥), Br√©sil (43 000 m¬≥)';
                feedback += '</div>';
                
                feedback += '<div class="explication">';
                feedback += '<strong>üí° EXPLICATION SCIENTIFIQUE :</strong><br>';
                feedback += 'Le stress hydrique se mesure en m¬≥ d\'eau disponible par habitant et par an. ';
                feedback += 'En dessous de 1 000 m¬≥, on parle de p√©nurie extr√™me qui compromet le d√©veloppement √©conomique et social. ';
                feedback += 'Entre 1 000 et 1 700 m¬≥, il y a stress hydrique avec des tensions sur l\'approvisionnement. ';
                feedback += 'Au-dessus de 1 700 m¬≥, la situation est consid√©r√©e comme normale.';
                feedback += '</div>';
                
                feedback += '<div class="astuce-bac">';
                feedback += '<strong>üéØ ASTUCE BAC :</strong> ';
                feedback += 'Retenez les seuils critiques : 1 000 m¬≥ (p√©nurie) et 1 700 m¬≥ (stress). ';
                feedback += 'Les pays du Maghreb et du Moyen-Orient sont particuli√®rement touch√©s par la p√©nurie hydrique, ';
                feedback += 'tandis que le Canada, la Russie et le Br√©sil disposent d\'abondantes ressources en eau.';
                feedback += '</div>';
                
                feedback += '</div>';
                
                this.showFeedback(correct === Object.keys(this.correctAnswers).length ? 'success' : 'partial', feedback);
            }

            showFeedback(type, content) {
                const overlay = document.getElementById('feedbackOverlay');
                const icon = document.getElementById('feedbackIcon');
                const title = document.getElementById('feedbackTitle');
                const feedbackContent = document.getElementById('feedbackContent');
                
                if (type === 'success') {
                    icon.textContent = 'üéâ';
                    title.textContent = `Excellent diagnostic ! Score : ${this.score}/100`;
                } else {
                    icon.textContent = 'üîç';
                    title.textContent = `Diagnostic √† approfondir - Score : ${this.score}/100`;
                }
                
                feedbackContent.innerHTML = content;
                overlay.classList.add('show');
            }

            fermerFeedback() {
                document.getElementById('feedbackOverlay').classList.remove('show');
            }
        }

        // Initialisation au chargement de la page
        window.addEventListener('DOMContentLoaded', () => {
            new DiagnosticStressHydrique();
        });
    </script>
</body>
</html>