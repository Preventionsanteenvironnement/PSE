<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® Mission Budget de Lili ‚ú®</title>
    <style>
        :root {
            --vert: #2ecc71;
            --bleu: #3498db;
            --rose: #ff69b4;
            --gold: #f1c40f;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: #fff5fb;
            margin: 0; padding: 10px;
            text-align: center;
        }

        /* BANDEAU CONSIGNE */
        .consigne-box {
            background: white;
            border: 4px solid var(--rose);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(255,105,180,0.2);
        }

        .consigne-texte {
            font-size: 1.2rem;
            color: #444;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        /* BOUTONS */
        .btn-magic {
            border: none; border-radius: 50px;
            padding: 12px 25px; font-size: 1.2rem;
            cursor: pointer; color: white;
            font-weight: bold; transition: 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            margin: 5px;
        }
        .btn-audio { background: #9b59b6; }
        .btn-verif { background: var(--vert); font-size: 1.5rem; }
        .btn-magic:active { transform: translateY(4px); box-shadow: none; }

        /* ZONES */
        .plateau {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px; max-width: 1000px; margin: 0 auto;
        }

        .zone {
            background: white; border-radius: 30px;
            padding: 15px; min-height: 200px;
            border: 5px solid #eee;
        }

        #z-recette { border-color: var(--vert); background: #f1fef6; }
        #z-besoin { border-color: var(--bleu); background: #f1f9ff; }
        #z-envie { border-color: var(--rose); background: #fff5f8; }

        .titre-zone { font-weight: bold; margin-bottom: 10px; font-size: 1.1rem; }

        .depot {
            display: flex; flex-wrap: wrap; gap: 10px;
            justify-content: center; min-height: 120px;
            padding: 10px; border-radius: 20px;
            background: rgba(255,255,255,0.5);
        }

        /* OBJETS */
        .tresor {
            width: 75px; height: 75px;
            background: white; border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2.2rem; cursor: grab;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 2px solid #ddd;
            user-select: none;
        }

        .banque {
            background: white; border: 3px dashed var(--gold);
            border-radius: 25px; padding: 20px;
            margin-top: 20px; display: flex; flex-wrap: wrap;
            justify-content: center; gap: 10px;
        }

        /* VICTOIRE */
        #ecran-bravo {
            display: none; position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98);
            z-index: 1000; flex-direction: column;
            align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

<div class="consigne-box">
    <div class="consigne-texte">
        <b style="color:var(--vert)">üí∞ ARGENT RE√áU</b> (Vert) | 
        <b style="color:var(--bleu)">üè† BESOINS</b> (Bleu) | 
        <b style="color:var(--rose)">üç≠ ENVIES</b> (Rose)
    </div>
    <button class="btn-magic btn-audio" onclick="lireConsigne()">üîä √âcouter la mission</button>
    <button class="btn-magic btn-verif" onclick="verifier()">‚úÖ Valider ‚ú®</button>
</div>

<div class="plateau">
    <div class="zone" id="z-recette" ondrop="drop(event)" ondragover="allowDrop(event)">
        <div class="titre-zone" style="color:var(--vert)">üü¢ L'ARGENT QUI RENTRE</div>
        <div class="depot"></div>
    </div>
    <div class="zone" id="z-besoin" ondrop="drop(event)" ondragover="allowDrop(event)">
        <div class="titre-zone" style="color:var(--bleu)">üîµ C'EST IMPORTANT</div>
        <div class="depot"></div>
    </div>
    <div class="zone" id="z-envie" ondrop="drop(event)" ondragover="allowDrop(event)">
        <div class="titre-zone" style="color:var(--rose)">üî¥ POUR LE PLAISIR</div>
        <div class="depot"></div>
    </div>
</div>

<div class="banque" id="banque" ondrop="drop(event)" ondragover="allowDrop(event)">
    </div>

<div id="ecran-bravo">
    <h1 style="color:var(--rose); font-size: 3rem;">‚ú® CHAMPIONNE ! ‚ú®</h1>
    <p style="font-size: 1.5rem;">Tu g√®res ton budget comme une f√©e !</p>
    <button class="btn-magic btn-verif" onclick="location.reload()">REJOUER üéà</button>
</div>

<script>
    const tresors = [
        { id: 1, e: 'ü¶∑', c: 'recette', n: 'L\'argent de la petite souris' },
        { id: 2, e: 'üéÅ', c: 'recette', n: 'Un cadeau de Mamie' },
        { id: 3, e: 'üéÇ', c: 'recette', n: 'L\'argent de ton anniversaire' },
        { id: 4, e: 'üß∫', c: 'recette', n: 'Ta petite r√©compense pour aider' },
        { id: 5, e: 'üçé', c: 'besoin', n: 'Manger des fruits' },
        { id: 6, e: 'üëï', c: 'besoin', n: 'Des habits propres' },
        { id: 7, e: 'üöø', c: 'besoin', n: 'Le savon pour la douche' },
        { id: 8, e: 'üè†', c: 'besoin', n: 'Payer la maison' },
        { id: 9, e: 'üé°', c: 'envie', n: 'Un tour de man√®ge' },
        { id: 10, e: 'üç≠', c: 'envie', n: 'Une sucette' },
        { id: 11, e: 'üß∏', c: 'envie', n: 'Un nouveau jouet' },
        { id: 12, e: 'üçø', c: 'envie', n: 'Aller au cin√©ma' }
    ];

    function init() {
        const b = document.getElementById('banque');
        tresors.sort(() => Math.random() - 0.5).forEach(t => {
            const d = document.createElement('div');
            d.className = 'tresor'; d.id = 't'+t.id; d.draggable = true;
            d.innerHTML = t.e;
            d.onclick = () => parler(t.n);
            d.ondragstart = (e) => { e.dataTransfer.setData("text", e.target.id); };
            b.appendChild(d);
        });
        setTimeout(lireConsigne, 500);
    }

    function allowDrop(ev) { ev.preventDefault(); }
    function drop(ev) {
        ev.preventDefault();
        const id = ev.dataTransfer.getData("text");
        const el = document.getElementById(id);
        let target = ev.target;
        while(target && !target.classList.contains('zone') && target.id !== 'banque') target = target.parentElement;
        if(target) (target.querySelector('.depot') || target).appendChild(el);
    }

    function parler(txt) {
        window.speechSynthesis.cancel();
        const m = new SpeechSynthesisUtterance(txt);
        m.lang = 'fr-FR'; m.rate = 1;
        window.speechSynthesis.speak(m);
    }

    function lireConsigne() {
        parler("Mission Budget ! Mets l'argent que tu re√ßois dans la bo√Æte verte. Mets ce qui est important pour vivre dans la bo√Æte bleue. Et mets les plaisirs dans la bo√Æte rose. C'est parti, championne !");
    }

    function verifier() {
        let err = 0;
        tresors.forEach(t => {
            const el = document.getElementById('t'+t.id);
            const p = el.parentElement.parentElement;
            if(p.id !== 'z-'+t.c) {
                err++;
                el.style.borderColor = "red";
            } else {
                el.style.borderColor = "var(--vert)";
                el.innerHTML = t.e + " ‚ú®";
            }
        });

        if(err === 0 && document.getElementById('banque').children.length === 0) {
            document.getElementById('ecran-bravo').style.display = 'flex';
            parler("Fantastique ! Tu as tout rang√© parfaitement. Tu es une experte !");
            lancerPaillettes();
        } else {
            parler("Regarde bien, il reste quelques tr√©sors √† changer de place !");
        }
    }

    function lancerPaillettes() {
        for(let i=0; i<80; i++) {
            const p = document.createElement('div');
            p.innerHTML = "‚ú®"; p.style.position = "fixed";
            p.style.left = Math.random()*100+"vw"; p.style.top = "-5vh";
            p.style.fontSize = "2rem"; p.style.zIndex = "2000";
            p.style.transition = (Math.random()*2+2)+"s";
            document.body.appendChild(p);
            setTimeout(() => { p.style.top = "110vh"; p.style.transform = "rotate(360deg)"; }, 100);
        }
    }

    init();
</script>
</body>
</html>