<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PSE Bac Pro ‚Äì C2 : Appliquer une d√©marche d'analyse</title>
<style>
:root{--bg:#0f172a;--card:#1e293b;--border:#334155;--text:#e2e8f0;--muted:#94a3b8;--accent:#38bdf8;--accent2:#818cf8;--success:#22c55e;--error:#ef4444;--warning:#f59e0b}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}
.container{max-width:900px;margin:0 auto;padding:15px 15px 40px}
header{text-align:center;padding:30px 15px;border-bottom:1px solid var(--border);margin-bottom:25px}
header h1{font-size:1.4rem;font-weight:700;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:8px}
.badge{display:inline-block;background:rgba(56,189,248,.15);border:1px solid var(--accent);color:var(--accent);padding:6px 16px;border-radius:20px;font-weight:600;font-size:.85rem;margin-bottom:10px}
header p{color:var(--muted);font-size:.9rem}
.page{display:none;animation:fadeIn .4s ease}
.page.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:15px}
.card-title{font-size:1rem;font-weight:700;color:var(--accent);margin-bottom:12px}
.box-info{background:linear-gradient(135deg,rgba(56,189,248,.1),rgba(129,140,248,.1));border-left:4px solid var(--accent);padding:18px;border-radius:0 12px 12px 0;margin-bottom:18px}
.box-info h3{color:var(--accent);margin-bottom:10px;font-size:.95rem}
.box-info ul{margin-left:18px;color:#cbd5e1}
.box-info li{margin-bottom:6px;font-size:.9rem}
.box-situation{background:rgba(245,158,11,.1);border:1px solid var(--warning);border-radius:12px;padding:18px;margin-bottom:18px}
.box-situation h4{color:var(--warning);margin-bottom:8px;font-size:.95rem}
.doc-block{background:rgba(0,0,0,.25);border:1px solid var(--border);border-radius:12px;padding:15px;margin-bottom:12px}
.doc-label{font-weight:700;color:var(--accent2);font-size:.8rem;text-transform:uppercase;margin-bottom:8px}
.doc-content{font-size:.88rem;color:#cbd5e1}
.doc-content strong{color:var(--text)}
.highlight{background:rgba(56,189,248,.2);padding:2px 5px;border-radius:4px}
.process-box{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:center;padding:15px;background:rgba(0,0,0,.2);border-radius:10px;margin-top:12px}
.process-step{background:rgba(129,140,248,.2);border:1px solid var(--accent2);padding:10px 14px;border-radius:10px;font-size:.8rem;font-weight:600;text-align:center}
.process-arrow{color:var(--accent);font-size:1.2rem}
.toolbar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:15px}
.ex-num{background:var(--accent);color:var(--bg);padding:5px 12px;border-radius:15px;font-weight:700;font-size:.8rem}
.pts{background:rgba(129,140,248,.2);color:var(--accent2);padding:5px 10px;border-radius:8px;font-size:.75rem;margin-left:8px}
.btn-docs{padding:8px 14px;background:rgba(129,140,248,.2);border:1px solid var(--accent2);border-radius:20px;color:var(--accent2);font-size:.85rem;font-weight:600;cursor:pointer}
.btn-docs:hover{background:var(--accent2);color:var(--bg)}
.option{display:flex;align-items:flex-start;gap:10px;padding:12px;background:rgba(255,255,255,.03);border:2px solid transparent;border-radius:10px;cursor:pointer;margin-bottom:8px;font-size:.9rem}
.option:hover{background:rgba(255,255,255,.06);border-color:var(--border)}
.option input{margin-top:2px;accent-color:var(--accent);transform:scale(1.15)}
.option.ok{border-color:var(--success);background:rgba(34,197,94,.1)}
.option.ko{border-color:var(--error);background:rgba(239,68,68,.1)}
.q-block{background:rgba(0,0,0,.2);border:1px solid var(--border);border-radius:10px;padding:15px;margin-bottom:12px}
.q-block h4{font-size:.9rem;margin-bottom:10px}
.text-input{width:100%;padding:10px 12px;background:var(--bg);border:2px solid var(--border);border-radius:8px;color:var(--text);font-size:.95rem;margin-top:6px}
.text-input:focus{border-color:var(--accent);outline:none}
.input-group{margin-bottom:12px}
.input-group label{font-size:.85rem;color:var(--muted);display:block;margin-bottom:4px}
.chip-bank{display:flex;flex-wrap:wrap;gap:8px;padding:12px;background:rgba(0,0,0,.25);border-radius:10px;min-height:60px;margin-bottom:15px}
.chip{padding:8px 14px;background:rgba(129,140,248,.2);border:1px solid var(--accent2);border-radius:20px;font-size:.8rem;font-weight:600;cursor:pointer;user-select:none}
.chip.selected{background:var(--accent);color:var(--bg);border-color:var(--accent);box-shadow:0 0 12px rgba(56,189,248,.4)}
.chip.ok{background:var(--success);border-color:var(--success);color:#fff}
.chip.ko{background:var(--error);border-color:var(--error);color:#fff}
.zones{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:550px){.zones{grid-template-columns:1fr}}
.zone{background:rgba(0,0,0,.2);border:2px dashed var(--border);border-radius:12px;padding:12px;min-height:90px;cursor:pointer}
.zone-title{text-align:center;font-weight:700;color:var(--accent);font-size:.8rem;text-transform:uppercase;padding-bottom:8px;border-bottom:1px solid var(--border);margin-bottom:10px}
.zone-sub{text-align:center;font-size:.7rem;color:var(--muted);margin-top:-8px;margin-bottom:10px}
.order-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:500px){.order-grid{grid-template-columns:1fr}}
.order-zone{background:rgba(0,0,0,.2);border:2px dashed var(--border);border-radius:12px;padding:12px;min-height:70px;cursor:pointer;text-align:center}
.order-num{display:inline-block;width:30px;height:30px;line-height:30px;background:var(--accent);color:var(--bg);border-radius:50%;font-weight:700;font-size:.9rem;margin-bottom:8px}
.correction{background:rgba(34,197,94,.1);border-left:4px solid var(--success);padding:15px;border-radius:0 12px 12px 0;margin-top:15px;display:none;font-size:.9rem}
.correction.show{display:block}
.correction h4{color:var(--success);margin-bottom:8px}
.btn{padding:12px 24px;border:none;border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;width:100%}
.btn-main{background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--bg)}
.btn-main:hover{box-shadow:0 6px 20px rgba(56,189,248,.3)}
.btn-reset{background:transparent;border:2px solid var(--border);color:var(--text);margin-top:15px}
.score-box{text-align:center;padding:25px;background:linear-gradient(135deg,rgba(56,189,248,.1),rgba(129,140,248,.1));border-radius:16px;margin-bottom:20px}
.score-num{font-size:3rem;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.score-label{color:var(--muted);margin-top:5px}
.eval-list{margin-top:15px}
.eval-item{display:flex;align-items:center;gap:12px;padding:12px;background:rgba(0,0,0,.2);border-radius:10px;margin-bottom:10px}
.eval-icon{font-size:1.3rem}
.eval-text{flex:1;font-size:.85rem}
.eval-tag{padding:5px 10px;border-radius:15px;font-size:.7rem;font-weight:700}
.eval-tag.ok{background:rgba(34,197,94,.2);color:var(--success)}
.eval-tag.mid{background:rgba(245,158,11,.2);color:var(--warning)}
.eval-tag.ko{background:rgba(239,68,68,.2);color:var(--error)}
.tips-box{background:rgba(129,140,248,.1);border:1px solid var(--accent2);border-radius:12px;padding:18px;margin-top:15px}
.tips-box h4{color:var(--accent2);margin-bottom:12px}
.tip{display:flex;gap:10px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px;margin-bottom:8px;font-size:.85rem}
.nav-btns{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:15px}
.btn-sm{padding:8px 14px;font-size:.8rem;background:rgba(255,255,255,.1);border:1px solid var(--border);border-radius:8px;color:var(--accent);cursor:pointer}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);z-index:1000;display:none;overflow-y:auto;padding:15px}
.modal.show{display:block}
.modal-box{background:var(--card);max-width:850px;margin:0 auto;padding:20px;border-radius:16px;border:2px solid var(--accent)}
.modal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;padding-bottom:12px;border-bottom:1px solid var(--border)}
.modal-head h2{color:var(--accent);font-size:1.1rem;margin:0}
.btn-close{background:var(--error);color:#fff;border:none;width:32px;height:32px;border-radius:50%;font-size:1.1rem;cursor:pointer}
@media(max-width:480px){header h1{font-size:1.2rem}.toolbar{flex-direction:column;align-items:flex-start}.btn-docs{width:100%;text-align:center}.score-num{font-size:2.5rem}.process-box{flex-direction:column}.process-arrow{transform:rotate(90deg)}}
</style>
</head>
<body>
<div class="container">

<div id="modal" class="modal">
<div class="modal-box">
<div class="modal-head"><h2>üìÇ Documents</h2><button class="btn-close" onclick="toggleModal()">‚úï</button></div>
<div class="doc-block"><div class="doc-label">Doc 1 ‚Äì Les 4 mots-cl√©s</div><div class="doc-content"><span class="highlight">Danger</span> : Cause capable de provoquer une l√©sion.<br><br><span class="highlight">Situation dangereuse</span> : Personne expos√©e √† un danger.<br><br><span class="highlight">√âv√©nement dangereux</span> : Ce qui arrive (contact, chute, glissade...).<br><br><span class="highlight">Dommage</span> : L√©sion (fracture, br√ªlure, √©lectrocution...).</div></div>
<div class="doc-block"><div class="doc-label">Doc 2 ‚Äì Le processus</div><div class="doc-content"><div class="process-box"><div class="process-step">1. DANGER<br><small>(cause)</small></div><span class="process-arrow">‚Üí</span><div class="process-step">2. SITUATION<br><small>(exposition)</small></div><span class="process-arrow">‚Üí</span><div class="process-step">3. √âV√âNEMENT<br><small>(ce qui arrive)</small></div><span class="process-arrow">‚Üí</span><div class="process-step">4. DOMMAGE<br><small>(l√©sion)</small></div></div></div></div>
<div class="doc-block"><div class="doc-label">Doc 3 ‚Äì Questions-guides</div><div class="doc-content">‚Ä¢ <span class="highlight">Qu'est-ce qui blesse ?</span> ‚Üí Danger<br>‚Ä¢ <span class="highlight">Dans quelles conditions ?</span> ‚Üí Situation<br>‚Ä¢ <span class="highlight">Qu'est-ce qui arrive ?</span> ‚Üí √âv√©nement<br>‚Ä¢ <span class="highlight">Qu'est-ce que √ßa fait ?</span> ‚Üí Dommage</div></div>
<button class="btn btn-main" onclick="toggleModal()">Fermer</button>
</div>
</div>

<header>
<div class="badge">COMP√âTENCE C2</div>
<h1>APPLIQUER UNE D√âMARCHE D'ANALYSE</h1>
<p>PSE ‚Äì Baccalaur√©at Professionnel</p>
</header>

<!-- PAGE 0 : ACCUEIL -->
<div id="page0" class="page active">
<div class="box-info">
<h3>üìã Comp√©tence C2</h3>
<p>¬´ Appliquer une d√©marche d'analyse ¬ª consiste √† :</p>
<ul>
<li><strong>Identifier</strong> un probl√®me ou une situation √† risque</li>
<li><strong>Analyser</strong> les causes et les cons√©quences</li>
<li><strong>Utiliser</strong> une m√©thode structur√©e</li>
<li><strong>Distinguer</strong> danger, situation, √©v√©nement et dommage</li>
</ul>
</div>
<div class="box-situation">
<h4>üìç Situation</h4>
<p>Tu es en <strong>stage en entreprise</strong>. Ton tuteur te demande de participer √† l'<strong>analyse des risques</strong> de l'atelier pour mettre √† jour le Document Unique (DUERP).</p>
</div>
<button class="btn btn-main" onclick="goTo(1)">Voir les documents ‚Üí</button>
</div>

<!-- PAGE 1 : DOCUMENTS -->
<div id="page1" class="page">
<div class="card">
<div class="card-title">üìÇ Documents √† consulter</div>
<div class="doc-block"><div class="doc-label">Doc 1 ‚Äì Les 4 mots-cl√©s</div><div class="doc-content"><strong>Danger</strong> = cause capable de provoquer une l√©sion.<br><strong>Situation</strong> = personne expos√©e au danger.<br><strong>√âv√©nement</strong> = ce qui arrive (chute, contact...).<br><strong>Dommage</strong> = l√©sion (fracture, br√ªlure...).</div></div>
<div class="doc-block"><div class="doc-label">Doc 2 ‚Äì Le processus</div><div class="doc-content"><div class="process-box"><div class="process-step">DANGER</div><span class="process-arrow">‚Üí</span><div class="process-step">SITUATION</div><span class="process-arrow">‚Üí</span><div class="process-step">√âV√âNEMENT</div><span class="process-arrow">‚Üí</span><div class="process-step">DOMMAGE</div></div></div></div>
<div class="doc-block"><div class="doc-label">Doc 3 ‚Äì Questions-guides</div><div class="doc-content">Qu'est-ce qui blesse ? ‚Üí Danger | Dans quelles conditions ? ‚Üí Situation | Qu'est-ce qui arrive ? ‚Üí √âv√©nement | Qu'est-ce que √ßa fait ? ‚Üí Dommage</div></div>
</div>
<button class="btn btn-main" onclick="goTo(2)">Commencer les exercices ‚Üí</button>
</div>

<!-- PAGE 2 : EX 1 -->
<div id="page2" class="page">
<div class="card">
<div class="toolbar"><div><span class="ex-num">Exercice 1/4</span><span class="pts">4 pts</span></div><button class="btn-docs" onclick="toggleModal()">üìñ Documents</button></div>
<div class="card-title">üìù Retrouver les d√©finitions</div>
<p style="color:var(--muted);margin-bottom:15px">Pour chaque d√©finition, coche la bonne r√©ponse.</p>
<div class="q-block"><h4>1. Cause capable de provoquer une l√©sion :</h4><label class="option"><input type="radio" name="q1" value="a"><span>√âv√©nement dangereux</span></label><label class="option"><input type="radio" name="q1" value="b"><span>Danger</span></label><label class="option"><input type="radio" name="q1" value="c"><span>Dommage</span></label></div>
<div class="q-block"><h4>2. Personne expos√©e √† un danger :</h4><label class="option"><input type="radio" name="q2" value="a"><span>Situation dangereuse</span></label><label class="option"><input type="radio" name="q2" value="b"><span>Dommage</span></label><label class="option"><input type="radio" name="q2" value="c"><span>Danger</span></label></div>
<div class="q-block"><h4>3. Ce qui se produit (glissade, contact...) :</h4><label class="option"><input type="radio" name="q3" value="a"><span>√âv√©nement dangereux</span></label><label class="option"><input type="radio" name="q3" value="b"><span>Danger</span></label><label class="option"><input type="radio" name="q3" value="c"><span>Situation dangereuse</span></label></div>
<div class="q-block"><h4>4. Fracture, br√ªlure, √©lectrocution... :</h4><label class="option"><input type="radio" name="q4" value="a"><span>Dommage</span></label><label class="option"><input type="radio" name="q4" value="b"><span>Danger</span></label><label class="option"><input type="radio" name="q4" value="c"><span>√âv√©nement dangereux</span></label></div>
<div id="cor1" class="correction"><h4>‚úì Correction</h4><p>1. <strong>Danger</strong> = cause<br>2. <strong>Situation dangereuse</strong> = exposition<br>3. <strong>√âv√©nement dangereux</strong> = ce qui se produit<br>4. <strong>Dommage</strong> = l√©sion</p></div>
</div>
<button class="btn btn-main" onclick="goTo(3)">Exercice suivant ‚Üí</button>
</div>

<!-- PAGE 3 : EX 2 -->
<div id="page3" class="page">
<div class="card">
<div class="toolbar"><div><span class="ex-num">Exercice 2/4</span><span class="pts">8 pts</span></div><button class="btn-docs" onclick="toggleModal()">üìñ Documents</button></div>
<div class="card-title">üìä Classer les √©l√©ments</div>
<p style="color:var(--muted);margin-bottom:12px">Clique sur une √©tiquette puis sur sa zone.</p>
<div class="chip-bank" id="bank2"></div>
<div class="zones">
<div class="zone" id="z-danger" onclick="drop2('z-danger')"><div class="zone-title">‚ö†Ô∏è Danger</div><div class="zone-sub">cause</div></div>
<div class="zone" id="z-situation" onclick="drop2('z-situation')"><div class="zone-title">üë§ Situation</div><div class="zone-sub">exposition</div></div>
<div class="zone" id="z-event" onclick="drop2('z-event')"><div class="zone-title">üí• √âv√©nement</div><div class="zone-sub">ce qui arrive</div></div>
<div class="zone" id="z-dommage" onclick="drop2('z-dommage')"><div class="zone-title">ü©π Dommage</div><div class="zone-sub">l√©sion</div></div>
</div>
<div id="cor2" class="correction"><h4>‚úì Correction</h4><p><strong>Danger :</strong> Sol glissant, √âlectricit√©<br><strong>Situation :</strong> Se d√©placer sur zone encombr√©e, Travailler pr√®s d'un conducteur<br><strong>√âv√©nement :</strong> Glissade, Contact √©lectrique<br><strong>Dommage :</strong> Entorse, √âlectrocution</p></div>
</div>
<button class="btn btn-main" onclick="goTo(4)">Exercice suivant ‚Üí</button>
</div>

<!-- PAGE 4 : EX 3 -->
<div id="page4" class="page">
<div class="card">
<div class="toolbar"><div><span class="ex-num">Exercice 3/4</span><span class="pts">4 pts</span></div><button class="btn-docs" onclick="toggleModal()">üìñ Documents</button></div>
<div class="card-title">üîç Analyser une situation</div>
<div class="box-situation" style="margin-bottom:15px"><h4>üìç Cas √† analyser</h4><p>En atelier, une √©l√®ve transporte des cartons. <strong>Le sol est humide</strong>. Elle <strong>glisse</strong>, tombe et se fait une <strong>entorse</strong>.</p></div>
<p style="color:var(--muted);margin-bottom:15px">Compl√®te les 4 cases :</p>
<div class="input-group"><label>Danger (qu'est-ce qui blesse ?) :</label><input type="text" id="cas-danger" class="text-input" placeholder="..."></div>
<div class="input-group"><label>Situation (dans quelles conditions ?) :</label><input type="text" id="cas-situation" class="text-input" placeholder="..."></div>
<div class="input-group"><label>√âv√©nement (qu'est-ce qui arrive ?) :</label><input type="text" id="cas-event" class="text-input" placeholder="..."></div>
<div class="input-group"><label>Dommage (qu'est-ce que √ßa fait ?) :</label><input type="text" id="cas-dommage" class="text-input" placeholder="..."></div>
<div id="cor3" class="correction"><h4>‚úì Correction</h4><p><strong>Danger :</strong> Sol humide / glissant<br><strong>Situation :</strong> Se d√©placer en portant des cartons<br><strong>√âv√©nement :</strong> Glissade / Chute<br><strong>Dommage :</strong> Entorse</p></div>
</div>
<button class="btn btn-main" onclick="goTo(5)">Exercice suivant ‚Üí</button>
</div>

<!-- PAGE 5 : EX 4 -->
<div id="page5" class="page">
<div class="card">
<div class="toolbar"><div><span class="ex-num">Exercice 4/4</span><span class="pts">4 pts</span></div><button class="btn-docs" onclick="toggleModal()">üìñ Documents</button></div>
<div class="card-title">üî¢ Remettre dans l'ordre</div>
<p style="color:var(--muted);margin-bottom:12px">Place les 4 √©tapes dans l'ordre logique.</p>
<div class="chip-bank" id="bank4"></div>
<div class="order-grid">
<div class="order-zone" id="o1" onclick="drop4('o1')"><div class="order-num">1</div><div style="font-size:.75rem;color:var(--muted)">D√©but</div></div>
<div class="order-zone" id="o2" onclick="drop4('o2')"><div class="order-num">2</div></div>
<div class="order-zone" id="o3" onclick="drop4('o3')"><div class="order-num">3</div></div>
<div class="order-zone" id="o4" onclick="drop4('o4')"><div class="order-num">4</div><div style="font-size:.75rem;color:var(--muted)">Fin</div></div>
</div>
<div id="cor4" class="correction"><h4>‚úì Correction</h4><p>1. <strong>Danger</strong> ‚Üí 2. <strong>Situation dangereuse</strong> ‚Üí 3. <strong>√âv√©nement dangereux</strong> ‚Üí 4. <strong>Dommage</strong></p></div>
</div>
<button class="btn btn-main" onclick="showBilan()">Voir mon bilan ‚Üí</button>
</div>

<!-- PAGE 6 : BILAN -->
<div id="page6" class="page">
<div class="score-box"><div class="score-num" id="scoreVal">--/20</div><div class="score-label">Score final</div></div>
<div class="card">
<div class="card-title">üìã Auto-√©valuation</div>
<div class="eval-list" id="evalList"></div>
</div>
<div class="tips-box"><h4>üí° Conseils</h4><div id="tipsList"></div></div>
<div class="card" style="margin-top:15px"><div class="card-title">üîÑ Revoir les corrections</div><div class="nav-btns"><button class="btn-sm" onclick="goTo(2)">Ex 1</button><button class="btn-sm" onclick="goTo(3)">Ex 2</button><button class="btn-sm" onclick="goTo(4)">Ex 3</button><button class="btn-sm" onclick="goTo(5)">Ex 4</button></div></div>
<button class="btn btn-reset" onclick="location.reload()">Recommencer</button>
</div>

</div>
<script>
const chips2=[{id:'c1',txt:'Sol glissant',z:'z-danger'},{id:'c2',txt:'√âlectricit√©',z:'z-danger'},{id:'c3',txt:'Se d√©placer sur zone encombr√©e',z:'z-situation'},{id:'c4',txt:'Travailler pr√®s d\'un conducteur',z:'z-situation'},{id:'c5',txt:'Glissade',z:'z-event'},{id:'c6',txt:'Contact √©lectrique',z:'z-event'},{id:'c7',txt:'Entorse',z:'z-dommage'},{id:'c8',txt:'√âlectrocution',z:'z-dommage'}];
const chips4=[{id:'s1',txt:'Dommage',z:'o4'},{id:'s2',txt:'Danger',z:'o1'},{id:'s3',txt:'Situation dangereuse',z:'o2'},{id:'s4',txt:'√âv√©nement dangereux',z:'o3'}];
let sel2=null,sel4=null,sc={ex1:0,ex2:0,ex3:0,ex4:0};
function goTo(n){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById('page'+n).classList.add('active');window.scrollTo(0,0);document.getElementById('modal').classList.remove('show');if(n===3)initEx2();if(n===5)initEx4()}
function toggleModal(){document.getElementById('modal').classList.toggle('show')}
function initEx2(){const bank=document.getElementById('bank2');if(bank.children.length>0)return;chips2.sort(()=>Math.random()-.5).forEach(c=>{const el=document.createElement('div');el.className='chip';el.textContent=c.txt;el.dataset.id=c.id;el.dataset.z=c.z;el.onclick=e=>{e.stopPropagation();pick2(el)};bank.appendChild(el)})}
function pick2(el){if(sel2)sel2.classList.remove('selected');sel2=el;el.classList.add('selected')}
function drop2(zId){if(!sel2)return;document.getElementById(zId).appendChild(sel2);sel2.classList.remove('selected');sel2=null}
function initEx4(){const bank=document.getElementById('bank4');if(bank.children.length>0)return;chips4.sort(()=>Math.random()-.5).forEach(c=>{const el=document.createElement('div');el.className='chip';el.textContent=c.txt;el.dataset.id=c.id;el.dataset.z=c.z;el.onclick=e=>{e.stopPropagation();pick4(el)};bank.appendChild(el)})}
function pick4(el){if(sel4)sel4.classList.remove('selected');sel4=el;el.classList.add('selected')}
function drop4(zId){if(!sel4)return;const zone=document.getElementById(zId);const existing=zone.querySelector('.chip');if(existing)document.getElementById('bank4').appendChild(existing);zone.appendChild(sel4);sel4.classList.remove('selected');sel4=null}
function showBilan(){
const ans1={q1:'b',q2:'a',q3:'a',q4:'a'};let s1=0;
Object.keys(ans1).forEach(q=>{const sel=document.querySelector(`input[name="${q}"]:checked`);document.querySelectorAll(`input[name="${q}"]`).forEach(inp=>{const lbl=inp.parentElement;if(inp.value===ans1[q]){lbl.classList.add('ok');if(sel&&sel.value===inp.value)s1++}else if(sel&&sel.value===inp.value){lbl.classList.add('ko')}})});
sc.ex1=s1;document.getElementById('cor1').classList.add('show');
let s2=0;document.querySelectorAll('.zone .chip').forEach(ch=>{if(ch.dataset.z===ch.parentElement.id){s2++;ch.classList.add('ok')}else{ch.classList.add('ko')}});sc.ex2=s2;document.getElementById('cor2').classList.add('show');
let s3=0;const kw={danger:['sol','humide','glissant'],situation:['deplacer','transporter','porter','cartons','marcher'],event:['glisse','glissade','chute','tombe'],dommage:['entorse','blessure']};
Object.keys(kw).forEach(k=>{const v=document.getElementById('cas-'+k).value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");if(kw[k].some(w=>v.includes(w)))s3++});sc.ex3=s3;document.getElementById('cor3').classList.add('show');
let s4=0;document.querySelectorAll('.order-zone .chip').forEach(ch=>{if(ch.dataset.z===ch.parentElement.id){s4++;ch.classList.add('ok')}else{ch.classList.add('ko')}});sc.ex4=s4;document.getElementById('cor4').classList.add('show');
const tot=sc.ex1+sc.ex2+sc.ex3+sc.ex4;document.getElementById('scoreVal').textContent=tot+' / 20';
const caps=[{t:'Conna√Ætre les 4 d√©finitions',s:sc.ex1,m:4},{t:'Classer les √©l√©ments',s:sc.ex2,m:8},{t:'Analyser une situation',s:sc.ex3,m:4},{t:'Ordonner le processus',s:sc.ex4,m:4}];
document.getElementById('evalList').innerHTML=caps.map(c=>{const r=c.s/c.m,st=r>=.75?'ok':r>=.5?'mid':'ko',ic=r>=.75?'‚úÖ':r>=.5?'üîÑ':'‚ö†Ô∏è',lb=r>=.75?'Acquis':r>=.5?'En cours':'√Ä travailler';return`<div class="eval-item"><span class="eval-icon">${ic}</span><span class="eval-text">${c.t}</span><span class="eval-tag ${st}">${lb} (${c.s}/${c.m})</span></div>`}).join('');
let tips=[];if(sc.ex1<3)tips.push({i:'üìñ',t:'R√©vise : Danger=cause, Situation=exposition, √âv√©nement=ce qui arrive, Dommage=l√©sion.'});if(sc.ex2<6)tips.push({i:'üìä',t:'Pose-toi la question : est-ce une CAUSE, une EXPOSITION, un FAIT ou une CONS√âQUENCE ?'});if(sc.ex3<3)tips.push({i:'üîç',t:'Utilise les questions-guides du document 3.'});if(sc.ex4<3)tips.push({i:'üî¢',t:'Retiens l\'ordre : DANGER ‚Üí SITUATION ‚Üí √âV√âNEMENT ‚Üí DOMMAGE.'});if(!tips.length)tips.push({i:'üèÜ',t:'Excellent ! Tu ma√Ætrises la d√©marche d\'analyse des risques.'});
document.getElementById('tipsList').innerHTML=tips.map(t=>`<div class="tip"><span>${t.i}</span><span>${t.t}</span></div>`).join('');goTo(6)}
</script>
</body>
</html>
