<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C.3 - Simulation Professionnelle Pr√©vention - 1√®re Bac Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=OpenDyslexic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
            --accent-pse: #3498DB;
            --purple-pse: #9B59B6;
            --teal-pse: #1ABC9C;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        .dyslexie-font {
            font-family: 'OpenDyslexic', sans-serif;
        }

        /* RESPONSIVE MOBILE-FIRST */
        .container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .container {
                padding: 20px;
                max-width: 1200px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                padding: 30px;
            }
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 3px solid var(--primary-pse);
        }

        .module-info h2 {
            color: var(--primary-pse);
            font-size: 1.3em;
            margin-bottom: 10px;
            text-align: center;
        }

        .objectif {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid var(--primary-pse);
        }

        .competences-travaillees {
            margin-top: 15px;
        }

        .competences-list {
            list-style: none;
            display: grid;
            gap: 8px;
            margin-top: 10px;
        }

        .competences-list li {
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .competence-c2 { border-left: 5px solid #3498DB; background: #eff6ff; }
        .competence-c4 { border-left: 5px solid #F39C12; background: #fffbeb; }
        .competence-c5 { border-left: 5px solid #9B59B6; background: #f3f1ff; }
        .competence-c6 { border-left: 5px solid #1ABC9C; background: #f0fdfa; }

        .niveau-cible {
            text-align: center;
            font-weight: 600;
            color: var(--dark-pse);
            margin-top: 15px;
            padding: 10px;
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-radius: 8px;
        }

        /* SIMULATION GAME INTERFACE */
        .simulation-main {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .stat-card.active {
            border-color: var(--primary-pse);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 134, 171, 0.15);
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary-pse);
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--dark-pse);
            margin-top: 5px;
        }

        /* SCENARIO SYSTEM */
        .scenario-container {
            margin: 25px 0;
        }

        .scenario-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 6px solid var(--accent-pse);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            display: none;
        }

        .scenario-card.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scenario-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .scenario-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-pse), var(--accent-pse));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            color: white;
        }

        .scenario-title {
            flex: 1;
        }

        .scenario-title h3 {
            color: var(--dark-pse);
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .scenario-context {
            color: #666;
            font-size: 0.9em;
        }

        .scenario-content {
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .situation-highlight {
            background: linear-gradient(135deg, #fff3cd, #fef08a);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--warning-pse);
            margin: 15px 0;
            font-style: italic;
        }

        /* ROLE SELECTION SYSTEM */
        .role-selection {
            margin: 25px 0;
        }

        .role-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .role-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .role-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .role-card.selected {
            border-color: var(--primary-pse);
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(46, 134, 171, 0.2);
        }

        .role-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            background: linear-gradient(135deg, var(--accent-pse), var(--primary-pse));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
        }

        .role-card.selected .role-icon {
            background: linear-gradient(135deg, var(--success-pse), #27AE60);
        }

        .role-title {
            font-weight: 600;
            color: var(--dark-pse);
            margin-bottom: 8px;
        }

        .role-description {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }

        /* DECISION SYSTEM */
        .decision-section {
            margin: 25px 0;
        }

        .decision-prompt {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--accent-pse);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .choices-container {
            display: grid;
            gap: 15px;
        }

        .choice-option {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .choice-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .choice-option.selected {
            border-color: var(--primary-pse);
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .choice-option.correct {
            border-color: var(--success-pse);
            background: linear-gradient(135deg, #e8f5e8, #c8e6c8);
        }

        .choice-option.incorrect {
            border-color: var(--danger-pse);
            background: linear-gradient(135deg, #fef2f2, #fecaca);
        }

        .choice-text {
            font-weight: 500;
            margin-bottom: 8px;
        }

        .choice-consequence {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }

        /* FEEDBACK SYSTEM */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .feedback-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: 15px;
            padding: 25px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .feedback-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            color: white;
        }

        .feedback-icon.success {
            background: linear-gradient(135deg, var(--success-pse), #27AE60);
        }

        .feedback-icon.error {
            background: linear-gradient(135deg, var(--danger-pse), #C0392B);
        }

        .feedback-icon.info {
            background: linear-gradient(135deg, var(--accent-pse), var(--primary-pse));
        }

        .feedback-title {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feedback-content {
            line-height: 1.6;
        }

        .consequence-box {
            background: linear-gradient(135deg, #fff9c4, #fef08a);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--warning-pse);
            margin: 15px 0;
        }

        .correction-box {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c8);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--success-pse);
            margin: 15px 0;
        }

        .explanation-box {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-pse);
            margin: 15px 0;
        }

        /* NAVIGATION BUTTONS */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-pse), var(--accent-pse));
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-pse), #27AE60);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-pse), #E67E22);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* PROGRESS TRACKING */
        .scenario-progress {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: all 0.3s ease;
        }

        .progress-dot.completed {
            background: var(--success-pse);
        }

        .progress-dot.current {
            background: var(--primary-pse);
            transform: scale(1.3);
        }

        /* INSTRUCTIONS INTERACTION */
        .instructions-interaction {
            background: linear-gradient(135deg, #fff9c4, #fef08a);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid var(--warning-pse);
        }

        /* FOOTER RGPD */
        .rgpd-footer {
            text-align: center;
            padding: 20px;
            color: rgba(255,255,255,0.8);
            font-size: 0.9em;
        }

        /* RESPONSIVE MOBILE */
        @media (max-width: 768px) {
            .role-grid {
                grid-template-columns: 1fr;
            }
            
            .game-stats {
                grid-template-columns: 1fr 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .feedback-card {
                margin: 10px;
                padding: 20px;
            }
        }

        /* ANIMATIONS */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-10px,0); }
            70% { transform: translate3d(0,-5px,0); }
            90% { transform: translate3d(0,-2px,0); }
        }

        .bounce {
            animation: bounce 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module C.3 : Les acteurs de pr√©vention</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Identifier les missions des acteurs de pr√©vention internes et externes en milieu professionnel.
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li class="competence-c2"><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li class="competence-c4"><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                    <li class="competence-c5"><strong>C5</strong> - Argumenter un choix</li>
                    <li class="competence-c6"><strong>C6</strong> - Communiquer √† l'√©crit et √† l'oral avec une syntaxe claire et un vocabulaire adapt√©</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- SIMULATION GAME INTERFACE -->
        <div class="simulation-main">
            <!-- GAME HEADER -->
            <div class="game-header">
                <h1>üé≠ Simulation Professionnelle Pr√©vention</h1>
                <p>Incarnez diff√©rents acteurs de pr√©vention et prenez les bonnes d√©cisions !</p>
            </div>

            <!-- INSTRUCTIONS UTILISATEUR -->
            <div class="instructions-interaction">
                <h5>üéÆ COMMENT JOUER :</h5>
                <p><strong>1.</strong> Lisez attentivement chaque scenario professionnel 
                <strong>2.</strong> Choisissez votre r√¥le d'acteur de pr√©vention 
                <strong>3.</strong> Prenez les d√©cisions appropri√©es selon votre r√¥le</p>
            </div>

            <!-- GAME STATS -->
            <div class="game-stats">
                <div class="stat-card">
                    <div class="stat-value" id="score-value">0</div>
                    <div class="stat-label">Score Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="scenario-count">0/8</div>
                    <div class="stat-label">Sc√©narios</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="correct-decisions">0</div>
                    <div class="stat-label">Bonnes D√©cisions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="role-mastery">D√©butant</div>
                    <div class="stat-label">Niveau</div>
                </div>
            </div>

            <!-- SCENARIO PROGRESS -->
            <div class="scenario-progress" id="scenario-progress">
                <!-- Dots dynamiques g√©n√©r√©es par JavaScript -->
            </div>

            <!-- SCENARIO 1: ACCIDENT EN ENTREPRISE -->
            <div class="scenario-card active" id="scenario-1">
                <div class="scenario-header">
                    <div class="scenario-icon">üè≠</div>
                    <div class="scenario-title">
                        <h3>Sc√©nario 1 : Accident grave en atelier</h3>
                        <div class="scenario-context">Entreprise m√©tallurgie - 150 salari√©s</div>
                    </div>
                </div>
                
                <div class="scenario-content">
                    <div class="situation-highlight">
                        <strong>SITUATION :</strong> Un op√©rateur s'est gravement bless√© √† la main en utilisant une presse hydraulique. L'accident s'est produit car les dispositifs de s√©curit√© avaient √©t√© neutralis√©s pour "gagner du temps". Plusieurs salari√©s ont √©t√© t√©moins de l'accident.
                    </div>

                    <div class="role-selection">
                        <h4>Choisissez votre r√¥le :</h4>
                        <div class="role-grid">
                            <div class="role-card" data-role="sst">
                                <div class="role-icon">üöë</div>
                                <div class="role-title">Sauveteur Secouriste du Travail</div>
                                <div class="role-description">Premier intervenant sur les lieux de l'accident</div>
                            </div>
                            <div class="role-card" data-role="employeur">
                                <div class="role-icon">üëî</div>
                                <div class="role-title">Employeur</div>
                                <div class="role-description">Responsable l√©gal de la s√©curit√©</div>
                            </div>
                            <div class="role-card" data-role="cse">
                                <div class="role-icon">üë•</div>
                                <div class="role-title">Membre du CSE</div>
                                <div class="role-description">Repr√©sentant du personnel</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-section" id="decision-1" style="display: none;">
                        <div class="decision-prompt" id="decision-prompt-1">
                            <!-- Contenu dynamique selon le r√¥le choisi -->
                        </div>
                        
                        <div class="choices-container" id="choices-1">
                            <!-- Choix dynamiques selon le r√¥le -->
                        </div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="previousScenario()" disabled id="prev-btn">Pr√©c√©dent</button>
                    <button class="btn btn-primary" onclick="nextScenario()" disabled id="next-btn">Suivant</button>
                </div>
            </div>

            <!-- SCENARIO 2: √âVALUATION DES RISQUES -->
            <div class="scenario-card" id="scenario-2">
                <div class="scenario-header">
                    <div class="scenario-icon">üìã</div>
                    <div class="scenario-title">
                        <h3>Sc√©nario 2 : Mise √† jour du DUERP</h3>
                        <div class="scenario-context">TPE Boulangerie - 8 salari√©s</div>
                    </div>
                </div>
                
                <div class="scenario-content">
                    <div class="situation-highlight">
                        <strong>SITUATION :</strong> Le patron de la boulangerie doit mettre √† jour son Document Unique d'√âvaluation des Risques Professionnels. De nouveaux √©quipements ont √©t√© install√©s et des salari√©s se plaignent de troubles musculo-squelettiques. Le DUERP n'a pas √©t√© actualis√© depuis 3 ans.
                    </div>

                    <div class="role-selection">
                        <h4>Choisissez votre r√¥le :</h4>
                        <div class="role-grid">
                            <div class="role-card" data-role="employeur-tpe">
                                <div class="role-icon">ü•ñ</div>
                                <div class="role-title">Chef d'entreprise</div>
                                <div class="role-description">Responsable de l'√©valuation des risques</div>
                            </div>
                            <div class="role-card" data-role="spst">
                                <div class="role-icon">‚öïÔ∏è</div>
                                <div class="role-title">M√©decin du travail SPST</div>
                                <div class="role-description">Conseil et accompagnement</div>
                            </div>
                            <div class="role-card" data-role="carsat">
                                <div class="role-icon">üèõÔ∏è</div>
                                <div class="role-title">Contr√¥leur CARSAT</div>
                                <div class="role-description">Expert en pr√©vention</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-section" id="decision-2" style="display: none;">
                        <div class="decision-prompt" id="decision-prompt-2"></div>
                        <div class="choices-container" id="choices-2"></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="previousScenario()">Pr√©c√©dent</button>
                    <button class="btn btn-primary" onclick="nextScenario()" disabled>Suivant</button>
                </div>
            </div>

            <!-- SCENARIO 3: CONFLIT S√âCURIT√â -->
            <div class="scenario-card" id="scenario-3">
                <div class="scenario-header">
                    <div class="scenario-icon">‚ö†Ô∏è</div>
                    <div class="scenario-title">
                        <h3>Sc√©nario 3 : Conflit autour de la s√©curit√©</h3>
                        <div class="scenario-context">Chantier BTP - 25 salari√©s</div>
                    </div>
                </div>
                
                <div class="scenario-content">
                    <div class="situation-highlight">
                        <strong>SITUATION :</strong> Sur un chantier, l'employeur refuse de fournir des EPI suppl√©mentaires par souci d'√©conomie. Les salari√©s menacent d'exercer leur droit de retrait. La tension monte et le travail est ralenti. Un d√©l√©gu√© du personnel souhaite alerter l'inspection du travail.
                    </div>

                    <div class="role-selection">
                        <h4>Choisissez votre r√¥le :</h4>
                        <div class="role-grid">
                            <div class="role-card" data-role="delegue-cse">
                                <div class="role-icon">üó£Ô∏è</div>
                                <div class="role-title">D√©l√©gu√© du personnel CSE</div>
                                <div class="role-description">D√©fense des int√©r√™ts des salari√©s</div>
                            </div>
                            <div class="role-card" data-role="inspecteur">
                                <div class="role-icon">üîç</div>
                                <div class="role-title">Inspecteur du travail</div>
                                <div class="role-description">Contr√¥le et m√©diation</div>
                            </div>
                            <div class="role-card" data-role="salarie-competent">
                                <div class="role-icon">üõ°Ô∏è</div>
                                <div class="role-title">Salari√© comp√©tent</div>
                                <div class="role-description">Expert s√©curit√© interne</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-section" id="decision-3" style="display: none;">
                        <div class="decision-prompt" id="decision-prompt-3"></div>
                        <div class="choices-container" id="choices-3"></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="previousScenario()">Pr√©c√©dent</button>
                    <button class="btn btn-primary" onclick="nextScenario()" disabled>Suivant</button>
                </div>
            </div>

            <!-- SCENARIO 4: VISITE M√âDICALE -->
            <div class="scenario-card" id="scenario-4">
                <div class="scenario-header">
                    <div class="scenario-icon">ü©∫</div>
                    <div class="scenario-title">
                        <h3>Sc√©nario 4 : Probl√®me d'aptitude au travail</h3>
                        <div class="scenario-context">Usine chimique - 200 salari√©s</div>
                    </div>
                </div>
                
                <div class="scenario-content">
                    <div class="situation-highlight">
                        <strong>SITUATION :</strong> Apr√®s un arr√™t maladie de 2 mois suite √† des troubles respiratoires, un salari√© revient au travail. Le m√©decin du travail √©met des r√©serves sur son aptitude √† reprendre son poste expos√© √† des produits chimiques. L'employeur souhaite le muter, mais le salari√© refuse.
                    </div>

                    <div class="role-selection">
                        <h4>Choisissez votre r√¥le :</h4>
                        <div class="role-grid">
                            <div class="role-card" data-role="medecin-travail">
                                <div class="role-icon">üë®‚Äç‚öïÔ∏è</div>
                                <div class="role-title">M√©decin du travail</div>
                                <div class="role-description">Expertise m√©dicale et pr√©vention</div>
                            </div>
                            <div class="role-card" data-role="employeur-usine">
                                <div class="role-icon">üè≠</div>
                                <div class="role-title">Employeur</div>
                                <div class="role-description">Gestion des ressources humaines</div>
                            </div>
                            <div class="role-card" data-role="representant-cse">
                                <div class="role-icon">üë®‚Äçüíº</div>
                                <div class="role-title">Repr√©sentant CSE</div>
                                <div class="role-description">Soutien au salari√©</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-section" id="decision-4" style="display: none;">
                        <div class="decision-prompt" id="decision-prompt-4"></div>
                        <div class="choices-container" id="choices-4"></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="previousScenario()">Pr√©c√©dent</button>
                    <button class="btn btn-warning" onclick="finishSimulation()" disabled>Terminer la simulation</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FEEDBACK OVERLAY -->
    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-card">
            <div class="feedback-header">
                <div class="feedback-icon" id="feedback-icon">
                    <span id="feedback-icon-text">‚úì</span>
                </div>
                <div class="feedback-title" id="feedback-title">Titre du feedback</div>
            </div>
            <div class="feedback-content" id="feedback-content">
                <!-- Contenu dynamique -->
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="closeFeedback()">Continuer</button>
            </div>
        </div>
    </div>

    <!-- FOOTER RGPD √âPUR√â -->
    <div class="rgpd-footer">
        üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
    </div>

    <script>
        // Variables globales de la simulation
        let currentScenario = 1;
        let totalScenarios = 4;
        let gameStats = {
            score: 0,
            correctDecisions: 0,
            completedScenarios: 0,
            selectedRoles: {}
        };

        // Donn√©es des sc√©narios et d√©cisions
        const scenarioData = {
            1: {
                roles: {
                    'sst': {
                        prompt: 'En tant que SST, vous √™tes le premier sur les lieux. Quelle est votre priorit√© imm√©diate ?',
                        choices: [
                            {
                                text: 'Prodiguer les premiers secours √† la victime',
                                consequence: 'Action prioritaire et vitale pour la victime',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Faire √©vacuer la zone et s√©curiser le p√©rim√®tre',
                                consequence: 'Important mais pas prioritaire face √† une victime grave',
                                correct: false,
                                points: 10
                            },
                            {
                                text: 'Chercher des t√©moins pour comprendre ce qui s\'est pass√©',
                                consequence: 'L\'enqu√™te vient apr√®s les secours d\'urgence',
                                correct: false,
                                points: 5
                            }
                        ]
                    },
                    'employeur': {
                        prompt: 'En tant qu\'employeur, vous arrivez apr√®s que les secours aient √©t√© donn√©s. Quelle est votre action prioritaire ?',
                        choices: [
                            {
                                text: 'Lancer imm√©diatement une enqu√™te interne',
                                consequence: 'Important pour comprendre les causes et √©viter la r√©cidive',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Contacter votre assurance pour d√©clarer l\'accident',
                                consequence: 'N√©cessaire mais pas prioritaire dans l\'imm√©diat',
                                correct: false,
                                points: 15
                            },
                            {
                                text: 'Remettre en marche la production rapidement',
                                consequence: 'Dangereux ! Il faut d\'abord identifier et corriger le probl√®me',
                                correct: false,
                                points: 0
                            }
                        ]
                    },
                    'cse': {
                        prompt: 'En tant que membre du CSE, vous avez un droit d\'enqu√™te. Comment proc√©dez-vous ?',
                        choices: [
                            {
                                text: 'Organiser une enqu√™te contradictoire avec l\'employeur',
                                consequence: 'Excellente approche pour une enqu√™te objective et compl√®te',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Demander l\'intervention de l\'inspection du travail',
                                consequence: 'Possible mais l\'enqu√™te CSE est prioritaire',
                                correct: false,
                                points: 15
                            },
                            {
                                text: 'Attendre que l\'employeur vous communique son rapport',
                                consequence: 'Passif ! Vous avez un droit d\'enqu√™te √† exercer',
                                correct: false,
                                points: 5
                            }
                        ]
                    }
                }
            },
            2: {
                roles: {
                    'employeur-tpe': {
                        prompt: 'Votre DUERP est obsol√®te et vous manquez d\'expertise. Vers qui vous tournez-vous ?',
                        choices: [
                            {
                                text: 'Faire appel au SPST pour un accompagnement',
                                consequence: 'Excellente id√©e ! Le SPST peut vous conseiller efficacement',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Demander une aide financi√®re √† la CARSAT',
                                consequence: 'Utile mais il faut d\'abord l\'expertise technique',
                                correct: false,
                                points: 15
                            },
                            {
                                text: 'Faire le DUERP vous-m√™me avec internet',
                                consequence: 'Risqu√© ! Vous pourriez passer √† c√¥t√© de risques importants',
                                correct: false,
                                points: 5
                            }
                        ]
                    },
                    'spst': {
                        prompt: 'L\'employeur vous demande conseil pour son DUERP. Quelle est votre approche ?',
                        choices: [
                            {
                                text: 'Proposer une visite des locaux et un accompagnement m√©thodologique',
                                consequence: 'Approche compl√®te et professionnelle du SPST',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Lui envoyer un mod√®le type de DUERP',
                                consequence: 'Insuffisant ! Chaque entreprise a ses sp√©cificit√©s',
                                correct: false,
                                points: 10
                            },
                            {
                                text: 'Le diriger vers la CARSAT uniquement',
                                consequence: 'Vous passez √† c√¥t√© de votre mission de conseil',
                                correct: false,
                                points: 5
                            }
                        ]
                    },
                    'carsat': {
                        prompt: 'En tant que contr√¥leur CARSAT, vous constatez les lacunes du DUERP. Que proposez-vous ?',
                        choices: [
                            {
                                text: 'Proposer une formation et des aides financi√®res cibl√©es',
                                consequence: 'Approche constructive alliant conseil et incitation',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Augmenter directement son taux de cotisation',
                                consequence: 'Punitif ! Il vaut mieux d\'abord accompagner',
                                correct: false,
                                points: 5
                            },
                            {
                                text: 'Exiger une mise en conformit√© sous 15 jours',
                                consequence: 'Trop court ! Un DUERP de qualit√© demande du temps',
                                correct: false,
                                points: 10
                            }
                        ]
                    }
                }
            },
            3: {
                roles: {
                    'delegue-cse': {
                        prompt: 'Les salari√©s comptent sur vous face au refus de l\'employeur. Comment agissez-vous ?',
                        choices: [
                            {
                                text: 'Exercer le droit d\'alerte et saisir l\'inspection du travail',
                                consequence: 'D√©marche l√©gale appropri√©e pour faire pression sur l\'employeur',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'N√©gocier directement avec l\'employeur',
                                consequence: 'Peut marcher mais vous n\'avez pas beaucoup de pouvoir',
                                correct: false,
                                points: 15
                            },
                            {
                                text: 'Conseiller aux salari√©s d\'acheter leurs EPI',
                                consequence: 'Non ! C\'est √† l\'employeur de fournir les EPI',
                                correct: false,
                                points: 0
                            }
                        ]
                    },
                    'inspecteur': {
                        prompt: 'Vous √™tes saisi par le CSE. Quelle est votre intervention ?',
                        choices: [
                            {
                                text: 'Effectuer un contr√¥le inopin√© et mettre en demeure si n√©cessaire',
                                consequence: 'Action ferme et efficace pour faire respecter la loi',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Programmer une visite dans 3 semaines',
                                consequence: 'Trop lent ! La s√©curit√© des salari√©s est en jeu',
                                correct: false,
                                points: 10
                            },
                            {
                                text: 'Envoyer un courrier de rappel √† l\'employeur',
                                consequence: 'Insuffisant face √† un refus caract√©ris√©',
                                correct: false,
                                points: 5
                            }
                        ]
                    },
                    'salarie-competent': {
                        prompt: 'Entre votre loyaut√© envers l\'employeur et la s√©curit√© des salari√©s, que faites-vous ?',
                        choices: [
                            {
                                text: 'Alerter l\'employeur sur ses obligations l√©gales et les risques juridiques',
                                consequence: 'Position √©quilibr√©e : conseil ferme tout en restant constructif',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Soutenir la position de l\'employeur',
                                consequence: 'Vous manquez √† votre mission de pr√©vention !',
                                correct: false,
                                points: 0
                            },
                            {
                                text: 'Rester neutre et ne pas intervenir',
                                consequence: 'Vous avez un r√¥le actif √† jouer en pr√©vention',
                                correct: false,
                                points: 5
                            }
                        ]
                    }
                }
            },
            4: {
                roles: {
                    'medecin-travail': {
                        prompt: 'Face au refus du salari√© d\'√™tre mut√©, quelle est votre position m√©dicale ?',
                        choices: [
                            {
                                text: 'Maintenir votre avis d\'inaptitude au poste et proposer un accompagnement',
                                consequence: 'Position m√©dicale ferme et bienveillante, conforme √† votre mission',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'C√©der et d√©clarer le salari√© apte sous conditions',
                                consequence: 'Dangereux ! Vous engagez sa sant√© et votre responsabilit√©',
                                correct: false,
                                points: 0
                            },
                            {
                                text: 'Demander des examens compl√©mentaires pour temporiser',
                                consequence: 'Peut √™tre utile mais ne r√®gle pas le probl√®me de fond',
                                correct: false,
                                points: 15
                            }
                        ]
                    },
                    'employeur-usine': {
                        prompt: 'Le m√©decin maintient son avis d\'inaptitude. Comment g√©rez-vous cette situation ?',
                        choices: [
                            {
                                text: 'Chercher un poste de reclassement adapt√© dans l\'entreprise',
                                consequence: 'D√©marche l√©gale et humaine, conforme √† vos obligations',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Licencier pour inaptitude imm√©diatement',
                                consequence: 'Ill√©gal ! Vous devez d\'abord chercher un reclassement',
                                correct: false,
                                points: 0
                            },
                            {
                                text: 'Passer outre l\'avis du m√©decin du travail',
                                consequence: 'Impossible et dangereux ! L\'avis m√©dical s\'impose',
                                correct: false,
                                points: 0
                            }
                        ]
                    },
                    'representant-cse': {
                        prompt: 'Le salari√© se confie √† vous sur ses craintes. Comment l\'accompagnez-vous ?',
                        choices: [
                            {
                                text: 'L\'informer sur ses droits et l\'orienter vers les ressources d\'aide',
                                consequence: 'Accompagnement informatif et solidaire, r√¥le du CSE',
                                correct: true,
                                points: 25
                            },
                            {
                                text: 'Lui conseiller de contester l\'avis m√©dical',
                                consequence: 'Risqu√© ! L\'avis m√©dical vise √† prot√©ger sa sant√©',
                                correct: false,
                                points: 10
                            },
                            {
                                text: 'N√©gocier discr√®tement avec l\'employeur',
                                consequence: 'Bien intentionn√© mais le salari√© doit √™tre associ√©',
                                correct: false,
                                points: 15
                            }
                        ]
                    }
                }
            }
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initializeSimulation();
            setupEventListeners();
        });

        // Configuration initiale
        function initializeSimulation() {
            updateProgressDots();
            updateGameStats();
            
            // Masquer toutes les cartes sauf la premi√®re
            for (let i = 2; i <= totalScenarios; i++) {
                document.getElementById(`scenario-${i}`).style.display = 'none';
            }
        }

        // Configuration des √©v√©nements
        function setupEventListeners() {
            // S√©lection des r√¥les
            document.querySelectorAll('.role-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectRole(this);
                });
            });

            // Gestion du clavier
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeFeedback();
                }
            });
        }

        // S√©lection d'un r√¥le
        function selectRole(cardElement) {
            const scenario = cardElement.closest('.scenario-card').id;
            const roleCards = cardElement.parentElement.querySelectorAll('.role-card');
            
            // D√©s√©lectionner les autres r√¥les
            roleCards.forEach(card => card.classList.remove('selected'));
            
            // S√©lectionner ce r√¥le
            cardElement.classList.add('selected');
            
            const role = cardElement.dataset.role;
            gameStats.selectedRoles[currentScenario] = role;
            
            // Afficher la section de d√©cision
            showDecisionSection(currentScenario, role);
            
            // Animer la transition
            cardElement.classList.add('bounce');
            setTimeout(() => cardElement.classList.remove('bounce'), 1000);
        }

        // Affichage de la section d√©cision
        function showDecisionSection(scenarioNum, role) {
            const decisionSection = document.getElementById(`decision-${scenarioNum}`);
            const prompt = document.getElementById(`decision-prompt-${scenarioNum}`);
            const choicesContainer = document.getElementById(`choices-${scenarioNum}`);
            
            const roleData = scenarioData[scenarioNum].roles[role];
            
            // Afficher le prompt
            prompt.textContent = roleData.prompt;
            
            // Cr√©er les choix
            choicesContainer.innerHTML = '';
            roleData.choices.forEach((choice, index) => {
                const choiceElement = document.createElement('div');
                choiceElement.className = 'choice-option';
                choiceElement.dataset.choiceIndex = index;
                choiceElement.innerHTML = `
                    <div class="choice-text">${choice.text}</div>
                    <div class="choice-consequence">${choice.consequence}</div>
                `;
                
                choiceElement.addEventListener('click', function() {
                    selectChoice(this, scenarioNum, role, index);
                });
                
                choicesContainer.appendChild(choiceElement);
            });
            
            // Afficher la section avec animation
            decisionSection.style.display = 'block';
            decisionSection.classList.add('fade-in');
        }

        // S√©lection d'un choix
        function selectChoice(choiceElement, scenarioNum, role, choiceIndex) {
            const choicesContainer = choiceElement.parentElement;
            const choices = choicesContainer.querySelectorAll('.choice-option');
            
            // D√©s√©lectionner les autres choix
            choices.forEach(choice => choice.classList.remove('selected'));
            
            // S√©lectionner ce choix
            choiceElement.classList.add('selected');
            
            // Traitement de la r√©ponse
            setTimeout(() => {
                processChoice(scenarioNum, role, choiceIndex);
            }, 500);
        }

        // Traitement du choix
        function processChoice(scenarioNum, role, choiceIndex) {
            const choiceData = scenarioData[scenarioNum].roles[role].choices[choiceIndex];
            const choicesContainer = document.getElementById(`choices-${scenarioNum}`);
            const choices = choicesContainer.querySelectorAll('.choice-option');
            
            // Marquer visuellement les r√©ponses
            choices.forEach((choice, index) => {
                if (index === choiceIndex) {
                    choice.classList.add(choiceData.correct ? 'correct' : 'incorrect');
                } else if (scenarioData[scenarioNum].roles[role].choices[index].correct) {
                    choice.classList.add('correct');
                }
            });

            // Mettre √† jour les statistiques
            gameStats.score += choiceData.points;
            if (choiceData.correct) {
                gameStats.correctDecisions++;
            }
            
            updateGameStats();
            
            // Afficher le feedback
            showFeedback(choiceData, scenarioNum, role);
            
            // Activer le bouton suivant
            const nextBtn = document.querySelector(`#scenario-${scenarioNum} .nav-buttons .btn-primary, #scenario-${scenarioNum} .nav-buttons .btn-warning`);
            if (nextBtn) {
                nextBtn.disabled = false;
            }
        }

        // Affichage du feedback
        function showFeedback(choiceData, scenarioNum, role) {
            const overlay = document.getElementById('feedback-overlay');
            const icon = document.getElementById('feedback-icon');
            const iconText = document.getElementById('feedback-icon-text');
            const title = document.getElementById('feedback-title');
            const content = document.getElementById('feedback-content');
            
            // Configuration du feedback selon le r√©sultat
            if (choiceData.correct) {
                icon.className = 'feedback-icon success';
                iconText.textContent = '‚úì';
                title.textContent = `Excellent choix ! (+${choiceData.points} points)`;
            } else {
                icon.className = 'feedback-icon error';
                iconText.textContent = '‚úó';
                title.textContent = `Choix √† am√©liorer (+${choiceData.points} points)`;
            }
            
            // Contenu du feedback
            let html = `
                <div class="consequence-box">
                    <strong>üìä Cons√©quence :</strong><br>
                    ${choiceData.consequence}
                </div>
            `;
            
            if (!choiceData.correct) {
                const correctChoice = scenarioData[scenarioNum].roles[role].choices.find(c => c.correct);
                html += `
                    <div class="correction-box">
                        <strong>‚úÖ Meilleur choix :</strong><br>
                        ${correctChoice.text}
                    </div>
                `;
            }
            
            html += `
                <div class="explanation-box">
                    <strong>üí° Point cl√© :</strong><br>
                    ${getRoleExplanation(role, scenarioNum)}
                </div>
            `;
            
            content.innerHTML = html;
            overlay.style.display = 'flex';
        }

        // Explications par r√¥le
        function getRoleExplanation(role, scenarioNum) {
            const explanations = {
                1: {
                    'sst': 'Le SST a pour priorit√© absolue de porter secours √† la victime. Sa formation lui permet d\'agir efficacement.',
                    'employeur': 'L\'employeur doit imm√©diatement enqu√™ter pour identifier les causes et √©viter un nouvel accident.',
                    'cse': 'Le CSE a un droit d\'enqu√™te qui lui permet de participer activement √† l\'am√©lioration de la s√©curit√©.'
                },
                2: {
                    'employeur-tpe': 'Dans une TPE, s\'appuyer sur l\'expertise du SPST est essentiel pour un DUERP de qualit√©.',
                    'spst': 'Le SPST doit proposer un accompagnement personnalis√©, pas seulement des documents g√©n√©riques.',
                    'carsat': 'La CARSAT privil√©gie l\'accompagnement et la formation avant les sanctions financi√®res.'
                },
                3: {
                    'delegue-cse': 'Le droit d\'alerte du CSE est un outil puissant pour faire respecter les obligations de s√©curit√©.',
                    'inspecteur': 'L\'inspection du travail doit r√©agir rapidement aux signalements de danger grave.',
                    'salarie-competent': 'Le salari√© comp√©tent doit conseiller l\'employeur tout en d√©fendant la s√©curit√© des salari√©s.'
                },
                4: {
                    'medecin-travail': 'L\'avis du m√©decin du travail vise √† prot√©ger la sant√© du salari√©, il ne peut √™tre n√©goci√©.',
                    'employeur-usine': 'L\'obligation de reclassement pr√©c√®de toute proc√©dure de licenciement pour inaptitude.',
                    'representant-cse': 'Le CSE doit informer et soutenir le salari√© tout en respectant son choix.'
                }
            };
            
            return explanations[scenarioNum][role] || 'Chaque acteur a un r√¥le sp√©cifique dans la pr√©vention des risques professionnels.';
        }

        // Fermeture du feedback
        function closeFeedback() {
            document.getElementById('feedback-overlay').style.display = 'none';
        }

        // Navigation entre sc√©narios
        function nextScenario() {
            if (currentScenario < totalScenarios) {
                // Masquer le sc√©nario actuel
                document.getElementById(`scenario-${currentScenario}`).classList.remove('active');
                document.getElementById(`scenario-${currentScenario}`).style.display = 'none';
                
                // Afficher le suivant
                currentScenario++;
                const nextScenarioElement = document.getElementById(`scenario-${currentScenario}`);
                nextScenarioElement.style.display = 'block';
                nextScenarioElement.classList.add('active');
                
                // Mettre √† jour les statistiques
                gameStats.completedScenarios++;
                updateProgressDots();
                updateGameStats();
                
                // G√©rer les boutons
                updateNavigationButtons();
            }
        }

        function previousScenario() {
            if (currentScenario > 1) {
                // Masquer le sc√©nario actuel
                document.getElementById(`scenario-${currentScenario}`).classList.remove('active');
                document.getElementById(`scenario-${currentScenario}`).style.display = 'none';
                
                // Afficher le pr√©c√©dent
                currentScenario--;
                const prevScenarioElement = document.getElementById(`scenario-${currentScenario}`);
                prevScenarioElement.style.display = 'block';
                prevScenarioElement.classList.add('active');
                
                updateProgressDots();
                updateNavigationButtons();
            }
        }

        // Mise √† jour des boutons de navigation
        function updateNavigationButtons() {
            const prevBtns = document.querySelectorAll('.btn-secondary');
            const nextBtns = document.querySelectorAll('.btn-primary');
            
            // Bouton pr√©c√©dent
            prevBtns.forEach(btn => {
                btn.disabled = (currentScenario === 1);
            });
            
            // R√©initialiser les boutons suivant
            nextBtns.forEach(btn => {
                btn.disabled = true;
            });
        }

        // Mise √† jour des points de progression
        function updateProgressDots() {
            const progressContainer = document.getElementById('scenario-progress');
            progressContainer.innerHTML = '';
            
            for (let i = 1; i <= totalScenarios; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                
                if (i < currentScenario) {
                    dot.classList.add('completed');
                } else if (i === currentScenario) {
                    dot.classList.add('current');
                }
                
                progressContainer.appendChild(dot);
            }
        }

        // Mise √† jour des statistiques
        function updateGameStats() {
            document.getElementById('score-value').textContent = gameStats.score;
            document.getElementById('scenario-count').textContent = `${gameStats.completedScenarios}/${totalScenarios}`;
            document.getElementById('correct-decisions').textContent = gameStats.correctDecisions;
            
            // Mise √† jour du niveau
            updateRoleMastery();
        }

        // Mise √† jour de la ma√Ætrise
        function updateRoleMastery() {
            const masteryElement = document.getElementById('role-mastery');
            const percentage = (gameStats.score / (totalScenarios * 25)) * 100;
            
            if (percentage >= 80) {
                masteryElement.textContent = 'Expert';
            } else if (percentage >= 60) {
                masteryElement.textContent = 'Confirm√©';
            } else if (percentage >= 40) {
                masteryElement.textContent = 'Interm√©diaire';
            } else {
                masteryElement.textContent = 'D√©butant';
            }
        }

        // Finalisation de la simulation
        function finishSimulation() {
            gameStats.completedScenarios = totalScenarios;
            updateGameStats();
            
            const finalScore = gameStats.score;
            const maxScore = totalScenarios * 25;
            const percentage = Math.round((finalScore / maxScore) * 100);
            
            // Feedback final
            const overlay = document.getElementById('feedback-overlay');
            const icon = document.getElementById('feedback-icon');
            const iconText = document.getElementById('feedback-icon-text');
            const title = document.getElementById('feedback-title');
            const content = document.getElementById('feedback-content');
            
            icon.className = 'feedback-icon info';
            iconText.textContent = 'üé≠';
            title.textContent = `Simulation termin√©e ! Score : ${finalScore}/${maxScore} (${percentage}%)`;
            
            let html = `
                <div class="consequence-box">
                    <strong>üéØ Votre Performance :</strong><br>
                    ${gameStats.correctDecisions} bonnes d√©cisions sur ${totalScenarios} sc√©narios
                </div>
                
                <div class="explanation-box">
                    <strong>üí° Bilan de comp√©tences :</strong><br>
                    ${getGlobalFeedback(percentage)}
                </div>
                
                <div class="correction-box">
                    <strong>üîÑ Pour progresser :</strong><br>
                    R√©visez les missions sp√©cifiques de chaque acteur et leurs interactions dans la pr√©vention des risques professionnels.
                </div>
            `;
            
            content.innerHTML = html;
            overlay.style.display = 'flex';
        }

        // Feedback global
        function getGlobalFeedback(percentage) {
            if (percentage >= 80) {
                return 'Excellente ma√Ætrise ! Vous comprenez parfaitement les r√¥les des diff√©rents acteurs de pr√©vention.';
            } else if (percentage >= 60) {
                return 'Bonne compr√©hension globale. Quelques ajustements √† faire sur certains r√¥les sp√©cifiques.';
            } else if (percentage >= 40) {
                return 'Compr√©hension correcte mais des approfondissements sont n√©cessaires sur les missions de chaque acteur.';
            } else {
                return 'R√©vision recommand√©e des cours sur les acteurs de pr√©vention pour mieux comprendre leurs missions respectives.';
            }
        }

        // Gestion de l'accessibilit√©
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                if (e.target.classList.contains('role-card') || e.target.classList.contains('choice-option')) {
                    e.preventDefault();
                    e.target.click();
                }
            }
        });

        // Ajout des attributs d'accessibilit√©
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.role-card').forEach((card, index) => {
                card.setAttribute('tabindex', '0');
                card.setAttribute('role', 'button');
                card.setAttribute('aria-label', `R√¥le ${card.querySelector('.role-title').textContent} - Cliquez pour s√©lectionner`);
            });
        });
    </script>
</body>
</html>