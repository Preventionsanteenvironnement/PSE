<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S√©ance 7 : Mission Parcoursup - Bac Pro AGOrA</title>
  <style>
    /* --- DESIGN G√âN√âRAL --- */
    * { box-sizing: border-box; }
    html { font-size: 16px; }

    body {
      margin: 0; padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: #fff1f2; color: #1e293b;
      line-height: 1.6;
      overflow-x: hidden;
    }

    .font-controls{
      position: sticky;
      top: 10px;
      z-index: 50;
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding: 12px 12px 0;
      max-width: 1000px;
      margin: 0 auto;
    }
    .font-btn{
      border: none;
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 800;
      cursor: pointer;
      background: #be123c;
      color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
      touch-action: manipulation;
    }
    .font-btn:active{ transform: translateY(1px); }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
      border: 1px solid #fecdd3;
    }

    /* --- HEADER ROUGE/ROSE (Identit√© Parcoursup) --- */
    header {
      background: linear-gradient(135deg, #be123c, #e11d48);
      color: white;
      padding: 25px 30px;
    }
    header h1 { margin: 0; font-size: 1.6rem; }
    header p { margin: 5px 0 0; opacity: 0.9; font-size: 0.95rem; }

    /* --- BARRE DE PROGRESSION --- */
    .progress-bar {
      display: flex;
      justify-content: space-between;
      padding: 20px 30px;
      background: #fff5f7;
      border-bottom: 1px solid #fda4af;
      gap: 10px;
      flex-wrap: wrap;
    }
    .step {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      color: #fb7185;
      font-weight: 700;
      flex: 1 1 160px;
      min-width: 140px;
    }
    .step-circle {
      width: 28px; height: 28px;
      border-radius: 50%;
      background: #ffe4e6;
      color: #e11d48;
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 0 0 28px;
    }
    .step.active { color: #be123c; }
    .step.active .step-circle { background: #be123c; color: white; }
    .step.completed .step-circle { background: #22c55e; color: white; }

    /* --- CONTENU --- */
    .page-content {
      padding: 30px 40px;
      display: none;
      animation: fadeIn 0.4s ease;
    }
    .page-content.active { display: block; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      color: #9f1239;
      font-size: 1.4rem;
      border-bottom: 2px solid #fecdd3;
      padding-bottom: 10px;
      margin-top: 0;
    }
    h3 {
      color: #be123c;
      font-size: 1.1rem;
      margin-top: 25px;
      margin-bottom: 15px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    /* --- ELEMENTS VISUELS --- */
    .alert-box {
      background: #fff1f2;
      border-left: 5px solid #e11d48;
      padding: 15px;
      border-radius: 6px;
      color: #881337;
      margin-bottom: 20px;
    }

    /* Timeline */
    .timeline {
      display: flex;
      margin: 20px 0;
      gap: 10px;
      flex-wrap: wrap;
    }
    .time-block {
      flex: 1 1 180px;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-size: 0.9rem;
      border: 1px solid #ddd;
      opacity: 0.65;
      min-width: 160px;
      background: #fff;
    }
    .time-active {
      border: 2px solid #e11d48;
      background: #fff1f2;
      opacity: 1;
      font-weight: 900;
      color: #be123c;
      box-shadow: 0 4px 10px rgba(225, 29, 72, 0.15);
    }
    .time-label { display: block; font-size: 1.2rem; margin-bottom: 5px; }

    /* Dossier Simulation */
    .dossier-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .bulletin-card {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 15px;
      background: #f8fafc;
    }
    .bulletin-title {
      font-weight: 900;
      text-align: center;
      margin-bottom: 10px;
      color: #475569;
    }
    .grade-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 0.9rem;
      margin-bottom: 5px;
      border-bottom: 1px dashed #cbd5e1;
      padding-bottom: 2px;
    }

    /* Inputs & Textareas */
    textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #cbd5e1;
      border-radius: 8px;
      min-height: 80px;
      margin-top: 8px;
      font-family: inherit;
      font-size: 0.95rem;
      background: #fff;
      resize: vertical;
    }
    textarea:focus {
      outline: none;
      border-color: #be123c;
      background: #fff;
      box-shadow: 0 0 0 2px rgba(190, 18, 60, 0.12);
    }

    /* Navigation */
    .nav-buttons {
      padding: 20px 40px;
      background: #fff1f2;
      border-top: 1px solid #fecdd3;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn {
      padding: 10px 24px;
      border-radius: 10px;
      font-weight: 800;
      cursor: pointer;
      border: none;
      font-size: 0.95rem;
      transition: 0.2s;
      touch-action: manipulation;
      white-space: nowrap;
    }
    .btn-prev { background: #e2e8f0; color: #475569; }
    .btn-next { background: #e11d48; color: white; }
    .btn-save { background: #16a34a; color: white; }
    .btn:hover { opacity: 0.95; transform: translateY(-1px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    .hidden { display: none; }

    @media (max-width: 860px) {
      .container { margin: 12px; }
      header { padding: 18px 16px; }
      .progress-bar { padding: 14px 16px; }
      .page-content { padding: 20px 16px; }
      .nav-buttons { padding: 14px 16px; }
      .dossier-grid { grid-template-columns: 1fr; }
    }

    @media print {
      body { background: #fff; }
      .font-controls, .nav-buttons { display: none !important; }
      .page-content { display: block !important; border-bottom: 1px dashed #ccc; padding-bottom: 20px; }
      header, .container { box-shadow: none; border: none; }
    }
  </style>
</head>

<body>
  <div class="font-controls" aria-label="Taille du texte">
    <button class="font-btn" type="button" onclick="changeSize(-1)">A-</button>
    <button class="font-btn" type="button" onclick="changeSize(1)">A+</button>
  </div>

  <div class="container">
    <header>
      <h1>S√©ance 7 : Mission Parcoursup üéØ</h1>
      <p>Pourquoi ton ann√©e de Premi√®re (qui arrive) est plus importante que la Terminale.</p>
    </header>

    <div class="progress-bar">
      <div class="step active" id="step1"><div class="step-circle">1</div><span>C'est quoi ?</span></div>
      <div class="step" id="step2"><div class="step-circle">2</div><span>Le Scoop</span></div>
      <div class="step" id="step3"><div class="step-circle">3</div><span>Le Dossier</span></div>
      <div class="step" id="step4"><div class="step-circle">4</div><span>Strat√©gie</span></div>
    </div>

    <div class="page-content active" id="page1">
      <h2>Page 1 : Parcoursup pour les nuls ü§î</h2>
      <div class="alert-box">
        <strong>D√©finition simple :</strong> C'est le site web obligatoire pour s'inscrire en √©tudes sup√©rieures (BTS, Fac, BUT...) apr√®s le Bac.
      </div>

      <h3>Imagine que c'est Netflix...</h3>
      <p>Sauf qu'au lieu de choisir des films, tu choisis des √©coles. Et au lieu de cliquer sur "Play", tu dois <strong>attendre qu'ils t'acceptent</strong>.</p>

      <label>Qu'est-ce que tu as d√©j√† entendu dire sur Parcoursup (rumeurs, stress, amis...) ?</label>
      <textarea id="p1_rumeurs" placeholder="J'ai entendu que c'√©tait compliqu√©, que c'√©tait une loterie..."></textarea>
    </div>

    <div class="page-content" id="page2">
      <h2>Page 2 : Le Scoop (√áa commence quand ?) üìÖ</h2>
      <p>Beaucoup pensent que tout se joue en Terminale. <strong>C'EST FAUX.</strong></p>
      <p>Regarde bien quels bulletins les √©coles vont regarder dans ton dossier :</p>

      <div class="timeline">
        <div class="time-block">
          <span class="time-label">Seconde</span>
          Ignor√©<br><small>(Ouf !)</small>
        </div>
        <div class="time-block time-active">
          <span class="time-label">PREMI√àRE</span>
          Trimestres 1, 2, 3<br><strong>100% VISIBLE</strong>
        </div>
        <div class="time-block time-active">
          <span class="time-label">Terminale</span>
          Trimestres 1, 2<br><strong>VISIBLE</strong>
        </div>
        <div class="time-block">
          <span class="time-label">Terminale</span>
          Trimestre 3<br><small>(Trop tard !)</small>
        </div>
      </div>

      <div class="alert-box" style="border-color: #be123c; background: #fff0f5;">
        üö® <strong>Conclusion :</strong> Ton dossier Parcoursup commence officiellement en <strong>Septembre prochain</strong>. Tu as 5 trimestres pour convaincre. Si tu rates ta Premi√®re, tu g√¢ches 60% de ton dossier.
      </div>

      <label>Est-ce que tu savais que les notes de l'ann√©e prochaine √©taient d√©finitives pour ton avenir ?</label>
      <textarea id="p2_reaction" placeholder="Non je ne savais pas / Oui mais je n'avais pas r√©alis√© l'importance..."></textarea>
    </div>

    <div class="page-content" id="page3">
      <h2>Page 3 : Hacke ton Dossier üïµÔ∏è</h2>
      <p>Un jury de BTS ne regarde pas que la moyenne g√©n√©rale. Voici ce qui peut sauver (ou couler) un dossier.</p>

      <div class="dossier-grid">
        <div class="bulletin-card">
          <div class="bulletin-title">‚ùå Dossier "Risqu√©"</div>
          <div class="grade-row"><span>Moyenne :</span> <strong>13/20</strong></div>
          <div class="grade-row"><span>Absences :</span> <span style="color:red">15 1/2 journ√©es</span></div>
          <div class="grade-row"><span>Appr√©ciation :</span> <span>Bavardages, peut mieux faire.</span></div>
          <div style="margin-top:10px; font-size:0.85rem; color:#be123c;">
            <strong>Verdict :</strong> Refus√© en BTS s√©lectif : ils ont peur que tu s√®ches les cours.
          </div>
        </div>

        <div class="bulletin-card">
          <div class="bulletin-title">‚úÖ Dossier "P√©pite"</div>
          <div class="grade-row"><span>Moyenne :</span> <strong>11/20</strong></div>
          <div class="grade-row"><span>Absences :</span> <span>0</span></div>
          <div class="grade-row"><span>Appr√©ciation :</span> <span>√âl√®ve s√©rieux, en progression, volontaire.</span></div>
          <div style="margin-top:10px; font-size:0.85rem; color:#15803d;">
            <strong>Verdict :</strong> Accept√© : un √©l√®ve moyen mais investi rassure plus qu‚Äôun √©l√®ve "touriste".
          </div>
        </div>
      </div>

      <h3>Le "Mot Magique" des appr√©ciations</h3>
      <label>Selon toi, quel est le mot que les profs doivent √©crire sur ton bulletin de Premi√®re pour plaire √† Parcoursup ?</label>
      <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;">
        <button class="btn btn-prev" type="button" onclick="alert('Bof, c\\'est bien mais √ßa ne suffit pas.')">Intelligent</button>
        <button class="btn btn-prev" type="button" onclick="alert('Non, √ßa fait peur aux recruteurs.')">Dr√¥le</button>
        <button class="btn btn-next" type="button" onclick="alert('EXACTEMENT ! C\\'est le mot cl√©.')">S√âRIEUX / INVESTI</button>
      </div>
    </div>

    <div class="page-content" id="page4">
      <h2>Page 4 : Ma Strat√©gie pour la Premi√®re üöÄ</h2>
      <p>Tu vas entrer en Premi√®re. C'est l'ann√©e o√π tu construis ton "passeport" pour l'apr√®s-bac.</p>

      <h3>1. Mes Mati√®res "Cibles"</h3>
      <p>Choisis 2 mati√®res (pro ou g√©n√©rales) o√π tu vas viser une tr√®s bonne note.</p>
      <textarea id="p4_matieres" placeholder="Je vais essayer de cartonner en Gestion / Anglais / Relation Client..."></textarea>

      <h3>2. Mon "Joker" Appr√©ciation</h3>
      <p>Quel comportement vas-tu adopter pour avoir l'appr√©ciation "√âl√®ve s√©rieux" d√®s le 1er trimestre de Premi√®re ?</p>
      <textarea id="p4_comportement" placeholder="Ex : arr√™ter les retards, participer une fois par cours, √™tre pr√©sent..."></textarea>

      <div style="margin-top: 30px; padding: 20px; background: #fff1f2; border: 1px solid #fda4af; border-radius: 10px;">
        <h4 style="margin:0; color:#9f1239;">üéØ Le D√©fi est lanc√©</h4>
        <p style="margin:5px 0 0; font-size:0.95rem;">Tu sais que √ßa commence maintenant. Ne l√¢che rien l'ann√©e prochaine.</p>
      </div>
    </div>

    <div class="nav-buttons">
      <button class="btn btn-prev" id="prevBtn" onclick="changePage(-1)" disabled>Pr√©c√©dent</button>
      <div style="flex-grow:1;"></div>
      <button class="btn btn-next" id="nextBtn" onclick="changePage(1)">Suivant</button>
      <button class="btn btn-save hidden" id="saveBtn" onclick="saveWork()">üíæ Enregistrer</button>
    </div>
  </div>

  <script>
    let currentSize = 16;

    function changeSize(delta) {
      currentSize += delta;
      if (currentSize < 12) currentSize = 12;
      if (currentSize > 24) currentSize = 24;
      document.documentElement.style.fontSize = currentSize + 'px';
      const h1 = document.querySelector('h1');
      if(h1) h1.style.fontSize = (2 * (currentSize/16)) + 'rem';
    }

    let currentPage = 1;
    const totalPages = 4;

    function changePage(direction) {
      document.getElementById(`page${currentPage}`).classList.remove('active');
      document.getElementById(`step${currentPage}`).classList.remove('active');
      if(direction > 0) document.getElementById(`step${currentPage}`).classList.add('completed');

      currentPage += direction;

      document.getElementById(`page${currentPage}`).classList.add('active');
      document.getElementById(`step${currentPage}`).classList.add('active');

      document.getElementById('prevBtn').disabled = (currentPage === 1);

      if (currentPage === totalPages) {
        document.getElementById('nextBtn').classList.add('hidden');
        document.getElementById('saveBtn').classList.remove('hidden');
      } else {
        document.getElementById('nextBtn').classList.remove('hidden');
        document.getElementById('nextBtn').innerText = "Suivant";
        document.getElementById('saveBtn').classList.add('hidden');
      }
      window.scrollTo(0, 0);
    }

    function saveWork() {
      document.querySelectorAll('input, textarea').forEach(el => {
        if(el.tagName === 'INPUT') el.setAttribute('value', el.value);
        if(el.tagName === 'TEXTAREA') el.textContent = el.value;
      });

      const htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
      const blob = new Blob([htmlContent], {type: "text/html"});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = "Seance7_Parcoursup.html";
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getFirestore, collection, addDoc, updateDoc, doc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAWdCMvOiAJln3eT9LIAQD3RWJUD0lQcLI",
      authDomain: "devoirs-pse.firebaseapp.com",
      projectId: "devoirs-pse",
      storageBucket: "devoirs-pse.appspot.com",
      messagingSenderId: "614730413904",
      appId: "1:614730413904:web:a5dd478af5de30f6bede55"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let currentDocId = null;
    let startTime = Date.now();

    function getIdentity() { return localStorage.getItem("cockpit_student_id"); }

    async function demarrerVisite() {
      try {
        let userCode = getIdentity() || "ANONYME";
        let userClass = localStorage.getItem("cockpit_student_class") || "VISITEUR";
        const pageName = document.title || window.location.pathname.split("/").pop();
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);

        const ref = await addDoc(collection(db, "statistiques_usage"), {
          page: pageName,
          userCode: userCode,
          classe: userClass,
          device: isMobile ? "Mobile" : "Desktop",
          action: "Consultation",
          duree: 0,
          timestamp: serverTimestamp(),
          date: new Date().toISOString()
        });

        currentDocId = ref.id;

        setInterval(async () => {
          if (currentDocId && document.visibilityState === 'visible') {
            try {
              await updateDoc(doc(db, "statistiques_usage", currentDocId), {
                duree: Math.floor((Date.now() - startTime) / 1000)
              });
            } catch (e) {}
          }
        }, 10000);

      } catch (e) { console.warn("Erreur Tracker", e); }
    }

    demarrerVisite();
  </script>
</body>
</html>
