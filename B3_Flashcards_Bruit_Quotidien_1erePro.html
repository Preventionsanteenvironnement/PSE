<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©vision B.3 - Le Bruit au Quotidien - Premi√®re Bac Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .btn-back {
            background: rgba(255,255,255,0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .btn-back:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .logo {
            font-size: 24px;
            font-weight: 900;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            background: rgba(255,255,255,0.1);
            padding: 6px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }
        
        .nav-tab {
            flex: 1;
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: rgba(255,255,255,0.7);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
            text-align: center;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 40px 0;
        }
        
        .welcome-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .welcome-title {
            font-size: 42px;
            font-weight: 900;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-subtitle {
            font-size: 18px;
            color: rgba(255,255,255,0.7);
            margin-bottom: 30px;
        }
        
        /* Objectifs */
        .objectifs-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(116, 75, 162, 0.3));
            border: 2px solid rgba(102, 126, 234, 0.5);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: left;
            backdrop-filter: blur(10px);
        }
        
        .objectifs-card h3 {
            font-size: 18px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .objectif-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .objectif-item:last-child {
            border-bottom: none;
        }
        
        .objectif-item .check {
            color: #4CAF50;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .competences-row {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .comp-badge {
            background: rgba(255,255,255,0.15);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            backdrop-filter: blur(5px);
        }
        
        .comp-badge.c1 { background: rgba(16, 185, 129, 0.3); border: 1px solid #10b981; }
        .comp-badge.c2 { background: rgba(102, 126, 234, 0.3); border: 1px solid #667eea; }
        .comp-badge.c3 { background: rgba(245, 158, 11, 0.3); border: 1px solid #f59e0b; }
        .comp-badge.c4 { background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; }
        .comp-badge.c5 { background: rgba(168, 85, 247, 0.3); border: 1px solid #a855f7; }
        .comp-badge.c6 { background: rgba(34, 197, 94, 0.3); border: 1px solid #22c55e; }
        
        /* Niveaux */
        .niveaux-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .niveau-card {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .niveau-card:hover:not(.locked) {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .niveau-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .niveau-icon {
            font-size: 30px;
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .niveau-info {
            flex: 1;
        }
        
        .niveau-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .niveau-subtitle {
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            margin-bottom: 8px;
        }
        
        .niveau-progress {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
        }
        
        .niveau-stats {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-width: 60px;
        }
        
        .niveau-cards {
            font-size: 20px;
            font-weight: 700;
        }
        
        .niveau-cartes {
            font-size: 10px;
            color: rgba(255,255,255,0.7);
        }
        
        /* Game Screen */
        .game-screen {
            display: none;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .level-info h2 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .card-counter {
            font-size: 14px;
            color: rgba(255,255,255,0.8);
        }
        
        .game-controls {
            display: flex;
            gap: 10px;
        }
        
        .btn-small {
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .btn-small:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Progress bar */
        .progress-container {
            background: rgba(255,255,255,0.1);
            height: 8px;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        /* Card */
        .flashcard {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            text-align: center;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .card-competence {
            font-size: 12px;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 20px;
        }
        
        .card-type {
            background: rgba(255,255,255,0.1);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        
        /* Keyword input */
        .keyword-input-container {
            margin: 25px 0;
        }
        
        .keyword-input {
            width: 100%;
            max-width: 400px;
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .keyword-input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .keyword-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        
        .hint-text {
            margin-top: 15px;
            font-size: 14px;
            color: rgba(255,255,255,0.8);
            font-style: italic;
        }
        
        /* Options */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 15px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
            text-align: left;
        }
        
        .option-btn:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        
        .option-btn.selected {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }
        
        .option-letter {
            background: rgba(255,255,255,0.2);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }
        
        /* VF Buttons */
        .vf-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .vf-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px 40px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 700;
            min-width: 140px;
        }
        
        .vf-btn:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-3px);
        }
        
        .vf-btn.selected {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }
        
        .vf-btn.vrai.selected {
            background: rgba(34, 197, 94, 0.3);
            border-color: #22c55e;
        }
        
        .vf-btn.faux.selected {
            background: rgba(239, 68, 68, 0.3);
            border-color: #ef4444;
        }
        
        /* Action buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        /* Results */
        .result-card {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        .result-card.show {
            display: block;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .result-icon {
            font-size: 30px;
        }
        
        .result-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .result-explanation {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .highlight {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        /* RGPD */
        .rgpd-notice {
            background: rgba(0,0,0,0.3);
            color: rgba(255,255,255,0.8);
            padding: 15px;
            text-align: center;
            margin-top: 40px;
            border-radius: 10px;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .welcome-title {
                font-size: 32px;
            }
            
            .question-text {
                font-size: 18px;
            }
            
            .option-btn {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .vf-btn {
                padding: 15px 25px;
                font-size: 16px;
                min-width: 120px;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 14px;
                min-width: 100px;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .game-header {
                flex-direction: column;
                text-align: center;
            }
            
            .nav-tabs {
                flex-direction: column;
                gap: 4px;
            }
            
            .niveau-card {
                padding: 15px;
            }
            
            .niveau-icon {
                font-size: 24px;
                width: 50px;
                height: 50px;
            }
        }
        
        @media (max-width: 480px) {
            .vf-container {
                flex-direction: column;
                align-items: center;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .flashcard {
                padding: 20px;
            }
            
            .welcome-title {
                font-size: 28px;
            }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="#" class="btn-back">‚Üê Retour PSE</a>
            <div class="logo">üîä PSE FLASHCARDS</div>
        </div>
        
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showWelcome()">üè† Accueil</button>
            <button class="nav-tab" onclick="showNiveaux()">üéØ R√©visions</button>
        </div>
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-icon">ü¶ª</div>
            <h1 class="welcome-title">Module B.3</h1>
            <p class="welcome-subtitle">Le bruit au quotidien</p>
            
            <!-- Objectifs -->
            <div class="objectifs-card">
                <h3>üéØ Objectifs de r√©vision</h3>
                <div class="objectif-item">
                    <span class="check">‚úì</span>
                    <span>Ma√Ætriser les <strong>seuils de dangerosit√©</strong> acoustique (dB, dB(A))</span>
                </div>
                <div class="objectif-item">
                    <span class="check">‚úì</span>
                    <span>Conna√Ætre l'<strong>anatomie de l'oreille</strong> et les m√©canismes auditifs</span>
                </div>
                <div class="objectif-item">
                    <span class="check">‚úì</span>
                    <span>Identifier les <strong>effets du bruit</strong> sur la sant√© (auditifs et extra-auditifs)</span>
                </div>
                <div class="objectif-item">
                    <span class="check">‚úì</span>
                    <span>Proposer des <strong>mesures de pr√©vention</strong> adapt√©es (individuelles et collectives)</span>
                </div>
                
                <div class="competences-row">
                    <span class="comp-badge c1">C1 - Traiter une information</span>
                    <span class="comp-badge c2">C2 - Appliquer une d√©marche d'analyse</span>
                    <span class="comp-badge c3">C3 - Expliquer un ph√©nom√®ne physiologique</span>
                    <span class="comp-badge c4">C4 - Proposer une solution</span>
                </div>
            </div>
            
            <button class="btn" onclick="showNiveaux()">üöÄ Commencer les r√©visions</button>
        </div>
        
        <!-- Niveaux Screen -->
        <div id="niveauxScreen" class="hidden">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 28px; font-weight: 900;">
                üéØ Choisissez votre niveau
            </h2>
            
            <div class="niveaux-grid">
                <div class="niveau-card" onclick="startLevel(1)">
                    <div class="niveau-icon">üî¢</div>
                    <div class="niveau-info">
                        <div class="niveau-title">Niveau 1 : Unit√©s et Seuils</div>
                        <div class="niveau-subtitle">D√©cibels, dB(A), seuils r√©glementaires</div>
                        <div class="niveau-progress">
                            <span class="comp-badge c1">C1</span>
                            <span style="color: rgba(255,255,255,0.7);">Bases fondamentales</span>
                        </div>
                    </div>
                    <div class="niveau-stats">
                        <div class="niveau-cards">15</div>
                        <div class="niveau-cartes">cartes</div>
                    </div>
                </div>
                
                <div class="niveau-card" onclick="startLevel(2)">
                    <div class="niveau-icon">üëÇ</div>
                    <div class="niveau-info">
                        <div class="niveau-title">Niveau 2 : Anatomie Auditive</div>
                        <div class="niveau-subtitle">Oreille externe, moyenne, interne</div>
                        <div class="niveau-progress">
                            <span class="comp-badge c2">C2</span>
                            <span style="color: rgba(255,255,255,0.7);">Physiologie</span>
                        </div>
                    </div>
                    <div class="niveau-stats">
                        <div class="niveau-cards">18</div>
                        <div class="niveau-cartes">cartes</div>
                    </div>
                </div>
                
                <div class="niveau-card" onclick="startLevel(3)">
                    <div class="niveau-icon">‚ö†Ô∏è</div>
                    <div class="niveau-info">
                        <div class="niveau-title">Niveau 3 : Effets du Bruit</div>
                        <div class="niveau-subtitle">Troubles auditifs et extra-auditifs</div>
                        <div class="niveau-progress">
                            <span class="comp-badge c3">C3</span>
                            <span style="color: rgba(255,255,255,0.7);">Pathologies</span>
                        </div>
                    </div>
                    <div class="niveau-stats">
                        <div class="niveau-cards">12</div>
                        <div class="niveau-cartes">cartes</div>
                    </div>
                </div>
                
                <div class="niveau-card" onclick="startLevel(4)">
                    <div class="niveau-icon">üõ°Ô∏è</div>
                    <div class="niveau-info">
                        <div class="niveau-title">Niveau 4 : Pr√©vention</div>
                        <div class="niveau-subtitle">EPI, mesures collectives, r√©glementation</div>
                        <div class="niveau-progress">
                            <span class="comp-badge c4">C4</span>
                            <span style="color: rgba(255,255,255,0.7);">Solutions</span>
                        </div>
                    </div>
                    <div class="niveau-stats">
                        <div class="niveau-cards">14</div>
                        <div class="niveau-cartes">cartes</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div id="gameScreen" class="game-screen">
            <div class="game-header">
                <div class="level-info">
                    <h2 id="levelTitle">Niveau en cours</h2>
                    <p class="card-counter">Carte <span id="currentCard">1</span> / <span id="totalCards">15</span></p>
                </div>
                <div class="game-controls">
                    <button class="btn-small" onclick="showHint()">üí° Indice</button>
                    <button class="btn-small" onclick="showNiveaux()">‚Üê Niveaux</button>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="gameProgress"></div>
            </div>
            
            <div class="flashcard">
                <div class="card-header">
                    <span id="cardCompetence" class="card-competence comp-badge c1">C1</span>
                    <span id="cardType" class="card-type">MOT-CL√â</span>
                </div>
                
                <div id="questionSection">
                    <!-- Contenu dynamique -->
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="showHint()" id="hintBtn">üí° Indice</button>
                    <button class="btn" onclick="validateAnswer()" id="validateBtn">‚úÖ Valider</button>
                </div>
            </div>
            
            <div id="resultCard" class="result-card">
                <!-- R√©sultats dynamiques -->
            </div>
        </div>
        
        <!-- Footer RGPD -->
        <div class="rgpd-notice">
            üîí <strong>Conformit√© RGPD :</strong> Cet exercice respecte votre anonymat.
        </div>
    </div>
    
    <script>
        // Variables globales
        let currentLevel = 1;
        let currentCardIndex = 0;
        let hintUsed = false;
        let levelProgress = { 1: 0, 2: 0, 3: 0, 4: 0 };
        
        // Donn√©es des niveaux et cartes
        const levels = {
            1: { // Unit√©s et Seuils
                title: "Niveau 1 : Unit√©s et Seuils",
                competence: "C1",
                cards: [
                    {
                        type: "keyword",
                        question: "Que signifie <span class='highlight'>dB(A)</span> ?",
                        answer: "d√©cibel pond√©r√© a",
                        hint: "D√©cibel pond√©r√© A (courbe de pond√©ration)",
                        explanation: "dB(A) = d√©cibel pond√©r√© A. Unit√© de mesure du niveau sonore corrig√©e selon la sensibilit√© de l'oreille humaine.",
                        keyword: "dB(A) = d√©cibel pond√©r√© A"
                    },
                    {
                        type: "qcm",
                        question: "Quel est le seuil de danger auditif en milieu professionnel ?",
                        options: ["80 dB(A)", "85 dB(A)", "90 dB(A)", "95 dB(A)"],
                        answer: 1,
                        explanation: "85 dB(A) sur 8h est la limite l√©gale d'exposition professionnelle sans protection auditive obligatoire."
                    },
                    {
                        type: "vf",
                        question: "Le seuil de douleur auditive se situe vers 120 dB(A).",
                        answer: true,
                        explanation: "VRAI. Le seuil de douleur commence vers 120 dB(A) et peut causer des l√©sions imm√©diates."
                    },
                    {
                        type: "keyword",
                        question: "Que signifie <span class='highlight'>INRS</span> ?",
                        answer: "institut national de recherche et de s√©curit√©",
                        hint: "Institut National de Recherche et de...",
                        explanation: "INRS = Institut National de Recherche et de S√©curit√© pour la pr√©vention des accidents du travail et des maladies professionnelles.",
                        keyword: "INRS = Institut s√©curit√©"
                    },
                    {
                        type: "qcm",
                        question: "Quelle est la r√®gle de calcul pour les dur√©es d'exposition au bruit ?",
                        options: ["+3 dB = dur√©e √∑ 2", "+6 dB = dur√©e √∑ 2", "+10 dB = dur√©e √∑ 2", "+3 dB = dur√©e x 2"],
                        answer: 0,
                        explanation: "R√®gle INRS : +3 dB = division par 2 de la dur√©e d'exposition maximale (85 dB‚Üí8h, 88 dB‚Üí4h, 91 dB‚Üí2h)."
                    },
                    {
                        type: "keyword",
                        question: "√Ä partir de quel niveau commence la fatigue auditive ?",
                        answer: "70",
                        hint: "Seuil entre le confort et la g√™ne",
                        explanation: "70 dB(A) marque le seuil de fatigue auditive. En dessous, pas de risque. Au-dessus, fatigue progressive.",
                        keyword: "70 dB(A) = seuil fatigue"
                    },
                    {
                        type: "vf",
                        question: "Un niveau sonore de 100 dB(A) est 10 fois plus intense que 90 dB(A).",
                        answer: true,
                        explanation: "VRAI. L'√©chelle des d√©cibels est logarithmique : +10 dB = multiplication de l'intensit√© par 10."
                    },
                    {
                        type: "qcm",
                        question: "Dans un restaurant (70 dB), quelle est la dur√©e d'exposition maximale recommand√©e ?",
                        options: ["Illimit√©e", "8 heures", "4 heures", "2 heures"],
                        answer: 0,
                        explanation: "70 dB(A) √©tant le seuil de fatigue, l'exposition peut √™tre illimit√©e sans risque de l√©sion auditive."
                    },
                    {
                        type: "keyword",
                        question: "Comment appelle-t-on le niveau sonore d'un chuchotement ?",
                        answer: "30",
                        hint: "Tr√®s faible, environ 30...",
                        explanation: "Un chuchotement √©met environ 30 dB(A), niveau tr√®s faible proche du silence relatif (0 dB).",
                        keyword: "Chuchotement = 30 dB"
                    },
                    {
                        type: "vf",
                        question: "0 dB(A) correspond au silence absolu.",
                        answer: false,
                        explanation: "FAUX. 0 dB(A) est le seuil d'audibilit√© humaine, pas le silence absolu. C'est le son le plus faible perceptible."
                    },
                    {
                        type: "qcm",
                        question: "Quel appareil mesure pr√©cis√©ment les niveaux sonores ?",
                        options: ["Audiom√®tre", "Sonom√®tre", "D√©cibelm√®tre", "Phon√©m√®tre"],
                        answer: 1,
                        explanation: "Le sonom√®tre est l'appareil de r√©f√©rence pour mesurer les niveaux sonores en dB(A) de fa√ßon pr√©cise."
                    },
                    {
                        type: "keyword",
                        question: "Que signifie <span class='highlight'>LEX,8h</span> ?",
                        answer: "niveau d exposition quotidienne",
                        hint: "Level EXposure 8 heures",
                        explanation: "LEX,8h = Niveau d'exposition quotidienne sur 8h. Indicateur r√©glementaire d'exposition professionnelle au bruit.",
                        keyword: "LEX,8h = exposition 8h"
                    },
                    {
                        type: "vf",
                        question: "Une discoth√®que (100 dB) n√©cessite des protections auditives pour le personnel.",
                        answer: true,
                        explanation: "VRAI. 100 dB(A) d√©passe largement le seuil de 85 dB(A). Protection obligatoire apr√®s 15 minutes d'exposition."
                    },
                    {
                        type: "qcm",
                        question: "Quelle est la caract√©ristique principale de l'√©chelle des d√©cibels ?",
                        options: ["Lin√©aire", "Logarithmique", "Exponentielle", "Quadratique"],
                        answer: 1,
                        explanation: "L'√©chelle des d√©cibels est logarithmique : +3 dB = doublement de l'intensit√©, +10 dB = multiplication par 10."
                    },
                    {
                        type: "keyword",
                        question: "Quel niveau sonore produit un marteau-piqueur ?",
                        answer: "120",
                        hint: "Seuil de douleur, tr√®s √©lev√©",
                        explanation: "Un marteau-piqueur produit environ 120 dB(A), niveau du seuil de douleur n√©cessitant une protection maximale.",
                        keyword: "Marteau-piqueur = 120 dB"
                    }
                ]
            },
            2: { // Anatomie Auditive
                title: "Niveau 2 : Anatomie Auditive",
                competence: "C2",
                cards: [
                    {
                        type: "qcm",
                        question: "Combien de parties principales compose l'oreille ?",
                        options: ["2 parties", "3 parties", "4 parties", "5 parties"],
                        answer: 1,
                        explanation: "L'oreille comprend 3 parties : externe (captation), moyenne (amplification), interne (perception)."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appelle la membrane qui vibre sous l'effet des ondes sonores ?",
                        answer: "tympan",
                        hint: "Membrane entre oreille externe et moyenne",
                        explanation: "Le tympan est la membrane qui s√©pare l'oreille externe de l'oreille moyenne et vibre sous l'effet du son.",
                        keyword: "Tympan = membrane vibrante"
                    },
                    {
                        type: "vf",
                        question: "Les osselets de l'oreille moyenne amplifient les vibrations.",
                        answer: true,
                        explanation: "VRAI. Marteau, enclume et √©trier amplifient les vibrations d'environ 20 fois pour optimiser la transmission."
                    },
                    {
                        type: "qcm",
                        question: "Quel est le plus petit os du corps humain ?",
                        options: ["Marteau", "Enclume", "√âtrier", "Tympan"],
                        answer: 2,
                        explanation: "L'√©trier (stapes) est le plus petit os du corps humain, situ√© dans l'oreille moyenne."
                    },
                    {
                        type: "keyword",
                        question: "Dans quelle partie de l'oreille se trouvent les cellules cili√©es ?",
                        answer: "cochl√©e",
                        hint: "Organe en spirale de l'oreille interne",
                        explanation: "Les cellules cili√©es se trouvent dans la cochl√©e (lima√ßon), o√π elles transforment les vibrations en influx nerveux.",
                        keyword: "Cellules cili√©es ‚Üí cochl√©e"
                    },
                    {
                        type: "vf",
                        question: "Le pavillon de l'oreille n'a aucun r√¥le dans l'audition.",
                        answer: false,
                        explanation: "FAUX. Le pavillon capte et concentre les ondes sonores vers le conduit auditif externe."
                    },
                    {
                        type: "qcm",
                        question: "Quelle est la fonction principale de la cochl√©e ?",
                        options: ["Capter le son", "Amplifier le son", "Transformer en influx nerveux", "Maintenir l'√©quilibre"],
                        answer: 2,
                        explanation: "La cochl√©e transforme les vibrations m√©caniques en influx nerveux gr√¢ce aux cellules cili√©es."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appelle le nerf qui transporte les informations auditives au cerveau ?",
                        answer: "nerf auditif",
                        hint: "Nerf sp√©cialis√© dans l'audition",
                        explanation: "Le nerf auditif (ou cochl√©aire) transporte les influx nerveux de la cochl√©e vers le cortex auditif.",
                        keyword: "Nerf auditif ‚Üí cerveau"
                    },
                    {
                        type: "vf",
                        question: "Les canaux semi-circulaires participent √† l'audition.",
                        answer: false,
                        explanation: "FAUX. Les canaux semi-circulaires sont l'organe de l'√©quilibre, pas de l'audition."
                    },
                    {
                        type: "qcm",
                        question: "Quel liquide remplit la cochl√©e ?",
                        options: ["Sang", "Lymphe", "Endolymphe", "S√©rum"],
                        answer: 2,
                        explanation: "L'endolymphe remplit la cochl√©e. Ses mouvements activent les cellules cili√©es lors des vibrations."
                    },
                    {
                        type: "keyword",
                        question: "Quelle substance prot√®ge le conduit auditif externe ?",
                        answer: "c√©rumen",
                        hint: "Substance cireuse produite naturellement",
                        explanation: "Le c√©rumen (cire d'oreille) prot√®ge le conduit auditif des impuret√©s et de l'humidit√© excessive.",
                        keyword: "C√©rumen = protection"
                    },
                    {
                        type: "vf",
                        question: "Les cellules cili√©es peuvent se r√©g√©n√©rer chez l'homme.",
                        answer: false,
                        explanation: "FAUX. Les cellules cili√©es ne se r√©g√©n√®rent pas chez l'homme. Leur destruction est d√©finitive."
                    },
                    {
                        type: "qcm",
                        question: "Dans quel ordre les osselets transmettent-ils les vibrations ?",
                        options: ["√âtrier ‚Üí Enclume ‚Üí Marteau", "Marteau ‚Üí √âtrier ‚Üí Enclume", "Marteau ‚Üí Enclume ‚Üí √âtrier", "Enclume ‚Üí Marteau ‚Üí √âtrier"],
                        answer: 2,
                        explanation: "L'ordre est : Marteau (reli√© au tympan) ‚Üí Enclume ‚Üí √âtrier (reli√© √† la fen√™tre ovale)."
                    },
                    {
                        type: "keyword",
                        question: "Comment appelle-t-on la partie visible de l'oreille ?",
                        answer: "pavillon",
                        hint: "Partie externe en forme d'entonnoir",
                        explanation: "Le pavillon (ou auricule) est la partie visible de l'oreille externe, form√©e de cartilage.",
                        keyword: "Pavillon = partie visible"
                    },
                    {
                        type: "vf",
                        question: "La trompe d'Eustache relie l'oreille moyenne au pharynx.",
                        answer: true,
                        explanation: "VRAI. La trompe d'Eustache √©quilibre la pression entre l'oreille moyenne et l'ext√©rieur via le pharynx."
                    },
                    {
                        type: "qcm",
                        question: "Quelle est la longueur approximative du conduit auditif externe ?",
                        options: ["1 cm", "2,5 cm", "4 cm", "6 cm"],
                        answer: 1,
                        explanation: "Le conduit auditif externe mesure environ 2,5 cm de long et achemine le son vers le tympan."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appelle l'organe de l'√©quilibre dans l'oreille interne ?",
                        answer: "canaux semi circulaires",
                        hint: "Trois canaux perpendiculaires",
                        explanation: "Les canaux semi-circulaires d√©tectent les mouvements de rotation de la t√™te pour maintenir l'√©quilibre.",
                        keyword: "Canaux = √©quilibre"
                    },
                    {
                        type: "vf",
                        question: "L'oreille moyenne est remplie d'air.",
                        answer: true,
                        explanation: "VRAI. L'oreille moyenne est une cavit√© remplie d'air, permettant la vibration libre des osselets."
                    }
                ]
            },
            3: { // Effets du Bruit  
                title: "Niveau 3 : Effets du Bruit",
                competence: "C3",
                cards: [
                    {
                        type: "qcm",
                        question: "Quels sont les deux types d'effets du bruit sur la sant√© ?",
                        options: ["Directs et indirects", "Auditifs et extra-auditifs", "Physiques et psychiques", "Temporaires et d√©finitifs"],
                        answer: 1,
                        explanation: "Le bruit a des effets auditifs (sur l'oreille) et extra-auditifs (sur les autres organes)."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appellent les sifflements d'oreille persistants ?",
                        answer: "acouph√®nes",
                        hint: "Bruits fant√¥mes dans l'oreille",
                        explanation: "Les acouph√®nes sont des bruits (sifflements, bourdonnements) per√ßus sans source sonore externe.",
                        keyword: "Acouph√®nes = sifflements"
                    },
                    {
                        type: "vf",
                        question: "Le bruit peut provoquer de l'hypertension art√©rielle.",
                        answer: true,
                        explanation: "VRAI. Le bruit chronique est un facteur de stress pouvant √©lever la tension art√©rielle."
                    },
                    {
                        type: "qcm",
                        question: "Qu'est-ce que la presbyacousie ?",
                        options: ["Surdit√© brutale", "Perte auditive li√©e √† l'√¢ge", "Inflammation de l'oreille", "Hypersensibilit√© au bruit"],
                        answer: 1,
                        explanation: "La presbyacousie est la perte auditive naturelle li√©e au vieillissement, touchant d'abord les fr√©quences aig√ºes."
                    },
                    {
                        type: "keyword",
                        question: "Comment appelle-t-on une perte auditive temporaire apr√®s exposition au bruit ?",
                        answer: "fatigue auditive",
                        hint: "Perte temporaire apr√®s un concert",
                        explanation: "La fatigue auditive est une baisse temporaire d'audition apr√®s exposition au bruit, r√©cup√©r√©e en quelques heures.",
                        keyword: "Fatigue = temporaire"
                    },
                    {
                        type: "vf",
                        question: "Le bruit peut perturber la digestion.",
                        answer: true,
                        explanation: "VRAI. Le bruit peut provoquer des spasmes digestifs et des troubles gastro-intestinaux par effet de stress."
                    },
                    {
                        type: "qcm",
                        question: "Quel effet extra-auditif du bruit est le plus fr√©quent ?",
                        options: ["Troubles cardiaques", "Troubles du sommeil", "Troubles digestifs", "Troubles visuels"],
                        answer: 1,
                        explanation: "Les troubles du sommeil sont l'effet extra-auditif le plus r√©pandu du bruit environnemental."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appelle la surdit√© caus√©e par le travail ?",
                        answer: "surdit√© professionnelle",
                        hint: "Surdit√© li√©e √† l'activit√© pro",
                        explanation: "La surdit√© professionnelle r√©sulte d'une exposition prolong√©e au bruit en milieu de travail.",
                        keyword: "Surdit√© pro = travail"
                    },
                    {
                        type: "vf",
                        question: "Les enfants sont plus sensibles au bruit que les adultes.",
                        answer: true,
                        explanation: "VRAI. Le syst√®me auditif des enfants est plus fragile et leur d√©veloppement peut √™tre perturb√© par le bruit."
                    },
                    {
                        type: "qcm",
                        question: "√Ä partir de quel niveau le bruit perturbe-t-il la concentration ?",
                        options: ["50 dB(A)", "60 dB(A)", "70 dB(A)", "80 dB(A)"],
                        answer: 1,
                        explanation: "D√®s 60 dB(A), le bruit commence √† perturber la concentration et les performances intellectuelles."
                    },
                    {
                        type: "keyword",
                        question: "Quel terme d√©crit une intol√©rance anormale au bruit ?",
                        answer: "hyperacousie",
                        hint: "Hypersensibilit√© auditive",
                        explanation: "L'hyperacousie est une hypersensibilit√© aux sons, rendant insupportables des bruits normalement tol√©rables.",
                        keyword: "Hyperacousie = hypersensible"
                    },
                    {
                        type: "vf",
                        question: "Le bruit augmente le risque d'accidents du travail.",
                        answer: true,
                        explanation: "VRAI. Le bruit masque les signaux d'alerte et diminue la concentration, augmentant les risques d'accidents."
                    }
                ]
            },
            4: { // Pr√©vention
                title: "Niveau 4 : Pr√©vention",
                competence: "C4", 
                cards: [
                    {
                        type: "keyword",
                        question: "Que signifie <span class='highlight'>EPI</span> ?",
                        answer: "√©quipement de protection individuelle",
                        hint: "√âquipement de Protection...",
                        explanation: "EPI = √âquipement de Protection Individuelle. Dispositif personnel de protection contre les risques professionnels.",
                        keyword: "EPI = √©quipement protection"
                    },
                    {
                        type: "qcm",
                        question: "Quelle est la premi√®re mesure de pr√©vention contre le bruit ?",
                        options: ["Porter des bouchons", "R√©duire le bruit √† la source", "S'√©loigner", "Limiter le temps d'exposition"],
                        answer: 1,
                        explanation: "La pr√©vention primaire consiste √† r√©duire le bruit √† la source (machines moins bruyantes, isolation)."
                    },
                    {
                        type: "vf",
                        question: "Les bouchons d'oreille en mousse sont des EPI auditifs.",
                        answer: true,
                        explanation: "VRAI. Les bouchons en mousse sont des EPI auditifs efficaces, att√©nuant de 15 √† 35 dB selon le mod√®le."
                    },
                    {
                        type: "keyword",
                        question: "Comment appelle-t-on l'att√©nuation maximale d'un protecteur auditif ?",
                        answer: "snr",
                        hint: "Single Number Rating",
                        explanation: "SNR = Single Number Rating. Indice d'att√©nuation globale d'un protecteur auditif, exprim√© en dB.",
                        keyword: "SNR = att√©nuation"
                    },
                    {
                        type: "qcm",
                        question: "Quelle mesure collective permet de r√©duire le bruit dans un atelier ?",
                        options: ["Distribution de casques", "Isolation phonique des machines", "Formation du personnel", "Contr√¥le m√©dical"],
                        answer: 1,
                        explanation: "L'isolation phonique (capotage, √©crans) est une mesure collective r√©duisant le bruit pour tous."
                    },
                    {
                        type: "vf",
                        question: "Un salari√© peut refuser de porter ses EPI auditifs s'il les trouve inconfortables.",
                        answer: false,
                        explanation: "FAUX. Le port d'EPI est obligatoire en zone dangereuse. L'employeur doit fournir des EPI adapt√©s et confortables."
                    },
                    {
                        type: "keyword",
                        question: "√Ä quelle fr√©quence doit-on effectuer un contr√¥le audiom√©trique en entreprise ?",
                        answer: "annuel",
                        hint: "Une fois par...",
                        explanation: "Le contr√¥le audiom√©trique des salari√©s expos√©s au bruit doit √™tre effectu√© annuellement par la m√©decine du travail.",
                        keyword: "Audiom√©trie = annuelle"
                    },
                    {
                        type: "qcm",
                        question: "Que doit faire un employeur si le niveau sonore d√©passe 85 dB(A) ?",
                        options: ["Rien de particulier", "Informer les salari√©s", "Fournir des EPI obligatoires", "Arr√™ter l'activit√©"],
                        answer: 2,
                        explanation: "Au-del√† de 85 dB(A), l'employeur doit fournir des EPI auditifs et en imposer le port obligatoire."
                    },
                    {
                        type: "vf",
                        question: "Les casques antibruit sont plus efficaces que les bouchons d'oreille.",
                        answer: false,
                        explanation: "FAUX. L'efficacit√© d√©pend du mod√®le et de l'ajustement. Des bouchons bien ajust√©s peuvent √™tre plus efficaces."
                    },
                    {
                        type: "keyword",
                        question: "Comment s'appelle la r√©duction du temps d'exposition au bruit ?",
                        answer: "pr√©vention organisationnelle",
                        hint: "Type de pr√©vention par organisation",
                        explanation: "La pr√©vention organisationnelle consiste √† limiter l'exposition par rotation des postes et pauses.",
                        keyword: "Organisationnelle = temps"
                    },
                    {
                        type: "qcm",
                        question: "Quel organisme fran√ßais r√©f√©rence les niveaux d'exposition professionnelle au bruit ?",
                        options: ["INRS", "ANSES", "CNAM", "DARES"],
                        answer: 0,
                        explanation: "L'INRS (Institut National de Recherche et de S√©curit√©) √©dite les r√©f√©rences sur l'exposition professionnelle au bruit."
                    },
                    {
                        type: "vf",
                        question: "Les protecteurs auditifs sur-mesure sont plus efficaces que les standards.",
                        answer: true,
                        explanation: "VRAI. Les protecteurs moul√©s sur-mesure s'adaptent parfaitement au conduit auditif, optimisant l'√©tanch√©it√©."
                    },
                    {
                        type: "keyword",
                        question: "Comment appelle-t-on une zone o√π le port d'EPI auditifs est obligatoire ?",
                        answer: "zone de bruit",
                        hint: "Zone d√©limit√©e et signal√©e",
                        explanation: "Une zone de bruit (‚â•85 dB) doit √™tre d√©limit√©e et signal√©e, avec port d'EPI obligatoire.",
                        keyword: "Zone bruit = EPI obligatoires"
                    },
                    {
                        type: "qcm",
                        question: "Quelle signalisation indique une zone de bruit dangereuse ?",
                        options: ["Panneau rouge triangulaire", "Panneau jaune rond", "Panneau bleu carr√©", "Panneau vert rectangulaire"],
                        answer: 0,
                        explanation: "Le panneau triangulaire rouge avec symbole d'oreille indique un danger sonore et le port obligatoire d'EPI."
                    }
                ]
            }
        };
        
        // Fonctions de navigation
        function showWelcome() {
            document.getElementById('welcomeScreen').style.display = 'block';
            document.getElementById('niveauxScreen').classList.add('hidden');
            document.getElementById('gameScreen').style.display = 'none';
            
            // Mettre √† jour les onglets
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab')[0].classList.add('active');
        }
        
        function showNiveaux() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('niveauxScreen').classList.remove('hidden');
            document.getElementById('gameScreen').style.display = 'none';
            
            // Mettre √† jour les onglets
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab')[1].classList.add('active');
        }
        
        function startLevel(level) {
            currentLevel = level;
            currentCardIndex = 0;
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('niveauxScreen').classList.add('hidden');
            document.getElementById('gameScreen').style.display = 'block';
            
            document.getElementById('levelTitle').textContent = levels[level].title;
            document.getElementById('totalCards').textContent = levels[level].cards.length;
            
            showCard();
        }
        
        function showCard() {
            const cards = levels[currentLevel].cards;
            const card = cards[currentCardIndex];
            hintUsed = false;
            
            document.getElementById('currentCard').textContent = currentCardIndex + 1;
            document.getElementById('gameProgress').style.width = ((currentCardIndex / cards.length) * 100) + '%';
            
            // Comp√©tence
            const compBadge = document.getElementById('cardCompetence');
            compBadge.textContent = card.fromLevel ? `C${card.fromLevel}` : levels[currentLevel].competence;
            compBadge.className = 'card-competence comp-badge c' + (card.fromLevel || currentLevel);
            
            // Type de carte
            const typeNames = { keyword: 'MOT-CL√â', qcm: 'QCM', vf: 'VRAI / FAUX' };
            document.getElementById('cardType').textContent = typeNames[card.type] || card.type;
            
            // Masquer les r√©sultats pr√©c√©dents
            document.getElementById('resultCard').classList.remove('show');
            
            // Contenu
            const questionSection = document.getElementById('questionSection');
            
            if (card.type === 'keyword') {
                questionSection.innerHTML = `
                    <p class="question-text">${card.question}</p>
                    <div class="keyword-input-container">
                        <input type="text" class="keyword-input" id="keywordAnswer" placeholder="√âcris ta r√©ponse..." autocomplete="off">
                        <p class="hint-text" id="hintText">üí° Clique sur "Indice" si besoin</p>
                    </div>
                `;
                document.getElementById('keywordAnswer').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') validateAnswer();
                });
                
                // Focus sur l'input
                setTimeout(() => document.getElementById('keywordAnswer').focus(), 100);
            }
            else if (card.type === 'qcm') {
                let optionsHTML = card.options.map((opt, i) => `
                    <button class="option-btn" data-index="${i}" onclick="selectOption(this)">
                        <span class="option-letter">${String.fromCharCode(65 + i)}</span>
                        <span>${opt}</span>
                    </button>
                `).join('');
                
                questionSection.innerHTML = `
                    <p class="question-text">${card.question}</p>
                    <div class="options-container">${optionsHTML}</div>
                `;
            }
            else if (card.type === 'vf') {
                questionSection.innerHTML = `
                    <p class="question-text">${card.question}</p>
                    <div class="vf-container">
                        <button class="vf-btn vrai" onclick="selectVF(this, true)">‚úì VRAI</button>
                        <button class="vf-btn faux" onclick="selectVF(this, false)">‚úó FAUX</button>
                    </div>
                `;
            }
        }
        
        function selectOption(btn) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }
        
        function selectVF(btn, value) {
            document.querySelectorAll('.vf-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            btn.dataset.value = value;
        }
        
        function showHint() {
            const card = levels[currentLevel].cards[currentCardIndex];
            if (card.hint) {
                document.getElementById('hintText').innerHTML = `üí° <strong>Indice :</strong> ${card.hint}`;
                hintUsed = true;
            }
        }
        
        function validateAnswer() {
            const card = levels[currentLevel].cards[currentCardIndex];
            let isCorrect = false;
            let userAnswer = '';
            
            if (card.type === 'keyword') {
                userAnswer = document.getElementById('keywordAnswer').value.trim().toLowerCase();
                // Normaliser (accents, etc.)
                const normalize = str => str.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
                const normalizedUser = normalize(userAnswer);
                const normalizedAnswer = normalize(card.answer);
                
                isCorrect = normalizedUser === normalizedAnswer || 
                            normalizedUser.includes(normalizedAnswer) ||
                            normalizedAnswer.includes(normalizedUser);
            }
            else if (card.type === 'qcm') {
                const selected = document.querySelector('.option-btn.selected');
                if (!selected) { 
                    alert('S√©lectionne une r√©ponse');
                    return; 
                }
                userAnswer = parseInt(selected.dataset.index);
                isCorrect = userAnswer === card.answer;
            }
            else if (card.type === 'vf') {
                const selected = document.querySelector('.vf-btn.selected');
                if (!selected) { 
                    alert('S√©lectionne une r√©ponse');
                    return; 
                }
                userAnswer = selected.dataset.value === 'true';
                isCorrect = userAnswer === card.answer;
            }
            
            showResult(isCorrect, card, userAnswer);
        }
        
        function showResult(isCorrect, card, userAnswer) {
            const resultCard = document.getElementById('resultCard');
            const icon = isCorrect ? 'üéâ' : '‚ùå';
            const title = isCorrect ? 'Excellente r√©ponse !' : 'Pas tout √† fait...';
            const bgColor = isCorrect ? 'rgba(34, 197, 94, 0.1)' : 'rgba(239, 68, 68, 0.1)';
            
            let userAnswerText = '';
            if (card.type === 'keyword') {
                userAnswerText = `Ta r√©ponse : "${userAnswer}"`;
            } else if (card.type === 'qcm') {
                userAnswerText = `Ta r√©ponse : ${card.options[userAnswer]}`;
            } else if (card.type === 'vf') {
                userAnswerText = `Ta r√©ponse : ${userAnswer ? 'VRAI' : 'FAUX'}`;
            }
            
            resultCard.style.background = bgColor;
            resultCard.innerHTML = `
                <div class="result-header">
                    <span class="result-icon">${icon}</span>
                    <span class="result-title">${title}</span>
                </div>
                ${!isCorrect ? `<p style="margin-bottom: 10px;">${userAnswerText}</p>` : ''}
                <div class="result-explanation">
                    <strong>üí° Explication :</strong><br>
                    ${card.explanation}
                    ${card.keyword ? `<br><br><strong>üîë √Ä retenir :</strong> ${card.keyword}` : ''}
                    ${card.tip ? `<br><br><strong>üí™ Astuce :</strong> ${card.tip}` : ''}
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="nextCard()">
                        ${currentCardIndex < levels[currentLevel].cards.length - 1 ? '‚û°Ô∏è Carte suivante' : 'üèÅ Terminer le niveau'}
                    </button>
                </div>
            `;
            
            resultCard.classList.add('show');
        }
        
        function nextCard() {
            if (currentCardIndex < levels[currentLevel].cards.length - 1) {
                currentCardIndex++;
                showCard();
            } else {
                // Niveau termin√©
                showNiveaux();
            }
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            showWelcome();
        });
    </script>
</body>
</html>