<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©visions PSE : Sommeil & Rythmes Biologiques</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e67e22;
            --success: #27ae60;
            --light: #ecf0f1;
            --danger: #c0392b;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f7;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1, h2, h3 { color: var(--primary); }
        h1 { text-align: center; border-bottom: 3px solid var(--secondary); padding-bottom: 15px; }
        
        /* Section R√©sum√© */
        .summary-box {
            background-color: #e8f6f3;
            border-left: 5px solid var(--secondary);
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        .concept-card {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .highlight { color: var(--accent); font-weight: bold; }

        /* Badges Comp√©tences & Tooltips */
        .badge-container {
            position: relative;
            display: inline-block;
            margin-bottom: 10px;
        }
        .badge {
            background-color: var(--primary);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            cursor: help;
        }
        /* Tooltip √† gauche */
        .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            top: 50%;
            right: 110%; /* Position √† gauche */
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            font-weight: normal;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        }
        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 100%; /* Fl√®che vers la droite (vers le badge) */
            margin-top: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent transparent #555;
        }
        .badge-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Styles des Exercices */
        .exercise-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            background: #fff;
            transition: transform 0.2s;
        }
        .exercise-card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .question-number { font-weight: bold; color: var(--secondary); margin-right: 10px; }
        .instruction { font-style: italic; color: #555; margin-bottom: 15px; display: block; }
        
        /* Elements interactifs */
        input[type="text"], select, textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .drag-container {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .draggable {
            background: var(--light);
            padding: 8px 15px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            cursor: grab;
            user-select: none;
        }
        .drop-zone {
            border: 2px dashed #bdc3c7;
            padding: 15px;
            min-height: 50px;
            border-radius: 4px;
            flex: 1;
            background: #f9f9f9;
        }
        .drop-zone.active { border-color: var(--success); background: #eafaf1; }
        
        /* Range slider */
        .slider-container { text-align: center; padding: 20px; }
        input[type=range] { width: 80%; }
        
        /* Correction et Feedback */
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
            font-size: 0.9em;
        }
        .correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        /* Boutons */
        .btn-action {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 30px;
        }
        .btn-action:hover { background-color: #2980b9; }
        .btn-print {
            background-color: #95a5a6;
            margin-top: 10px;
        }

        /* Order list style */
        .sortable-list { list-style: none; padding: 0; }
        .sortable-item {
            background: #fff; border: 1px solid #ccc; padding: 10px; margin-bottom: 5px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .btn-move { background: #eee; border: none; cursor: pointer; padding: 5px 10px; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>R√©visions Interactives PSE - Bac Pro</h1>
        <h2 style="text-align: center;">Module A2 : Le Sommeil & Les Rythmes Biologiques</h2>
        <p style="text-align: center; color: #7f8c8d;">Cette fiche est con√ßue pour √™tre utilis√©e en autonomie. Lisez le r√©sum√©, faites les exercices, puis validez pour obtenir votre correction d√©taill√©e.</p>
    </header>

    <section id="page1">
        <h2>1. L'essentiel √† retenir</h2>
        
        <div class="summary-box">
            <h3>üß™ Notions Cl√©s</h3>
            <div class="concept-card">
                <strong>Les Rythmes Biologiques :</strong>
                Ce sont des variations r√©guli√®res de nos fonctions corporelles. Le plus important en PSE est le <span class="highlight">rythme circadien</span> (environ 24 heures), comme l'alternance veille-sommeil.
            </div>
            <div class="concept-card">
                <strong>Le Cycle du Sommeil :</strong>
                Une nuit = 4 √† 6 cycles de 90 minutes.
                <ul>
                    <li><strong>Sommeil lent (profond) :</strong> R√©cup√©ration <span class="highlight">physique</span>, s√©cr√©tion d'hormones de croissance, immunit√©.</li>
                    <li><strong>Sommeil paradoxal :</strong> R√©cup√©ration <span class="highlight">mentale</span> (nerveuse), r√™ves, m√©morisation.</li>
                </ul>
            </div>
            <div class="concept-card">
                <strong>La D√©synchronisation :</strong>
                Lorsque notre horloge interne n'est plus en phase avec l'environnement.
                <br><em>Causes :</em> Travail de nuit, √©crans (lumi√®re bleue), d√©calage horaire.
                <br><em>Cons√©quences :</em> Fatigue, irritabilit√©, risques cardiovasculaires, isolement social, accidents du travail.
            </div>
        </div>

        <div class="summary-box" style="background-color: #fef9e7; border-left-color: var(--accent);">
            <h3>üõ†Ô∏è Exemples Concrets</h3>
            <ul>
                <li><strong>Quotidien :</strong> Utiliser son smartphone au lit retarde la s√©cr√©tion de m√©latonine (hormone du sommeil) et emp√™che de s'endormir.</li>
                <li><strong>Professionnel :</strong> Un agent de s√©curit√© travaillant de 23h √† 6h doit dormir dans le noir total en rentrant le matin pour "tromper" son cerveau et r√©cup√©rer.</li>
                <li><strong>R√©glementation :</strong> Le travail de nuit est encadr√© (visite m√©dicale renforc√©e, repos compensateur) car il est consid√©r√© comme p√©nible (C2P).</li>
            </ul>
        </div>
        <hr>
    </section>

    <section id="page2">
        <h2>2. Entra√Ænement (15 Exercices)</h2>
        <p><em>Survolez les badges <span class="badge">Cx</span> pour voir la d√©finition de la comp√©tence.</em></p>

        <div class="exercise-card" id="ex1">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Identifier des √©l√©ments et les classer.</span>
            </div>
            <span class="question-number">Question 1</span>
            <span class="instruction"><strong><u>Classer</u></strong> les rythmes suivants dans la bonne cat√©gorie (Cliquez sur l'√©l√©ment puis sur la zone).</span>
            
            <div class="drag-container" id="bank-ex1">
                <button class="draggable" onclick="selectItem(this, 'ex1')">Cycle menstruel (28j)</button>
                <button class="draggable" onclick="selectItem(this, 'ex1')">Fr√©quence cardiaque</button>
                <button class="draggable" onclick="selectItem(this, 'ex1')">Alternance Veille/Sommeil</button>
            </div>
            <div style="display:flex; gap:10px; margin-top:10px;">
                <div class="drop-zone" onclick="dropItem(this, 'ex1')" data-cat="Ultradien"><strong>Ultradien</strong><br>(< 24h)</div>
                <div class="drop-zone" onclick="dropItem(this, 'ex1')" data-cat="Circadien"><strong>Circadien</strong><br>(~ 24h)</div>
                <div class="drop-zone" onclick="dropItem(this, 'ex1')" data-cat="Infradien"><strong>Infradien</strong><br>(> 24h)</div>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex2">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Rep√©rer des d√©finitions exactes.</span>
            </div>
            <span class="question-number">Question 2</span>
            <span class="instruction"><strong><u>Compl√©ter</u></strong> les d√©finitions √† l'aide des menus d√©roulants.</span>
            <p>
                Un rythme biologique est une <select id="q2a"><option value="">...</option><option value="variation">variation</option><option value="stagnation">stagnation</option></select> d'une fonction de l'organisme qui se r√©p√®te dans le temps de fa√ßon <select id="q2b"><option value="">...</option><option value="al√©atoire">al√©atoire</option><option value="r√©guli√®re">r√©guli√®re</option></select>. L'horloge biologique principale est situ√©e dans le <select id="q2c"><option value="">...</option><option value="coeur">c≈ìur</option><option value="cerveau">cerveau</option></select>.
            </p>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex3">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Relier √©l√©ments et caract√©ristiques.</span>
            </div>
            <span class="question-number">Question 3</span>
            <span class="instruction"><strong><u>Associer</u></strong> chaque phase de sommeil √† sa fonction principale.</span>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label>1. Sommeil Lent Profond</label>
                <select id="q3a">
                    <option value="">Choisir...</option>
                    <option value="A">A. R√©cup√©ration physique & Immunit√©</option>
                    <option value="B">B. R√™ves & M√©moire</option>
                </select>
                
                <label>2. Sommeil Paradoxal</label>
                <select id="q3b">
                    <option value="">Choisir...</option>
                    <option value="A">A. R√©cup√©ration physique & Immunit√©</option>
                    <option value="B">B. R√™ves & M√©moire</option>
                </select>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex4">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Identifier le probl√®me dans une situation.</span>
            </div>
            <span class="question-number">Question 4</span>
            <span class="instruction"><strong><u>Identifier</u></strong> le probl√®me dans la situation suivante : "L√©a, infirmi√®re, change d'horaires chaque semaine (3x8). Elle se plaint de troubles digestifs et d'humeur."</span>
            <div>
                <input type="radio" name="q4" value="A"> A. Elle souffre d'un manque d'activit√© physique.<br>
                <input type="radio" name="q4" value="B"> B. Elle subit une d√©synchronisation des rythmes biologiques.<br>
                <input type="radio" name="q4" value="C"> C. Elle consomme trop de caf√©ine.
            </div>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex5">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Analyser un graphique (hypnogramme).</span>
            </div>
            <span class="question-number">Question 5</span>
            <span class="instruction"><strong><u>Analyser</u></strong> l'√©volution du sommeil au cours de la nuit :</span>
            <p>En d√©but de nuit, les cycles sont riches en sommeil lent <strong><input type="text" id="q5a" placeholder="un mot..." style="width:150px"></strong> (r√©cup√©ration physique). En fin de nuit, les cycles contiennent davantage de sommeil <strong><input type="text" id="q5b" placeholder="un mot..." style="width:150px"></strong> (r√™ves).</p>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex6">
            <div class="badge-container">
                <span class="badge">C2</span>
                <span class="tooltip-text"><strong>Appliquer une d√©marche d'analyse</strong><br>Ex: Ordonner chronologiquement.</span>
            </div>
            <span class="question-number">Question 6</span>
            <span class="instruction"><strong><u>Ordonner</u></strong> les √©tapes d'un cycle de sommeil normal (Utilisez les fl√®ches).</span>
            <ul class="sortable-list" id="sortable-ex6">
                <li class="sortable-item" data-id="2">Sommeil Lent L√©ger <div class="controls"><button onclick="moveUp(this)">‚ñ≤</button><button onclick="moveDown(this)">‚ñº</button></div></li>
                <li class="sortable-item" data-id="4">Sommeil Paradoxal <div class="controls"><button onclick="moveUp(this)">‚ñ≤</button><button onclick="moveDown(this)">‚ñº</button></div></li>
                <li class="sortable-item" data-id="1">Endormissement <div class="controls"><button onclick="moveUp(this)">‚ñ≤</button><button onclick="moveDown(this)">‚ñº</button></div></li>
                <li class="sortable-item" data-id="3">Sommeil Lent Profond <div class="controls"><button onclick="moveUp(this)">‚ñ≤</button><button onclick="moveDown(this)">‚ñº</button></div></li>
            </ul>
            <div class="feedback"></div>
        </div>

        <hr>

        <div class="exercise-card" id="ex7">
            <div class="badge-container">
                <span class="badge">C3</span>
                <span class="tooltip-text"><strong>Expliquer un ph√©nom√®ne</strong><br>Ex: Lien physiologie et pr√©vention.</span>
            </div>
            <span class="question-number">Question 7</span>
            <span class="instruction"><strong><u>Expliquer</u></strong> le m√©canisme physiologique de la r√©cup√©ration.</span>
            <p>
                Durant le sommeil lent profond, l'organisme s√©cr√®te l'hormone de <select id="q7a"><option value="">...</option><option value="croissance">croissance</option><option value="stress">stress</option></select>. C'est pourquoi un manque de sommeil affaiblit le syst√®me <select id="q7b"><option value="">...</option><option value="digestif">digestif</option><option value="immunitaire">immunitaire</option></select>.
            </p>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex8">
            <div class="badge-container">
                <span class="badge">C3</span>
                <span class="tooltip-text"><strong>Expliquer un ph√©nom√®ne</strong><br>Ex: Expliquer l'impact d'un facteur environnemental.</span>
            </div>
            <span class="question-number">Question 8</span>
            <span class="instruction"><strong><u>Expliquer</u></strong> pourquoi l'utilisation d'√©crans le soir retarde l'endormissement (citez l'hormone concern√©e).</span>
            <textarea id="q8" rows="3" placeholder="Votre explication..."></textarea>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex9">
            <div class="badge-container">
                <span class="badge">C3</span>
                <span class="tooltip-text"><strong>Expliquer un ph√©nom√®ne</strong><br>Ex: Justifier une disposition r√©glementaire.</span>
            </div>
            <span class="question-number">Question 9</span>
            <span class="instruction"><strong><u>Justifier</u></strong> la r√©glementation imposant une surveillance m√©dicale renforc√©e pour les travailleurs de nuit.</span>
            <div>
                <input type="radio" name="q9" value="A"> A. Pour v√©rifier s'ils dorment au travail.<br>
                <input type="radio" name="q9" value="B"> B. Car le travail de nuit augmente les risques de pathologies (cancers, troubles cardiovasculaires).<br>
                <input type="radio" name="q9" value="C"> C. Pour calculer leur salaire.
            </div>
            <div class="feedback"></div>
        </div>

        <hr>

        <div class="exercise-card" id="ex10">
            <div class="badge-container">
                <span class="badge">C4</span>
                <span class="tooltip-text"><strong>Proposer une solution</strong><br>Ex: Identifier les bonnes pratiques.</span>
            </div>
            <span class="question-number">Question 10</span>
            <span class="instruction"><strong><u>S√©lectionner</u></strong> les habitudes √† adopter pour une bonne hygi√®ne de sommeil (Cliquez sur l'√©l√©ment pour le d√©placer dans la zone "√Ä faire").</span>
            
            <div class="drag-container" id="bank-ex10">
                <button class="draggable" onclick="selectItem(this, 'ex10')">D√Æner copieux et gras</button>
                <button class="draggable" onclick="selectItem(this, 'ex10')">Chambre √† 18¬∞C</button>
                <button class="draggable" onclick="selectItem(this, 'ex10')">Sport juste avant de dormir</button>
                <button class="draggable" onclick="selectItem(this, 'ex10')">Horaires r√©guliers</button>
            </div>
            <div style="display:flex; gap:10px; margin-top:10px;">
                <div class="drop-zone" onclick="dropItem(this, 'ex10')" data-cat="Bon"><strong>√Ä FAIRE</strong></div>
                <div class="drop-zone" onclick="dropItem(this, 'ex10')" data-cat="Mauvais"><strong>√Ä √âVITER</strong></div>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex11">
            <div class="badge-container">
                <span class="badge">C4</span>
                <span class="tooltip-text"><strong>Proposer une solution</strong><br>Ex: Proposer une action concr√®te (alimentation).</span>
            </div>
            <span class="question-number">Question 11</span>
            <span class="instruction"><strong><u>Proposer</u></strong> un exemple de d√Æner type favorisant l'endormissement (citer au moins 2 aliments/types d'aliments).</span>
            <textarea id="q11" rows="2" placeholder="Exemple : ..."></textarea>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex12">
            <div class="badge-container">
                <span class="badge">C4</span>
                <span class="tooltip-text"><strong>Proposer une solution</strong><br>Ex: D√©finir un param√®tre environnemental.</span>
            </div>
            <span class="question-number">Question 12</span>
            <span class="instruction"><strong><u>Ajuster</u></strong> le curseur sur la temp√©rature id√©ale d'une chambre √† coucher.</span>
            <div class="slider-container">
                <input type="range" id="q12" min="10" max="30" value="25" oninput="document.getElementById('val12').innerText = this.value + '¬∞C'">
                <p>Temp√©rature choisie : <span id="val12" style="font-weight:bold; color:var(--secondary)">25¬∞C</span></p>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex13">
            <div class="badge-container">
                <span class="badge">C4</span>
                <span class="tooltip-text"><strong>Proposer une solution</strong><br>Ex: Solutions pour travailleur post√©.</span>
            </div>
            <span class="question-number">Question 13</span>
            <span class="instruction"><strong><u>Proposer</u></strong> deux solutions pour un travailleur de nuit rentrant chez lui √† 7h du matin.</span>
            <p>Pour s'endormir alors qu'il fait jour, il doit porter des lunettes de <strong><input type="text" id="q13a" placeholder="mot-cl√©" style="width:120px"></strong> durant le trajet et utiliser des <strong><input type="text" id="q13b" placeholder="objet" style="width:120px"></strong> occultants dans sa chambre.</p>
            <div class="feedback"></div>
        </div>

        <div class="exercise-card" id="ex14">
            <div class="badge-container">
                <span class="badge">C4</span>
                <span class="tooltip-text"><strong>Proposer une solution</strong><br>Ex: Relier probl√®me et solution.</span>
            </div>
            <span class="question-number">Question 14</span>
            <span class="instruction"><strong><u>Associer</u></strong> chaque probl√®me √† la solution pr√©ventive adapt√©e.</span>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <label>1. Bruit ambiant g√™nant</label>
                <select id="q14a">
                    <option value="">Solution...</option>
                    <option value="A">A. Bouchons d'oreilles</option>
                    <option value="B">B. √âteindre le smartphone</option>
                </select>
                
                <label>2. Excitation nerveuse</label>
                <select id="q14b">
                    <option value="">Solution...</option>
                    <option value="A">A. Bouchons d'oreilles</option>
                    <option value="B">B. Activit√© relaxante (lecture)</option>
                </select>
            </div>
            <div class="feedback"></div>
        </div>

        <hr>

        <div class="exercise-card" id="ex15">
            <div class="badge-container">
                <span class="badge">C5</span>
                <span class="tooltip-text"><strong>Argumenter un choix</strong><br>Ex: Justifier une d√©cision sant√©.</span>
            </div>
            <span class="question-number">Question 15</span>
            <span class="instruction"><strong><u>Argumenter</u></strong> l'int√©r√™t de maintenir des horaires de lever r√©guliers, m√™me le week-end, pour un adolescent fatigu√©.</span>
            <textarea id="q15" rows="4" placeholder="Je pense qu'il est important de... parce que... (utiliser des arguments biologiques)"></textarea>
            <div class="feedback"></div>
        </div>

        <button class="btn-action" onclick="validateAll()">Valider et voir la correction</button>
        <button class="btn-action btn-print" onclick="window.print()">Enregistrer en PDF</button>

        <div id="global-result" style="display:none; margin-top:30px; text-align:center;">
            <h2>R√©sultat Final</h2>
            <div style="font-size: 3em; color: var(--primary); font-weight: bold;">
                <span id="score">0</span> / 20
            </div>
            <p id="final-message"></p>
            <div class="summary-box" style="text-align: left; margin-top: 20px;">
                <h3>üéì Rappel des notions √† revoir si erreur :</h3>
                <ul id="review-list"></ul>
            </div>
            <button class="btn-action" style="background-color: var(--accent);" onclick="location.reload()">Recommencer l'auto-√©valuation</button>
        </div>

    </section>
</div>

<script>
    // Variables pour le Drag & Drop simplifi√©
    let selectedItem = null;
    let selectedExercise = null;

    function selectItem(btn, exerciseId) {
        // Reset selection visual
        document.querySelectorAll(`#${exerciseId} .draggable`).forEach(b => b.style.borderColor = '#bdc3c7');
        
        selectedItem = btn;
        selectedExercise = exerciseId;
        btn.style.borderColor = 'var(--secondary)';
        btn.style.borderWidth = '2px';
    }

    function dropItem(zone, exerciseId) {
        if (!selectedItem || selectedExercise !== exerciseId) return;
        
        // Move item to zone visually
        zone.appendChild(selectedItem);
        selectedItem.style.borderColor = '#bdc3c7';
        selectedItem.style.borderWidth = '1px';
        selectedItem = null;
    }

    // Fonctions pour hi√©rarchiser (Ordre)
    function moveUp(btn) {
        let li = btn.closest('li');
        if (li.previousElementSibling) {
            li.parentNode.insertBefore(li, li.previousElementSibling);
        }
    }
    function moveDown(btn) {
        let li = btn.closest('li');
        if (li.nextElementSibling) {
            li.parentNode.insertBefore(li.nextElementSibling, li);
        }
    }

    // Fonction de Validation Globale
    function validateAll() {
        let score = 0;
        let reviewTopics = [];
        
        // --- CORRECTION EX 1 (1 pt) ---
        let ex1Correct = true;
        let zones1 = document.querySelectorAll('#ex1 .drop-zone');
        // Check Ultradien (Cardiaque)
        if (!zones1[0].innerText.includes('Fr√©quence cardiaque')) ex1Correct = false;
        // Check Circadien (Veille/Sommeil)
        if (!zones1[1].innerText.includes('Veille/Sommeil')) ex1Correct = false;
        // Check Infradien (Menstruel)
        if (!zones1[2].innerText.includes('Cycle menstruel')) ex1Correct = false;
        
        displayFeedback('ex1', ex1Correct, "Ultradien = rapide (c≈ìur), Circadien = 24h (sommeil), Infradien = long (cycle menstruel).", 1);
        if(ex1Correct) score += 1; else reviewTopics.push("Types de rythmes");

        // --- CORRECTION EX 2 (1 pt) ---
        let q2a = document.getElementById('q2a').value;
        let q2b = document.getElementById('q2b').value;
        let q2c = document.getElementById('q2c').value;
        let ex2Correct = (q2a === 'variation' && q2b === 'r√©guli√®re' && q2c === 'cerveau');
        displayFeedback('ex2', ex2Correct, "Variation r√©guli√®re. Horloge biologique = Cerveau.", 1);
        if(ex2Correct) score += 1; else reviewTopics.push("D√©finition rythme biologique");

        // --- CORRECTION EX 3 (1 pt) ---
        let q3a = document.getElementById('q3a').value;
        let q3b = document.getElementById('q3b').value;
        let ex3Correct = (q3a === 'A' && q3b === 'B');
        displayFeedback('ex3', ex3Correct, "Lent Profond = Physique/Immunit√©. Paradoxal = R√™ves/M√©moire.", 1);
        if(ex3Correct) score += 1; else reviewTopics.push("Phases du sommeil");

        // --- CORRECTION EX 4 (1 pt) ---
        let q4 = document.querySelector('input[name="q4"]:checked');
        let ex4Correct = (q4 && q4.value === 'B');
        displayFeedback('ex4', ex4Correct, "Les horaires d√©cal√©s (3x8) provoquent une d√©synchronisation de l'horloge interne.", 1);
        if(ex4Correct) score += 1; else reviewTopics.push("D√©synchronisation");

        // --- CORRECTION EX 5 (2 pts) ---
        let q5a = document.getElementById('q5a').value.toLowerCase().trim();
        let q5b = document.getElementById('q5b').value.toLowerCase().trim();
        let ex5Correct = (q5a === 'profond' && q5b === 'paradoxal');
        displayFeedback('ex5', ex5Correct, "D√©but de nuit = Sommeil Lent Profond. Fin de nuit = Sommeil Paradoxal.", 2);
        if(ex5Correct) score += 2; else reviewTopics.push("Structure d'une nuit");

        // --- CORRECTION EX 6 (1 pt) ---
        let items6 = document.querySelectorAll('#sortable-ex6 li');
        let order = "";
        items6.forEach(i => order += i.getAttribute('data-id'));
        let ex6Correct = (order === "1234");
        displayFeedback('ex6', ex6Correct, "Ordre : Endormissement -> Lent L√©ger -> Lent Profond -> Paradoxal.", 1);
        if(ex6Correct) score += 1; else reviewTopics.push("Cycles du sommeil");

        // --- CORRECTION EX 7 (1.5 pts) ---
        let q7a = document.getElementById('q7a').value;
        let q7b = document.getElementById('q7b').value;
        let ex7Correct = (q7a === 'croissance' && q7b === 'immunitaire');
        displayFeedback('ex7', ex7Correct, "Le sommeil profond permet la s√©cr√©tion d'hormones de croissance et renforce l'immunit√©.", 1.5);
        if(ex7Correct) score += 1.5; else reviewTopics.push("Physiologie du sommeil");

        // --- CORRECTION EX 8 (1.5 pts - Auto-eval guid√©e) ---
        let q8 = document.getElementById('q8').value.toLowerCase();
        let ex8Correct = (q8.includes('m√©latonine') || q8.includes('lumi√®re bleue') || q8.includes('cerveau'));
        displayFeedback('ex8', ex8Correct, "Mots attendus : M√©latonine, Lumi√®re bleue. La lumi√®re des √©crans bloque la m√©latonine, hormone du sommeil.", 1.5);
        if(ex8Correct) score += 1.5; else reviewTopics.push("√âcrans et sommeil");

        // --- CORRECTION EX 9 (1 pt) ---
        let q9 = document.querySelector('input[name="q9"]:checked');
        let ex9Correct = (q9 && q9.value === 'B');
        displayFeedback('ex9', ex9Correct, "Le travail de nuit est un facteur de risque pour la sant√© reconnu par la loi.", 1);
        if(ex9Correct) score += 1; else reviewTopics.push("R√©glementation (Travail de nuit)");

        // --- CORRECTION EX 10 (1.5 pts) ---
        let ex10Correct = true;
        let zones10 = document.querySelectorAll('#ex10 .drop-zone');
        // Bon : Chambre 18, Horaires r√©guliers
        let bonText = zones10[0].innerText;
        if (!bonText.includes('18¬∞C') || !bonText.includes('Horaires r√©guliers')) ex10Correct = false;
        if (bonText.includes('gras') || bonText.includes('Sport')) ex10Correct = false;
        
        displayFeedback('ex10', ex10Correct, "Bonnes habitudes : Fra√Æcheur (16-18¬∞C) et R√©gularit√©. √âviter gras et sport intense le soir.", 1.5);
        if(ex10Correct) score += 1.5; else reviewTopics.push("Hygi√®ne de sommeil");

        // --- CORRECTION EX 11 (1.5 pts) ---
        let q11 = document.getElementById('q11').value.toLowerCase();
        let ex11Correct = (q11.length > 5 && (q11.includes('l√©ger') || q11.includes('l√©gume') || q11.includes('f√©culent') || q11.includes('laitage') || q11.includes('soupe')));
        displayFeedback('ex11', ex11Correct, "Repas id√©al : L√©ger, Glucides lents (p√¢tes, riz) pour la sati√©t√©, Laitage (tryptophane). √âviter graisses et excitants.", 1.5);
        if(ex11Correct) score += 1.5; else reviewTopics.push("Alimentation et sommeil");

        // --- CORRECTION EX 12 (1 pt) ---
        let q12 = document.getElementById('q12').value;
        let ex12Correct = (q12 >= 16 && q12 <= 19); // Accepte entre 16 et 19
        displayFeedback('ex12', ex12Correct, "La temp√©rature id√©ale est entre 16¬∞C et 18¬∞C pour favoriser la baisse de temp√©rature corporelle n√©cessaire au sommeil.", 1);
        if(ex12Correct) score += 1; else reviewTopics.push("Environnement de sommeil");

        // --- CORRECTION EX 13 (2 pts) ---
        let q13a = document.getElementById('q13a').value.toLowerCase();
        let q13b = document.getElementById('q13b').value.toLowerCase();
        let ex13Correct = ((q13a.includes('soleil') || q13a.includes('teint√©es')) && (q13b.includes('rideau') || q13b.includes('volet')));
        displayFeedback('ex13', ex13Correct, "Lunettes de soleil (pour √©viter la lumi√®re du jour) et Rideaux/Volets (obscurit√© totale).", 2);
        if(ex13Correct) score += 2; else reviewTopics.push("Solutions travail de nuit");

        // --- CORRECTION EX 14 (1 pt) ---
        let q14a = document.getElementById('q14a').value;
        let q14b = document.getElementById('q14b').value;
        let ex14Correct = (q14a === 'A' && q14b === 'B');
        displayFeedback('ex14', ex14Correct, "Bruit -> Bouchons. Excitation -> Activit√© calme (lecture).", 1);
        if(ex14Correct) score += 1; else reviewTopics.push("Solutions aux troubles");

        // --- CORRECTION EX 15 (2 pts - Argumentation) ---
        let q15 = document.getElementById('q15').value.toLowerCase();
        // Check for connectors or specific logic words + biological keywords
        let hasLogic = (q15.includes('car') || q15.includes('parce que') || q15.includes('donc') || q15.includes('afin de'));
        let hasBio = (q15.includes('synchron') || q15.includes('horloge') || q15.includes('rythme') || q15.includes('r√©cup√©r'));
        let ex15Correct = (hasLogic && hasBio);
        
        displayFeedback('ex15', ex15Correct, "Argument attendu : Cela permet de garder l'horloge biologique synchronis√©e (C3) et d'√©viter la 'dette de sommeil' ou le 'jetlag social'.", 2);
        if(ex15Correct) score += 2; else reviewTopics.push("Argumentation (C5)");

        // --- AFFICHAGE FINAL ---
        document.getElementById('score').innerText = score;
        let finalMsg = document.getElementById('final-message');
        if (score >= 16) finalMsg.innerText = "Excellent travail ! Vous ma√Ætrisez le sujet.";
        else if (score >= 10) finalMsg.innerText = "Bien, mais certaines notions sont √† revoir.";
        else finalMsg.innerText = "Courage, relisez le r√©sum√© et r√©essayez !";
        
        // Liste de r√©vision
        let reviewList = document.getElementById('review-list');
        reviewList.innerHTML = "";
        if(reviewTopics.length === 0) {
            reviewList.innerHTML = "<li>Rien √† signaler, bravo !</li>";
        } else {
            reviewTopics.forEach(topic => {
                reviewList.innerHTML += `<li>${topic}</li>`;
            });
        }
        
        document.getElementById('global-result').style.display = 'block';
        window.scrollTo(0, document.body.scrollHeight);
    }

    function displayFeedback(id, isCorrect, text, points) {
        let div = document.querySelector(`#${id} .feedback`);
        div.style.display = 'block';
        div.className = isCorrect ? 'feedback correct' : 'feedback incorrect';
        div.innerHTML = `<strong>${isCorrect ? 'Correct' : 'Incorrect'} (+${isCorrect ? points : 0} pts) :</strong> ${text}`;
    }
</script>

</body>
</html>