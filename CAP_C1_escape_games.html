<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game : Terminal RH</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Roboto:wght@300;400;700&display=swap');

        :root {
            --bg-color: #050a15;
            --panel-bg: rgba(10, 25, 47, 0.85);
            --neon-cyan: #00f0ff;
            --neon-green: #39ff14;
            --neon-red: #ff003c;
            --text-main: #e6f1ff;
            --text-dim: #8892b0;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: 
                linear-gradient(rgba(0, 240, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 240, 255, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            color: var(--text-main);
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        #game-ui {
            display: none;
            position: sticky;
            top: 0;
            background: rgba(5, 10, 21, 0.95);
            border-bottom: 1px solid var(--neon-cyan);
            padding: 10px 20px;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Share Tech Mono', monospace;
            box-shadow: 0 0 15px rgba(0, 240, 255, 0.2);
        }
        
        #timer { font-size: 1.5rem; color: var(--neon-cyan); text-shadow: 0 0 8px var(--neon-cyan); }
        .level-indicator { font-size: 1rem; color: var(--text-dim); }

        .container {
            max-width: 700px;
            margin: 40px auto;
            padding: 20px;
            width: 100%;
            flex-grow: 1;
        }

        .screen {
            background: var(--panel-bg);
            border: 1px solid rgba(0, 240, 255, 0.3);
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8), inset 0 0 20px rgba(0, 240, 255, 0.05);
            backdrop-filter: blur(5px);
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .screen.active { display: block; }

        .glitch-title {
            font-family: 'Share Tech Mono', monospace;
            font-size: 2rem;
            color: var(--neon-cyan);
            text-transform: uppercase;
            margin-top: 0;
            border-bottom: 2px solid var(--neon-cyan);
            padding-bottom: 10px;
            text-shadow: 0 0 5px var(--neon-cyan);
        }

        /* CORRECTION APPLIQU√âE ICI : white-space: pre-wrap; */
        .story-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: var(--text-dim);
            white-space: pre-wrap; 
        }

        .consigne { font-weight: bold; margin-bottom: 15px; color: #fff; }
        .badge {
            background: var(--neon-cyan); color: #000; padding: 2px 6px; border-radius: 3px;
            font-family: 'Share Tech Mono', monospace; font-size: 0.8rem; margin-right: 8px;
        }

        select, input[type="text"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            outline: none;
            border-radius: 4px;
            transition: 0.3s;
        }
        select:focus, input[type="text"]:focus { box-shadow: 0 0 10px var(--neon-cyan); }

        .options-group label {
            display: block;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--text-dim);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .options-group label:hover { border-color: var(--neon-cyan); background: rgba(0, 240, 255, 0.1); }
        .options-group input[type="radio"] { margin-right: 10px; accent-color: var(--neon-cyan); }

        .btn-cyber {
            background: transparent;
            color: var(--neon-cyan);
            border: 2px solid var(--neon-cyan);
            padding: 15px 20px;
            font-size: 1.2rem;
            font-family: 'Share Tech Mono', monospace;
            text-transform: uppercase;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            border-radius: 4px;
        }
        .btn-cyber:hover {
            background: var(--neon-cyan);
            color: #000;
            box-shadow: 0 0 15px var(--neon-cyan);
        }
        .btn-cyber:disabled { border-color: var(--text-dim); color: var(--text-dim); cursor: not-allowed; box-shadow: none; background: transparent; }

        .btn-next { background: var(--neon-green); color: #000; border-color: var(--neon-green); margin-top: 20px; display: none; }
        .btn-next:hover { background: transparent; color: var(--neon-green); box-shadow: 0 0 15px var(--neon-green); }

        .feedback {
            margin-top: 20px; padding: 15px; border-radius: 4px; display: none; font-size: 0.95rem;
            background: rgba(0,0,0,0.6);
        }
        .feedback.success { border-left: 4px solid var(--neon-green); color: #e6f1ff; }
        .feedback.error { border-left: 4px solid var(--neon-red); color: #e6f1ff; }
        
        .fb-title { font-family: 'Share Tech Mono', monospace; font-size: 1.2rem; margin-bottom: 10px; }
        .success .fb-title { color: var(--neon-green); }
        .error .fb-title { color: var(--neon-red); }

        .correct-input { border-color: var(--neon-green) !important; color: var(--neon-green) !important; box-shadow: 0 0 10px rgba(57, 255, 20, 0.3); }
        .wrong-input { border-color: var(--neon-red) !important; color: var(--neon-red) !important; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .typewriter { overflow: hidden; white-space: pre-wrap; margin: 0 auto; letter-spacing: .1em; }

        @media (max-width: 600px) {
            .container { margin: 10px auto; padding: 10px; }
            .screen { padding: 15px; }
            .glitch-title { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="game-ui">
        <div class="level-indicator" id="lvl-display">SYST√àME EN ATTENTE</div>
        <div id="timer">45:00</div>
    </div>

    <div class="container">

        <div class="screen active" id="screen-intro">
            <h1 class="glitch-title">TERMINAL O.N.B.O.A.R.D.I.N.G</h1>
            <div class="story-text" id="intro-text"></div>
            <button class="btn-cyber" onclick="startGame()" style="margin-top: 20px;">[ INITIALISER LE TEST D'INT√âGRATION ]</button>
        </div>

        <div class="screen" id="screen-1">
            <h2 class="glitch-title">NIVEAU 1 : ARCHIVES CONTRATS</h2>
            <div class="story-text">Pour obtenir votre acc√®s au b√¢timent, le syst√®me exige que vous prouviez votre connaissance des bases administratives.</div>
            
            <div class="consigne"><span class="badge">C1</span> Associez chaque profil √† son type de contrat :</div>
            
            <label style="color:var(--text-dim); font-size:0.9rem;">1. Contrat pour un emploi stable sans date de fin programm√©e.</label>
            <select id="s1-q1">
                <option value="0">--- S√âLECTIONNER ---</option>
                <option value="CDD">Le CDD</option>
                <option value="CDI">Le CDI</option>
                <option value="CFA">Le CFA</option>
            </select>

            <label style="color:var(--text-dim); font-size:0.9rem;">2. Contrat pr√©caire indiquant une t√¢che pr√©cise et une date de fin.</label>
            <select id="s1-q2">
                <option value="0">--- S√âLECTIONNER ---</option>
                <option value="CDI">Le CDI</option>
                <option value="Apprentissage">Le contrat d'apprentissage</option>
                <option value="CDD">Le CDD</option>
            </select>

            <button class="btn-cyber" id="btn-s1" onclick="validateLevel(1)">[ SOUMETTRE LES DONN√âES ]</button>

            <div class="feedback" id="feed-1">
                <div class="fb-title" id="fb-title-1"></div>
                <div class="explication">
                    <strong>RAPPEL SYST√àME :</strong><br>
                    ‚Ä¢ <strong>CDI :</strong> Contrat √† Dur√©e Ind√©termin√©e (stable).<br>
                    ‚Ä¢ <strong>CDD :</strong> Contrat √† Dur√©e D√©termin√©e (temporaire). Le salari√© per√ßoit une "indemnit√© de fin de contrat" pour compenser la pr√©carit√©.
                </div>
                <button class="btn-cyber btn-next" onclick="nextLevel(2)">[ ACC√âDER AU NIVEAU SUIVANT ]</button>
            </div>
        </div>

        <div class="screen" id="screen-2">
            <h2 class="glitch-title">NIVEAU 2 : PROTOCOLE S√âCURIT√â</h2>
            <div class="story-text">ALERTE S√âCURIT√â. Les portes de l'atelier sont verrouill√©es. Vous devez appliquer la logique de pr√©vention pour d√©bloquer les sas.</div>

            <div class="consigne"><span class="badge">C3</span> √âtablissez la relation logique (Cause/Cons√©quence) face √† un danger :</div>
            
            <div class="options-group" id="options-s2">
                <label id="lbl-s2-1"><input type="radio" name="q_s2" value="1"> Parce que le sol est glissant, donc je peux exiger une prime de risque √† mon employeur.</label>
                <label id="lbl-s2-2"><input type="radio" name="q_s2" value="2"> Parce que le sol est glissant, donc je dois obligatoirement porter mes chaussures de s√©curit√© (EPI).</label>
                <label id="lbl-s2-3"><input type="radio" name="q_s2" value="3"> Parce que le sol est glissant, donc l'employeur n'est plus responsable en cas de chute.</label>
            </div>

            <button class="btn-cyber" id="btn-s2" onclick="validateLevel(2)">[ D√âVERROUILLER LE SAS ]</button>

            <div class="feedback" id="feed-2">
                <div class="fb-title" id="fb-title-2"></div>
                <div class="explication">
                    <strong>RAPPEL SYST√àME :</strong><br>
                    La pr√©vention s'exprime par : <em>Parce que [Risque] donc [Pr√©vention]</em>.<br>
                    L'employ√© a <strong>l'obligation</strong> de porter ses <strong>EPI</strong> (√âquipement de Protection Individuelle).
                </div>
                <button class="btn-cyber btn-next" onclick="nextLevel(3)">[ ACC√âDER AU NIVEAU SUIVANT ]</button>
            </div>
        </div>

        <div class="screen" id="screen-3">
            <h2 class="glitch-title">NIVEAU 3 : GESTION DE CRISE</h2>
            <div class="story-text">La base de donn√©es RH est corrompue. Aidez le manager virtuel √† prendre les bonnes d√©cisions pour r√©parer le syst√®me.</div>

            <div class="consigne"><span class="badge">C2</span> Analysez la situation pour choisir le contrat :</div>

            <label style="color:var(--text-dim); font-size:0.9rem;">Profil A : L'entreprise veut embaucher L√©a via une agence ext√©rieure juste pour faire face aux commandes de No√´l.</label>
            <select id="s3-q1">
                <option value="0">--- S√âLECTIONNER ---</option>
                <option value="Int√©rim">Int√©rim (Contrat de mission)</option>
                <option value="CDD">CDD classique</option>
            </select>

            <div class="consigne" style="margin-top:20px;"><span class="badge">C4</span> Proposez une solution face √† une infraction :</div>
            <label style="color:var(--text-dim); font-size:0.9rem;">Un employ√© refuse de porter son casque sur le chantier. Quelle est la r√©ponse l√©gale de l'employeur ?</label>
            <select id="s3-q2">
                <option value="0">--- S√âLECTIONNER ---</option>
                <option value="Amende">Lui faire payer une amende sur son salaire.</option>
                <option value="Sanction">Lui adresser une sanction disciplinaire (ex: avertissement).</option>
            </select>

            <button class="btn-cyber" id="btn-s3" onclick="validateLevel(3)">[ R√âPARER LA BASE DE DONN√âES ]</button>

            <div class="feedback" id="feed-3">
                <div class="fb-title" id="fb-title-3"></div>
                <div class="explication">
                    <strong>RAPPEL SYST√àME :</strong><br>
                    ‚Ä¢ L'<strong>Int√©rim</strong> implique une Entreprise de Travail Temporaire (ETT, l'agence).<br>
                    ‚Ä¢ Les amendes p√©cuniaires (financi√®res) sont strictement <strong>interdites</strong> par le Code du travail. L'employeur doit utiliser le pouvoir disciplinaire (la sanction).
                </div>
                <button class="btn-cyber btn-next" onclick="nextLevel(4)">[ ENTRER DANS LE BUREAU DE LA DIRECTION ]</button>
            </div>
        </div>

        <div class="screen" id="screen-4">
            <h2 class="glitch-title">NIVEAU MAX : L'ENTRETIEN FINAL</h2>
            <div class="story-text">La Directrice G√©n√©rale IA vous observe. "Derni√®re √©tape candidat. Convainquez-moi de vous garder √† long terme."</div>

            <div class="consigne"><span class="badge">C5</span> Argumentez votre choix de contrat :<br>
            <em>"Pourquoi devrais-je vous proposer un CDI plut√¥t qu'un CDD ?"</em></div>

            <div class="options-group" id="options-s4">
                <label id="lbl-s4-1"><input type="radio" name="q_s4" value="1"> Parce qu'avec un CDI, j'aurai la prime de pr√©carit√© √† la fin de l'ann√©e.</label>
                <label id="lbl-s4-2"><input type="radio" name="q_s4" value="2"> Parce que le CDI est sans limitation de dur√©e, ce qui garantit ma stabilit√© et me permet de m'investir durablement dans vos projets.</label>
            </div>

            <button class="btn-cyber" id="btn-s4" onclick="validateLevel(4)">[ TRANSMETTRE LA R√âPONSE ]</button>

            <div class="feedback" id="feed-4">
                <div class="fb-title" id="fb-title-4"></div>
                <div class="explication">
                    <strong>ANALYSE DE L'IA :</strong> Argumentation valide.<br>
                    S'appuyer sur la caract√©ristique principale du CDI (aucune date de fin) est la meilleure fa√ßon de justifier son choix professionnel.
                </div>
                <button class="btn-cyber btn-next" onclick="endGame()">[ T√âL√âCHARGER LE PASSEPORT PROFESSIONNEL ]</button>
            </div>
        </div>

        <div class="screen" id="screen-end" style="text-align: center;">
            <h1 class="glitch-title" style="color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green);">MISSION ACCOMPLIE</h1>
            <div class="story-text">
                Passeport Professionnel g√©n√©r√© avec succ√®s.<br>
                Vous ma√Ætrisez les comp√©tences cl√©s (C1 √† C5) des contrats de travail, des obligations et de la pr√©vention.<br><br>
                <strong>Bienvenue dans l'entreprise.</strong>
            </div>
            <div style="font-size: 4rem; margin: 20px 0;">üìú</div>
            <button class="btn-cyber" onclick="location.reload()" style="margin-top: 20px; border-color: var(--neon-green); color: var(--neon-green);">[ RELANCER LA SIMULATION ]</button>
        </div>

    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playBeep(freq, type, duration) {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            let osc = audioCtx.createOscillator();
            let gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime); 
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playBoot() { playBeep(400, 'sine', 0.2); setTimeout(()=>playBeep(600, 'sine', 0.3), 200); }
        function playSuccess() { playBeep(523.25, 'sine', 0.1); setTimeout(()=>playBeep(659.25, 'sine', 0.1), 100); setTimeout(()=>playBeep(783.99, 'sine', 0.3), 200); }
        function playError() { playBeep(150, 'sawtooth', 0.4); }

        const introString = "Bienvenue, Candidat.\n\nL'entreprise exige que chaque nouvel employ√© valide ses comp√©tences en Ressources Humaines (Contrats, Droits, Obligations, Pr√©vention).\n\nVous avez 45 minutes pour valider les 4 niveaux du serveur RH.\n\n√ätes-vous pr√™t ?";
        let i = 0;
        
        window.onload = function() {
            typeWriter();
        };

        function typeWriter() {
            if (i < introString.length) {
                document.getElementById("intro-text").innerHTML += introString.charAt(i);
                i++;
                setTimeout(typeWriter, 30);
            }
        }

        let timerInterval;
        let timeLeft = 45 * 60; 

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m < 10 ? '0':''}${m}:${s < 10 ? '0':''}${s}`;
                if(timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert("TEMPS √âCOUL√â ! D√âCONNEXION DU SYST√àME.");
                    location.reload();
                }
            }, 1000);
        }

        function startGame() {
            playBoot();
            document.getElementById('game-ui').style.display = 'flex';
            document.getElementById('screen-intro').classList.remove('active');
            document.getElementById('screen-1').classList.add('active');
            document.getElementById('lvl-display').innerText = "NIVEAU 1 / 4";
            startTimer();
        }

        function nextLevel(lvl) {
            playBoot();
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-' + lvl).classList.add('active');
            document.getElementById('lvl-display').innerText = `NIVEAU ${lvl} / 4`;
            window.scrollTo(0,0);
        }

        function processFeedback(level, isSuccess) {
            let feedBox = document.getElementById('feed-' + level);
            let feedTitle = document.getElementById('fb-title-' + level);
            let btn = document.getElementById('btn-s' + level);
            
            feedBox.style.display = 'block';
            btn.style.display = 'none';

            if(isSuccess) {
                playSuccess();
                feedBox.classList.add('success');
                feedTitle.innerText = ">> ACC√àS AUTORIS√â";
            } else {
                playError();
                document.getElementById('screen-' + level).classList.add('shake');
                setTimeout(() => { document.getElementById('screen-' + level).classList.remove('shake'); }, 400);
                feedBox.classList.add('error');
                feedTitle.innerText = ">> ERREUR : CORRECTION APPLIQU√âE";
            }
            
            feedBox.querySelector('.btn-next').style.display = 'block';
        }

        function validateLevel(lvl) {
            let isPerfect = true;

            if(lvl === 1) {
                let q1 = document.getElementById('s1-q1');
                let q2 = document.getElementById('s1-q2');
                if(q1.value == 0 || q2.value == 0) return; 

                if(q1.value === "CDI") { q1.classList.add('correct-input'); } 
                else { q1.classList.add('wrong-input'); q1.value = "CDI"; isPerfect = false; }

                if(q2.value === "CDD") { q2.classList.add('correct-input'); } 
                else { q2.classList.add('wrong-input'); q2.value = "CDD"; isPerfect = false; }
                
                q1.disabled = true; q2.disabled = true;
                processFeedback(1, isPerfect);
            }

            if(lvl === 2) {
                let selected = document.querySelector('input[name="q_s2"]:checked');
                if(!selected) return;

                document.querySelectorAll('input[name="q_s2"]').forEach(r => r.disabled = true);
                if(selected.value !== "2") {
                    selected.parentElement.classList.add('wrong-input');
                    isPerfect = false;
                }
                document.getElementById('lbl-s2-2').classList.add('correct-input'); 
                processFeedback(2, isPerfect);
            }

            if(lvl === 3) {
                let q1 = document.getElementById('s3-q1');
                let q2 = document.getElementById('s3-q2');
                if(q1.value == 0 || q2.value == 0) return;

                if(q1.value === "Int√©rim") { q1.classList.add('correct-input'); } 
                else { q1.classList.add('wrong-input'); q1.value = "Int√©rim"; isPerfect = false; }

                if(q2.value === "Sanction") { q2.classList.add('correct-input'); } 
                else { q2.classList.add('wrong-input'); q2.value = "Sanction"; isPerfect = false; }
                
                q1.disabled = true; q2.disabled = true;
                processFeedback(3, isPerfect);
            }

            if(lvl === 4) {
                let selected = document.querySelector('input[name="q_s4"]:checked');
                if(!selected) return;

                document.querySelectorAll('input[name="q_s4"]').forEach(r => r.disabled = true);
                if(selected.value !== "2") {
                    selected.parentElement.classList.add('wrong-input');
                    isPerfect = false;
                }
                document.getElementById('lbl-s4-2').classList.add('correct-input');
                processFeedback(4, isPerfect);
            }
        }

        function endGame() {
            playSuccess();
            clearInterval(timerInterval);
            document.getElementById('game-ui').style.display = 'none';
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-end').classList.add('active');
        }
    </script>
</body>
</html>