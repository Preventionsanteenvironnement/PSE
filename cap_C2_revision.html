<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√©matique C - Module C2</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --bg: #f5f6fa; --success: #27ae60; --danger: #e74c3c; }
        body { font-family: Arial, sans-serif; background-color: var(--bg); color: #333; line-height: 1.5; padding: 10px; margin: 0; }
        .container { max-width: 800px; margin: 0 auto; }
        .header { background: #fff; padding: 20px; text-align: center; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .header h1 { color: var(--primary); margin: 0 0 10px 0; font-size: 1.5em; }
        .header h2 { color: var(--secondary); margin: 0 0 15px 0; font-size: 1.2em; }
        .info-box { background: #fff; padding: 15px; border-left: 5px solid var(--secondary); border-radius: 4px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .q-card { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .comp { display: inline-block; background: var(--primary); color: white; padding: 3px 6px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-bottom: 10px; }
        .consigne { font-weight: normal; margin-bottom: 15px; font-size: 1.05em; }
        label { display: block; padding: 12px; margin: 8px 0; background: #f1f2f6; border-radius: 5px; cursor: pointer; }
        input[type="radio"] { margin-right: 10px; transform: scale(1.2); }
        button { width: 100%; padding: 15px; background: var(--secondary); color: white; border: none; border-radius: 5px; font-size: 1.1em; font-weight: bold; margin-top: 10px; cursor: pointer; transition: background 0.3s; }
        button:disabled { background: #bdc3c7; }
        .feedback { display: none; margin-top: 15px; padding: 15px; border-radius: 5px; border-left: 5px solid transparent; }
        .rep-rouge { color: var(--danger); font-weight: bold; display: none; margin-bottom: 5px; }
        .rep-verte { color: var(--success); font-weight: bold; display: none; margin-bottom: 10px; }
        .explication { font-size: 0.9em; border-top: 1px dashed #ccc; padding-top: 10px; }
        
        /* Styles pour le bilan final */
        #score-final { display: none; background: #fff; padding: 25px; border-radius: 8px; margin-top: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .score-title { text-align: center; font-size: 1.8em; font-weight: bold; color: var(--primary); margin-bottom: 5px; }
        .score-number { text-align: center; font-size: 2em; color: var(--secondary); margin-bottom: 20px; font-weight: bold; }
        .bar-label { font-weight: bold; font-size: 0.9em; margin-top: 15px; display: flex; justify-content: space-between; }
        .bar-container { width: 100%; background-color: #e0e0e0; border-radius: 10px; overflow: hidden; height: 18px; margin-top: 5px; }
        .bar-fill { height: 100%; background-color: var(--success); width: 0%; transition: width 1s ease-in-out; }
        .restart-btn { background-color: var(--primary); margin-top: 30px; font-size: 1.2em; padding: 15px; }
        .restart-btn:hover { background-color: #1a252f; }
        .strong-point { text-align: center; padding: 10px; background: #e8f8f5; color: #27ae60; font-weight: bold; border-radius: 5px; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>TH√âMATIQUE C</h1>
        <p>L‚Äôindividu dans son milieu professionnel, impliqu√© dans la pr√©vention des risques</p>
        <hr>
        <h2>MODULE C2 : Les enjeux de la sant√© et s√©curit√© au travail</h2>
        <p><strong>Objectif :</strong> √ätre capable de rep√©rer, pour une situation professionnelle, les enjeux et les obligations en sant√© et s√©curit√© au travail.</p>
        <p style="font-size: 0.85em; text-align: left; background:#f8f9fa; padding:10px; border-radius:5px;">
            <strong>Comp√©tences √©valu√©es :</strong><br>
            C1: Traiter une information | C2: Appliquer une m√©thode d'analyse | C3: Mettre en relation | C4: Proposer une solution | C5: Argumenter
        </p>
    </div>

    <div class="info-box">
        <strong>Sigles √† conna√Ætre :</strong><br>
        ‚Ä¢ <strong>AT</strong> : Accident du Travail<br>
        ‚Ä¢ <strong>MP</strong> : Maladie Professionnelle<br>
        ‚Ä¢ <strong>CPAM</strong> : Caisse Primaire d'Assurance Maladie<br>
        ‚Ä¢ <strong>IJ</strong> : Indemnit√©s Journali√®res
    </div>

    <div class="info-box" style="border-left-color: #f1c40f; background: #fffdf5;">
        <strong>Situation Professionnelle :</strong><br>
        Nadia, 17 ans, est nouvellement embauch√©e dans un supermarch√©. Elle travaille avec L√©o (30 ans), qui souffre d'une tendinite chronique √† l'√©paule √† force de passer des articles en caisse depuis 5 ans (maladie reconnue par la S√©curit√© sociale). Un matin, Nadia glisse sur le sol mouill√© de la r√©serve, tombe et se fracture le poignet. Elle est en arr√™t de travail pour 40 jours.
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Relever</strong> l'enjeu socio-√©conomique pour Nadia suite √† sa fracture, en cochant la proposition exacte.</div>
        <label><input type="radio" name="q1" value="A"><span>La douleur physique et la souffrance.</span></label>
        <label><input type="radio" name="q1" value="B"><span>La perte d'une partie de son salaire.</span></label>
        <button id="btn-q1" onclick="check('q1', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q1" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Les enjeux socio-√©conomiques concernent l'aspect financier, comme le manque √† gagner pour la victime. La douleur est un enjeu humain.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Identifier</strong> l'enjeu socio-√©conomique pour le supermarch√© suite √† l'absence de Nadia.</div>
        <label><input type="radio" name="q2" value="A"><span>Le co√ªt financier li√© √† son remplacement.</span></label>
        <label><input type="radio" name="q2" value="B"><span>L'atteinte √† la sant√© de l'employeur.</span></label>
        <button id="btn-q2" onclick="check('q2', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q2" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Pour l'entreprise, un accident entra√Æne des journ√©es perdues, la d√©motivation du personnel et le co√ªt du remplacement du salari√©.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>S√©lectionner</strong> la d√©finition qui correspond √† l'Accident du Travail (AT) de Nadia.</div>
        <label><input type="radio" name="q3" value="A"><span>√âv√©nement entra√Ænant une l√©sion corporelle r√©sultant d'une action soudaine au travail.</span></label>
        <label><input type="radio" name="q3" value="B"><span>Cons√©quence d'une exposition prolong√©e √† un risque.</span></label>
        <button id="btn-q3" onclick="check('q3', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q3" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Un AT est caus√© par un √©v√©nement "soudain" entra√Ænant une "l√©sion" (ex: glissade, fracture).</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>S√©lectionner</strong> la d√©finition qui correspond √† la Maladie Professionnelle (MP) de L√©o.</div>
        <label><input type="radio" name="q4" value="A"><span>Une action soudaine et violente provoquant une l√©sion.</span></label>
        <label><input type="radio" name="q4" value="B"><span>La cons√©quence d'une exposition chronique plus ou moins prolong√©e √† un risque.</span></label>
        <button id="btn-q4" onclick="check('q4', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q4" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Une MP s'installe dans le temps suite √† une exposition "chronique" (r√©p√©titive), comme la tendinite de L√©o apr√®s 5 ans.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Indiquer</strong> combien de crit√®res L√©o doit respecter pour que sa tendinite soit reconnue comme MP.</div>
        <label><input type="radio" name="q5" value="A"><span>2 crit√®res.</span></label>
        <label><input type="radio" name="q5" value="B"><span>4 crit√®res (√™tre salari√©, maladie dans un tableau, travaux list√©s, d√©lai respect√©).</span></label>
        <button id="btn-q5" onclick="check('q5', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q5" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Il faut imp√©rativement respecter les 4 crit√®res cumulatifs des tableaux de la S√©curit√© sociale pour √™tre reconnu en MP.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C2]</span>
        <div class="consigne"><strong>Analyser</strong> la situation de L√©o avec les 4 crit√®res MP : pourquoi sa maladie est-elle prise en charge ?</div>
        <label><input type="radio" name="q6" value="A"><span>Parce qu'il a gliss√© soudainement dans la r√©serve.</span></label>
        <label><input type="radio" name="q6" value="B"><span>Parce qu'il est salari√©, a une maladie list√©e, r√©alise des travaux habituels (caisse) et respecte le temps d'exposition (5 ans).</span></label>
        <button id="btn-q6" onclick="check('q6', 'B', 'C2')">Valider cette question</button>
        <div id="fb-q6" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> La d√©marche d'analyse valide point par point les obligations r√©glementaires de la S√©curit√© sociale.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Relever</strong> une obligation stricte de l'employeur envers Nadia, qui est une "nouvelle embauch√©e".</div>
        <label><input type="radio" name="q7" value="A"><span>Lui interdire de parler aux autres coll√®gues.</span></label>
        <label><input type="radio" name="q7" value="B"><span>L'informer et la former √† la s√©curit√© d√®s son arriv√©e.</span></label>
        <button id="btn-q7" onclick="check('q7', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q7" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Tout nouvel embauch√© doit obligatoirement recevoir une information et une formation √† la s√©curit√© (livret d'accueil, etc.).</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Citer</strong> une disposition r√©glementaire sp√©cifique qui s'applique √† Nadia en tant que "jeune travailleur" (17 ans).</div>
        <label><input type="radio" name="q8" value="A"><span>Interdiction de l'affecter √† certains travaux dangereux sans d√©rogation.</span></label>
        <label><input type="radio" name="q8" value="B"><span>Obligation de travailler la nuit pour se former.</span></label>
        <button id="btn-q8" onclick="check('q8', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q8" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Pour prot√©ger les mineurs, le Code du travail interdit de les exposer √† des risques graves (hauteur, agents chimiques), sauf d√©rogation stricte.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C3]</span>
        <div class="consigne"><strong>Mettre en relation</strong> le statut de Nadia (mineure) avec le rendez-vous m√©dical obligatoire, en compl√©tant la phrase.</div>
        <label><input type="radio" name="q9" value="A"><span>Parce qu'elle a moins de 18 ans, elle doit payer ses soins elle-m√™me.</span></label>
        <label><input type="radio" name="q9" value="B"><span>Parce qu'elle a moins de 18 ans, elle doit b√©n√©ficier d'une visite d'information et de pr√©vention avant son affectation au poste.</span></label>
        <button id="btn-q9" onclick="check('q9', 'B', 'C3')">Valider cette question</button>
        <div id="fb-q9" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Les mineurs b√©n√©ficient d'un suivi renforc√© qui doit avoir lieu pr√©alablement √† la prise de poste.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Identifier</strong> l'obligation de Nadia en tant que salari√©e concernant la s√©curit√©.</div>
        <label><input type="radio" name="q10" value="A"><span>Elle doit prendre soin de sa sant√©, de sa s√©curit√© et de celles de ses coll√®gues.</span></label>
        <label><input type="radio" name="q10" value="B"><span>Elle doit √©valuer elle-m√™me tous les risques de l'entreprise dans un document.</span></label>
        <button id="btn-q10" onclick="check('q10', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q10" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> L'employeur √©value les risques (Document Unique), mais le salari√© a l'obligation de respecter les consignes et de faire attention √† lui et aux autres.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Nommer</strong> le droit d'un salari√© s'il se trouve face √† un danger grave et imminent (ex: √©tag√®re qui s'effondre).</div>
        <label><input type="radio" name="q11" value="A"><span>Le droit de gr√®ve.</span></label>
        <label><input type="radio" name="q11" value="B"><span>Le droit de retrait.</span></label>
        <button id="btn-q11" onclick="check('q11', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q11" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Le salari√© peut quitter son poste de travail (droit de retrait) sans risquer de sanction s'il juge la situation imm√©diatement dangereuse pour sa vie.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C5]</span>
        <div class="consigne"><strong>Justifier</strong> la limite du droit de retrait : pourquoi est-il parfois interdit de quitter son poste ?</div>
        <label><input type="radio" name="q12" value="A"><span>Parce que l'employeur perdrait trop d'argent.</span></label>
        <label><input type="radio" name="q12" value="B"><span>Parce que le retrait ne doit pas cr√©er une nouvelle situation de danger pour autrui.</span></label>
        <button id="btn-q12" onclick="check('q12', 'B', 'C5')">Valider cette question</button>
        <div id="fb-q12" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Une condition stricte encadre ce droit : se mettre en s√©curit√© ne doit pas mettre la vie des coll√®gues en danger.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Indiquer</strong> la premi√®re d√©marche m√©dicale que Nadia doit faire apr√®s sa chute.</div>
        <label><input type="radio" name="q13" value="A"><span>Consulter un m√©decin pour faire √©tablir un certificat m√©dical en 4 volets.</span></label>
        <label><input type="radio" name="q13" value="B"><span>Rentrer chez elle et attendre que √ßa passe.</span></label>
        <button id="btn-q13" onclick="check('q13', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q13" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Il faut faire constater la l√©sion par un m√©decin qui remettra un certificat officiel compos√© de 4 volets.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Indiquer</strong> le d√©lai maximum dont dispose Nadia pour informer son employeur de son accident.</div>
        <label><input type="radio" name="q14" value="A"><span>Dans les 24 heures.</span></label>
        <label><input type="radio" name="q14" value="B"><span>Dans les 48 heures.</span></label>
        <button id="btn-q14" onclick="check('q14', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q14" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> La victime (ou ses proches) doit imp√©rativement informer l'employeur dans les 24 heures qui suivent l'accident.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Pr√©ciser</strong> le d√©lai dont dispose l'employeur pour faire la d√©claration officielle √† la CPAM.</div>
        <label><input type="radio" name="q15" value="A"><span>Dans les 24 heures.</span></label>
        <label><input type="radio" name="q15" value="B"><span>Dans les 48 heures.</span></label>
        <button id="btn-q15" onclick="check('q15', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q15" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> C'est l'employeur qui doit d√©clarer l'accident √† la CPAM, et il dispose de 48 heures pour le faire.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C2]</span>
        <div class="consigne"><strong>Organiser</strong> chronologiquement la d√©claration d'AT de Nadia en choisissant le bon ordre.</div>
        <label><input type="radio" name="q16" value="A"><span>1. M√©decin / 2. Informer employeur (24h) / 3. Envoyer volets 1 et 2 CPAM / 4. Remettre volet 4 employeur.</span></label>
        <label><input type="radio" name="q16" value="B"><span>1. Informer employeur (48h) / 2. M√©decin / 3. Jeter les volets m√©dicaux.</span></label>
        <button id="btn-q16" onclick="check('q16', 'A', 'C2')">Valider cette question</button>
        <div id="fb-q16" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> C'est la proc√©dure l√©gale et structur√©e pour que le dossier soit accept√© par l'Assurance Maladie.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>Diff√©rencier</strong> les indemnisations : quelle prestation prendra en charge √† 100% les frais d'h√¥pital de Nadia ?</div>
        <label><input type="radio" name="q17" value="A"><span>Les prestations en esp√®ces.</span></label>
        <label><input type="radio" name="q17" value="B"><span>Les prestations en nature.</span></label>
        <button id="btn-q17" onclick="check('q17', 'B', 'C1')">Valider cette question</button>
        <div id="fb-q17" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Les prestations en NATURE correspondent √† la prise en charge des soins √† 100% pour √©viter l'avance de frais (m√©dicaments, m√©decin).</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C4]</span>
        <div class="consigne"><strong>Proposer</strong> la prestation financi√®re exacte qui compensera le salaire que Nadia va perdre pendant ses 40 jours d'arr√™t.</div>
        <label><input type="radio" name="q18" value="A"><span>La rente d'incapacit√©.</span></label>
        <label><input type="radio" name="q18" value="B"><span>Les indemnit√©s journali√®res (IJ).</span></label>
        <button id="btn-q18" onclick="check('q18', 'B', 'C4')">Valider cette question</button>
        <div id="fb-q18" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> Les indemnit√©s journali√®res (prestations en ESP√àCES) remplacent le salaire. (La rente, c'est uniquement s'il y a des s√©quelles d√©finitives).</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C1]</span>
        <div class="consigne"><strong>D√©finir</strong> √† quoi sert la "rente aux ayants droit" en cas d'accident du travail gravissime.</div>
        <label><input type="radio" name="q19" value="A"><span>Elle est vers√©e √† la famille (conjoint/enfants) si l'accident a entra√Æn√© le d√©c√®s de la victime.</span></label>
        <label><input type="radio" name="q19" value="B"><span>Elle est vers√©e √† l'employeur pour l'aider √† payer ses imp√¥ts.</span></label>
        <button id="btn-q19" onclick="check('q19', 'A', 'C1')">Valider cette question</button>
        <div id="fb-q19" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> La rente aux ayants droit est une protection sociale destin√©e √† la famille proche en cas de mort de la victime de l'AT ou de la MP.</div>
        </div>
    </div>

    <div class="q-card">
        <span class="comp">[C3]</span>
        <div class="consigne"><strong>Mettre en relation</strong> le fait de d√©clarer correctement un AT avec un enjeu financier, au format "Parce que... donc".</div>
        <label><input type="radio" name="q20" value="A"><span>Parce que Nadia a d√©clar√© son AT, donc elle paiera des imp√¥ts en plus.</span></label>
        <label><input type="radio" name="q20" value="B"><span>Parce que la proc√©dure a √©t√© respect√©e, donc la prise en charge des soins et le paiement des indemnit√©s sont d√©clench√©s.</span></label>
        <button id="btn-q20" onclick="check('q20', 'B', 'C3')">Valider cette question</button>
        <div id="fb-q20" class="feedback">
            <div class="rep-rouge"></div><div class="rep-verte"></div>
            <div class="explication"><strong>Explication :</strong> L'int√©r√™t majeur de faire la d√©claration est l'indemnisation de la victime et la gratuit√© des soins li√©s √† l'accident.</div>
        </div>
    </div>

    <div id="score-final">
        <div class="score-title">üéì Bilan des r√©visions</div>
        <div class="score-number" id="score-affichage"></div>
        
        <div id="barometre-competences"></div>
        
        <div id="strong-point" class="strong-point"></div>

        <button class="restart-btn" onclick="location.reload()">üîÑ Recommencer l'entra√Ænement</button>
    </div>

</div>

<script>
    let score = 0;
    let repondu = 0;
    const totalQuestions = 20;
    
    // Suivi par comp√©tence
    const stats = {
        'C1': { correct: 0, total: 14, label: "Traiter l'information" },
        'C2': { correct: 0, total: 2, label: "Appliquer une analyse" },
        'C3': { correct: 0, total: 2, label: "Mettre en relation" },
        'C4': { correct: 0, total: 1, label: "Proposer une solution" },
        'C5': { correct: 0, total: 1, label: "Argumenter" }
    };

    function check(qName, correctVal, competence) {
        const radios = document.getElementsByName(qName);
        let selectedVal = null;
        let selectedText = "";
        let correctText = "";

        for(let r of radios) {
            if(r.value === correctVal) correctText = r.nextElementSibling.innerText;
            if(r.checked) {
                selectedVal = r.value;
                selectedText = r.nextElementSibling.innerText;
            }
        }

        if(!selectedVal) {
            alert("Veuillez s√©lectionner une r√©ponse !");
            return;
        }

        for(let r of radios) r.disabled = true;
        document.getElementById('btn-' + qName).disabled = true;

        const fb = document.getElementById('fb-' + qName);
        fb.style.display = "block";
        
        const repRouge = fb.querySelector('.rep-rouge');
        const repVerte = fb.querySelector('.rep-verte');

        if(selectedVal === correctVal) {
            score++;
            stats[competence].correct++;
            repVerte.innerText = "‚úÖ EXACT : " + selectedText;
            repVerte.style.display = "block";
            fb.style.borderLeftColor = "var(--success)";
            fb.style.backgroundColor = "#e8f8f5";
        } else {
            repRouge.innerText = "‚ùå FAUX : " + selectedText;
            repRouge.style.display = "block";
            repVerte.innerText = "‚úÖ La bonne r√©ponse : " + correctText;
            repVerte.style.display = "block";
            fb.style.borderLeftColor = "var(--danger)";
            fb.style.backgroundColor = "#fdedec";
        }

        repondu++;
        if(repondu === totalQuestions) {
            afficherBilan();
        }
    }

    function afficherBilan() {
        const scoreBox = document.getElementById('score-final');
        document.getElementById('score-affichage').innerText = score + " / " + totalQuestions;
        
        let barometreHTML = "";
        let bestComp = "";
        let bestPercent = -1;

        // G√©n√©rer les barres de progression
        for(let c in stats) {
            let pct = Math.round((stats[c].correct / stats[c].total) * 100);
            
            // Trouver la meilleure comp√©tence (on ignore C4/C5 s'ils n'ont qu'une question pour ne pas biaiser, sauf si c'est la seule 100%)
            if(pct > bestPercent && stats[c].total > 1) {
                bestPercent = pct;
                bestComp = c + " (" + stats[c].label + ")";
            }

            let color = pct >= 70 ? "var(--success)" : (pct >= 40 ? "#f39c12" : "var(--danger)");
            
            barometreHTML += `
                <div class="bar-label">
                    <span>${c} - ${stats[c].label}</span>
                    <span>${stats[c].correct} / ${stats[c].total} (${pct}%)</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill" style="width: ${pct}%; background-color: ${color};"></div>
                </div>
            `;
        }
        
        // G√©rer le cas o√π on a tout faux ou tout est √† 100%
        if(bestPercent === -1) bestComp = "C1 (Traiter l'information)";
        if(bestPercent === 0) {
            document.getElementById('strong-point').innerHTML = "Il va falloir relire le cours attentivement ! Courage !";
        } else {
            document.getElementById('strong-point').innerHTML = "üåü Ta meilleure comp√©tence :<br>" + bestComp;
        }

        document.getElementById('barometre-competences').innerHTML = barometreHTML;
        
        scoreBox.style.display = "block";
        scoreBox.scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>