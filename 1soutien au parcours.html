<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Soutien au parcours ‚Äì Seconde Bac Pro AGOrA ‚Äì Pr√©paration rencontre psychologue</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f6fb;
      color: #222;
    }
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }
    header {
      background: linear-gradient(135deg, #2449a3, #3c7dd9);
      color: #fff;
      padding: 20px 24px;
      border-radius: 14px;
      margin-bottom: 20px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
    }
    header h1 {
      margin: 0 0 6px;
      font-size: 1.5rem;
    }
    header h2 {
      margin: 0;
      font-weight: 400;
      font-size: 1.05rem;
      opacity: 0.95;
    }
    .badge {
      display: inline-block;
      margin-top: 10px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.15);
      font-size: 0.8rem;
    }

    .info-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      background: #ffffff;
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    .info-field {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
    }
    .info-field label {
      font-weight: 600;
    }
    .info-field input[type="text"],
    .info-field input[type="date"] {
      padding: 4px 6px;
      border-radius: 6px;
      border: 1px solid #c3c8d8;
      font-size: 0.9rem;
      min-width: 120px;
    }
    .scale-help {
      background: #ffffff;
      border-radius: 12px;
      padding: 8px 14px;
      margin-bottom: 18px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      font-size: 0.8rem;
      color: #555;
    }
    .scale-help strong {
      color: #2449a3;
    }

    .section {
      background: #ffffff;
      border-radius: 16px;
      padding: 18px 20px 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      border: 1px solid #e0e4f0;
    }
    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .section-title {
      font-size: 1.1rem;
      font-weight: 650;
      color: #2449a3;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .section-title span.icon {
      font-size: 1.4rem;
    }
    .section-subtitle {
      font-size: 0.85rem;
      color: #555;
      margin-bottom: 8px;
    }
    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }
    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: #eef3ff;
      font-size: 0.78rem;
      color: #2c4aa5;
      border: 1px solid #d4ddff;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }
    .chip span {
      font-size: 1rem;
    }

    .field-block {
      margin-bottom: 12px;
    }
    .field-block label {
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 4px;
    }
    .field-block small {
      display: block;
      font-size: 0.78rem;
      color: #666;
      margin-bottom: 3px;
    }
    textarea {
      width: 100%;
      min-height: 60px;
      resize: none;
      padding: 8px 9px;
      border-radius: 8px;
      border: 1px solid #c7cedf;
      font-size: 0.9rem;
      line-height: 1.35;
      transition: border-color 0.15s, box-shadow 0.15s;
      background: #fafbff;
      overflow-y: hidden;
    }
    textarea:focus {
      outline: none;
      border-color: #3c7dd9;
      box-shadow: 0 0 0 2px rgba(60,125,217,0.18);
      background: #ffffff;
    }
    input[type="range"] {
      width: 180px;
    }
    .range-label {
      font-size: 0.85rem;
      margin-left: 8px;
      font-weight: 600;
      color: #2449a3;
    }

    .aide-toggle {
      border: none;
      background: #f0f3ff;
      color: #2449a3;
      font-size: 0.78rem;
      padding: 3px 8px;
      border-radius: 999px;
      cursor: pointer;
    }
    .aide-toggle:hover {
      background: #e0e6ff;
    }
    .aide-box {
      margin-top: 6px;
      padding: 6px 8px;
      background: #f8f9ff;
      border-radius: 10px;
      border: 1px dashed #c7cedf;
      font-size: 0.78rem;
      color: #555;
      display: none;
    }

    .questions-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 8px;
      margin-bottom: 12px;
    }
    .question-suggestion {
      font-size: 0.8rem;
      background: #f4f7ff;
      border-radius: 10px;
      border: 1px solid #dde3ff;
      padding: 6px 8px;
    }

    .subject-grid {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      margin-bottom: 10px;
    }
    .subject-grid th,
    .subject-grid td {
      border: 1px solid #dde2f2;
      padding: 4px 6px;
      text-align: center;
    }
    .subject-grid th {
      background: #eef2ff;
      font-weight: 600;
    }
    .subject-grid td:first-child {
      text-align: left;
      font-weight: 500;
    }

    .dnd-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 6px;
      font-size: 0.82rem;
    }
    .dnd-pool,
    .dnd-dropzone {
      flex: 1 1 220px;
      min-height: 80px;
      border-radius: 10px;
      border: 1px dashed #c6cce5;
      padding: 6px 8px;
      background: #f9faff;
    }
    .dnd-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 0.8rem;
      color: #2449a3;
    }
    .dnd-item {
      background: #e8edff;
      border-radius: 999px;
      padding: 3px 9px;
      display: inline-block;
      margin: 2px 3px;
      cursor: move;
      user-select: none;
    }
    .dnd-dropzone.over {
      background: #e0e7ff;
      border-style: solid;
    }

    .priority-list {
      list-style: none;
      padding: 0;
      margin: 6px 0 0;
      font-size: 0.85rem;
    }
    .priority-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 8px;
      background: #f4f6ff;
      margin-bottom: 4px;
    }
    .priority-label {
      flex: 1;
    }
    .priority-buttons button {
      border: none;
      border-radius: 6px;
      padding: 2px 6px;
      font-size: 0.75rem;
      cursor: pointer;
      background: #dde3ff;
    }

    .actions-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 16px;
    }
    .btn {
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 0.88rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: transform 0.1s, box-shadow 0.1s, background 0.2s;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    }
    .btn-save {
      background: #2e7d32;
      color: #fff;
    }
    .btn-save:hover {
      background: #256528;
    }
    .btn-print {
      background: #1565c0;
      color: #fff;
    }
    .btn-print:hover {
      background: #0f4f96;
    }

    footer {
      text-align: center;
      margin-top: 24px;
      font-size: 0.78rem;
      color: #666;
    }

    .page-break {
      margin-top: 16px;
      border-top: 1px dashed #d0d5e5;
      padding-top: 16px;
    }
    .page-break-part {
      margin-top: 18px;
      border-top: 1px dashed #d0d5e5;
      padding-top: 14px;
    }

    @media print {
      body {
        background: #ffffff;
      }
      .actions-bar, .aide-toggle {
        display: none !important;
      }
      header {
        box-shadow: none;
      }
      .section {
        box-shadow: none;
        border-radius: 0;
      }
      .page-break,
      .page-break-part {
        page-break-before: always;
        border: none;
        padding-top: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">

    <header>
      <h1>Soutien au parcours</h1>
      <h2>Mon parcours, mon projet et pr√©paration de la rencontre avec la psychologue</h2>
      <div class="badge">Classe : Seconde Bac Pro AGOrA</div>
    </header>

    <div class="info-bar">
      <div class="info-field">
        <label for="prenomEleve">Pr√©nom :</label>
        <input type="text" id="prenomEleve" placeholder="Pr√©nom de l‚Äô√©l√®ve" />
      </div>
      <div class="info-field">
        <label for="nomEleve">Nom :</label>
        <input type="text" id="nomEleve" placeholder="Nom de l‚Äô√©l√®ve" />
      </div>
      <div class="info-field">
        <label for="dateTravail">Date :</label>
        <input type="date" id="dateTravail" />
      </div>
      <div class="info-field">
        <span>Clart√© de mon projet :</span>
        <input type="range" id="clarteProjet" min="0" max="10" value="5" />
        <span class="range-label" id="valeurClarte">5 / 10</span>
      </div>
      <div class="info-field">
        <span>Comment je me sens aujourd‚Äôhui :</span>
        <input type="range" id="humeurJour" min="0" max="10" value="5" />
        <span class="range-label" id="valeurHumeur">5 / 10</span>
      </div>
    </div>

    <div class="scale-help">
      <strong>Clart√© de mon projet :</strong> 0 = je suis compl√®tement perdu(e) ¬∑ 10 = je vois tr√®s bien o√π je vais.  
      <br>
      <strong>Comment je me sens :</strong> 0 = je me sens tr√®s mal au lyc√©e aujourd‚Äôhui ¬∑ 10 = je me sens tr√®s bien et en confiance.
    </div>

    <!-- PARTIE 1 ‚Äì PAGE 1 -->
    <section class="section" id="partieParcours">
      <div class="section-header">
        <div class="section-title">
          <span class="icon">üß≠</span>
          Partie 1 ‚Äì Mon parcours et mon projet
        </div>
      </div>
      <div class="section-subtitle">
        R√©flexion personnelle sur mon orientation et ma place en lyc√©e professionnel.
      </div>

      <div class="chip-row">
        <div class="chip" onclick="addSuggestion('arriveeLycee','Je viens de 3e g√©n√©rale.')"><span>üè´</span>3e g√©n√©rale</div>
        <div class="chip" onclick="addSuggestion('arriveeLycee','Je n‚Äôai pas choisi cette fili√®re moi-m√™me.')"><span>üß©</span>Orientation subie</div>
        <div class="chip" onclick="addSuggestion('arriveeLycee','Je voulais un enseignement plus concret.')"><span>üõ†Ô∏è</span>Envie de concret</div>
        <div class="chip" onclick="addSuggestion('arriveeLycee','Je vais rester ici 3 ans pour le bac pro.')"><span>üìÖ</span>3 ans au lyc√©e pro</div>
      </div>

      <div class="field-block">
        <label for="arriveeLycee">1. Mon arriv√©e en lyc√©e professionnel</label>
        <small>Pourquoi suis-je en seconde Bac Pro AGOrA ? Comment se passe mon d√©but d‚Äôann√©e ?</small>
        <textarea id="arriveeLycee" placeholder="√âcris ici ce que tu as envie d‚Äôexpliquer √† propos de ton arriv√©e au lyc√©e professionnel‚Ä¶"></textarea>
      </div>

      <div class="field-block">
        <label>2. Petit bilan sur quelques mati√®res</label>
        <small>Coche ce qui te ressemble le plus pour chaque mati√®re.</small>
        <table class="subject-grid">
          <thead>
            <tr>
              <th>Mati√®re</th>
              <th>J‚Äôaime bien</th>
              <th>C‚Äôest difficile</th>
              <th>Je ne sais pas encore</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Espagnol LV2</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Anglais LV1</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Math√©matiques</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Co-enseignement math√©matiques</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Fran√ßais</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Histoire-g√©ographie / EMC</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>√âconomie-droit</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Ens. pro ECO-GE-GA</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Pr√©vention sant√© environnement</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Arts appliqu√©s</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>EPS</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
            <tr>
              <td>Soutien au parcours</td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
              <td><input type="checkbox" /></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="field-block">
        <label for="aimeAGORA">3. Ce que j‚Äôaime / ce qui est difficile dans cette fili√®re</label>
        <small>Points positifs, difficult√©s, surprises‚Ä¶</small>
        <textarea id="aimeAGORA" placeholder="Exemples : ce que tu appr√©cies ou ce que tu trouves difficile dans les cours et au lyc√©e."></textarea>
        <div class="chip-row">
          <div class="chip" onclick="addSuggestion('aimeAGORA','J‚Äôaime l‚Äôespagnol LV2.')"><span>üá™üá∏</span>Espagnol LV2</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','Je trouve les math√©matiques difficiles.')"><span>üìê</span>Math√©matiques</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','J‚Äôaime les cours de fran√ßais.')"><span>üìñ</span>Fran√ßais</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','Le co-enseignement maths me pose probl√®me.')"><span>‚ûó</span>Co-enseignement maths</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','J‚Äôappr√©cie la pr√©vention sant√© environnement.')"><span>ü©∫</span>PSE</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','J‚Äôaime l‚Äôanglais LV1.')"><span>üá¨üáß</span>Anglais LV1</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','Les cours d‚Äôarts appliqu√©s me plaisent.')"><span>üé®</span>Arts appliqu√©s</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','Les cours professionnels ECO-GE-GA sont compliqu√©s pour moi.')"><span>üè¢</span>Ens. pro ECO-GE-GA</div>
          <div class="chip" onclick="addSuggestion('aimeAGORA','Le soutien au parcours m‚Äôaide √† r√©fl√©chir √† mon avenir.')"><span>üß†</span>Soutien au parcours</div>
        </div>
      </div>

      <div class="field-block">
        <label>4. Comment je vis mes journ√©es de lyc√©e</label>
        <small>D√©place le curseur pour dire √† quel point tu te sens bien dans tes journ√©es de cours en ce moment.</small>
        <div class="info-field">
          <span>Mes journ√©es de lyc√©e en ce moment :</span>
          <input type="range" id="journeeLycee" min="0" max="10" value="5" />
          <span class="range-label" id="valeurJournee">5 / 10</span>
        </div>
      </div>

      <button class="aide-toggle" type="button" onclick="toggleAide('aideParcours')">
        üí° Besoin d‚Äôid√©es pour r√©pondre ?
      </button>
      <div class="aide-box" id="aideParcours">
        Tu peux parler de ton coll√®ge, de ton orientation apr√®s la 3e, de ce que tu as ressenti en arrivant au lyc√©e pro, des mati√®res que tu aimes ou que tu trouves difficiles, des stages, etc.
      </div>
    </section>

    <!-- PARTIE 1 ‚Äì PAGE 2 -->
    <div class="page-break-part"></div>

    <section class="section">
      <div class="section-header">
        <div class="section-title">
          <span class="icon">üß≠</span>
          Partie 1 ‚Äì Mon parcours et mon projet (suite)
        </div>
      </div>

      <div class="field-block">
        <label for="ideeMetier">5. O√π j‚Äôen suis dans mon projet</label>
        <small>As-tu d√©j√† une id√©e de m√©tier ou de domaine ? Que voudrais-tu retrouver dans ton futur travail ?</small>
        <textarea id="ideeMetier" placeholder="Parle ici de tes id√©es de m√©tiers, de domaines, ou de ce que tu aimerais retrouver dans ton futur travail."></textarea>
        <div class="chip-row">
          <div class="chip" onclick="addSuggestion('ideeMetier','Je n‚Äôai pas encore d‚Äôid√©e de m√©tier.')"><span>‚ùì</span>Pas d‚Äôid√©e</div>
          <div class="chip" onclick="addSuggestion('ideeMetier','Je voudrais un m√©tier de bureau (administration, gestion, accueil).')"><span>üíº</span>M√©tier de bureau</div>
          <div class="chip" onclick="addSuggestion('ideeMetier','J‚Äôaimerais un m√©tier avec du contact avec les gens.')"><span>üó£Ô∏è</span>Contact avec les gens</div>
          <div class="chip" onclick="addSuggestion('ideeMetier','Je veux un m√©tier o√π je peux utiliser les langues (anglais, espagnol).')"><span>üåê</span>Langues</div>
          <div class="chip" onclick="addSuggestion('ideeMetier','Je veux un m√©tier stable avec un salaire r√©gulier.')"><span>üí∂</span>S√©curit√© / salaire</div>
        </div>
      </div>

      <div class="field-block">
        <label for="attentesLycee">6. Ce que j‚Äôattends de mes ann√©es en lyc√©e professionnel</label>
        <small>Comp√©tences √† acqu√©rir, exp√©riences, dipl√¥mes, projets personnels‚Ä¶</small>
        <textarea id="attentesLycee" placeholder="Que souhaites-tu que cette formation t‚Äôapporte (scolaire, professionnel, personnel) ?"></textarea>
        <div class="chip-row">
          <div class="chip" onclick="addSuggestion('attentesLycee','Obtenir mon baccalaur√©at professionnel.')"><span>üéì</span>Avoir le bac pro</div>
          <div class="chip" onclick="addSuggestion('attentesLycee','Trouver un stage et un travail plus tard.')"><span>üè≠</span>Stage / travail</div>
          <div class="chip" onclick="addSuggestion('attentesLycee','Gagner en autonomie pour ma vie d‚Äôadulte.')"><span>üßë‚Äçüíº</span>Autonomie</div>
          <div class="chip" onclick="addSuggestion('attentesLycee','Pr√©parer une poursuite d‚Äô√©tudes apr√®s le bac pro.')"><span>üìö</span>Poursuite d‚Äô√©tudes</div>
        </div>
      </div>

      <div class="field-block">
        <label for="forcesEleve">7. Mes forces et mes besoins</label>
        <small>Trois choses que tu sais d√©j√† bien faire et trois choses que tu voudrais am√©liorer.</small>
        <textarea id="forcesEleve" placeholder="Exemples : je suis ponctuel, je parle facilement aux gens, j‚Äôai du mal √† m‚Äôorganiser, j‚Äôai besoin d‚Äôaide pour me concentrer, etc."></textarea>
        <div class="chip-row">
          <div class="chip" onclick="addSuggestion('forcesEleve','Je suis s√©rieux(se) en cours.')"><span>‚úÖ</span>S√©rieux(se)</div>
          <div class="chip" onclick="addSuggestion('forcesEleve','Je respecte les r√®gles du lyc√©e.')"><span>üìè</span>Respect des r√®gles</div>
          <div class="chip" onclick="addSuggestion('forcesEleve','J‚Äôai du mal √† me concentrer longtemps.')"><span>üß©</span>Concentration difficile</div>
          <div class="chip" onclick="addSuggestion('forcesEleve','J‚Äôai besoin d‚Äôaide pour comprendre les consignes √©crites.')"><span>üìÑ</span>Aide pour consignes</div>
          <div class="chip" onclick="addSuggestion('forcesEleve','Je communique mieux √† l‚Äô√©crit qu‚Äô√† l‚Äôoral.')"><span>‚úçÔ∏è</span>Mieux √† l‚Äô√©crit</div>
          <div class="chip" onclick="addSuggestion('forcesEleve','Je suis √† l‚Äôaise avec le num√©rique et l‚Äôordinateur.')"><span>üíª</span>√Ä l‚Äôaise en num√©rique</div>
        </div>
      </div>

      <div class="field-block">
        <label>8. Ce qui est le plus important pour moi cette ann√©e</label>
        <small>Classe les priorit√©s en d√©pla√ßant les boutons ‚ñ≤ ‚ñº.</small>
        <ul class="priority-list" id="priorityList">
          <li class="priority-item">
            <span class="priority-label">R√©ussir mon ann√©e et aller en premi√®re</span>
            <span class="priority-buttons">
              <button type="button" onclick="movePriority(this,-1)">‚ñ≤</button>
              <button type="button" onclick="movePriority(this,1)">‚ñº</button>
            </span>
          </li>
          <li class="priority-item">
            <span class="priority-label">Trouver un bon stage</span>
            <span class="priority-buttons">
              <button type="button" onclick="movePriority(this,-1)">‚ñ≤</button>
              <button type="button" onclick="movePriority(this,1)">‚ñº</button>
            </span>
          </li>
          <li class="priority-item">
            <span class="priority-label">√ätre bien dans ma classe (ambiance, amis)</span>
            <span class="priority-buttons">
              <button type="button" onclick="movePriority(this,-1)">‚ñ≤</button>
              <button type="button" onclick="movePriority(this,1)">‚ñº</button>
            </span>
          </li>
          <li class="priority-item">
            <span class="priority-label">G√©rer mon stress et mes √©motions</span>
            <span class="priority-buttons">
              <button type="button" onclick="movePriority(this,-1)">‚ñ≤</button>
              <button type="button" onclick="movePriority(this,1)">‚ñº</button>
            </span>
          </li>
          <li class="priority-item">
            <span class="priority-label">Pr√©parer l‚Äôapr√®s-bac (formation, travail)</span>
            <span class="priority-buttons">
              <button type="button" onclick="movePriority(this,-1)">‚ñ≤</button>
              <button type="button" onclick="movePriority(this,1)">‚ñº</button>
            </span>
          </li>
        </ul>
      </div>
    </section>

    <!-- PARTIE 1 ‚Äì PAGE 3 : STAGE + CPS + DRAG/DROP -->
    <div class="page-break-part"></div>

    <section class="section" id="partieParcoursCPS">
      <div class="section-header">
        <div class="section-title">
          <span class="icon">üå±</span>
          Partie 1 ‚Äì Stages et comp√©tences psychosociales
        </div>
      </div>
      <div class="section-subtitle">
        Comment je me projette dans mon stage et dans ma fa√ßon d‚Äô√™tre au lyc√©e.
      </div>

      <div class="field-block">
        <label>9. Mon stage (PFMP)</label>
        <small>Coche ce qui est vrai pour toi.</small>
        <div class="chip-row">
          <div class="chip" onclick="toggleChipCheckbox(this,'stageTrouveOui')"><span>‚úÖ</span>Stage trouv√©</div>
          <div class="chip" onclick="toggleChipCheckbox(this,'stageTrouveNon')"><span>‚ùå</span>Je n‚Äôai pas encore de stage</div>
        </div>
        <div style="display:none">
          <input type="checkbox" id="stageTrouveOui">
          <input type="checkbox" id="stageTrouveNon">
        </div>
        <textarea id="texteStage" placeholder="√âcris ici o√π tu as trouv√© ton stage ou dans quel type d‚Äôentreprise tu aimerais aller (bureau, magasin, mairie, association, etc.)."></textarea>
      </div>

      <div class="field-block">
        <label for="ressentiStage">10. Comment je me sens par rapport √† ce stage</label>
        <small>√âcris ce que tu ressens (h√¢te, peur, stress, curiosit√©...).</small>
        <textarea id="ressentiStage" placeholder="Parle ici de ce que tu ressens par rapport √† ton futur stage : ce qui te donne envie, ce qui t‚Äôinqui√®te, ce que tu esp√®res apprendre."></textarea>
      </div>

      <div class="field-block">
        <label>11. Mes comp√©tences psychosociales au lyc√©e</label>
        <small>D√©place les √©tiquettes dans la colonne qui te correspond le plus.</small>
        <div class="dnd-container">
          <div class="dnd-pool" id="dndPool">
            <div class="dnd-title">√âtiquettes √† placer</div>
            <div class="dnd-item" draggable="true">Je sais demander de l‚Äôaide quand j‚Äôen ai besoin.</div>
            <div class="dnd-item" draggable="true">J‚Äôessaie de rester calme quand je suis en d√©saccord.</div>
            <div class="dnd-item" draggable="true">Je respecte le travail des autres.</div>
            <div class="dnd-item" draggable="true">J‚Äôai du mal √† g√©rer mon stress avant une √©valuation.</div>
            <div class="dnd-item" draggable="true">Je prends le temps d‚Äô√©couter mes camarades.</div>
            <div class="dnd-item" draggable="true">Je baisse vite les bras quand c‚Äôest trop difficile.</div>
          </div>
          <div class="dnd-dropzone" data-zone="deja">
            <div class="dnd-title">Ce que je fais d√©j√† souvent</div>
          </div>
          <div class="dnd-dropzone" data-zone="developper">
            <div class="dnd-title">Ce que je voudrais d√©velopper</div>
          </div>
        </div>
      </div>

      <div class="field-block">
        <label for="commentCPS">12. Comment je peux progresser</label>
        <small>Choisis une comp√©tence psychosociale que tu veux travailler (ex : g√©rer mon stress, demander de l‚Äôaide, √©couter les autres) et explique comment tu pourrais progresser.</small>
        <textarea id="commentCPS" placeholder="√âcris ici une petite id√©e de changement que tu pourrais essayer (en classe, en stage, avec les adultes du lyc√©e, avec les camarades...)."></textarea>
      </div>
    </section>

    <!-- PARTIE 2 ‚Äì PAGE 4 (inchang√©e sauf num√©ros adapt√©s) -->
    <div class="page-break"></div>

    <section class="section" id="questionsSection">
      <div class="section-header">
        <div class="section-title">
          <span class="icon">üß†</span>
          Partie 2 ‚Äì Je pr√©pare la rencontre avec la psychologue
        </div>
      </div>
      <div class="section-subtitle">
        R√©fl√©chir √† son m√©tier, √† son parcours et pr√©parer des questions √† lui poser.
      </div>

      <div class="chip-row">
        <div class="chip"><span>üë©‚Äçüè´</span> Parcours d‚Äôadulte</div>
        <div class="chip"><span>ü©∫</span> M√©tiers de l‚Äôaide</div>
        <div class="chip"><span>üîÑ</span> D√©crochage et orientation</div>
      </div>

      <div class="field-block">
        <label for="metierPsychologue">13. Ce que je crois savoir sur ce m√©tier</label>
        <small>Que fait, selon toi, une psychologue qui travaille avec des adolescents d√©crocheurs ?</small>
        <textarea id="metierPsychologue" placeholder="Note ici ce que tu penses du m√©tier de psychologue (avec des jeunes, dans le cadre du d√©crochage scolaire, etc.)."></textarea>
      </div>

      <div class="field-block">
        <label for="attentesRencontre">14. Ce que j‚Äôaimerais comprendre pendant cette rencontre</label>
        <small>Par exemple : son parcours, ses √©tudes, ses difficult√©s, ses choix, ses doutes‚Ä¶</small>
        <textarea id="attentesRencontre" placeholder="Qu‚Äôaimerais-tu comprendre ou apprendre gr√¢ce √† cette rencontre ?"></textarea>
      </div>

      <div class="field-block">
        <label>15. Id√©es de questions possibles</label>
        <small>Tu peux t‚Äôen inspirer pour √©crire tes propres questions personnelles plus bas.</small>
        <div class="questions-list">
          <div class="question-suggestion">
            - Comment avez-vous trouv√© votre voie ?<br />
            - Est-ce que vous saviez d√©j√† ce que vous vouliez faire en seconde ?
          </div>
          <div class="question-suggestion">
            - Qu‚Äôest-ce qui est le plus difficile dans votre travail ?<br />
            - Qu‚Äôest-ce qui vous motive √† continuer ?
          </div>
          <div class="question-suggestion">
            - Comment r√©agissez-vous face aux √©checs ou aux doutes des jeunes ?<br />
            - Qu‚Äôest-ce qui aide vraiment un √©l√®ve en difficult√© selon vous ?
          </div>
          <div class="question-suggestion">
            - Avez-vous d√©j√† chang√© de projet en cours de route ?<br />
            - Quel conseil donneriez-vous √† un √©l√®ve qui ne sait pas quoi faire plus tard ?
          </div>
        </div>
      </div>

      <div class="field-block">
        <label for="questionsParcours">16. Mes questions sur son parcours scolaire et professionnel</label>
        <small>Questions sur ses √©tudes, ses choix, ses changements de direction‚Ä¶</small>
        <textarea id="questionsParcours" placeholder="√âcris ici les questions que tu aimerais lui poser sur son parcours scolaire et professionnel."></textarea>
      </div>

      <div class="field-block">
        <label for="questionsMetier">17. Mes questions sur son m√©tier au quotidien</label>
        <small>Questions sur ce qu‚Äôelle fait tous les jours, ses missions, ses responsabilit√©s, ses contraintes.</small>
        <textarea id="questionsMetier" placeholder="√âcris ici les questions que tu aimerais lui poser sur son m√©tier au quotidien."></textarea>
      </div>

      <div class="field-block">
        <label for="questionsJeunes">18. Mes questions sur les jeunes, le d√©crochage, l‚Äôorientation</label>
        <small>Questions sur la mani√®re dont elle accompagne les jeunes, leurs difficult√©s, leurs r√©ussites.</small>
        <textarea id="questionsJeunes" placeholder="√âcris ici les questions que tu aimerais lui poser sur les jeunes et l‚Äôorientation."></textarea>
      </div>

      <div class="field-block">
        <label for="questionLibre">19. Une question libre (facultatif)</label>
        <small>Une question plus personnelle ou plus originale que tu pourrais oser poser.</small>
        <textarea id="questionLibre" placeholder="Si tu as une question plus personnelle ou plus originale, tu peux l‚Äô√©crire ici."></textarea>
      </div>
    </section>

    <div class="actions-bar">
      <button class="btn btn-print" type="button" onclick="imprimerQuestions()">
        üñ®Ô∏è Imprimer mes questions pour la prochaine rencontre
      </button>
      <button class="btn btn-save" type="button" onclick="enregistrerMonTravail()">
        üíæ Enregistrer mon travail
      </button>
    </div>

    <footer>
      Soutien au parcours ‚Äì Seconde Bac Pro AGOrA ‚Äì Pr√©paration rencontre psychologue
    </footer>
  </div>

  <script>
    const sliderClarte = document.getElementById('clarteProjet');
    const valeurClarte = document.getElementById('valeurClarte');
    if (sliderClarte && valeurClarte) {
      sliderClarte.addEventListener('input', function () {
        valeurClarte.textContent = this.value + ' / 10';
      });
    }

    const sliderHumeur = document.getElementById('humeurJour');
    const valeurHumeur = document.getElementById('valeurHumeur');
    if (sliderHumeur && valeurHumeur) {
      sliderHumeur.addEventListener('input', function () {
        valeurHumeur.textContent = this.value + ' / 10';
      });
    }

    const sliderJournee = document.getElementById('journeeLycee');
    const valeurJournee = document.getElementById('valeurJournee');
    if (sliderJournee && valeurJournee) {
      sliderJournee.addEventListener('input', function () {
        valeurJournee.textContent = this.value + ' / 10';
      });
    }

    function autoResizeTextarea(el) {
      el.style.height = 'auto';
      el.style.height = (el.scrollHeight + 2) + 'px';
    }

    document.querySelectorAll('textarea').forEach(function (ta) {
      autoResizeTextarea(ta);
      ta.addEventListener('input', function () {
        autoResizeTextarea(ta);
      });
    });

    function toggleAide(id) {
      const box = document.getElementById(id);
      if (!box) return;
      box.style.display = box.style.display === 'block' ? 'none' : 'block';
    }

    function addSuggestion(textareaId, text) {
      const ta = document.getElementById(textareaId);
      if (!ta) return;
      if (ta.value && !ta.value.endsWith(' ')) {
        ta.value += ' ';
      }
      ta.value += text + ' ';
      autoResizeTextarea(ta);
      ta.focus();
    }

    function movePriority(button, direction) {
      const li = button.closest('.priority-item');
      const ul = li.parentElement;
      const items = Array.from(ul.children);
      const index = items.indexOf(li);
      const newIndex = index + direction;
      if (newIndex < 0 || newIndex >= items.length) return;
      ul.removeChild(li);
      if (direction === -1) {
        ul.insertBefore(li, items[newIndex]);
      } else {
        if (items[newIndex].nextSibling) {
          ul.insertBefore(li, items[newIndex].nextSibling);
        } else {
          ul.appendChild(li);
        }
      }
    }

    function toggleChipCheckbox(chip, inputId) {
      const input = document.getElementById(inputId);
      if (!input) return;
      const newVal = !input.checked;
      input.checked = newVal;
      chip.style.background = newVal ? '#cfe8ff' : '#eef3ff';
    }

    let draggedItem = null;

    function initDragAndDrop() {
      document.querySelectorAll('.dnd-item').forEach(function (item) {
        item.addEventListener('dragstart', function (e) {
          draggedItem = item;
          e.dataTransfer.effectAllowed = 'move';
        });
      });

      document.querySelectorAll('.dnd-dropzone, .dnd-pool').forEach(function (zone) {
        zone.addEventListener('dragover', function (e) {
          e.preventDefault();
          zone.classList.add('over');
        });
        zone.addEventListener('dragleave', function () {
          zone.classList.remove('over');
        });
        zone.addEventListener('drop', function (e) {
          e.preventDefault();
          if (draggedItem) {
            zone.appendChild(draggedItem);
          }
          zone.classList.remove('over');
        });
      });
    }

    document.addEventListener('DOMContentLoaded', initDragAndDrop);

    function enregistrerMonTravail() {
      const prenom = (document.getElementById('prenomEleve')?.value || '').trim();
      if (!prenom) {
        alert("Merci de renseigner ton pr√©nom avant d‚Äôenregistrer ton travail.");
        return;
      }

      const NOM_BASE = 'soutien_parcours_psy';
      const inputs = document.querySelectorAll('input[type="text"], input[type="date"], input[type="range"], input[type="checkbox"]');
      const textareas = document.querySelectorAll('textarea');

      inputs.forEach(function (input) {
        if (input.type === 'checkbox') {
          if (input.checked) {
            input.setAttribute('checked', 'checked');
          } else {
            input.removeAttribute('checked');
          }
        } else {
          input.setAttribute('value', input.value);
        }
      });
      textareas.forEach(function (ta) {
        ta.textContent = ta.value;
      });

      const htmlComplet = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
      const blob = new Blob([htmlComplet], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = NOM_BASE + '_' + prenom + '.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      alert("Ton travail a √©t√© pr√©par√© dans un fichier : " + NOM_BASE + '_' + prenom + '.html');
    }

    function escapeHtml(text) {
      return (text || '')
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\n/g, "<br>");
    }

    function imprimerQuestions() {
      const prenom = (document.getElementById('prenomEleve')?.value || '').trim();
      const nom = (document.getElementById('nomEleve')?.value || '').trim();

      const qParcours = document.getElementById('questionsParcours')?.value || '';
      const qMetier = document.getElementById('questionsMetier')?.value || '';
      const qJeunes = document.getElementById('questionsJeunes')?.value || '';
      const qLibre = document.getElementById('questionLibre')?.value || '';

      const fenetre = window.open('', '_blank');
      fenetre.document.write(
        '<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8" />' +
        '<title>Mes questions pour la rencontre</title>' +
        '<style>' +
        'body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;margin:20px;color:#222;}' +
        'h1{font-size:1.4rem;margin-bottom:8px;color:#2449a3;}' +
        'h2{font-size:1.1rem;margin-top:16px;margin-bottom:4px;color:#333;}' +
        'p.meta{font-size:0.9rem;margin-bottom:12px;}' +
        'p{font-size:0.9rem;}' +
        '</style></head><body>' +
        '<h1>Mes questions pour la rencontre avec la psychologue</h1>' +
        '<p class="meta"><strong>Pr√©nom :</strong> ' + escapeHtml(prenom) +
        ' &nbsp; <strong>Nom :</strong> ' + escapeHtml(nom) +
        ' &nbsp; <strong>Classe :</strong> Seconde Bac Pro AGOrA</p>'
      );

      if (qParcours.trim()) {
        fenetre.document.write('<h2>Questions sur son parcours scolaire et professionnel</h2><p>' + escapeHtml(qParcours) + '</p>');
      }
      if (qMetier.trim()) {
        fenetre.document.write('<h2>Questions sur son m√©tier au quotidien</h2><p>' + escapeHtml(qMetier) + '</p>');
      }
      if (qJeunes.trim()) {
        fenetre.document.write('<h2>Questions sur les jeunes, le d√©crochage, l‚Äôorientation</h2><p>' + escapeHtml(qJeunes) + '</p>');
      }
      if (qLibre.trim()) {
        fenetre.document.write('<h2>Question libre</h2><p>' + escapeHtml(qLibre) + '</p>');
      }

      fenetre.document.write('</body></html>');
      fenetre.document.close();
      fenetre.focus();
      fenetre.print();
    }
  </script>
</body>
</html>