<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S√©ance 6 : Vis ma vie de Recruteur - Bac Pro AGOrA</title>
  <style>
    * { box-sizing: border-box; }
    html { font-size: 16px; }
    body {
      margin: 0; padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: #f0f2f5; color: #1e293b;
      line-height: 1.6;
      overflow-x: hidden;
    }
    .container {
      max-width: 1000px;
      margin: 18px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
      border: 1px solid #cbd5e1;
    }

    /* Contr√¥le taille texte */
    .font-controls{
      position: sticky;
      top: 10px;
      z-index: 50;
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding: 10px 12px 0;
      background: transparent;
    }
    .font-btn{
      border: none;
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 800;
      cursor: pointer;
      background: #1e3a8a;
      color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.10);
      touch-action: manipulation;
    }
    .font-btn:active{ transform: translateY(1px); }

    header {
      background: linear-gradient(135deg, #1e3a8a, #172554);
      color: white;
      padding: 22px 22px;
    }
    header h1 { margin: 0; font-size: 1.6rem; }
    header p { margin: 6px 0 0; opacity: 0.85; font-size: 0.95rem; }

    .progress-bar {
      display: flex;
      justify-content: space-between;
      padding: 16px 18px;
      background: #f8fafc;
      border-bottom: 1px solid #e2e8f0;
      gap: 12px;
      flex-wrap: wrap;
    }
    .step {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      color: #94a3b8;
      font-weight: 700;
      flex: 1 1 180px;
      min-width: 180px;
    }
    .step-circle {
      width: 28px; height: 28px;
      border-radius: 50%;
      background: #e2e8f0;
      color: #64748b;
      display: flex; align-items: center; justify-content: center;
      flex: 0 0 auto;
    }
    .step.active { color: #1e3a8a; }
    .step.active .step-circle { background: #1e3a8a; color: white; }
    .step.completed .step-circle { background: #22c55e; color: white; }

    .page-content {
      padding: 22px 22px;
      display: none;
      animation: fadeIn 0.4s ease;
    }
    .page-content.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    h2 {
      color: #1e3a8a;
      font-size: 1.35rem;
      border-bottom: 2px solid #cbd5e1;
      padding-bottom: 10px;
      margin-top: 0;
    }
    h3 { color: #334155; font-size: 1.1rem; margin-top: 22px; margin-bottom: 12px; font-weight: 800; }

    .scenario-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 14px;
    }
    .candidate-card {
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 0;
      overflow: hidden;
      transition: 0.2s;
      background: #fff;
      min-width: 0;
    }
    .candidate-card:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
    .card-header {
      padding: 10px 14px;
      background: #f1f5f9;
      border-bottom: 1px solid #e2e8f0;
      font-weight: 800;
      color: #475569;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .card-body { padding: 14px; font-size: 0.95rem; }

    .fake-mail {
      background: #fff;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 0.88rem;
      color: #333;
      overflow-wrap: anywhere;
      word-break: break-word;
    }
    .mail-label { color: #888; font-size: 0.78rem; display: block; margin-bottom: 2px; }

    .fake-cv {
      border-left: 3px solid #ccc;
      padding-left: 10px;
      margin-top: 5px;
      overflow-wrap: anywhere;
    }
    .cv-section { margin-bottom: 8px; }
    .cv-title {
      text-transform: uppercase;
      font-size: 0.78rem;
      color: #1e3a8a;
      font-weight: 900;
      border-bottom: 1px solid #eee;
      margin-bottom: 3px;
    }

    .decision-btn {
      width: 100%;
      padding: 12px;
      border: none;
      cursor: pointer;
      font-weight: 900;
      transition: 0.2s;
      margin-top: 10px;
      border-radius: 10px;
      touch-action: manipulation;
    }
    .btn-hire { background: #22c55e; color: white; }
    .btn-fire { background: #ef4444; color: white; }
    .btn-hire:hover { background: #16a34a; }
    .btn-fire:hover { background: #dc2626; }

    .feedback-box {
      margin-top: 16px;
      padding: 14px;
      border-radius: 10px;
      display: none;
      animation: fadeIn 0.3s;
      overflow-wrap: anywhere;
    }
    .feedback-good { background: #f0fdf4; border: 1px solid #bbf7d0; color: #166534; }
    .feedback-bad { background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; }

    textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #cbd5e1;
      border-radius: 10px;
      min-height: 90px;
      margin-top: 8px;
      font-family: inherit;
      font-size: 0.95rem;
      background: #f8fafc;
      resize: none;
      overflow-y: hidden;
    }
    textarea:focus {
      outline: none;
      border-color: #1e3a8a;
      background: #fff;
      box-shadow: 0 0 0 2px rgba(30,58,138,0.16);
    }

    .nav-buttons {
      padding: 16px 18px;
      background: #f8fafc;
      border-top: 1px solid #e2e8f0;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn {
      padding: 12px 18px;
      border-radius: 12px;
      font-weight: 900;
      cursor: pointer;
      border: none;
      font-size: 1rem;
      transition: 0.2s;
      touch-action: manipulation;
    }
    .btn-prev { background: #e2e8f0; color: #475569; }
    .btn-next { background: #1e3a8a; color: white; }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .hidden { display: none; }

    @media (max-width: 900px) {
      .container { margin: 14px 12px; }
      header { padding: 18px 16px; }
      .progress-bar { padding: 12px 14px; }
      .page-content { padding: 16px 14px; }
      .nav-buttons { padding: 14px 14px; }
      header h1 { font-size: 1.35rem; }
      h2 { font-size: 1.2rem; }
      .scenario-container { grid-template-columns: 1fr; }
    }
    @media (max-width: 520px) {
      .step { flex: 1 1 100%; min-width: 0; }
      .btn { width: 100%; }
      .nav-buttons > div { display: none; }
      .font-controls { justify-content: center; }
      header p { font-size: 0.92rem; }
    }

    @media print {
      body { background: #fff; }
      .nav-buttons, .font-controls { display: none !important; }
      .page-content { display: block !important; border-bottom: 1px dashed #ccc; padding-bottom: 20px; }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="font-controls" aria-label="Taille du texte">
    <button class="font-btn" type="button" onclick="changeSize(-1)">A-</button>
    <button class="font-btn" type="button" onclick="changeSize(1)">A+</button>
  </div>

  <header>
    <h1>S√©ance 6 : Vis ma vie de Recruteur üëî</h1>
    <p>Aujourd'hui, c'est TOI le patron. Tu as le budget, tu as le pouvoir. Qui embauches-tu ?</p>
  </header>

  <div class="progress-bar">
    <div class="step active" id="step1"><div class="step-circle">1</div><span>Mission</span></div>
    <div class="step" id="step2"><div class="step-circle">2</div><span>Le Mail</span></div>
    <div class="step" id="step3"><div class="step-circle">3</div><span>Le Dipl√¥me</span></div>
    <div class="step" id="step4"><div class="step-circle">4</div><span>Le Miroir</span></div>
  </div>

  <div class="page-content active" id="page1">
    <h2>Page 1 : Ta Mission de PDG</h2>
    <div style="background: #eff6ff; padding: 18px; border-radius: 10px; border-left: 5px solid #1e3a8a;">
      <p style="margin-top:0;"><strong>Le Sc√©nario :</strong> Tu es le patron d'une entreprise de logistique en pleine croissance. Tu as besoin d'un(e) assistant(e) de gestion pour g√©rer tes factures et l'accueil.</p>
      <p>‚ö†Ô∏è <strong>Le Probl√®me :</strong> Tu es d√©bord√©. Tu n'as pas le temps de former quelqu'un √† z√©ro. Tu veux quelqu'un de <strong>fiable</strong>, <strong>s√©rieux</strong> et <strong>comp√©tent</strong> tout de suite.</p>
      <p style="margin-bottom:0;">Tu as re√ßu plusieurs candidatures. √Ä toi de trier.</p>
    </div>

    <h3>Quelle est ta priorit√© absolue en tant que patron ?</h3>
    <textarea id="p1_priorite" placeholder="Ex: Je veux quelqu'un qui arrive √† l'heure / qui ne fait pas de fautes / en qui je peux avoir confiance..."></textarea>
  </div>

  <div class="page-content" id="page2">
    <h2>Page 2 : Le premier contact (Mail) üìß</h2>
    <p>Tu re√ßois deux e-mails pour une demande de stage. Tu ne peux en convoquer qu'un seul en entretien. Lequel choisis-tu ?</p>

    <div class="scenario-container">
      <div class="candidate-card">
        <div class="card-header">Candidat A <span style="color:#ef4444;">(Re√ßu √† 23h45)</span></div>
        <div class="card-body">
          <div class="fake-mail">
            <span class="mail-label">De :</span> bogoss_du_69@gmail.com<br>
            <span class="mail-label">Objet :</span> stage<br>
            <span class="mail-label">Message :</span><br>
            slt jcherche un stage pr l ecole vs en prener ? merci de me rep vite c urgen.
          </div>
          <button class="decision-btn btn-hire" type="button" onclick="chooseMail('A')">Je le convoque</button>
        </div>
      </div>

      <div class="candidate-card">
        <div class="card-header">Candidat B <span style="color:#16a34a;">(Re√ßu √† 09h15)</span></div>
        <div class="card-body">
          <div class="fake-mail">
            <span class="mail-label">De :</span> karim.benzema.pro@gmail.com<br>
            <span class="mail-label">Objet :</span> Candidature stage - Bac Pro AGOrA<br>
            <span class="mail-label">Message :</span><br>
            Bonjour,<br>Actuellement en Seconde Bac Pro AGOrA, je cherche un stage de gestion. Vous trouverez mon CV en pi√®ce jointe.<br>Cordialement.
          </div>
          <button class="decision-btn btn-hire" type="button" onclick="chooseMail('B')">Je le convoque</button>
        </div>
      </div>
    </div>

    <div id="feedbackMail" class="feedback-box"></div>
    <input type="hidden" id="choix_mail">

    <label style="margin-top:18px; display:block;">Pourquoi as-tu fait ce choix ? (Mets-toi √† la place du patron)</label>
    <textarea id="p2_justification" placeholder="Le candidat A me fait peur parce que... Le candidat B me rassure parce que..."></textarea>
  </div>

  <div class="page-content" id="page3">
    <h2>Page 3 : Le CV (Dipl√¥me & Comp√©tences) üìú</h2>
    <p>Deux nouveaux candidats postulent pour un emploi apr√®s l'√©cole. Le poste demande de la rigueur. Lequel embauches-tu ?</p>

    <div class="scenario-container">
      <div class="candidate-card">
        <div class="card-header">Candidat X - Le D√©brouillard</div>
        <div class="card-body">
          <div class="fake-cv">
            <div class="cv-section">
              <div class="cv-title">Formation</div>
              ‚Ä¢ Niveau 3√®me (Arr√™t √©cole √† 16 ans)<br>
              ‚Ä¢ Pas de dipl√¥me
            </div>
            <div class="cv-section">
              <div class="cv-title">Exp√©rience</div>
              ‚Ä¢ Petits jobs au noir<br>
              ‚Ä¢ Je sais utiliser Word un peu
            </div>
          </div>
          <p style="font-size:0.88rem; color:#666;"><em>Note du patron : A l'air sympa mais a arr√™t√© l'√©cole t√¥t. Est-ce qu'il va rester ou abandonner s'il y a une difficult√© ?</em></p>
          <button class="decision-btn btn-hire" type="button" onclick="chooseCV('X')">Je l'embauche</button>
        </div>
      </div>

      <div class="candidate-card">
        <div class="card-header">Candidat Y - Le Dipl√¥m√© AGOrA</div>
        <div class="card-body">
          <div class="fake-cv">
            <div class="cv-section">
              <div class="cv-title">Formation</div>
              ‚Ä¢ <strong>BAC PRO AGOrA (Obtenu)</strong><br>
              ‚Ä¢ Mention Assez Bien
            </div>
            <div class="cv-section">
              <div class="cv-title">Exp√©rience</div>
              ‚Ä¢ 22 semaines de stage (PFMP) certifi√©es<br>
              ‚Ä¢ Ma√Ætrise PGI / Excel / Accueil
            </div>
          </div>
          <p style="font-size:0.88rem; color:#666;"><em>Note du patron : Il a prouv√© qu'il peut tenir 3 ans de formation. Il a les bases pro. C'est une valeur s√ªre.</em></p>
          <button class="decision-btn btn-hire" type="button" onclick="chooseCV('Y')">Je l'embauche</button>
        </div>
      </div>
    </div>

    <div id="feedbackCV" class="feedback-box"></div>
    <input type="hidden" id="choix_cv">

    <label style="margin-top:18px; display:block;">En tant que patron, pourquoi le Dipl√¥me te rassure-t-il ?</label>
    <textarea id="p3_justification" placeholder="Le dipl√¥me me prouve que..."></textarea>
  </div>

  <div class="page-content" id="page4">
    <h2>Page 4 : Le Miroir ü™û</h2>
    <div style="background: #f1f5f9; padding: 18px; border-radius: 10px; border: 1px solid #cbd5e1;">
      <p>Maintenant, imagine que <strong>TU</strong> es le patron.</p>
      <p>Et imagine que <strong>TOI-M√äME</strong> (l'√©l√®ve que tu es aujourd'hui) postule dans ton entreprise.</p>
    </div>

    <h3>1. L'Auto-Entretien</h3>
    <div style="margin-bottom:10px;">
      <label>Avec ton comportement actuel (retards, bavardages, s√©rieux), t'embaucherais-tu ?</label><br>
      <select id="auto_embauche" style="padding:10px; margin-top:8px; border-radius:10px; width:100%; max-width:520px;">
        <option value="">Choisis une r√©ponse...</option>
        <option value="Oui">Oui, je suis un bon √©l√©ment.</option>
        <option value="Moyen">Peut-√™tre, mais j'ai des progr√®s √† faire.</option>
        <option value="Non">Honn√™tement, non, je ferais peur au patron.</option>
      </select>
    </div>

    <h3>2. Ce que je dois changer pour devenir le Candidat Id√©al</h3>
    <label>Quels sont les 2 points que tu dois am√©liorer pour que ton CV et ton attitude rassurent un futur employeur ?</label>
    <textarea id="p4_engagement" placeholder="Ex: Je dois soigner mon orthographe / Je dois arr√™ter d'√™tre absent / Je dois obtenir ce Bac..."></textarea>

    <div style="margin-top: 24px; padding: 15px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 10px;">
      <h4 style="margin:0; color:#166534;">üéâ Fin de la simulation !</h4>
      <p style="margin:5px 0 0; font-size:0.95rem;">Tu as pens√© comme un patron. Garde cet √©tat d'esprit pour ta propre scolarit√©.</p>
    </div>
  </div>

  <div class="nav-buttons">
    <button class="btn btn-prev" id="prevBtn" type="button" onclick="changePage(-1)" disabled>Pr√©c√©dent</button>
    <div style="flex-grow:1;"></div>
    <button class="btn btn-next" id="nextBtn" type="button" onclick="changePage(1)">Suivant</button>
  </div>
</div>

<script>
  let currentSize = 16;

  function changeSize(delta) {
    currentSize += delta;
    if (currentSize < 12) currentSize = 12;
    if (currentSize > 24) currentSize = 24;
    document.documentElement.style.fontSize = currentSize + 'px';
    const h1 = document.querySelector('h1');
    if(h1) h1.style.fontSize = (2 * (currentSize/16)) + 'rem';
    document.querySelectorAll('textarea').forEach(ta => autoResize(ta));
  }

  function autoResize(el) {
    el.style.height = 'auto';
    el.style.height = (el.scrollHeight + 2) + 'px';
  }
  document.querySelectorAll('textarea').forEach(ta => {
    autoResize(ta);
    ta.addEventListener('input', () => autoResize(ta));
  });

  let currentPage = 1;
  const totalPages = 4;

  function changePage(direction) {
    document.getElementById(`page${currentPage}`).classList.remove('active');
    document.getElementById(`step${currentPage}`).classList.remove('active');
    if(direction > 0) document.getElementById(`step${currentPage}`).classList.add('completed');

    currentPage += direction;

    document.getElementById(`page${currentPage}`).classList.add('active');
    document.getElementById(`step${currentPage}`).classList.add('active');

    document.getElementById('prevBtn').disabled = (currentPage === 1);

    if (currentPage === totalPages) {
      document.getElementById('nextBtn').classList.add('hidden');
    } else {
      document.getElementById('nextBtn').classList.remove('hidden');
      document.getElementById('nextBtn').innerText = "Suivant";
    }
    window.scrollTo(0, 0);
  }

  function chooseMail(choice) {
    const feedback = document.getElementById('feedbackMail');
    const input = document.getElementById('choix_mail');
    feedback.style.display = 'block';
    input.value = "Candidat " + choice;

    if (choice === 'A') {
      feedback.className = 'feedback-box feedback-bad';
      feedback.innerHTML = "<strong>‚ùå A√Øe ! Mauvais choix.</strong><br>En tant que patron, ce mail te fait peur. L'adresse est pas pro, il y a des fautes, le ton est familier. Tu risques d'avoir des probl√®mes avec ce stagiaire.";
    } else {
      feedback.className = 'feedback-box feedback-good';
      feedback.innerHTML = "<strong>‚úÖ Excellent choix !</strong><br>Ce candidat est rassurant. Il connait les codes : objet clair, politesse, pi√®ce jointe. C'est un gain de temps pour toi.";
    }
  }

  function chooseCV(choice) {
    const feedback = document.getElementById('feedbackCV');
    const input = document.getElementById('choix_cv');
    feedback.style.display = 'block';
    input.value = "Candidat " + choice;

    if (choice === 'X') {
      feedback.className = 'feedback-box feedback-bad';
      feedback.innerHTML = "<strong>‚ö†Ô∏è Choix risqu√©.</strong><br>Ce candidat est peut-√™tre gentil, mais sans dipl√¥me et sans exp√©rience valid√©e, tu prends un risque. Saura-t-il faire une facture ? Viendra-t-il tous les jours ?";
    } else {
      feedback.className = 'feedback-box feedback-good';
      feedback.innerHTML = "<strong>‚úÖ Le choix de la s√©curit√©.</strong><br>Le Bac Pro AGOrA est une GARANTIE pour toi. Tu sais qu'il a √©t√© form√© pendant 3 ans. Tu sais qu'il a fait des stages. Tu en as pour ton argent.";
    }
  }
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
  import { getFirestore, collection, addDoc, updateDoc, doc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAWdCMvOiAJln3eT9LIAQD3RWJUD0lQcLI",
    authDomain: "devoirs-pse.firebaseapp.com",
    projectId: "devoirs-pse",
    storageBucket: "devoirs-pse.appspot.com",
    messagingSenderId: "614730413904",
    appId: "1:614730413904:web:a5dd478af5de30f6bede55"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let currentDocId = null;
  let startTime = Date.now();

  function getIdentity() { return localStorage.getItem("cockpit_student_id"); }

  async function demarrerVisite() {
    try {
      let userCode = getIdentity() || "ANONYME";
      let userClass = localStorage.getItem("cockpit_student_class") || "VISITEUR";
      const pageName = document.title || window.location.pathname.split("/").pop();
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);

      const ref = await addDoc(collection(db, "statistiques_usage"), {
        page: pageName,
        userCode: userCode,
        classe: userClass,
        device: isMobile ? "Mobile" : "Desktop",
        action: "Consultation",
        duree: 0,
        timestamp: serverTimestamp(),
        date: new Date().toISOString()
      });

      currentDocId = ref.id;

      setInterval(async () => {
        if (currentDocId && document.visibilityState === 'visible') {
          try {
            await updateDoc(doc(db, "statistiques_usage", currentDocId), {
              duree: Math.floor((Date.now() - startTime) / 1000)
            });
          } catch (e) {}
        }
      }, 10000);

    } catch (e) { console.warn("Erreur Tracker", e); }
  }

  demarrerVisite();
</script>

</body>
</html>
