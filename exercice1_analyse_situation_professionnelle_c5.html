<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C.5 - Analyse Situation Professionnelle - Premi√®re Bac Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=OpenDyslexie&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        .competence-c1 { border-left: 5px solid #E74C3C; }
        .competence-c2 { border-left: 5px solid #3498DB; }
        .competence-c3 { border-left: 5px solid #2ECC71; }
        .competence-c4 { border-left: 5px solid #F39C12; }
        .competence-c5 { border-left: 5px solid #9B59B6; }
        .competence-c6 { border-left: 5px solid #1ABC9C; }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            padding: 25px;
            text-align: center;
        }

        .module-info h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .objectif {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .competences-travaillees {
            margin: 20px 0;
        }

        .competences-list {
            list-style: none;
            margin: 10px 0;
        }

        .competences-list li {
            background: rgba(255,255,255,0.1);
            margin: 8px 0;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #fff;
        }

        .niveau-cible {
            font-weight: 600;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
        }

        /* EXERCICE PRINCIPAL */
        .exercice-principal {
            padding: 30px;
        }

        .situation-contexte {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #ff6b8a;
        }

        .situation-contexte h3 {
            color: #d63384;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .situation-contexte h3::before {
            content: "üèóÔ∏è";
            margin-right: 10px;
            font-size: 1.5em;
        }

        .etape {
            margin-bottom: 40px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--primary-pse);
        }

        .etape h4 {
            color: var(--primary-pse);
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .instructions-interaction {
            background: linear-gradient(135deg, #ffd89b, #19547b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #ff6b8a;
        }

        .instructions-interaction h5 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .instructions-interaction h5::before {
            content: "üì±";
            margin-right: 10px;
        }

        /* M√©thode ITAMaMi */
        .itamami-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .composante {
            background: #ffffff;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 150px;
        }

        .composante:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .composante.individu { border-color: #E74C3C; }
        .composante.tache { border-color: #3498DB; }
        .composante.activite { border-color: #2ECC71; }
        .composante.materiel { border-color: #F39C12; }
        .composante.milieu { border-color: #9B59B6; }

        .composante h5 {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: var(--dark-pse);
        }

        .composante.individu h5::before { content: "üë§ "; }
        .composante.tache h5::before { content: "üìã "; }
        .composante.activite h5::before { content: "‚öôÔ∏è "; }
        .composante.materiel h5::before { content: "üõ†Ô∏è "; }
        .composante.milieu h5::before { content: "üè≠ "; }

        .elements-clickables {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .element-clickable {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 0.9em;
            font-weight: 500;
        }

        .element-clickable:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .element-clickable.selected {
            border: 3px solid #FFA726;
            background: linear-gradient(135deg, #FFA726, #FF7043);
            transform: scale(1.1);
        }

        .element-clickable.used {
            background: #6c757d;
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .zone-depot {
            background: #e8f5e8;
            border: 3px dashed #28a745;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            color: #155724;
        }

        .zone-depot.filled {
            background: #d4edda;
            border-style: solid;
            font-weight: bold;
        }

        /* Schema processus */
        .schema-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 2px solid var(--primary-pse);
        }

        .schema-elements {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .schema-element {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .schema-element.operateur { border-color: #17a2b8; background: #e7f3ff; }
        .schema-element.danger { border-color: #dc3545; background: #ffe7e7; }
        .schema-element.situation { border-color: #fd7e14; background: #fff3e0; }
        .schema-element.evenement { border-color: #6610f2; background: #f3e7ff; }
        .schema-element.dommage { border-color: #e83e8c; background: #ffe7f3; }

        .bouton-validation {
            background: linear-gradient(135deg, var(--success-pse), #27ae60);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        .bouton-validation:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .feedback-card {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .correction-explicite {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .sigles-explicatifs {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #2196f3;
        }

        .sigles-explicatifs h4 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .sigle {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .sigle strong {
            color: #1976d2;
        }

        .progress-competences {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .competence-progress {
            margin: 10px 0;
        }

        .competence-bar {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }

        .competence-fill {
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .competence-fill.c1 { background: #E74C3C; }
        .competence-fill.c2 { background: #3498DB; }

        .rgpd-notice {
            background: #f8f9fa;
            color: #6c757d;
            text-align: center;
            padding: 15px;
            font-size: 0.9em;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .container { border-radius: 10px; }
            .cadre-pedagogique { padding: 20px; }
            .exercice-principal { padding: 20px; }
            .itamami-container { grid-template-columns: 1fr; }
            .elements-clickables { flex-direction: column; }
        }

        @media (min-width: 1024px) {
            .container { max-width: 1000px; }
        }
    </style>
</head>
<body>
    <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
    <div class="container">
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module C.5 : L'analyse des risques professionnels</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> S'approprier des outils m√©thodologiques d'analyse des risques en vue d'analyser et d'√©valuer un risque et de proposer des mesures hi√©rarchis√©es de pr√©vention
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Premi√®re
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            <div class="situation-contexte">
                <h3>Contexte professionnel - Garage automobile</h3>
                <p><strong>üéØ Mission :</strong> Vous √™tes stagiaire chez <em>AutoExpert</em>, un garage sp√©cialis√© dans la r√©paration automobile. Votre tuteur vous demande d'analyser l'activit√© de travail de Karim, m√©canicien automobile, afin d'identifier les risques professionnels.</p>
                
                <div style="background: rgba(255,255,255,0.3); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <h4>üìã Situation observ√©e :</h4>
                    <p>Karim, 28 ans, effectue la vidange d'un v√©hicule. Il utilise un pont √©l√©vateur pour sur√©lever la voiture, puis se glisse sous le v√©hicule avec ses outils : cl√© √† cliquet, bac de r√©cup√©ration d'huile, entonnoir. L'atelier est bruyant (compresseurs, outils pneumatiques) et l'√©clairage sous le v√©hicule est limit√©. Karim porte une combinaison de travail mais n'a pas de gants de protection.</p>
                </div>
            </div>

            <div class="sigles-explicatifs">
                <h4>üìö M√©thodes d'analyse - Sigles explicites</h4>
                <div class="sigle">
                    <strong>ITAMaMi</strong> = <strong>I</strong>ndividu + <strong>TA</strong>che + <strong>A</strong>ctivit√© + <strong>MA</strong>t√©riel + <strong>MI</strong>lieu
                    <br><em>M√©thode d'observation et d'analyse globale des situations de travail utilis√©e en pr√©vention</em>
                </div>
                <div class="sigle">
                    <strong>DUERP</strong> = <strong>D</strong>ocument <strong>U</strong>nique d'<strong>√â</strong>valuation des <strong>R</strong>isques <strong>P</strong>rofessionnels
                    <br><em>Document obligatoire dans toute entreprise recensant les risques identifi√©s</em>
                </div>
            </div>

            <!-- √âTAPE 1 : Analyse ITAMaMi -->
            <div class="etape" id="etape1">
                <h4>üìã √âTAPE 1 - Analyse des composantes avec la m√©thode ITAMaMi</h4>
                
                <div class="instructions-interaction">
                    <h5>üì± COMMENT MANIPULER :</h5>
                    <p><strong>1.</strong> Cliquez sur un √©l√©ment pour le s√©lectionner (il s'illumine)</p>
                    <p><strong>2.</strong> Cliquez sur la composante appropri√©e de la m√©thode ITAMaMi</p>
                    <p><strong>3.</strong> L'√©l√©ment se place automatiquement !</p>
                </div>

                <div class="elements-clickables">
                    <div class="element-clickable" data-element="Karim, 28 ans, m√©canicien automobile">Karim, 28 ans, m√©canicien automobile</div>
                    <div class="element-clickable" data-element="Effectuer la vidange d'un v√©hicule">Effectuer la vidange d'un v√©hicule</div>
                    <div class="element-clickable" data-element="Sur√©lever le v√©hicule puis se glisser dessous">Sur√©lever le v√©hicule puis se glisser dessous</div>
                    <div class="element-clickable" data-element="Pont √©l√©vateur, cl√© √† cliquet, bac r√©cup√©ration">Pont √©l√©vateur, cl√© √† cliquet, bac r√©cup√©ration</div>
                    <div class="element-clickable" data-element="Atelier automobile bruyant, √©clairage limit√©">Atelier automobile bruyant, √©clairage limit√©</div>
                </div>

                <div class="itamami-container">
                    <div class="composante individu" data-composante="individu">
                        <h5>Individu (I)</h5>
                        <p><em>Qui ? (personne r√©alisant la t√¢che)</em></p>
                        <div class="zone-depot" id="depot-individu">Cliquez pour d√©poser un √©l√©ment</div>
                    </div>

                    <div class="composante tache" data-composante="tache">
                        <h5>T√¢che (TA)</h5>
                        <p><em>Quoi faire ? (travail demand√©)</em></p>
                        <div class="zone-depot" id="depot-tache">Cliquez pour d√©poser un √©l√©ment</div>
                    </div>

                    <div class="composante activite" data-composante="activite">
                        <h5>Activit√© (A)</h5>
                        <p><em>Comment ? (mani√®re d'effectuer)</em></p>
                        <div class="zone-depot" id="depot-activite">Cliquez pour d√©poser un √©l√©ment</div>
                    </div>

                    <div class="composante materiel" data-composante="materiel">
                        <h5>Mat√©riel (MA)</h5>
                        <p><em>Avec quoi ? (outils, √©quipements)</em></p>
                        <div class="zone-depot" id="depot-materiel">Cliquez pour d√©poser un √©l√©ment</div>
                    </div>

                    <div class="composante milieu" data-composante="milieu">
                        <h5>Milieu (MI)</h5>
                        <p><em>O√π ? Quand ? (environnement de travail)</em></p>
                        <div class="zone-depot" id="depot-milieu">Cliquez pour d√©poser un √©l√©ment</div>
                    </div>
                </div>

                <button class="bouton-validation" onclick="validerEtape1()">‚úÖ Valider l'analyse ITAMaMi</button>
            </div>

            <!-- √âTAPE 2 : Processus d'apparition du dommage -->
            <div class="etape" id="etape2" style="display: none;">
                <h4>‚ö†Ô∏è √âTAPE 2 - Identification du processus d'apparition du dommage</h4>
                
                <p><strong>Danger identifi√© :</strong> Huile chaude lors de la vidange</p>

                <div class="elements-clickables">
                    <div class="element-clickable" data-schema="Karim">Karim</div>
                    <div class="element-clickable" data-schema="Huile moteur chaude">Huile moteur chaude</div>
                    <div class="element-clickable" data-schema="Karim effectue la vidange sous le v√©hicule">Karim effectue la vidange sous le v√©hicule</div>
                    <div class="element-clickable" data-schema="Contact de l'huile chaude avec la peau">Contact de l'huile chaude avec la peau</div>
                    <div class="element-clickable" data-schema="Br√ªlure cutan√©e">Br√ªlure cutan√©e</div>
                </div>

                <div class="schema-container">
                    <h5>üîÑ Sch√©ma du processus d'apparition du dommage</h5>
                    <div class="schema-elements">
                        <div class="schema-element operateur" data-schema-type="operateur">
                            <strong>Op√©rateur</strong>
                            <div class="zone-depot" id="depot-operateur">Qui est expos√© ?</div>
                        </div>

                        <div class="schema-element danger" data-schema-type="danger">
                            <strong>Danger</strong>
                            <div class="zone-depot" id="depot-danger">Cause capable de provoquer une l√©sion</div>
                        </div>

                        <div class="schema-element situation" data-schema-type="situation">
                            <strong>Situation dangereuse</strong>
                            <div class="zone-depot" id="depot-situation">Op√©rateur expos√© au danger</div>
                        </div>

                        <div class="schema-element evenement" data-schema-type="evenement">
                            <strong>√âv√©nement d√©clencheur</strong>
                            <div class="zone-depot" id="depot-evenement">√âv√©nement qui provoque le dommage</div>
                        </div>

                        <div class="schema-element dommage" data-schema-type="dommage">
                            <strong>Dommage</strong>
                            <div class="zone-depot" id="depot-dommage">L√©sion ou atteinte √† la sant√©</div>
                        </div>
                    </div>
                </div>

                <button class="bouton-validation" onclick="validerEtape2()">‚úÖ Valider l'analyse du processus</button>
            </div>

            <!-- Zone de feedback et progression -->
            <div id="feedback-zone" style="display: none;"></div>

            <div class="progress-competences">
                <h4>üìä Progression des comp√©tences</h4>
                <div class="competence-progress">
                    <label>C1 - Traiter une information</label>
                    <div class="competence-bar">
                        <div class="competence-fill c1" id="progress-c1" style="width: 0%"></div>
                    </div>
                </div>
                <div class="competence-progress">
                    <label>C2 - Appliquer une d√©marche d'analyse</label>
                    <div class="competence-bar">
                        <div class="competence-fill c2" id="progress-c2" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- FOOTER RGPD -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <script>
        let elementSelectionne = null;
        let scoreEtape1 = 0;
        let scoreEtape2 = 0;
        const totalQuestions = 10;

        // Donn√©es de correction
        const correctionsITAMaMi = {
            'individu': 'Karim, 28 ans, m√©canicien automobile',
            'tache': 'Effectuer la vidange d'un v√©hicule',
            'activite': 'Sur√©lever le v√©hicule puis se glisser dessous',
            'materiel': 'Pont √©l√©vateur, cl√© √† cliquet, bac r√©cup√©ration',
            'milieu': 'Atelier automobile bruyant, √©clairage limit√©'
        };

        const correctionsSchema = {
            'operateur': 'Karim',
            'danger': 'Huile moteur chaude',
            'situation': 'Karim effectue la vidange sous le v√©hicule',
            'evenement': 'Contact de l'huile chaude avec la peau',
            'dommage': 'Br√ªlure cutan√©e'
        };

        // Syst√®me clic-s√©lection
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion des √©l√©ments cliquables
            document.querySelectorAll('.element-clickable').forEach(element => {
                element.addEventListener('click', function() {
                    selectionnerElement(this);
                });
            });

            // Gestion des zones de d√©p√¥t
            document.querySelectorAll('.zone-depot').forEach(zone => {
                zone.addEventListener('click', function() {
                    placerElement(this);
                });
            });
        });

        function selectionnerElement(element) {
            if (element.classList.contains('used')) return;
            
            // D√©s√©lectionner l'ancien
            if (elementSelectionne) {
                elementSelectionne.classList.remove('selected');
            }
            
            // S√©lectionner le nouveau
            elementSelectionne = element;
            element.classList.add('selected');
        }

        function placerElement(zoneDestination) {
            if (!elementSelectionne || elementSelectionne.classList.contains('used')) return;

            const texte = elementSelectionne.dataset.element || elementSelectionne.dataset.schema;
            zoneDestination.textContent = texte;
            zoneDestination.classList.add('filled');
            
            elementSelectionne.classList.add('used');
            elementSelectionne.classList.remove('selected');
            elementSelectionne = null;
        }

        function validerEtape1() {
            let bonnesReponses = 0;
            let erreurs = [];

            // V√©rification ITAMaMi
            Object.keys(correctionsITAMaMi).forEach(composante => {
                const depot = document.getElementById(`depot-${composante}`);
                const reponseUtilisateur = depot.textContent;
                const bonneReponse = correctionsITAMaMi[composante];

                if (reponseUtilisateur === bonneReponse) {
                    bonnesReponses++;
                    depot.style.borderColor = '#28a745';
                } else {
                    depot.style.borderColor = '#dc3545';
                    erreurs.push({
                        composante: composante,
                        utilisateur: reponseUtilisateur,
                        correct: bonneReponse
                    });
                }
            });

            scoreEtape1 = bonnesReponses;
            updateProgress('c1', bonnesReponses * 20);

            // Affichage des corrections
            afficherCorrections1(erreurs, bonnesReponses);
            
            if (bonnesReponses >= 3) {
                setTimeout(() => {
                    document.getElementById('etape2').style.display = 'block';
                    document.getElementById('etape2').scrollIntoView({ behavior: 'smooth' });
                }, 2000);
            }
        }

        function afficherCorrections1(erreurs, bonnesReponses) {
            const feedbackZone = document.getElementById('feedback-zone');
            feedbackZone.style.display = 'block';

            let feedbackHTML = `
                <div class="feedback-card">
                    <h3>üìä R√©sultats de l'analyse ITAMaMi</h3>
                    <p><strong>Score :</strong> ${bonnesReponses}/5 composantes correctement identifi√©es</p>
                    
                    <div class="feedback-explanation">
                        <h4>üí° Comp√©tence C1 - Traiter une information</h4>
                        <p>Vous devez extraire les informations pertinentes du contexte professionnel pour alimenter chaque composante de la m√©thode ITAMaMi :</p>
                        <ul>
                            <li><strong>Individu (I) :</strong> Identifier la personne qui r√©alise la t√¢che</li>
                            <li><strong>T√¢che (TA) :</strong> D√©finir le travail demand√© par l'entreprise</li>
                            <li><strong>Activit√© (A) :</strong> D√©crire comment la t√¢che est r√©ellement effectu√©e</li>
                            <li><strong>Mat√©riel (MA) :</strong> Lister les outils et √©quipements utilis√©s</li>
                            <li><strong>Milieu (MI) :</strong> Caract√©riser l'environnement de travail</li>
                        </ul>
                    </div>
            `;

            if (erreurs.length > 0) {
                feedbackHTML += `<div class="correction-explicite">
                    <h4>‚ùå CORRECTIONS</h4>`;
                
                erreurs.forEach(erreur => {
                    feedbackHTML += `
                        <div style="margin: 15px 0; padding: 15px; background: #fff; border-radius: 8px;">
                            <strong>‚úÖ ${erreur.composante.toUpperCase()} - LA BONNE R√âPONSE √âTAIT :</strong><br>
                            <span style="color: #28a745; font-weight: bold;">${erreur.correct}</span><br>
                            <div style="background: #fff3cd; padding: 10px; margin-top: 10px; border-radius: 5px;">
                                <strong>üí° EXPLICATION :</strong> ${getExplicationITAMaMi(erreur.composante)}
                            </div>
                        </div>
                    `;
                });

                feedbackHTML += `</div>`;
            }

            feedbackHTML += `</div>`;
            feedbackZone.innerHTML = feedbackHTML;
        }

        function getExplicationITAMaMi(composante) {
            const explications = {
                'individu': "L'individu correspond √† l'op√©rateur, c'est-√†-dire la personne qui effectue le travail. Ici, c'est Karim qui est clairement identifi√© avec son √¢ge et sa fonction.",
                'tache': "La t√¢che est le travail prescrit par l'entreprise, ce qui est demand√© au salari√©. La vidange est l'objectif principal de l'intervention.",
                'activite': "L'activit√© d√©crit la mani√®re r√©elle dont la t√¢che est effectu√©e. Karim doit d'abord sur√©lever le v√©hicule puis se positionner dessous.",
                'materiel': "Le mat√©riel englobe tous les outils et √©quipements n√©cessaires : pont √©l√©vateur, cl√© √† cliquet, bac de r√©cup√©ration d'huile.",
                'milieu': "Le milieu caract√©rise l'environnement de travail : l'atelier avec ses nuisances sonores et les conditions d'√©clairage."
            };
            return explications[composante] || '';
        }

        function validerEtape2() {
            let bonnesReponses = 0;
            let erreurs = [];

            Object.keys(correctionsSchema).forEach(type => {
                const depot = document.getElementById(`depot-${type}`);
                const reponseUtilisateur = depot.textContent;
                const bonneReponse = correctionsSchema[type];

                if (reponseUtilisateur === bonneReponse) {
                    bonnesReponses++;
                    depot.style.borderColor = '#28a745';
                } else {
                    depot.style.borderColor = '#dc3545';
                    erreurs.push({
                        type: type,
                        utilisateur: reponseUtilisateur,
                        correct: bonneReponse
                    });
                }
            });

            scoreEtape2 = bonnesReponses;
            updateProgress('c2', (scoreEtape1 + bonnesReponses) * 10);

            afficherCorrections2(erreurs, bonnesReponses);
        }

        function afficherCorrections2(erreurs, bonnesReponses) {
            const feedbackZone = document.getElementById('feedback-zone');
            
            let feedbackHTML = feedbackZone.innerHTML + `
                <div class="feedback-card">
                    <h3>üìä R√©sultats de l'analyse du processus</h3>
                    <p><strong>Score :</strong> ${bonnesReponses}/5 √©l√©ments correctement plac√©s</p>
                    
                    <div class="feedback-explanation">
                        <h4>üí° Comp√©tence C2 - Appliquer une d√©marche d'analyse</h4>
                        <p>Le processus d'apparition du dommage suit une logique s√©quentielle :</p>
                        <ol>
                            <li><strong>Op√©rateur :</strong> La personne expos√©e au risque</li>
                            <li><strong>Danger :</strong> La cause capable de provoquer une l√©sion</li>
                            <li><strong>Situation dangereuse :</strong> L'exposition de l'op√©rateur au danger</li>
                            <li><strong>√âv√©nement d√©clencheur :</strong> L'√©v√©nement qui d√©clenche le dommage</li>
                            <li><strong>Dommage :</strong> La l√©sion ou l'atteinte √† la sant√© qui en r√©sulte</li>
                        </ol>
                    </div>
            `;

            if (erreurs.length > 0) {
                feedbackHTML += `<div class="correction-explicite">
                    <h4>‚ùå CORRECTIONS</h4>`;
                
                erreurs.forEach(erreur => {
                    feedbackHTML += `
                        <div style="margin: 15px 0; padding: 15px; background: #fff; border-radius: 8px;">
                            <strong>‚úÖ ${erreur.type.toUpperCase()} - LA BONNE R√âPONSE √âTAIT :</strong><br>
                            <span style="color: #28a745; font-weight: bold;">${erreur.correct}</span><br>
                            <div style="background: #fff3cd; padding: 10px; margin-top: 10px; border-radius: 5px;">
                                <strong>üí° EXPLICATION :</strong> ${getExplicationSchema(erreur.type)}
                            </div>
                        </div>
                    `;
                });

                feedbackHTML += `</div>`;
            }

            const scoreTotal = scoreEtape1 + scoreEtape2;
            feedbackHTML += `
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-top: 20px;">
                        <h4>üéØ Bilan global de l'exercice</h4>
                        <p><strong>Score total :</strong> ${scoreTotal}/10</p>
                        <p><strong>Comp√©tences d√©velopp√©es :</strong></p>
                        <ul>
                            <li>C1 - Traitement de l'information contextuelle : ${Math.round(scoreEtape1/5*100)}%</li>
                            <li>C2 - Application de d√©marche d'analyse des risques : ${Math.round(scoreEtape2/5*100)}%</li>
                        </ul>
                        
                        <div style="background: #fff; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 5px solid #2196f3;">
                            <h5>üéØ Astuce BAC</h5>
                            <p>√Ä l'√©preuve, vous devrez ma√Ætriser ces √©tapes d'analyse pour toute situation professionnelle. L'ITAMaMi et le processus d'apparition du dommage sont des outils m√©thodologiques fondamentaux en PSE.</p>
                        </div>
                    </div>
                </div>
            `;

            feedbackZone.innerHTML = feedbackHTML;
            feedbackZone.scrollIntoView({ behavior: 'smooth' });
        }

        function getExplicationSchema(type) {
            const explications = {
                'operateur': "L'op√©rateur est la personne directement expos√©e au risque. Dans notre cas, c'est Karim qui manipule l'huile chaude.",
                'danger': "Le danger est la cause physique capable de provoquer une l√©sion. L'huile moteur chaude peut causer des br√ªlures.",
                'situation': "La situation dangereuse d√©crit le moment o√π l'op√©rateur est expos√© au danger. Karim sous le v√©hicule est expos√© √† l'huile chaude.",
                'evenement': "L'√©v√©nement d√©clencheur est ce qui transforme le risque en accident r√©el. Le contact direct d√©clenche la br√ªlure.",
                'dommage': "Le dommage est la cons√©quence sur la sant√©. Une br√ªlure cutan√©e est la l√©sion r√©sultant du contact avec l'huile chaude."
            };
            return explications[type] || '';
        }

        function updateProgress(competence, percentage) {
            const progressBar = document.getElementById(`progress-${competence}`);
            progressBar.style.width = Math.min(percentage, 100) + '%';
        }
    </script>
</body>
</html>