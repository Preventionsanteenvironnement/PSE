<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A.R.G.U.S. - PROTOCOLE DE CONFINEMENT</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        
        :root {
            --bg-color: #050505;
            --term-green: #0f0;
            --term-red: #f00;
            --term-dim: #004400;
        }

        body {
            background-color: var(--bg-color);
            color: var(--term-green);
            font-family: 'Share Tech Mono', monospace;
            margin: 0;
            padding: 15px;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Scanline effect */
        body::before {
            content: " ";
            display: block;
            position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 3;
        }

        h1 {
            text-align: center;
            border-bottom: 2px solid var(--term-green);
            padding-bottom: 10px;
            letter-spacing: 2px;
            text-shadow: 0 0 5px var(--term-green);
        }

        .glitch { animation: glitch 1s linear infinite; }
        @keyframes glitch {
            2%, 64% { transform: translate(2px,0) skew(0deg); }
            4%, 60% { transform: translate(-2px,0) skew(0deg); }
            62% { transform: translate(0,0) skew(5deg); }
        }

        .terminal-box {
            border: 1px solid var(--term-green);
            padding: 20px;
            margin-bottom: 20px;
            background: rgba(0, 255, 0, 0.05);
            box-shadow: inset 0 0 10px var(--term-dim);
            display: none; /* Masqué par défaut */
        }

        .active-terminal { display: block; animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .story { color: #aaa; margin-bottom: 20px; font-size: 1.1em; }
        .sys-msg { color: var(--term-red); font-weight: bold; margin-top: 10px; text-shadow: 0 0 3px var(--term-red); }

        label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            padding: 8px;
            border: 1px dashed transparent;
        }
        label:hover { border-color: var(--term-green); background: rgba(0,255,0,0.1); }
        input[type="radio"], input[type="checkbox"] { margin-right: 10px; accent-color: var(--term-green); }

        button {
            background: transparent;
            color: var(--term-green);
            border: 2px solid var(--term-green);
            padding: 10px 20px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.2em;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            text-transform: uppercase;
            transition: all 0.2s;
        }
        button:hover { background: var(--term-green); color: var(--bg-color); box-shadow: 0 0 15px var(--term-green); }
        button:disabled { border-color: var(--term-dim); color: var(--term-dim); cursor: not-allowed; }

        .progress-bar { width: 100%; height: 10px; border: 1px solid var(--term-green); margin-bottom: 20px; }
        .progress-fill { height: 100%; background: var(--term-green); width: 0%; transition: width 0.5s; }

        .input-code {
            background: transparent; border: none; border-bottom: 2px solid var(--term-green);
            color: var(--term-green); font-family: 'Share Tech Mono', monospace; font-size: 1.5em;
            width: 100px; text-align: center; margin: 10px 0; outline: none;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 class="glitch">A.R.G.U.S. SYSTEM // VERROUILLAGE ACTIF</h1>
    
    <div class="progress-bar"><div class="progress-fill" id="p-bar"></div></div>
    <div id="status-text" style="text-align:center; margin-bottom: 20px;">STATUT : CONFINEMENT D'URGENCE. 4 TERMINAUX HORS-LIGNE.</div>

    <div id="intro" class="terminal-box active-terminal">
        <div class="story">
            > CONNEXION ÉTABLIE...<br>
            > IDENTIFIANT : Stagiaire_Niveau_1<br>
            > LIEU : Dépôt 42 (Logistique & Maintenance)<br><br>
            Alerte générale ! Plusieurs accidents graves viennent de se produire simultanément. 
            L'Intelligence Artificielle de sécurité, A.R.G.U.S., a paniqué et verrouillé toutes les portes coupe-feu. 
            Tes collègues sont piégés.<br><br>
            Pour reprendre le contrôle et lever la quarantaine, tu dois pirater les 4 terminaux du bâtiment en prouvant à A.R.G.U.S. que tu maîtrises les protocoles de Santé et Sécurité au Travail. 
            Une erreur, et l'alarme s'intensifie.
        </div>
        <button onclick="startHack()">[ INITIATER LE PIRATAGE ]</button>
    </div>

    <div id="term1" class="terminal-box">
        <h2 style="margin-top:0;">> TERMINAL 1 : L'INFIRMERIE</h2>
        <div class="story">
            Deux victimes sont enfermées ici. Le système médical a mélangé leurs dossiers. 
            Tu dois assigner le bon diagnostic réglementaire à l'accident d'Anna (écrasement du pied par une palette) pour déverrouiller la porte.
            </div>
        <p>IDENTIFIER LA CATÉGORIE DE L'ÉVÉNEMENT D'ANNA :</p>
        <label><input type="radio" name="t1" value="MP"> MALADIE PROFESSIONNELLE (Issue d'une exposition chronique prolongée)</label>
        <label><input type="radio" name="t1" value="AT"> ACCIDENT DU TRAVAIL (Action soudaine entraînant une lésion immédiate)</label>
        
        <div id="err1" class="sys-msg"></div>
        <button onclick="checkT1()">[ VALIDER DIAGNOSTIC ]</button>
    </div>

    <div id="term2" class="terminal-box">
        <h2 style="margin-top:0;">> TERMINAL 2 : BUREAU DE DIRECTION</h2>
        <div class="story">
            La porte de l'infirmerie est ouverte ! Mais le réseau principal est bloqué. 
            Tu es dans le bureau du patron. L'ordinateur de sécurité exige une authentification basée sur le Code du Travail.
            Vérifie ces 3 affirmations. Coche UNIQUEMENT les affirmations VRAIES pour générer la clé d'accès.
            </div>
        
        <label><input type="checkbox" id="c1"> L'employeur est le seul responsable de la sécurité. Le salarié n'a aucune obligation de faire attention.</label>
        <label><input type="checkbox" id="c2"> Le Droit de Retrait permet de quitter son poste face à un danger grave et imminent sans être sanctionné.</label>
        <label><input type="checkbox" id="c3"> Un jeune de moins de 18 ans a le droit de réaliser des travaux dangereux (produits toxiques, hauteur) sans aucune dérogation.</label>
        
        <div id="err2" class="sys-msg"></div>
        <button onclick="checkT2()">[ GÉNÉRER CLÉ D'ACCÈS ]</button>
    </div>

    <div id="term3" class="terminal-box">
        <h2 style="margin-top:0;">> TERMINAL 3 : COMMUNICATIONS</h2>
        <div class="story">
            Tu as accès aux serveurs ! Il faut maintenant envoyer le rapport d'accident de tes collègues pour déclencher les secours officiels de la Caisse Primaire d'Assurance Maladie (CPAM).<br>
            Les câbles de la chronologie ont été coupés. Choisis la procédure dans l'ordre EXACT.
            </div>
        
        <select id="t3_select" style="background:#000; color:#0f0; padding:10px; width:100%; border:1px solid #0f0; font-family:'Share Tech Mono';">
            <option value="0">-- SÉLECTIONNER LA SÉQUENCE --</option>
            <option value="A">1. Déclarer à la CPAM (48h) / 2. Prévenir le patron / 3. Aller au médecin</option>
            <option value="B">1. Aller au médecin / 2. Informer le patron (24h) / 3. Le patron déclare à la CPAM (48h)</option>
            <option value="C">1. Informer le patron (24h) / 2. La CPAM paye / 3. Aller au médecin</option>
        </select>
        
        <div id="err3" class="sys-msg"></div>
        <button onclick="checkT3()">[ TRANSMETTRE DONNÉES ]</button>
    </div>

    <div id="term4" class="terminal-box">
        <h2 style="margin-top:0;">> TERMINAL 4 : OVERRIDE FINAL</h2>
        <div class="story">
            Le signal est passé. A.R.G.U.S. s'apprête à déverrouiller le sas principal. 
            Il exige un dernier mot de passe : l'intitulé financier exact qui remplacera le salaire de tes collègues blessés pendant leurs semaines d'arrêt de travail.
            </div>
        
        <p>> PRESTATIONS EN ESPÈCES DE LA CPAM :</p>
        <input type="text" id="t4_input" class="input-code" style="width:100%; text-transform:uppercase;" placeholder="TAPER LE MOT DE PASSE (2 mots)...">
        
        <div id="err4" class="sys-msg"></div>
        <button onclick="checkT4()">[ DÉSACTIVER A.R.G.U.S. ]</button>
    </div>

    <div id="success" class="terminal-box" style="border-color: #fff; box-shadow: 0 0 20px #fff;">
        <h2 style="color: #fff; text-align: center;">> SYSTÈME RESTAURÉ <</h2>
        <div class="story" style="color: #fff; text-align: center;">
            <br>
            Toutes les portes sont déverrouillées. Les secours sont en route.<br>
            Tu as maîtrisé les protocoles AT/MP, les droits d'alerte, les délais et les indemnisations avec brio.<br><br>
            <strong>MISSION ACCOMPLIE.</strong>
        </div>
        <button onclick="location.reload()" style="border-color:#fff; color:#fff;">[ REDÉMARRER LA SIMULATION ]</button>
    </div>

</div>

<script>
    function setProgress(percent) {
        document.getElementById('p-bar').style.width = percent + '%';
    }

    function show(id) {
        document.querySelectorAll('.terminal-box').forEach(el => el.classList.remove('active-terminal'));
        document.getElementById(id).classList.add('active-terminal');
    }

    function startHack() {
        show('term1');
        setProgress(10);
        document.getElementById('status-text').innerText = "STATUT : TERMINAL 1 EN COURS DE PIRATAGE...";
    }

    function checkT1() {
        const val = document.querySelector('input[name="t1"]:checked');
        const err = document.getElementById('err1');
        if (!val) { err.innerText = "ERREUR : SÉLECTION REQUISE."; return; }
        
        if (val.value === "AT") {
            err.innerText = "ACCÈS AUTORISÉ. Diagnostic validé.";
            err.style.color = "var(--term-green)";
            setTimeout(() => { show('term2'); setProgress(35); document.getElementById('status-text').innerText = "STATUT : INFIRMERIE SÉCURISÉE. TERMINAL 2 REQUIS."; }, 1500);
        } else {
            err.style.color = "var(--term-red)";
            err.innerText = "A.R.G.U.S. >> ACCÈS REFUSÉ. L'écrasement est un événement soudain. Une Maladie Professionnelle exige une exposition prolongée sur des mois/années.";
        }
    }

    function checkT2() {
        const c1 = document.getElementById('c1').checked; // Faux (salarié a obligation de sécurité)
        const c2 = document.getElementById('c2').checked; // Vrai (Droit de retrait)
        const c3 = document.getElementById('c3').checked; // Faux (Travaux dangereux interdits)
        const err = document.getElementById('err2');

        if (!c1 && c2 && !c3) {
            err.innerText = "CLÉ ACCEPTÉE. Pare-feu désactivé.";
            err.style.color = "var(--term-green)";
            setTimeout(() => { show('term3'); setProgress(60); document.getElementById('status-text').innerText = "STATUT : BUREAU DÉVERROUILLÉ. CONNEXION RÉSEAU REQUISE."; }, 1500);
        } else {
            err.style.color = "var(--term-red)";
            err.innerText = "A.R.G.U.S. >> ERREUR DE CODE. Rappel : le salarié a l'obligation de protéger sa santé, et les mineurs n'ont pas le droit aux travaux dangereux sans dérogation.";
        }
    }

    function checkT3() {
        const val = document.getElementById('t3_select').value;
        const err = document.getElementById('err3');

        if (val === "B") {
            err.innerText = "SÉQUENCE DE CONNEXION ÉTABLIE.";
            err.style.color = "var(--term-green)";
            setTimeout(() => { show('term4'); setProgress(85); document.getElementById('status-text').innerText = "STATUT : SECOURS PRÉVENUS. OVERRIDE FINAL REQUIS."; }, 1500);
        } else {
            err.style.color = "var(--term-red)";
            err.innerText = "A.R.G.U.S. >> ÉCHEC TRANSMISSION. Procédure invalide. Le médecin constate d'abord la lésion, le salarié a 24h pour prévenir son patron, qui a 48h pour déclarer à la CPAM.";
        }
    }

    function checkT4() {
        let val = document.getElementById('t4_input').value.toLowerCase().trim();
        const err = document.getElementById('err4');
        
        // On accepte "indemnités journalières" ou "indemnites journalieres" ou "ij"
        val = val.replace(/é/g, "e").replace(/è/g, "e"); 

        if (val === "indemnites journalieres" || val === "ij" || val === "les indemnites journalieres") {
            err.innerText = "MOT DE PASSE VALIDE. ARRÊT DU SYSTÈME DE SÉCURITÉ.";
            err.style.color = "var(--term-green)";
            setTimeout(() => { show('success'); setProgress(100); document.getElementById('status-text').innerText = "STATUT : CONFINEMENT LEVÉ. RETOUR À LA NORMALE."; }, 1500);
        } else {
            err.style.color = "var(--term-red)";
            err.innerText = "A.R.G.U.S. >> MOT DE PASSE INCORRECT. Indice : La CPAM verse des Prestations en espèces qui compensent le salaire au jour le jour (2 mots).";
        }
    }
</script>

</body>
</html>