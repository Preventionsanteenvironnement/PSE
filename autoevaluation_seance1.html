<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quiz PSE : Mouvement & Muscle (Avec Rem√©diation)</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C63FF;
            --accent: #FF6584;
            --success: #00D2D3;
            --warning: #FDCB6E;
            --bg-color: #F3F5F9;
            --text-color: #2D3436;
            --card-bg: #ffffff;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, #8860D0 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.2);
            margin-bottom: 30px;
        }

        h1 { margin: 0; font-size: 1.6em; font-weight: 700; }
        .subtitle { font-size: 0.9em; opacity: 0.9; margin-top: 5px; }

        .container { max-width: 800px; margin: 0 auto; padding: 0 15px 60px; }

        /* QUESTIONS */
        .question-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 5px solid transparent;
            transition: transform 0.2s;
        }
        .question-card:hover { transform: translateY(-3px); }

        .q-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .q-num { font-weight: 700; color: var(--primary); }
        .comp-tag { background: #dfe6e9; color: #636e72; font-size: 0.7em; padding: 3px 8px; border-radius: 8px; font-weight: 600; }
        .q-text { font-weight: 600; margin-bottom: 15px; }

        .q-img { width: 100%; max-width: 300px; border-radius: 10px; display: block; margin: 10px auto; border: 2px solid #eee; }

        /* INPUTS */
        input, select, textarea {
            width: 100%; padding: 12px; border: 2px solid #dfe6e9; border-radius: 10px;
            font-family: inherit; background: #fafafa; margin-top: 5px;
        }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); background: white; }

        /* RADIOS */
        .radio-options label {
            display: block; padding: 10px; margin: 5px 0; background: #f8f9fa;
            border-radius: 10px; cursor: pointer; transition: 0.2s; border: 2px solid transparent;
        }
        .radio-options label:hover { background: #eef2ff; }
        .radio-options input { display: none; }
        .radio-options label.selected { border-color: var(--primary); background: #eef2ff; color: var(--primary); font-weight: 600; }

        /* BOUTONS */
        .btn-action {
            background: var(--accent); color: white; width: 100%; padding: 15px; border: none;
            border-radius: 50px; font-size: 1.1em; font-weight: 700; cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 101, 132, 0.4); margin-top: 20px;
            transition: transform 0.2s;
        }
        .btn-action:active { transform: scale(0.98); }
        .btn-next { background: var(--success); box-shadow: 0 10px 20px rgba(0, 210, 211, 0.4); display: none; margin-top: 15px; }

        /* FEEDBACK & REMEDIATION */
        .feedback { margin-top: 10px; padding: 10px; border-radius: 10px; font-size: 0.9em; display: none; font-weight: 500; }
        .correct { background: #dff9fb; color: #00a8ff; }
        .incorrect { background: #ffeaa7; color: #d63031; }

        .remediation-box {
            background: white; border-radius: 20px; padding: 25px; margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 5px solid var(--primary);
            display: none; animation: slideUp 0.5s ease;
        }
        .rem-title { font-weight: 800; color: var(--primary); font-size: 1.2em; margin-bottom: 15px; text-transform: uppercase; }
        
        .rem-section { margin-bottom: 15px; }
        .rem-section h4 { margin: 0 0 5px 0; color: #2D3436; font-size: 1em; }
        .rem-list { list-style: none; padding: 0; margin: 0; }
        .rem-list li { background: #ffeaa7; color: #d63031; padding: 8px 12px; border-radius: 8px; margin-bottom: 5px; font-size: 0.9em; display: flex; align-items: center; }
        .rem-list li::before { content: "‚ö†Ô∏è"; margin-right: 10px; }
        
        .comp-list li { background: #dfe6e9; color: #636e72; }
        .comp-list li.ok { background: #dff9fb; color: #00b894; }
        .comp-list li.ok::before { content: "‚úÖ"; }
        .comp-list li.nok { background: #ffeaa7; color: #d63031; }
        .comp-list li.nok::before { content: "‚ùå"; }

        .level-section { display: none; }
        .level-section.active { display: block; animation: fadeIn 0.5s; }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    </style>
</head>
<body>

<header>
    <h1>üß† Muscle & Mouvement</h1>
    <div class="subtitle">Auto-√©valuation avec Rem√©diation</div>
</header>

<div class="container">

    <div id="intro" class="question-card" style="text-align:center; display:block;">
        <h2>Pr√™t √† te tester ?</h2>
        <p>Valide le niveau 1 pour obtenir ton bilan de comp√©tences.</p>
        <button class="btn-action" onclick="startLevel(1)">Commencer Niveau 1</button>
    </div>

    <div id="level1" class="level-section">
        <div style="text-align:center; font-weight:800; color:var(--primary); margin-bottom:20px;">‚≠ê NIVEAU 1 : LES BASES</div>

        <div class="question-card" id="l1_q1" data-topic="Les organes du mouvement" data-comp="C1">
            <div class="q-header"><span class="q-num">1</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">Organe de COMMANDE (d√©cision) ?</div>
            <input type="text" placeholder="Le ..." class="ans-input">
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q2" data-topic="Les organes du mouvement" data-comp="C1">
            <div class="q-header"><span class="q-num">2</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">Organe MOTEUR (action) ?</div>
            <input type="text" placeholder="Le ..." class="ans-input">
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q3" data-topic="Trajet nerveux" data-comp="C1">
            <div class="q-header"><span class="q-num">3</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">Conducteur du message nerveux ?</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l1q3" value="A"> <span>Vaisseaux sanguins</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l1q3" value="B"> <span>Nerf moteur</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q4" data-topic="Trajet nerveux" data-comp="C2">
            <div class="q-header"><span class="q-num">4</span> <span class="comp-tag">C2</span></div>
            <div class="q-text">Ordre du trajet (1, 2, 3) :</div>
            <div>
                <input type="number" id="ord_nerf" style="width:50px"> Nerf 
                <input type="number" id="ord_cerveau" style="width:50px"> Cerveau 
                <input type="number" id="ord_muscle" style="width:50px"> Muscle
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q5" data-topic="Anatomie musculaire" data-comp="C1">
            <div class="q-header"><span class="q-num">5</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">Attache du muscle sur l'os ?</div>
            <input type="text" class="ans-input">
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q6" data-topic="Propri√©t√©s du muscle" data-comp="C1">
            <div class="q-header"><span class="q-num">6</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">D√©finition : CONTRACTILIT√â</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l1q6" value="A"> <span>Recevoir un signal</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l1q6" value="B"> <span>Se raccourcir</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q7" data-topic="Propri√©t√©s du muscle" data-comp="C1">
            <div class="q-header"><span class="q-num">7</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">D√©finition : EXCITABILIT√â</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l1q7" value="A"> <span>R√©pondre √† un signal</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l1q7" value="B"> <span>Rester dur</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q8" data-topic="Propri√©t√©s du muscle" data-comp="C1">
            <div class="q-header"><span class="q-num">8</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">D√©finition : √âLASTICIT√â</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l1q8" value="A"> <span>Se contracter fort</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l1q8" value="B"> <span>Reprendre sa longueur</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q9" data-topic="Propri√©t√©s du muscle" data-comp="C1">
            <div class="q-header"><span class="q-num">9</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">D√©finition : TONICIT√â</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l1q9" value="A"> <span>Tension au repos (posture)</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l1q9" value="B"> <span>Trembler</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l1_q10" data-topic="Anatomie musculaire" data-comp="C1">
            <div class="q-header"><span class="q-num">10</span> <span class="comp-tag">C1</span></div>
            <div class="q-text">Un faisceau est un paquet de...</div>
            <input type="text" placeholder="F..." class="ans-input">
            <div class="feedback"></div>
        </div>

        <button class="btn-action" onclick="validateLevel(1)" id="btn-val-1">Valider Niveau 1</button>
        
        <div id="rem-1" class="remediation-box">
            <div class="rem-title">üìä Bilan Niveau 1</div>
            <div id="score-1" style="font-size:1.5em; font-weight:bold; text-align:center; margin-bottom:20px;"></div>
            
            <div class="rem-section" id="rem-list-container-1">
                <h4>‚ö†Ô∏è √Ä r√©viser avant de continuer :</h4>
                <ul class="rem-list" id="rem-list-1"></ul>
            </div>

            <div class="rem-section">
                <h4>Comp√©tences :</h4>
                <ul class="rem-list comp-list" id="comp-list-1"></ul>
            </div>

            <button class="btn-action btn-next" onclick="goLevel2()" id="btn-go-2">Passer au Niveau Expert üöÄ</button>
        </div>
    </div>

    <div id="level2" class="level-section">
        <div style="text-align:center; font-weight:800; color:var(--accent); margin-bottom:20px;">üèÜ NIVEAU 2 : EXPERT</div>

        <div class="question-card" id="l2_q1" data-topic="Organisation du muscle" data-comp="C2">
            <div class="q-header"><span class="q-num">1</span> <span class="comp-tag">C2</span></div>
            <div class="q-text">Classe du plus GRAND au plus PETIT : Fibre, Muscle, Myofibrille, Faisceau</div>
            <input type="text" placeholder="Ex: ..., ..., ..., ..." class="ans-input">
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l2_q2" data-topic="Syst√®me nerveux" data-comp="C3">
            <div class="q-header"><span class="q-num">2</span> <span class="comp-tag">C3</span></div>
            <div class="q-text">R√¥le de la "moelle √©pini√®re" (Mvt Volontaire) ?</div>
            <textarea rows="2" placeholder="Elle sert √†..." class="ans-input"></textarea>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l2_q3" data-topic="Organisation du muscle" data-comp="C2">
            <div class="q-header"><span class="q-num">3</span> <span class="comp-tag">C2</span></div>
            <div class="q-text">Analyse sch√©ma : Quel √©l√©ment manque (cellule allong√©e) ?</div>
            <img src="schema_muscle.jpg" class="q-img" alt="Muscle">
            <input type="text" class="ans-input">
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l2_q4" data-topic="Propri√©t√©s du muscle" data-comp="C3">
            <div class="q-header"><span class="q-num">4</span> <span class="comp-tag">C3</span></div>
            <div class="q-text">Pourquoi le muscle est-il "stri√©" ?</div>
            <div class="radio-options">
                <label onclick="selRadio(this)"><input type="radio" name="l2q4" value="A"> <span>Car il est lisse</span></label>
                <label onclick="selRadio(this)"><input type="radio" name="l2q4" value="B"> <span>Bandes claires/sombres (rayures)</span></label>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-card" id="l2_q5" data-topic="Pr√©vention Sant√©" data-comp="C5">
            <div class="q-header"><span class="q-num">5</span> <span class="comp-tag">C5</span></div>
            <div class="q-text">Pourquoi s'√©chauffer (lien avec √©lasticit√©) ?</div>
            <textarea rows="2" class="ans-input"></textarea>
            <div class="feedback"></div>
        </div>

        <button class="btn-action" onclick="validateLevel(2)" id="btn-val-2">Valider Expert</button>

        <div id="rem-2" class="remediation-box">
            <div class="rem-title">üìä Bilan Expert</div>
            <div id="score-2" style="font-size:1.5em; font-weight:bold; text-align:center; margin-bottom:20px;"></div>
            
            <div class="rem-section" id="rem-list-container-2">
                <h4>‚ö†Ô∏è Points √† approfondir :</h4>
                <ul class="rem-list" id="rem-list-2"></ul>
            </div>

            <div class="rem-section">
                <h4>Comp√©tences :</h4>
                <ul class="rem-list comp-list" id="comp-list-2"></ul>
            </div>
            
            <div style="text-align:center; margin-top:20px; font-weight:bold; color:var(--success);">
                üéâ Module Termin√© !
            </div>
        </div>
    </div>

</div>

<script>
    // --- FONCTIONS BASIQUES ---
    function clean(str) { return (str || "").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim(); }
    
    function selRadio(lbl) {
        lbl.parentElement.querySelectorAll('label').forEach(l => l.classList.remove('selected'));
        lbl.classList.add('selected');
        lbl.querySelector('input').checked = true;
    }

    function showFeedback(id, ok, msg) {
        const el = document.querySelector(`#${id} .feedback`);
        el.style.display = 'block';
        el.className = ok ? "feedback correct" : "feedback incorrect";
        el.innerHTML = (ok ? "‚úÖ " : "‚ùå ") + msg;
    }

    function startLevel(n) {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('level'+n).classList.add('active');
    }

    function goLevel2() {
        document.getElementById('level2').classList.add('active');
        document.getElementById('level2').scrollIntoView({behavior:'smooth'});
    }

    // --- LOGIQUE REM√âDIATION ---
    // Cette fonction g√©n√®re le bilan √† la fin
    function generateRemediation(level, score, total, mistakes, compStats) {
        const box = document.getElementById('rem-'+level);
        const scoreDiv = document.getElementById('score-'+level);
        const listContainer = document.getElementById('rem-list-container-'+level);
        const list = document.getElementById('rem-list-'+level);
        const compList = document.getElementById('comp-list-'+level);

        box.style.display = 'block';
        scoreDiv.innerHTML = `Note : ${score} / ${total}`;
        document.getElementById('btn-val-'+level).style.display = 'none';

        // 1. Liste des sujets √† revoir
        list.innerHTML = "";
        if (mistakes.length > 0) {
            // Supprimer doublons
            const uniqueMistakes = [...new Set(mistakes)];
            uniqueMistakes.forEach(topic => {
                list.innerHTML += `<li>${topic}</li>`;
            });
            listContainer.style.display = 'block';
        } else {
            listContainer.style.display = 'none';
            scoreDiv.innerHTML += "<br><span style='color:#00b894; font-size:0.8em'>Aucune erreur ! Bravo !</span>";
        }

        // 2. Bilan Comp√©tences
        compList.innerHTML = "";
        for (const [comp, stats] of Object.entries(compStats)) {
            const percent = (stats.ok / stats.total) * 100;
            const statusClass = percent >= 50 ? 'ok' : 'nok';
            compList.innerHTML += `<li class="${statusClass}">${comp} : ${stats.ok}/${stats.total} r√©ussies</li>`;
        }

        if(level === 1) document.getElementById('btn-go-2').style.display = 'block';
    }

    // --- VALIDATION NIVEAU 1 ---
    function validateLevel(n) {
        let score = 0;
        let mistakes = []; // Liste des th√®mes rat√©s
        let compStats = {}; // Suivi comp√©tences { "C1": {ok:0, total:0} }

        // Fonction helper pour v√©rifier une question
        function check(id, condition, msg) {
            const el = document.getElementById(id);
            const topic = el.getAttribute('data-topic');
            const comp = el.getAttribute('data-comp');

            // Init Comp stats
            if(!compStats[comp]) compStats[comp] = {ok:0, total:0};
            compStats[comp].total++;

            if(condition) {
                score++;
                compStats[comp].ok++;
                showFeedback(id, true, msg);
            } else {
                mistakes.push(topic);
                showFeedback(id, false, msg);
            }
        }

        if(n === 1) {
            // Q1
            let a1 = clean(document.querySelector('#l1_q1 input').value);
            check('l1_q1', a1.includes('cerveau'), "Le Cerveau");

            // Q2
            let a2 = clean(document.querySelector('#l1_q2 input').value);
            check('l1_q2', a2.includes('muscle'), "Le Muscle");

            // Q3
            let a3 = document.querySelector('input[name="l1q3"]:checked')?.value;
            check('l1_q3', a3 === 'B', "Le nerf moteur");

            // Q4
            let o1 = document.getElementById('ord_nerf').value;
            let o2 = document.getElementById('ord_cerveau').value;
            let o3 = document.getElementById('ord_muscle').value;
            check('l1_q4', o2=='1' && o1=='2' && o3=='3', "1.Cerveau > 2.Nerf > 3.Muscle");

            // Q5
            let a5 = clean(document.querySelector('#l1_q5 input').value);
            check('l1_q5', a5.includes('tendon'), "Le Tendon");

            // Q6
            let a6 = document.querySelector('input[name="l1q6"]:checked')?.value;
            check('l1_q6', a6 === 'B', "Se raccourcir");

            // Q7
            let a7 = document.querySelector('input[name="l1q7"]:checked')?.value;
            check('l1_q7', a7 === 'A', "R√©pondre √† un signal");

            // Q8
            let a8 = document.querySelector('input[name="l1q8"]:checked')?.value;
            check('l1_q8', a8 === 'B', "Reprendre sa forme");

            // Q9
            let a9 = document.querySelector('input[name="l1q9"]:checked')?.value;
            check('l1_q9', a9 === 'A', "Tension au repos");

            // Q10
            let a10 = clean(document.querySelector('#l1_q10 input').value);
            check('l1_q10', a10.includes('fibre'), "Des fibres musculaires");

            generateRemediation(1, score, 10, mistakes, compStats);
        }

        if(n === 2) {
            // Q1
            let a1 = clean(document.querySelector('#l2_q1 input').value);
            check('l2_q1', a1.indexOf('muscle') < a1.indexOf('faisceau'), "Muscle > Faisceau > Fibre > Myofibrille");

            // Q2
            let a2 = clean(document.querySelector('#l2_q2 textarea').value);
            check('l2_q2', a2.includes('transmet') || a2.includes('passage'), "Elle transmet le message nerveux");

            // Q3
            let a3 = clean(document.querySelector('#l2_q3 input').value);
            check('l2_q3', a3.includes('fibre'), "La fibre musculaire");

            // Q4
            let a4 = document.querySelector('input[name="l2q4"]:checked')?.value;
            check('l2_q4', a4 === 'B', "Pr√©sence de bandes (myofibrilles)");

            // Q5
            let a5 = clean(document.querySelector('#l2_q5 textarea').value);
            check('l2_q5', a5.includes('bless') || a5.includes('d√©chir'), "√âvite les blessures/d√©chirures");

            generateRemediation(2, score, 5, mistakes, compStats);
        }
    }
</script>

</body>
</html>
