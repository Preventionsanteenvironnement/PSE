<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entra√Ænement Module D2 : Le Budget - R√©visions CAP</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #16a34a;
            --warning: #f59e0b;
            --error: #dc2626;
            --bg: #f8fafc;
            --card: #ffffff;
            --gold: #fbbf24;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            color: white;
        }
        header h1 { font-size: 1.8rem; margin-bottom: 10px; }
        .subtitle { font-size: 0.95rem; opacity: 0.9; }

        /* OBJECTIFS P√âDAGOGIQUES */
        .objectifs-box {
            background: linear-gradient(135deg, #e0f2fe, #bae6fd);
            border: 3px solid #0284c7;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .objectifs-box h2 {
            color: #0369a1;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        .objectifs-list { list-style: none; padding: 0; }
        .objectifs-list li {
            padding: 8px 0 8px 25px;
            position: relative;
            font-size: 1rem;
            line-height: 1.5;
        }
        .objectifs-list li::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #0284c7;
            font-weight: bold;
        }
        .objectifs-list .verbe {
            color: #dc2626;
            font-weight: 700;
            text-decoration: underline;
        }
        .competences-tags {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .comp-tag {
            background: #0284c7;
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        /* PROGRESSION */
        .progress-section {
            background: white;
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 20px;
            border: 2px solid #e2e8f0;
        }
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .progress-bar {
            background: #e2e8f0;
            height: 12px;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, var(--success), #10b981);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* NAVIGATION √âTAPES */
        .step-nav {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            justify-content: center;
        }
        .step-nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #cbd5e1;
            background: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .step-nav-btn:hover {
            border-color: var(--primary);
            background: #eff6ff;
        }
        .step-nav-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .step-nav-btn.completed {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        /* √âTAPES */
        .step {
            display: none;
            background: var(--card);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #e2e8f0;
        }
        .step.active {
            display: block;
            animation: slideIn 0.4s;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }
        .step-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.4rem;
            flex-shrink: 0;
        }
        .step-title h2 {
            font-size: 1.3rem;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .step-title p {
            color: #64748b;
            font-size: 0.9rem;
        }

        /* SC√âNARIO */
        .scenario-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-left: 5px solid var(--gold);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            line-height: 1.7;
        }
        .scenario-box strong { color: #92400e; }

        /* RAPPEL COURS */
        .rappel-cours {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .rappel-cours h4 {
            color: var(--success);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        .rappel-cours ul { margin-left: 20px; }
        .rappel-cours li { margin-bottom: 8px; line-height: 1.6; }

        /* DRAG & DROP */
        .items-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            background: #f1f5f9;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px dashed #cbd5e1;
            min-height: 80px;
        }
        .draggable {
            padding: 12px 18px;
            background: white;
            border: 2px solid #64748b;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            user-select: none;
        }
        .draggable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .draggable.selected {
            border-color: var(--primary);
            background: #eff6ff;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .draggable.correct {
            border-color: var(--success);
            background: #f0fdf4;
        }
        .draggable.wrong {
            border-color: var(--error);
            background: #fef2f2;
        }

        .drop-zones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .drop-zone {
            background: #fafafa;
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 15px;
            min-height: 120px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .drop-zone:hover {
            border-color: var(--primary);
            background: #f8fafc;
        }
        .drop-zone h4 {
            margin: 0 0 12px 0;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }
        .zone-recettes { border-color: #10b981; }
        .zone-recettes h4 { color: #10b981; border-color: #10b981; }
        .zone-depenses { border-color: #ef4444; }
        .zone-depenses h4 { color: #ef4444; border-color: #ef4444; }

        /* QUESTIONS */
        .question {
            background: #fafafa;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid var(--primary);
        }
        .question-label {
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.05rem;
        }
        .question label {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        .question label:hover { border-color: var(--primary); }
        .question input[type="radio"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .question input[type="text"] {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 700;
        }
        .question input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
        }
        .question small {
            color: #64748b;
            display: block;
            margin-top: 8px;
        }

        /* FEEDBACK */
        .feedback {
            display: none;
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            font-weight: 600;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .feedback.success {
            background: #f0fdf4;
            border: 2px solid var(--success);
            color: #166534;
        }
        .feedback.error {
            background: #fef2f2;
            border: 2px solid var(--error);
            color: #991b1b;
        }
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.7);
            border-radius: 8px;
            font-weight: 500;
            line-height: 1.7;
        }
        .explanation strong { color: #1e293b; }
        .retenir-box {
            background: #fef3c7;
            border: 2px solid var(--gold);
            border-radius: 8px;
            padding: 12px 15px;
            margin-top: 12px;
        }
        .retenir-box strong { color: #92400e; }

        /* TABLEAU √âPARGNE */
        .epargne-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        .epargne-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 8px;
            text-align: left;
            font-weight: 700;
        }
        .epargne-table td {
            padding: 12px 8px;
            border-bottom: 1px solid #e2e8f0;
        }
        .epargne-table tr:hover { background: #f8fafc; }
        .epargne-table .highlight { background: #fef3c7; }

        /* BOUTONS */
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .btn:active { transform: translateY(0); }
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, var(--success), #10b981);
            color: white;
        }
        .btn-secondary { background: #94a3b8; color: white; }
        .btn-outline {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        /* CALCULATRICE */
        .calc-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        .calc-toggle:hover { transform: scale(1.1); }
        .calculator {
            position: fixed;
            bottom: 90px;
            right: 20px;
            z-index: 999;
            background: #1e293b;
            border: 3px solid #9333ea;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
            display: none;
            width: 280px;
        }
        .calculator.visible {
            display: block;
            animation: slideUp 0.3s;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .calc-header h3 {
            margin: 0;
            color: #a78bfa;
            font-size: 1.1rem;
        }
        .calc-close {
            background: transparent;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .calc-close:hover { color: var(--error); }
        .calc-display {
            background: #0f172a;
            color: #4ade80;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.6rem;
            text-align: right;
            margin-bottom: 15px;
            border: 2px solid #334155;
            min-height: 55px;
            word-break: break-all;
        }
        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        .calc-btn {
            background: #334155;
            color: #e2e8f0;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: 0.15s;
        }
        .calc-btn:hover { background: #475569; }
        .calc-btn:active { transform: scale(0.95); }
        .calc-btn.operator { background: #3b82f6; color: white; }
        .calc-btn.equals {
            background: var(--success);
            color: white;
            grid-column: span 2;
        }
        .calc-btn.clear { background: var(--error); color: white; }
        .calc-btn.zero { grid-column: span 2; }

        /* R√âSULTATS FINAUX */
        .final-results {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 20px;
            border: 4px solid var(--success);
            text-align: center;
            margin: 20px 0;
        }
        .final-results.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        .score-circle {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        .review-section {
            margin: 25px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            text-align: left;
        }
        .review-section h3 {
            margin-bottom: 15px;
            color: #475569;
        }
        .review-item {
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .review-item.ok {
            background: #f0fdf4;
            border-left: 4px solid var(--success);
        }
        .review-item.ko {
            background: #fef2f2;
            border-left: 4px solid var(--error);
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            header h1 { font-size: 1.4rem; }
            .step { padding: 15px; }
            .drop-zones { grid-template-columns: 1fr; }
            .calc-toggle { bottom: 15px; right: 15px; width: 55px; height: 55px; }
            .calculator { bottom: 80px; right: 10px; width: 260px; }
            .epargne-table { font-size: 0.8rem; }
            .epargne-table th, .epargne-table td { padding: 8px 5px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì ENTRA√éNEMENT MODULE D2 : LE BUDGET</h1>
            <div class="subtitle">R√©visions compl√®tes avant l'√©valuation ‚Ä¢ Niveau CAP</div>
        </header>

        <div class="objectifs-box">
            <h2>üéØ OBJECTIFS DE L'EXERCICE</h2>
            <ul class="objectifs-list">
                <li><span class="verbe">Distinguer</span> les recettes et les d√©penses d'un budget</li>
                <li><span class="verbe">Calculer</span> le solde d'un budget (Recettes ‚àí D√©penses)</li>
                <li><span class="verbe">Identifier</span> l'√©tat d'un budget : exc√©dentaire, √©quilibr√© ou d√©ficitaire</li>
                <li><span class="verbe">Classer</span> les revenus (travail / sociaux) et les d√©penses (fixes / courantes / occasionnelles)</li>
                <li><span class="verbe">Choisir</span> un produit d'√©pargne adapt√© √† sa situation</li>
                <li><span class="verbe">Calculer</span> les int√©r√™ts d'une √©pargne et un taux d'endettement</li>
            </ul>
            <div class="competences-tags">
                <span class="comp-tag">Comp√©tence C2</span>
                <span class="comp-tag">Comp√©tence C3</span>
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-header">
                <strong>üìä Progression</strong>
                <span id="progress-text">√âtape 0 / 7</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%;"></div>
            </div>
        </div>

        <div class="step-nav" id="step-nav">
            <button class="step-nav-btn active" data-step="1">1</button>
            <button class="step-nav-btn" data-step="2">2</button>
            <button class="step-nav-btn" data-step="3">3</button>
            <button class="step-nav-btn" data-step="4">4</button>
            <button class="step-nav-btn" data-step="5">5</button>
            <button class="step-nav-btn" data-step="6">6</button>
            <button class="step-nav-btn" data-step="7">7</button>
        </div>

        <!-- √âTAPE 1 -->
        <div class="step active" id="step1">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">
                    <h2>Budget Personnel de L√©o</h2>
                    <p>Classer les recettes et d√©penses + calculer le solde</p>
                </div>
            </div>

            <div class="scenario-box">
                <strong>üì± Situation :</strong> L√©o a 19 ans et est apprenti. Ce mois-ci, il veut √©conomiser pour acheter un smartphone √† <strong>800 ‚Ç¨</strong>.
                <br><br>
                <strong>Ses flux financiers du mois :</strong><br>
                ‚Ä¢ Salaire apprentissage : 650 ‚Ç¨<br>
                ‚Ä¢ Aide au logement (APL) : 180 ‚Ç¨<br>
                ‚Ä¢ Loyer : 400 ‚Ç¨<br>
                ‚Ä¢ Courses alimentaires : 220 ‚Ç¨<br>
                ‚Ä¢ Forfait t√©l√©phone : 25 ‚Ç¨<br>
                ‚Ä¢ Abonnement transport : 75 ‚Ç¨<br>
                ‚Ä¢ Sortie cin√©ma : 30 ‚Ç¨<br>
                ‚Ä¢ V√™tements : 50 ‚Ç¨
            </div>

            <div class="rappel-cours">
                <h4>üìö RAPPEL DU COURS</h4>
                <ul>
                    <li><strong>RECETTES (revenus)</strong> = Tout l'argent qui <strong>ENTRE</strong></li>
                    <li><strong>D√âPENSES (charges)</strong> = Tout l'argent qui <strong>SORT</strong></li>
                    <li><strong>SOLDE</strong> = Recettes ‚àí D√©penses</li>
                </ul>
            </div>

            <p style="font-weight: 700; margin: 15px 0; color: #475569;">
                üìå <strong>Consigne :</strong> Clique sur une √©tiquette, puis clique sur la zone correspondante.
            </p>

            <div class="items-bank" id="bank1"></div>

            <div class="drop-zones">
                <div class="drop-zone zone-recettes" data-cat="recettes" id="zone-rec1">
                    <h4>üí∞ RECETTES (Revenus)</h4>
                </div>
                <div class="drop-zone zone-depenses" data-cat="depenses" id="zone-dep1">
                    <h4>üí∏ D√âPENSES (Charges)</h4>
                </div>
            </div>

            <div class="question">
                <div class="question-label">üíµ Calcule le SOLDE de L√©o :</div>
                <input type="text" inputmode="decimal" id="solde1" placeholder="Ex : 30 ou 30,00" autocomplete="off">
                <small>üí° Utilise la calculatrice en bas √† droite !</small>
            </div>

            <div class="feedback" id="feedback1"></div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="verifier(1)">‚úÖ V√âRIFIER</button>
                <button class="btn btn-outline" onclick="resetStep(1)">üîÑ Recommencer</button>
            </div>
        </div>

        <!-- √âTAPE 2 -->
        <div class="step" id="step2">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">
                    <h2>√âtat du Budget</h2>
                    <p>Exc√©dentaire, √©quilibr√© ou d√©ficitaire ?</p>
                </div>
            </div>

            <div class="scenario-box">
                <strong>üìä Rappel :</strong> Le solde de L√©o est de <strong id="solde-rappel">30 ‚Ç¨</strong>
            </div>

            <div class="rappel-cours">
                <h4>üìö RAPPEL DU COURS</h4>
                <ul>
                    <li><strong>EXC√âDENTAIRE</strong> : Solde positif (recettes > d√©penses)</li>
                    <li><strong>√âQUILIBR√â</strong> : Solde = 0</li>
                    <li><strong>D√âFICITAIRE</strong> : Solde n√©gatif (recettes < d√©penses)</li>
                </ul>
            </div>

            <div class="question">
                <div class="question-label">L'√©tat du budget de L√©o est :</div>
                <label><input type="radio" name="etat" value="excedentaire"><span><strong>Exc√©dentaire</strong></span></label>
                <label><input type="radio" name="etat" value="equilibre"><span><strong>√âquilibr√©</strong></span></label>
                <label><input type="radio" name="etat" value="deficitaire"><span><strong>D√©ficitaire</strong></span></label>
            </div>

            <div class="feedback" id="feedback2"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="verifier(2)">‚úÖ V√âRIFIER</button>
            </div>
        </div>

        <!-- √âTAPE 3 -->
        <div class="step" id="step3">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">
                    <h2>Types de Revenus</h2>
                    <p>Revenus du travail ou revenus sociaux ?</p>
                </div>
            </div>

            <div class="rappel-cours">
                <h4>üìö RAPPEL DU COURS</h4>
                <ul>
                    <li><strong>Revenus du TRAVAIL</strong> : Salaire, primes (gagn√© en travaillant)</li>
                    <li><strong>Revenus SOCIAUX</strong> : APL, RSA, allocations (aides de l'√âtat)</li>
                </ul>
            </div>

            <div class="items-bank" id="bank3"></div>

            <div class="drop-zones">
                <div class="drop-zone" data-cat="travail" id="zone-travail" style="border-color: #3b82f6;">
                    <h4 style="color: #3b82f6; border-color: #3b82f6;">üíº REVENUS DU TRAVAIL</h4>
                </div>
                <div class="drop-zone" data-cat="social" id="zone-social" style="border-color: #8b5cf6;">
                    <h4 style="color: #8b5cf6; border-color: #8b5cf6;">üèõÔ∏è REVENUS SOCIAUX</h4>
                </div>
            </div>

            <div class="feedback" id="feedback3"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="verifier(3)">‚úÖ V√âRIFIER</button>
                <button class="btn btn-outline" onclick="resetStep(3)">üîÑ Recommencer</button>
            </div>
        </div>

        <!-- √âTAPE 4 -->
        <div class="step" id="step4">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">
                    <h2>Types de D√©penses</h2>
                    <p>Fixes, courantes ou occasionnelles ?</p>
                </div>
            </div>

            <div class="rappel-cours">
                <h4>üìö RAPPEL DU COURS</h4>
                <ul>
                    <li><strong>FIXES (incompressibles)</strong> : Obligatoires, montant fixe (loyer, abonnements)</li>
                    <li><strong>COURANTES (variables)</strong> : Obligatoires mais montant variable (courses, carburant)</li>
                    <li><strong>OCCASIONNELLES (compressibles)</strong> : Non obligatoires (loisirs, v√™tements)</li>
                </ul>
            </div>

            <div class="items-bank" id="bank4"></div>

            <div class="drop-zones" style="grid-template-columns: repeat(3, 1fr);">
                <div class="drop-zone" data-cat="fixes" id="zone-fixes" style="border-color: #dc2626;">
                    <h4 style="color: #dc2626;">üîí FIXES</h4>
                </div>
                <div class="drop-zone" data-cat="courantes" id="zone-courantes" style="border-color: #f59e0b;">
                    <h4 style="color: #f59e0b;">üõí COURANTES</h4>
                </div>
                <div class="drop-zone" data-cat="occasionnelles" id="zone-occas" style="border-color: #10b981;">
                    <h4 style="color: #10b981;">üéâ OCCASIONNELLES</h4>
                </div>
            </div>

            <div class="feedback" id="feedback4"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(3)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="verifier(4)">‚úÖ V√âRIFIER</button>
                <button class="btn btn-outline" onclick="resetStep(4)">üîÑ Recommencer</button>
            </div>
        </div>

        <!-- √âTAPE 5 -->
        <div class="step" id="step5">
            <div class="step-header">
                <div class="step-number">5</div>
                <div class="step-title">
                    <h2>Choix d'√âpargne</h2>
                    <p>Quel produit pour L√©o ?</p>
                </div>
            </div>

            <div class="scenario-box">
                <strong>üí∞ Situation :</strong> L√©o veut √©pargner 800 ‚Ç¨ pour son smartphone.<br>
                Il veut : disponibilit√© imm√©diate + bon taux
            </div>

            <table class="epargne-table">
                <thead>
                    <tr><th>Produit</th><th>Taux</th><th>Plafond</th><th>Disponibilit√©</th><th>Conditions</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>Livret A</strong></td><td>2,40%</td><td>22 950 ‚Ç¨</td><td>‚úÖ Imm√©diate</td><td>Tout le monde</td></tr>
                    <tr class="highlight"><td><strong>Livret Jeune</strong></td><td>‚â• 2,40%</td><td>1 600 ‚Ç¨</td><td>‚úÖ Imm√©diate</td><td>12-25 ans</td></tr>
                    <tr><td><strong>LDDS</strong></td><td>2,40%</td><td>12 000 ‚Ç¨</td><td>‚úÖ Imm√©diate</td><td>Majeur</td></tr>
                    <tr><td><strong>PEL</strong></td><td>1,75%</td><td>61 200 ‚Ç¨</td><td>‚ùå Bloqu√© 4 ans</td><td>Immobilier</td></tr>
                    <tr><td><strong>LEP</strong></td><td>3,50%</td><td>10 000 ‚Ç¨</td><td>‚úÖ Imm√©diate</td><td>Revenus modestes</td></tr>
                </tbody>
            </table>

            <div class="question">
                <div class="question-label">Quel produit d'√©pargne pour L√©o ?</div>
                <label><input type="radio" name="epargne" value="livretA"><span>Livret A</span></label>
                <label><input type="radio" name="epargne" value="livretJeune"><span>Livret Jeune</span></label>
                <label><input type="radio" name="epargne" value="ldds"><span>LDDS</span></label>
                <label><input type="radio" name="epargne" value="pel"><span>PEL</span></label>
                <label><input type="radio" name="epargne" value="lep"><span>LEP</span></label>
            </div>

            <div class="feedback" id="feedback5"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(4)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="verifier(5)">‚úÖ V√âRIFIER</button>
            </div>
        </div>

        <!-- √âTAPE 6 -->
        <div class="step" id="step6">
            <div class="step-header">
                <div class="step-number">6</div>
                <div class="step-title">
                    <h2>Calcul des Int√©r√™ts</h2>
                    <p>Combien L√©o va-t-il gagner ?</p>
                </div>
            </div>

            <div class="scenario-box">
                <strong>üíµ Situation :</strong> L√©o place <strong>800 ‚Ç¨</strong> sur un Livret Jeune √† <strong>3% par an</strong>.
            </div>

            <div class="rappel-cours">
                <h4>üìö FORMULE</h4>
                <p style="text-align: center; font-size: 1.2rem; padding: 10px; background: white; border-radius: 8px;">
                    <strong>Int√©r√™ts = Capital √ó Taux √∑ 100</strong>
                </p>
            </div>

            <div class="question">
                <div class="question-label">1. Int√©r√™ts gagn√©s apr√®s 1 an :</div>
                <input type="text" inputmode="decimal" id="interets" placeholder="800 √ó 3 √∑ 100 = ?" autocomplete="off"> ‚Ç¨
            </div>

            <div class="question">
                <div class="question-label">2. Montant TOTAL apr√®s 1 an :</div>
                <input type="text" inputmode="decimal" id="total-epargne" placeholder="Capital + Int√©r√™ts" autocomplete="off"> ‚Ç¨
            </div>

            <div class="feedback" id="feedback6"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(5)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="verifier(6)">‚úÖ V√âRIFIER</button>
            </div>
        </div>

        <!-- √âTAPE 7 -->
        <div class="step" id="step7">
            <div class="step-header">
                <div class="step-number">7</div>
                <div class="step-title">
                    <h2>Taux d'Endettement</h2>
                    <p>L√©o peut-il emprunter ?</p>
                </div>
            </div>

            <div class="scenario-box">
                <strong>üè¶ Situation :</strong> 2 ans plus tard, L√©o gagne <strong>1 500 ‚Ç¨/mois</strong>.<br>
                Ses charges de cr√©dit : <strong>550 ‚Ç¨/mois</strong> (loyer + cr√©dit voiture).<br>
                Il veut faire un cr√©dit pour un ordinateur.
            </div>

            <div class="rappel-cours">
                <h4>üìö FORMULE ET R√àGLE</h4>
                <p style="text-align: center; font-size: 1.1rem; padding: 10px; background: white; border-radius: 8px; margin-bottom: 10px;">
                    <strong>Taux d'endettement = (Charges √∑ Revenus) √ó 100</strong>
                </p>
                <ul>
                    <li><strong>< 33%</strong> ‚Üí ‚úÖ Peut emprunter sans risque</li>
                    <li><strong>33-40%</strong> ‚Üí ‚ö†Ô∏è Avec prudence</li>
                    <li><strong>> 40%</strong> ‚Üí ‚ùå Risque de surendettement</li>
                </ul>
            </div>

            <div class="question">
                <div class="question-label">1. Taux d'endettement de L√©o (arrondi) :</div>
                <input type="text" inputmode="decimal" id="taux-endettement" placeholder="(550 √∑ 1500) √ó 100 = ?" autocomplete="off"> %
            </div>

            <div class="question">
                <div class="question-label">2. L√©o peut-il emprunter ?</div>
                <label><input type="radio" name="credit" value="oui-sans-risque"><span>‚úÖ Oui, sans risque</span></label>
                <label><input type="radio" name="credit" value="oui-prudence"><span>‚ö†Ô∏è Oui, avec prudence</span></label>
                <label><input type="radio" name="credit" value="non"><span>‚ùå Non, risque de surendettement</span></label>
            </div>

            <div class="feedback" id="feedback7"></div>

            <div class="btn-group">
                <button class="btn btn-secondary" onclick="goToStep(6)">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-success" onclick="verifier(7)">‚úÖ TERMINER</button>
            </div>
        </div>

        <!-- R√âSULTATS -->
        <div class="final-results" id="final-results">
            <h2 style="margin-bottom: 20px; color: #1e293b;">üéâ ENTRA√éNEMENT TERMIN√â !</h2>
            <div class="score-circle"><span id="score-display">0/7</span></div>
            <div class="review-section">
                <h3>üìä Bilan</h3>
                <div id="review-items"></div>
            </div>
            <button class="btn btn-primary" onclick="location.reload()">üîÑ RECOMMENCER</button>
        </div>
    </div>

    <!-- CALCULATRICE -->
    <button class="calc-toggle" id="calc-toggle">üßÆ</button>
    <div class="calculator" id="calculator">
        <div class="calc-header">
            <h3>üßÆ Calculatrice</h3>
            <button class="calc-close" id="calc-close">√ó</button>
        </div>
        <div class="calc-display" id="calc-display">0</div>
        <div class="calc-buttons">
            <button class="calc-btn clear" data-action="clear">C</button>
            <button class="calc-btn operator" data-action="backspace">‚Üê</button>
            <button class="calc-btn operator" data-action="divide">√∑</button>
            <button class="calc-btn operator" data-action="multiply">√ó</button>
            <button class="calc-btn" data-number="7">7</button>
            <button class="calc-btn" data-number="8">8</button>
            <button class="calc-btn" data-number="9">9</button>
            <button class="calc-btn operator" data-action="subtract">‚àí</button>
            <button class="calc-btn" data-number="4">4</button>
            <button class="calc-btn" data-number="5">5</button>
            <button class="calc-btn" data-number="6">6</button>
            <button class="calc-btn operator" data-action="add">+</button>
            <button class="calc-btn" data-number="1">1</button>
            <button class="calc-btn" data-number="2">2</button>
            <button class="calc-btn" data-number="3">3</button>
            <button class="calc-btn equals" data-action="equals">=</button>
            <button class="calc-btn zero" data-number="0">0</button>
            <button class="calc-btn" data-action="decimal">,</button>
        </div>
    </div>

    <script>
        const DATA = {
            step1: {
                items: [
                    { id: 1, name: "Salaire apprentissage (650 ‚Ç¨)", cat: "recettes" },
                    { id: 2, name: "Aide au logement APL (180 ‚Ç¨)", cat: "recettes" },
                    { id: 3, name: "Loyer (400 ‚Ç¨)", cat: "depenses" },
                    { id: 4, name: "Courses alimentaires (220 ‚Ç¨)", cat: "depenses" },
                    { id: 5, name: "Forfait t√©l√©phone (25 ‚Ç¨)", cat: "depenses" },
                    { id: 6, name: "Abonnement transport (75 ‚Ç¨)", cat: "depenses" },
                    { id: 7, name: "Sortie cin√©ma (30 ‚Ç¨)", cat: "depenses" },
                    { id: 8, name: "V√™tements (50 ‚Ç¨)", cat: "depenses" }
                ],
                solde: 30
            },
            step3: {
                items: [
                    { id: 1, name: "Salaire apprentissage (650 ‚Ç¨)", cat: "travail" },
                    { id: 2, name: "Aide au logement APL (180 ‚Ç¨)", cat: "social" }
                ]
            },
            step4: {
                items: [
                    { id: 1, name: "Loyer (400 ‚Ç¨)", cat: "fixes" },
                    { id: 2, name: "Forfait t√©l√©phone (25 ‚Ç¨)", cat: "fixes" },
                    { id: 3, name: "Abonnement transport (75 ‚Ç¨)", cat: "fixes" },
                    { id: 4, name: "Courses alimentaires (220 ‚Ç¨)", cat: "courantes" },
                    { id: 5, name: "Sortie cin√©ma (30 ‚Ç¨)", cat: "occasionnelles" },
                    { id: 6, name: "V√™tements (50 ‚Ç¨)", cat: "occasionnelles" }
                ]
            }
        };

        let currentStep = 1, results = {}, selectedItem = null, stepsCompleted = new Set();

        function parseNombre(str) {
            if (!str) return null;
            let s = String(str).replace(/\s/g, "").replace(/‚Ç¨/g, "").replace(/,/g, ".");
            const n = parseFloat(s);
            return Number.isFinite(n) ? n : null;
        }

        function almostEqual(a, b, eps = 1) {
            return a !== null && b !== null && Math.abs(a - b) < eps;
        }

        function goToStep(n) {
            document.querySelectorAll(".step").forEach(s => s.classList.remove("active"));
            document.getElementById(`step${n}`).classList.add("active");
            currentStep = n;
            updateProgress();
            updateNavButtons();
            window.scrollTo({ top: 0, behavior: "smooth" });
            if (n === 3 && !document.getElementById("bank3").children.length) initStep3();
            if (n === 4 && !document.getElementById("bank4").children.length) initStep4();
        }

        function updateProgress() {
            const pct = (stepsCompleted.size / 7) * 100;
            document.getElementById("progress-fill").style.width = pct + "%";
            document.getElementById("progress-text").textContent = `√âtape ${stepsCompleted.size} / 7`;
        }

        function updateNavButtons() {
            document.querySelectorAll(".step-nav-btn").forEach(btn => {
                const s = parseInt(btn.dataset.step);
                btn.classList.remove("active", "completed");
                if (s === currentStep) btn.classList.add("active");
                else if (stepsCompleted.has(s)) btn.classList.add("completed");
            });
        }

        document.querySelectorAll(".step-nav-btn").forEach(btn => {
            btn.addEventListener("click", () => goToStep(parseInt(btn.dataset.step)));
        });

        function selectItem(el) {
            if (selectedItem) selectedItem.classList.remove("selected");
            selectedItem = el;
            el.classList.add("selected");
        }

        function dropItem(zone) {
            if (selectedItem) {
                zone.appendChild(selectedItem);
                selectedItem.classList.remove("selected");
                selectedItem = null;
            }
        }

        function initStep1() {
            const bank = document.getElementById("bank1");
            bank.innerHTML = "";
            DATA.step1.items.sort(() => Math.random() - 0.5).forEach(item => {
                const el = document.createElement("div");
                el.className = "draggable";
                el.dataset.id = item.id;
                el.dataset.cat = item.cat;
                el.textContent = item.name;
                el.onclick = () => selectItem(el);
                bank.appendChild(el);
            });
            document.querySelectorAll("#step1 .drop-zone").forEach(z => z.onclick = () => dropItem(z));
        }

        function initStep3() {
            const bank = document.getElementById("bank3");
            bank.innerHTML = "";
            DATA.step3.items.sort(() => Math.random() - 0.5).forEach(item => {
                const el = document.createElement("div");
                el.className = "draggable";
                el.dataset.id = item.id;
                el.dataset.cat = item.cat;
                el.textContent = item.name;
                el.onclick = () => selectItem(el);
                bank.appendChild(el);
            });
            document.querySelectorAll("#step3 .drop-zone").forEach(z => z.onclick = () => dropItem(z));
        }

        function initStep4() {
            const bank = document.getElementById("bank4");
            bank.innerHTML = "";
            DATA.step4.items.sort(() => Math.random() - 0.5).forEach(item => {
                const el = document.createElement("div");
                el.className = "draggable";
                el.dataset.id = item.id;
                el.dataset.cat = item.cat;
                el.textContent = item.name;
                el.onclick = () => selectItem(el);
                bank.appendChild(el);
            });
            document.querySelectorAll("#step4 .drop-zone").forEach(z => z.onclick = () => dropItem(z));
        }

        function resetStep(s) {
            if (s === 1) { initStep1(); document.getElementById("solde1").value = ""; }
            else if (s === 3) initStep3();
            else if (s === 4) initStep4();
            document.getElementById(`feedback${s}`).style.display = "none";
        }

        function verifier(step) {
            const fb = document.getElementById(`feedback${step}`);
            fb.style.display = "none";

            if (step === 1) {
                let score = 0;
                document.querySelectorAll("#step1 .draggable").forEach(item => {
                    const parent = item.parentElement.dataset?.cat;
                    if (parent === item.dataset.cat) { item.classList.add("correct"); item.classList.remove("wrong"); score++; }
                    else { item.classList.add("wrong"); item.classList.remove("correct"); }
                });
                const solde = parseNombre(document.getElementById("solde1").value);
                const soldeOk = almostEqual(solde, 30);

                if (score === 8 && soldeOk) {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>PARFAIT !</strong><div class="explanation"><strong>Recettes</strong> = 650 + 180 = <strong>830 ‚Ç¨</strong><br><strong>D√©penses</strong> = 400+220+25+75+30+50 = <strong>800 ‚Ç¨</strong><br><strong>Solde</strong> = 830 ‚àí 800 = <strong>+30 ‚Ç¨</strong></div><div class="retenir-box">üí° <strong>√Ä retenir :</strong> Solde positif = il reste de l'argent !</div>`;
                    results.step1 = true; stepsCompleted.add(1);
                    setTimeout(() => goToStep(2), 2500);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>Erreurs</strong><div class="explanation"><strong>R√©fl√©chis :</strong><br>‚Ä¢ Recettes = argent qui ENTRE<br>‚Ä¢ D√©penses = argent qui SORT<br>‚Ä¢ Solde = Recettes ‚àí D√©penses = (650+180) ‚àí (400+220+25+75+30+50)</div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 2) {
                const etat = document.querySelector('input[name="etat"]:checked')?.value;
                if (!etat) { fb.className = "feedback error"; fb.innerHTML = "‚ö†Ô∏è Choisis une r√©ponse !"; fb.style.display = "block"; return; }
                if (etat === "excedentaire") {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>EXACT !</strong><div class="explanation">Solde = +30 ‚Ç¨ (positif) ‚Üí Budget <strong>EXC√âDENTAIRE</strong></div><div class="retenir-box">üí° Exc√©dentaire = positif / √âquilibr√© = 0 / D√©ficitaire = n√©gatif</div>`;
                    results.step2 = true; stepsCompleted.add(2);
                    setTimeout(() => goToStep(3), 2500);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>Non</strong><div class="explanation">Le solde est +30 ‚Ç¨ ‚Üí C'est positif ‚Üí Budget <strong>exc√©dentaire</strong></div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 3) {
                let score = 0;
                document.querySelectorAll("#step3 .draggable").forEach(item => {
                    const parent = item.parentElement.dataset?.cat;
                    if (parent === item.dataset.cat) { item.classList.add("correct"); score++; } else item.classList.add("wrong");
                });
                if (score === 2) {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>BRAVO !</strong><div class="explanation">‚Ä¢ Salaire = gagn√© en travaillant ‚Üí <strong>Revenu du TRAVAIL</strong><br>‚Ä¢ APL = aide de la CAF ‚Üí <strong>Revenu SOCIAL</strong></div>`;
                    results.step3 = true; stepsCompleted.add(3);
                    setTimeout(() => goToStep(4), 2500);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>R√©fl√©chis</strong><div class="explanation">Est-ce gagn√© en travaillant ? ‚Üí TRAVAIL<br>Est-ce une aide de l'√âtat ? ‚Üí SOCIAL</div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 4) {
                let score = 0;
                document.querySelectorAll("#step4 .draggable").forEach(item => {
                    const parent = item.parentElement.dataset?.cat;
                    if (parent === item.dataset.cat) { item.classList.add("correct"); score++; } else item.classList.add("wrong");
                });
                if (score === 6) {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>PARFAIT !</strong><div class="explanation"><strong>Fixes</strong> : Loyer, T√©l√©phone, Transport (obligatoires, montant fixe)<br><strong>Courantes</strong> : Courses (obligatoire mais variable)<br><strong>Occasionnelles</strong> : Cin√©ma, V√™tements (non obligatoires)</div>`;
                    results.step4 = true; stepsCompleted.add(4);
                    setTimeout(() => goToStep(5), 2500);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>R√©fl√©chis</strong><div class="explanation">‚Ä¢ Obligatoire + montant fixe ‚Üí FIXE<br>‚Ä¢ Obligatoire + montant variable ‚Üí COURANTE<br>‚Ä¢ Pas obligatoire ‚Üí OCCASIONNELLE</div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 5) {
                const epargne = document.querySelector('input[name="epargne"]:checked')?.value;
                if (!epargne) { fb.className = "feedback error"; fb.innerHTML = "‚ö†Ô∏è Choisis une r√©ponse !"; fb.style.display = "block"; return; }
                if (epargne === "livretJeune") {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>EXCELLENT !</strong><div class="explanation">‚úÖ L√©o a 19 ans (12-25 ans)<br>‚úÖ Disponibilit√© imm√©diate<br>‚úÖ Bon taux (‚â• 2,40%)</div><div class="retenir-box">üí° Le Livret Jeune est id√©al pour les 12-25 ans !</div>`;
                    results.step5 = true; stepsCompleted.add(5);
                    setTimeout(() => goToStep(6), 2500);
                } else {
                    fb.className = "feedback error";
                    let r = "Le Livret Jeune est meilleur car L√©o a 19 ans et veut disponibilit√© + bon taux.";
                    if (epargne === "pel") r = "Le PEL est bloqu√© 4 ans ‚Üí pas adapt√© !";
                    fb.innerHTML = `‚ùå <strong>Pas le meilleur</strong><div class="explanation">${r}</div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 6) {
                const interets = parseNombre(document.getElementById("interets").value);
                const total = parseNombre(document.getElementById("total-epargne").value);
                if (almostEqual(interets, 24) && almostEqual(total, 824)) {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>BRAVO !</strong><div class="explanation">Int√©r√™ts = 800 √ó 3 √∑ 100 = <strong>24 ‚Ç¨</strong><br>Total = 800 + 24 = <strong>824 ‚Ç¨</strong></div>`;
                    results.step6 = true; stepsCompleted.add(6);
                    setTimeout(() => goToStep(7), 2500);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>V√©rifie</strong><div class="explanation">Int√©r√™ts = 800 √ó 3 √∑ 100 = ?<br>Total = 800 + Int√©r√™ts = ?</div>`;
                }
                fb.style.display = "block";
            }

            else if (step === 7) {
                const taux = parseNombre(document.getElementById("taux-endettement").value);
                const credit = document.querySelector('input[name="credit"]:checked')?.value;
                if (!credit) { fb.className = "feedback error"; fb.innerHTML = "‚ö†Ô∏è R√©ponds aux 2 questions !"; fb.style.display = "block"; return; }
                const tauxOk = almostEqual(taux, 37, 2) || almostEqual(taux, 36.67, 1);
                if (tauxOk && credit === "oui-prudence") {
                    fb.className = "feedback success";
                    fb.innerHTML = `‚úÖ <strong>PARFAIT !</strong><div class="explanation">Taux = (550√∑1500)√ó100 = <strong>36,67% ‚âà 37%</strong><br>Entre 33% et 40% ‚Üí <strong>Avec prudence</strong> ‚ö†Ô∏è</div><div class="retenir-box">üí° >40% = risque de surendettement !</div>`;
                    results.step7 = true; stepsCompleted.add(7);
                    setTimeout(() => afficherResultats(), 2000);
                } else {
                    fb.className = "feedback error";
                    fb.innerHTML = `‚ùå <strong>V√©rifie</strong><div class="explanation">Taux = (550√∑1500)√ó100 = ?<br>Compare aux seuils : <33% sans risque / 33-40% prudence / >40% danger</div>`;
                }
                fb.style.display = "block";
            }
        }

        function afficherResultats() {
            document.querySelectorAll(".step").forEach(s => s.classList.remove("active"));
            document.getElementById("final-results").classList.add("show");
            const score = Object.values(results).filter(v => v).length;
            document.getElementById("score-display").textContent = `${score}/7`;
            const names = ["Recettes/D√©penses + Solde", "√âtat du budget", "Types de revenus", "Types de d√©penses", "Choix d'√©pargne", "Calcul int√©r√™ts", "Taux d'endettement"];
            const review = document.getElementById("review-items");
            review.innerHTML = "";
            names.forEach((n, i) => {
                const ok = results[`step${i+1}`];
                review.innerHTML += `<div class="review-item ${ok ? 'ok' : 'ko'}"><span>√âtape ${i+1} : ${n}</span><span>${ok ? '‚úÖ' : '‚ùå'}</span></div>`;
            });
            document.getElementById("progress-fill").style.width = "100%";
            document.getElementById("progress-text").textContent = "Termin√© !";
        }

        // CALCULATRICE
        const calcToggle = document.getElementById("calc-toggle");
        const calculator = document.getElementById("calculator");
        const calcClose = document.getElementById("calc-close");
        const calcDisplay = document.getElementById("calc-display");
        let calcValue = "0", calcOp = null, calcPrev = null, calcWait = false;

        function updateCalcDisplay() { calcDisplay.textContent = calcValue.replace(".", ","); }
        function calcClear() { calcValue = "0"; calcOp = null; calcPrev = null; calcWait = false; updateCalcDisplay(); }
        function calcBackspace() { calcValue = calcValue.length > 1 ? calcValue.slice(0, -1) : "0"; updateCalcDisplay(); }
        function calcInputNumber(n) { calcValue = calcWait ? String(n) : (calcValue === "0" ? String(n) : calcValue + n); calcWait = false; updateCalcDisplay(); }
        function calcInputDecimal() { if (calcWait) { calcValue = "0."; calcWait = false; } else if (!calcValue.includes(".")) calcValue += "."; updateCalcDisplay(); }
        function calcPerformOp(op) { const v = parseFloat(calcValue); if (calcPrev === null) calcPrev = v; else if (calcOp) { const r = calcCalc(calcPrev, v, calcOp); calcValue = String(r); calcPrev = r; } calcWait = true; calcOp = op; updateCalcDisplay(); }
        function calcCalc(p, c, o) { switch(o) { case "+": return p+c; case "-": return p-c; case "*": return p*c; case "/": return c ? p/c : 0; default: return c; } }
        function calcEquals() { if (calcPrev !== null && calcOp) { const r = calcCalc(calcPrev, parseFloat(calcValue), calcOp); calcValue = String(Math.round(r*100)/100); calcOp = null; calcPrev = null; calcWait = true; updateCalcDisplay(); } }

        calcToggle.onclick = () => calculator.classList.toggle("visible");
        calcClose.onclick = () => calculator.classList.remove("visible");
        document.querySelectorAll(".calc-btn").forEach(btn => {
            btn.onclick = () => {
                const a = btn.dataset.action, n = btn.dataset.number;
                if (n !== undefined) calcInputNumber(n);
                else if (a === "clear") calcClear();
                else if (a === "backspace") calcBackspace();
                else if (a === "decimal") calcInputDecimal();
                else if (a === "add") calcPerformOp("+");
                else if (a === "subtract") calcPerformOp("-");
                else if (a === "multiply") calcPerformOp("*");
                else if (a === "divide") calcPerformOp("/");
                else if (a === "equals") calcEquals();
            };
        });

        initStep1();
        updateProgress();
        updateNavButtons();
    </script>
</body>
</html>
