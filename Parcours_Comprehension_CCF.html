<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mes √©preuves CCF ‚Äî Est-ce que j'ai tout compris ?</title>
<style>
  :root {
    --bleu: #2e86c1;
    --bleu-fonce: #1a5276;
    --vert: #27ae60;
    --orange: #e67e22;
    --rouge-doux: #e74c3c;
    --violet: #8e44ad;
    --fond: #f4f6f9;
    --blanc: #ffffff;
    --texte: #2c3e50;
    --gris: #7f8c8d;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    font-size: 16px;
    line-height: 1.7;
    color: var(--texte);
    background: var(--fond);
    padding: 16px;
  }

  .app-container {
    max-width: 840px;
    margin: 0 auto;
  }

  /* ============================================
     EN-T√äTE PRINCIPAL
     ============================================ */
  .app-header {
    background: linear-gradient(135deg, var(--bleu-fonce), var(--bleu));
    color: #fff;
    text-align: center;
    padding: 28px 24px;
    border-radius: 12px 12px 0 0;
  }

  .app-header h1 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .app-header p {
    font-size: 15px;
    color: rgba(255,255,255,0.85);
  }

  /* ============================================
     BARRE DE PROGRESSION
     ============================================ */
  .progress-bar-container {
    background: #fff;
    padding: 16px 24px;
    border-bottom: 1px solid #e5e8eb;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .progress-step {
    flex: 1;
    height: 8px;
    background: #e0e0e0;
    border-radius: 4px;
    transition: background 0.4s;
    position: relative;
  }

  .progress-step.done { background: var(--vert); }
  .progress-step.active { background: var(--bleu); animation: pulse-bar 1.5s ease-in-out infinite; }

  @keyframes pulse-bar { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

  .progress-label {
    font-size: 12px;
    color: var(--gris);
    font-weight: 600;
    white-space: nowrap;
  }

  /* ============================================
     CONTENU DES √âTAPES
     ============================================ */
  .step-content {
    background: #fff;
    padding: 0;
    display: none;
  }

  .step-content.active { display: block; }

  .step-section {
    padding: 28px 28px 20px;
    border-bottom: 1px solid #f0f0f0;
  }

  .step-section:last-child { border-bottom: none; }

  .step-title {
    font-size: 20px;
    font-weight: 700;
    color: var(--bleu-fonce);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .step-title .emoji { font-size: 26px; }

  .step-text {
    font-size: 15px;
    line-height: 1.8;
    color: #444;
    margin-bottom: 12px;
  }

  .step-text strong { color: var(--bleu-fonce); }

  /* CARTE R√âSUM√â */
  .mini-carte {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin: 16px 0;
  }

  .mini-carte-item {
    background: #f8fafc;
    border: 1px solid #e5e8eb;
    border-radius: 8px;
    padding: 12px;
    text-align: center;
  }

  .mini-carte-item .mc-label {
    font-size: 11px;
    text-transform: uppercase;
    color: var(--gris);
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  .mini-carte-item .mc-valeur {
    font-size: 17px;
    font-weight: 700;
    color: var(--bleu-fonce);
    margin-top: 2px;
  }

  /* BLOC COMPL√âMENTARIT√â (compact) */
  .lien-matieres {
    background: #f0f5ff;
    border: 1px solid #c5d9f0;
    border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
  }

  .lien-matieres h4 {
    font-size: 15px;
    color: var(--bleu-fonce);
    text-align: center;
    margin-bottom: 10px;
  }

  .lien-cols {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 10px;
    align-items: center;
    font-size: 14px;
  }

  .lien-col { background: #fff; border-radius: 6px; padding: 10px 12px; }
  .lien-col h5 { font-size: 13px; font-weight: 700; margin-bottom: 4px; text-align: center; }
  .lien-col.col-a h5 { color: var(--bleu); }
  .lien-col.col-b h5 { color: var(--violet); }
  .lien-col ul { list-style: none; padding: 0; margin: 0; font-size: 13px; color: #555; }
  .lien-col ul li { padding: 2px 0; }
  .lien-plus { font-size: 28px; color: var(--bleu); font-weight: 700; text-align: center; }
  .lien-synthese { text-align: center; font-size: 13px; color: var(--bleu-fonce); font-weight: 600; margin-top: 10px; background: #e8f0fe; border-radius: 6px; padding: 8px; }

  /* VOCABULAIRE */
  .vocab-section {
    margin: 16px 0;
  }

  .vocab-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--violet);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .vocab-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .vocab-item {
    background: #faf5ff;
    border: 1px solid #e8daef;
    border-radius: 6px;
    padding: 8px 12px;
  }

  .vocab-item .v-mot {
    font-weight: 700;
    color: var(--violet);
    font-size: 14px;
  }

  .vocab-item .v-def {
    font-size: 13px;
    color: #555;
    margin-top: 2px;
  }

  /* ============================================
     QUIZ
     ============================================ */
  .quiz-zone {
    padding: 24px 28px;
    background: #fafbfc;
    border-top: 2px solid var(--bleu);
  }

  .quiz-zone h3 {
    font-size: 17px;
    font-weight: 700;
    color: var(--bleu);
    margin-bottom: 16px;
    text-align: center;
  }

  .question-card {
    background: #fff;
    border: 1px solid #e5e8eb;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 16px;
    transition: border-color 0.3s;
  }

  .question-card.correct { border-color: var(--vert); background: #f0faf4; }
  .question-card.reviewing { border-color: var(--orange); background: #fef9f0; }

  .q-numero {
    font-size: 12px;
    font-weight: 700;
    color: var(--bleu);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }

  .q-texte {
    font-size: 15px;
    font-weight: 600;
    color: var(--texte);
    margin-bottom: 14px;
    line-height: 1.5;
  }

  .q-options { display: flex; flex-direction: column; gap: 8px; }

  .q-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    color: #444;
    transition: all 0.2s;
    background: #fff;
  }

  .q-option:hover:not(.disabled) { border-color: var(--bleu); background: #f0f7ff; }
  .q-option.selected { border-color: var(--bleu); background: #e8f0fe; font-weight: 600; }
  .q-option.correct-answer { border-color: var(--vert); background: #e8faf0; color: var(--vert); font-weight: 700; }
  .q-option.wrong-answer { border-color: var(--rouge-doux); background: #fdf0f0; color: var(--rouge-doux); text-decoration: line-through; opacity: 0.7; }
  .q-option.disabled { cursor: default; opacity: 0.6; }

  .q-option .radio-dot {
    width: 20px; height: 20px;
    border: 2px solid #ccc;
    border-radius: 50%;
    flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }

  .q-option.selected .radio-dot { border-color: var(--bleu); background: var(--bleu); }
  .q-option.selected .radio-dot::after { content: ""; width: 8px; height: 8px; background: #fff; border-radius: 50%; }
  .q-option.correct-answer .radio-dot { border-color: var(--vert); background: var(--vert); }
  .q-option.correct-answer .radio-dot::after { content: "‚úì"; color: #fff; font-size: 12px; font-weight: 700; }

  .q-validate-btn {
    margin-top: 12px;
    padding: 10px 28px;
    border: none;
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    background: var(--bleu);
    color: #fff;
    transition: all 0.2s;
  }

  .q-validate-btn:hover { background: var(--bleu-fonce); }
  .q-validate-btn:disabled { background: #ccc; cursor: default; }

  /* FEEDBACK */
  .q-feedback {
    margin-top: 14px;
    padding: 14px 16px;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.6;
    display: none;
    animation: fadeIn 0.3s;
  }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }

  .q-feedback.show { display: block; }
  .q-feedback.success { background: #e8faf0; border-left: 4px solid var(--vert); color: #1e6b42; }
  .q-feedback.hint1 { background: #fef9e7; border-left: 4px solid #f0b429; color: #7d6608; }
  .q-feedback.hint2 { background: #fef0e7; border-left: 4px solid var(--orange); color: #7d4608; }
  .q-feedback.reveal { background: #f0e8fa; border-left: 4px solid var(--violet); color: #5b2c6f; }

  .q-feedback .fb-title {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 4px;
  }

  .q-feedback .fb-example {
    background: rgba(255,255,255,0.6);
    border-radius: 4px;
    padding: 8px 10px;
    margin-top: 8px;
    font-size: 13px;
    font-style: italic;
  }

  /* ============================================
     NAVIGATION
     ============================================ */
  .nav-bar {
    background: #fff;
    padding: 20px 28px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid #e5e8eb;
  }

  .nav-btn {
    padding: 12px 28px;
    border: none;
    border-radius: 8px;
    font-family: inherit;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .nav-btn.next { background: var(--bleu); color: #fff; }
  .nav-btn.next:hover { background: var(--bleu-fonce); }
  .nav-btn.next:disabled { background: #ccc; cursor: default; }
  .nav-btn.prev { background: #e8ecf0; color: #555; }
  .nav-btn.prev:hover { background: #d5dbe0; }
  .nav-btn.restart { background: var(--vert); color: #fff; }
  .nav-btn.restart:hover { background: #1e8449; }

  .nav-score {
    font-size: 14px;
    color: var(--gris);
    font-weight: 600;
  }

  /* ============================================
     BILAN FINAL
     ============================================ */
  .bilan-container { text-align: center; padding: 40px 28px; }

  .bilan-score-circle {
    width: 140px; height: 140px;
    border-radius: 50%;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    margin: 0 auto 20px;
    font-weight: 700;
    border: 6px solid;
  }

  .bilan-score-circle .big-num { font-size: 36px; line-height: 1; }
  .bilan-score-circle .total { font-size: 14px; margin-top: 2px; }

  .bilan-score-circle.excellent { border-color: var(--vert); color: var(--vert); background: #f0faf4; }
  .bilan-score-circle.bon { border-color: var(--bleu); color: var(--bleu); background: #f0f7ff; }
  .bilan-score-circle.moyen { border-color: var(--orange); color: var(--orange); background: #fef9f0; }
  .bilan-score-circle.arevoir { border-color: var(--rouge-doux); color: var(--rouge-doux); background: #fdf0f0; }

  .bilan-message {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .bilan-detail {
    font-size: 15px;
    color: #555;
    margin-bottom: 20px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
  }

  .bilan-sections { display: flex; justify-content: center; gap: 16px; margin-bottom: 24px; flex-wrap: wrap; }

  .bilan-badge {
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
  }

  .bilan-badge.ok { background: #e8faf0; color: var(--vert); }
  .bilan-badge.ko { background: #fef9e7; color: var(--orange); }

  /* ============================================
     RESPONSIVE
     ============================================ */
  @media (max-width: 600px) {
    .mini-carte { grid-template-columns: 1fr; }
    .lien-cols { grid-template-columns: 1fr; }
    .lien-plus { display: none; }
    .vocab-grid { grid-template-columns: 1fr; }
  }

  /* ============================================
     FOOTER
     ============================================ */
  .app-footer {
    background: #fff;
    text-align: center;
    padding: 12px;
    font-size: 12px;
    color: var(--gris);
    border-radius: 0 0 12px 12px;
    border-top: 1px solid #e5e8eb;
  }

  /* === RESPONSIVE MOBILE === */
  @media (max-width: 600px) {
    body { padding: 10px 4px; }
    .page-container { border-radius: 0; box-shadow: none; }
    .carte-epreuve { grid-template-columns: 1fr !important; }
    .bloc-complementarite .deux-colonnes { grid-template-columns: 1fr !important; }
    .actions-bar { flex-direction: column; gap: 8px; }
    .btn-action { width: 100%; justify-content: center; }
    .table-grille th, .table-grille td { padding: 8px 10px; font-size: 13px; }
    h1 { font-size: 1.3em; }
    .mini-carte { grid-template-columns: 1fr !important; }
    .lien-cols { grid-template-columns: 1fr !important; }
    .table-plan th, .table-plan td { padding: 8px 10px; font-size: 13px; }
  }
  /* === FOOTER SITE + QR === */
  .footer-site-qr {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 14px;
    padding: 16px 20px;
    margin-top: 30px;
    border-top: 1px solid #e0e0e0;
    background: #f8f9fa;
    border-radius: 0 0 8px 8px;
  }
  .footer-site-qr img { width: 90px; height: 90px; border-radius: 6px; border: 1px solid #ddd; }
  .footer-site-qr .footer-text { font-size: 12px; color: #888; text-align: center; line-height: 1.5; }
  .footer-site-qr .footer-text a { color: #2e74b5; text-decoration: none; font-weight: 700; font-size: 15px; }
  .footer-site-qr .footer-text a:hover { text-decoration: underline; }
  @media print {
    .footer-site-qr { margin-top: 15px; padding: 10px; }
    .footer-site-qr img { width: 70px; height: 70px; }
  }

</style>
</head>
<body>

<div class="app-container">
  <div class="app-header">
    <h1>Mes √©preuves CCF ‚Äî Est-ce que j'ai tout compris ?</h1>
    <p>Un parcours pour comprendre tes 3 √©preuves de PSE, √©tape par √©tape</p>
  </div>

  <div class="progress-bar-container">
    <span class="progress-label" id="progress-text">√âtape 1/5</span>
    <div class="progress-step active" id="pb-0"></div>
    <div class="progress-step" id="pb-1"></div>
    <div class="progress-step" id="pb-2"></div>
    <div class="progress-step" id="pb-3"></div>
    <div class="progress-step" id="pb-4"></div>
  </div>

  <!-- ============================
       √âTAPE 0 : INTRODUCTION
       ============================ -->
  <div class="step-content active" id="step-0">
    <div class="step-section">
      <div class="step-title"><span class="emoji">üéì</span> C'est quoi un CCF ?</div>
      <p class="step-text">CCF veut dire <strong>Contr√¥le Certificatif en cours de Formation</strong>. Ce sont des √©preuves que tu passes <strong>dans ton √©tablissement</strong>, pendant ta formation, et qui comptent pour ton dipl√¥me CAPa.</p>
      <p class="step-text">Tu n'as pas d'examen final comme au brevet. √Ä la place, tu passes <strong>plusieurs √©preuves r√©parties sur les 2 ans</strong>. Chaque √©preuve √©value une <strong>capacit√©</strong> : ce que tu sais faire concr√®tement.</p>
      <p class="step-text">En PSE, tu es concern√© par <strong>3 CCF</strong> :</p>
      <div class="mini-carte">
        <div class="mini-carte-item">
          <div class="mc-label">CCF1</div>
          <div class="mc-valeur">Oral dossier</div>
        </div>
        <div class="mini-carte-item">
          <div class="mc-label">CCF2</div>
          <div class="mc-valeur">√âcrit budget</div>
        </div>
        <div class="mini-carte-item">
          <div class="mc-label">CCF4</div>
          <div class="mc-valeur">Sport + biologie</div>
        </div>
      </div>
      <p class="step-text">Chaque √©preuve est not√©e sur 20 avec un <strong>coefficient 1</strong>. √áa veut dire que chacune a le m√™me poids dans ton dipl√¥me.</p>

      <div class="vocab-section">
        <div class="vocab-title">üìñ Vocabulaire √† retenir</div>
        <div class="vocab-grid">
          <div class="vocab-item"><div class="v-mot">CCF</div><div class="v-def">Contr√¥le Certificatif en cours de Formation ‚Äî une √©preuve qui compte pour le dipl√¥me</div></div>
          <div class="vocab-item"><div class="v-mot">Capacit√©</div><div class="v-def">Ce que tu sais faire. On n'√©value pas juste ce que tu sais, mais ce que tu es capable de faire</div></div>
          <div class="vocab-item"><div class="v-mot">Coefficient</div><div class="v-def">Le poids d'une √©preuve dans le dipl√¥me. Coefficient 1 = chaque √©preuve compte pareil</div></div>
          <div class="vocab-item"><div class="v-mot">Grille crit√©ri√©e</div><div class="v-def">Le tableau avec les crit√®res sur lesquels tu es not√©. Elle t'est donn√©e avant l'√©preuve</div></div>
        </div>
      </div>
    </div>

    <div class="quiz-zone" id="quiz-0">
      <h3>üß† V√©rifie que tu as compris</h3>
      <!-- Questions inject√©es par JS -->
    </div>
  </div>

  <!-- ============================
       √âTAPE 1 : CCF1
       ============================ -->
  <div class="step-content" id="step-1">
    <div class="step-section">
      <div class="step-title"><span class="emoji">üó£Ô∏è</span> CCF1 ‚Äî Mon oral dossier</div>
      <p class="step-text">Le CCF1, c'est un <strong>oral de 30 minutes</strong> devant 2 enseignants (PSE et Histoire-G√©o). Tu pr√©sentes un <strong>dossier personnel</strong> que tu as pr√©par√© pendant l'ann√©e sur un th√®me choisi en classe.</p>
      <p class="step-text">La capacit√© √©valu√©e est <strong>CG1.1 : Prendre position dans une situation √† caract√®re social et civique</strong>. √áa veut dire qu'on te demande de montrer que tu comprends le monde qui t'entoure et que tu as un avis personnel.</p>

      <div class="mini-carte">
        <div class="mini-carte-item"><div class="mc-label">Forme</div><div class="mc-valeur">Oral 30 min</div></div>
        <div class="mini-carte-item"><div class="mc-label">Support</div><div class="mc-valeur">Ton dossier</div></div>
        <div class="mini-carte-item"><div class="mc-label">√âvaluateurs</div><div class="mc-valeur">PSE + HG</div></div>
      </div>

      <div class="lien-matieres">
        <h4>ü§ù Pourquoi 2 enseignants ? Parce que c'est un seul projet !</h4>
        <div class="lien-cols">
          <div class="lien-col col-a">
            <h5>En PSE</h5>
            <ul>
              <li>‚Üí Ton identit√©, ta culture</li>
              <li>‚Üí Ton point de vue citoyen</li>
              <li>‚Üí La construction du dossier</li>
            </ul>
          </div>
          <div class="lien-plus">+</div>
          <div class="lien-col col-b">
            <h5>En Histoire-G√©o</h5>
            <ul>
              <li>‚Üí Les rep√®res historiques</li>
              <li>‚Üí La g√©ographie du territoire</li>
              <li>‚Üí L'analyse de documents</li>
            </ul>
          </div>
        </div>
        <div class="lien-synthese">= Un m√™me th√®me, deux regards compl√©mentaires, une seule √©preuve, une seule note</div>
      </div>

      <p class="step-text"><strong>Ce qu'on attend de toi :</strong> tu ne r√©cites pas. Tu <strong>pr√©sentes</strong> ton travail, tu <strong>expliques</strong> ce que tu as compris, et surtout tu <strong>donnes ton avis</strong> en le justifiant. ¬´ Je pense que... parce que... ¬ª</p>

      <div class="vocab-section">
        <div class="vocab-title">üìñ Vocabulaire √† retenir</div>
        <div class="vocab-grid">
          <div class="vocab-item"><div class="v-mot">Argumenter</div><div class="v-def">Donner ton avis ET expliquer pourquoi avec des raisons, des exemples</div></div>
          <div class="vocab-item"><div class="v-mot">Prendre position</div><div class="v-def">Dire ce que tu penses sur un sujet et le d√©fendre</div></div>
          <div class="vocab-item"><div class="v-mot">Citoyen</div><div class="v-def">Quelqu'un qui participe √† la vie de la soci√©t√©, conna√Æt ses droits et ses devoirs</div></div>
          <div class="vocab-item"><div class="v-mot">Support</div><div class="v-def">Le document sur lequel tu t'appuies (ici, ton dossier)</div></div>
        </div>
      </div>
    </div>
    <div class="quiz-zone" id="quiz-1"><h3>üß† V√©rifie que tu as compris</h3></div>
  </div>

  <!-- ============================
       √âTAPE 2 : CCF2
       ============================ -->
  <div class="step-content" id="step-2">
    <div class="step-section">
      <div class="step-title"><span class="emoji">üìù</span> CCF2 ‚Äî Mon √©crit budget</div>
      <p class="step-text">Le CCF2, c'est un <strong>√©crit de 1h √† 1h30</strong>. Tu re√ßois un sujet avec des documents sur une situation de la vie courante (g√©rer un budget, comparer des offres, consommer de fa√ßon responsable).</p>
      <p class="step-text">La capacit√© √©valu√©e est <strong>CG1.2 : Utiliser des outils dans des situations de la vie courante</strong>. On te demande d'utiliser les maths comme un outil pour r√©soudre des probl√®mes concrets du quotidien.</p>

      <div class="mini-carte">
        <div class="mini-carte-item"><div class="mc-label">Forme</div><div class="mc-valeur">√âcrit 1h-1h30</div></div>
        <div class="mini-carte-item"><div class="mc-label">Mat√©riel</div><div class="mc-valeur">Calculatrice</div></div>
        <div class="mini-carte-item"><div class="mc-label">Disciplines</div><div class="mc-valeur">Maths + SESG</div></div>
      </div>

      <div class="lien-matieres">
        <h4>ü§ù Pourquoi maths et vie courante ensemble ?</h4>
        <div class="lien-cols">
          <div class="lien-col col-a">
            <h5>Les maths (les outils)</h5>
            <ul>
              <li>‚Üí Pourcentages, proportionnalit√©</li>
              <li>‚Üí Lire un graphique, un tableau</li>
              <li>‚Üí Calculer, comparer</li>
            </ul>
          </div>
          <div class="lien-plus">+</div>
          <div class="lien-col col-b">
            <h5>La vie courante (les situations)</h5>
            <ul>
              <li>‚Üí G√©rer un budget</li>
              <li>‚Üí Consommer de fa√ßon responsable</li>
              <li>‚Üí Comparer des offres</li>
            </ul>
          </div>
        </div>
        <div class="lien-synthese">= Les maths sont au service de ta vie quotidienne. Une seule √©preuve, une seule note</div>
      </div>

      <p class="step-text"><strong>Ce qu'on attend de toi :</strong> tu lis les documents, tu fais les calculs demand√©s <strong>en montrant ta m√©thode</strong>, et √† la fin tu donnes <strong>ton avis argument√©</strong>. M√™me si ton calcul est faux, montre la m√©thode : √ßa rapporte des points !</p>

      <div class="vocab-section">
        <div class="vocab-title">üìñ Vocabulaire √† retenir</div>
        <div class="vocab-grid">
          <div class="vocab-item"><div class="v-mot">Proportionnalit√©</div><div class="v-def">Quand deux choses augmentent ou diminuent de la m√™me fa√ßon (ex : 2√ó plus de km = 2√ó plus d'essence)</div></div>
          <div class="vocab-item"><div class="v-mot">Budget</div><div class="v-def">L'ensemble de tes revenus (ce que tu gagnes) et de tes d√©penses (ce que tu paies)</div></div>
          <div class="vocab-item"><div class="v-mot">Consommation responsable</div><div class="v-def">Acheter de fa√ßon r√©fl√©chie, en pensant √† ta sant√©, ton budget et l'environnement</div></div>
          <div class="vocab-item"><div class="v-mot">SESG</div><div class="v-def">Sciences √âconomiques, Sociales et de Gestion ‚Äî la mati√®re qui √©tudie la vie en soci√©t√© et l'√©conomie</div></div>
        </div>
      </div>
    </div>
    <div class="quiz-zone" id="quiz-2"><h3>üß† V√©rifie que tu as compris</h3></div>
  </div>

  <!-- ============================
       √âTAPE 3 : CCF4
       ============================ -->
  <div class="step-content" id="step-3">
    <div class="step-section">
      <div class="step-title"><span class="emoji">üèÉ</span> CCF4 ‚Äî Mon √©preuve sport + biologie</div>
      <p class="step-text">Le CCF4 se d√©roule en <strong>2 temps</strong> : d'abord tu pratiques une <strong>activit√© sportive</strong> (APSA), ensuite tu passes un <strong>oral de 15 minutes</strong> o√π tu expliques ce qui se passe dans ton corps pendant l'effort.</p>
      <p class="step-text">La capacit√© √©valu√©e est <strong>CG2.2 : Adopter des comportements favorisant son √©quilibre personnel</strong>. On veut voir que tu sais bouger ET que tu comprends pourquoi c'est important pour ta sant√©.</p>

      <div class="mini-carte">
        <div class="mini-carte-item"><div class="mc-label">Forme</div><div class="mc-valeur">Pratique + Oral 15 min</div></div>
        <div class="mini-carte-item"><div class="mc-label">Note sport</div><div class="mc-valeur">‚Öî de la note</div></div>
        <div class="mini-carte-item"><div class="mc-label">Note oral bio</div><div class="mc-valeur">‚Öì de la note</div></div>
      </div>

      <div class="lien-matieres">
        <h4>ü§ù Pourquoi EPS et biologie ensemble ?</h4>
        <div class="lien-cols">
          <div class="lien-col col-b">
            <h5>En EPS</h5>
            <ul>
              <li>‚Üí Tu pratiques un sport</li>
              <li>‚Üí Tu ressens l'effort</li>
              <li>‚Üí Tu progresses physiquement</li>
            </ul>
          </div>
          <div class="lien-plus">+</div>
          <div class="lien-col col-a">
            <h5>En PSE (biologie)</h5>
            <ul>
              <li>‚Üí Tu comprends ton corps</li>
              <li>‚Üí C≈ìur, poumons, muscles</li>
              <li>‚Üí Alimentation et effort</li>
            </ul>
          </div>
        </div>
        <div class="lien-synthese">= Tu fais du sport et tu sais expliquer ce qui se passe dans ton corps. Les 2 profs sont l√† ensemble pendant toute l'√©preuve</div>
      </div>

      <p class="step-text"><strong>Les th√®mes possibles √† l'oral :</strong> l'adaptation √† l'effort (fr√©quence cardiaque, respiration), le fonctionnement de tes muscles et de ton c≈ìur, et l'alimentation adapt√©e √† l'effort.</p>

      <div class="vocab-section">
        <div class="vocab-title">üìñ Vocabulaire √† retenir</div>
        <div class="vocab-grid">
          <div class="vocab-item"><div class="v-mot">APSA</div><div class="v-def">Activit√© Physique Sportive et Artistique ‚Äî l'activit√© que tu pratiques (course, muscu, danse...)</div></div>
          <div class="vocab-item"><div class="v-mot">Fr√©quence cardiaque</div><div class="v-def">Le nombre de battements de ton c≈ìur par minute. Elle augmente √† l'effort</div></div>
          <div class="vocab-item"><div class="v-mot">Appareil musculo-squelettique</div><div class="v-def">L'ensemble muscles + os + tendons + articulations qui te permettent de bouger</div></div>
          <div class="vocab-item"><div class="v-mot">R√©cup√©ration</div><div class="v-def">Le moment o√π ton corps revient au calme apr√®s un effort (c≈ìur ralentit, respiration se calme)</div></div>
        </div>
      </div>
    </div>
    <div class="quiz-zone" id="quiz-3"><h3>üß† V√©rifie que tu as compris</h3></div>
  </div>

  <!-- ============================
       √âTAPE 4 : BILAN
       ============================ -->
  <div class="step-content" id="step-4">
    <div class="step-section">
      <div class="bilan-container" id="bilan-zone">
        <!-- Rempli par JS -->
      </div>
    </div>
  </div>

  <!-- NAVIGATION -->
  <div class="nav-bar">
    <button class="nav-btn prev" id="btn-prev" onclick="prevStep()" style="visibility:hidden">‚Üê Pr√©c√©dent</button>
    <span class="nav-score" id="nav-score"></span>
    <button class="nav-btn next" id="btn-next" onclick="nextStep()" disabled>Suivant ‚Üí</button>
  </div>

  <div class="app-footer">CAPa ‚Äî Parcours de compr√©hension des √©preuves CCF</div>
</div>

<script>
// ============================================
// DATA : QUESTIONS
// ============================================
const allQuestions = {
  0: [
    {
      q: "Que veut dire CCF ?",
      options: ["Cours Commun de Formation", "Contr√¥le Certificatif en cours de Formation", "Contr√¥le Continu Final", "Certificat de Comp√©tences de Formation"],
      correct: 1,
      hints: [
        { title: "Pas tout √† fait !", text: "Relis la premi√®re phrase de la pr√©sentation. CCF, c'est un contr√¥le qui compte pour le dipl√¥me et qui se passe pendant ta formation, pas √† la fin." },
        { title: "Encore un effort !", text: "Le mot cl√© c'est ¬´ certificatif ¬ª ‚Äî √ßa veut dire que √ßa certifie, √ßa prouve que tu as la capacit√©. Et ¬´ en cours de formation ¬ª = pendant tes 2 ans, pas √† un examen final.", example: "C'est comme un permis de conduire : on te teste sur la route pendant que tu apprends, pas seulement √† la fin." },
        { title: "Voici la r√©ponse", text: "<strong>Contr√¥le Certificatif en cours de Formation</strong>. ¬´ Certificatif ¬ª = √ßa compte pour ton dipl√¥me. ¬´ En cours de formation ¬ª = tu le passes pendant tes 2 ans de CAPa, dans ton √©tablissement." }
      ],
      successMsg: "Exactement ! CCF = Contr√¥le Certificatif en cours de Formation. √áa compte directement pour ton dipl√¥me."
    },
    {
      q: "Combien de CCF passes-tu en PSE ?",
      options: ["2", "3", "4", "6"],
      correct: 1,
      hints: [
        { title: "Pas exactement", text: "Regarde les 3 cartes au-dessus. En PSE, tu es concern√© par 3 √©preuves : le CCF1, le CCF2 et le CCF4." },
        { title: "Un indice de plus", text: "Il existe 6 CCF au total pour le CAPa, mais toi en PSE tu n'es concern√© que par 3 d'entre eux. Les 3 autres sont en lettres, langues et autres mati√®res.", example: "CCF1 = oral dossier, CCF2 = √©crit budget, CCF4 = sport + biologie" },
        { title: "Voici la r√©ponse", text: "Tu passes <strong>3 CCF en PSE</strong> : CCF1 (oral dossier), CCF2 (√©crit budget) et CCF4 (sport + biologie)." }
      ],
      successMsg: "Bravo ! 3 CCF en PSE : CCF1 (oral dossier), CCF2 (√©crit budget), CCF4 (sport + biologie)."
    },
    {
      q: "En CAPa, qu'est-ce qu'on √©value ?",
      options: ["Seulement tes connaissances (ce que tu sais par c≈ìur)", "Tes capacit√©s (ce que tu sais faire)", "Ta participation en cours", "Tes notes de contr√¥les tout au long de l'ann√©e"],
      correct: 1,
      hints: [
        { title: "Pas exactement", text: "En CAPa, on ne te demande pas juste de savoir des choses. On √©value ce que tu es CAPABLE de faire avec ce que tu as appris." },
        { title: "R√©fl√©chis bien", text: "Le mot cl√© c'est ¬´ capacit√© ¬ª. Par exemple, on ne te demande pas de r√©citer la d√©finition d'un budget. On te demande de montrer que tu es capable de g√©rer un budget.", example: "C'est comme le permis : on ne te demande pas de r√©citer le code, on regarde si tu sais conduire." },
        { title: "Voici la r√©ponse", text: "On √©value tes <strong>capacit√©s</strong> ‚Äî ce que tu sais FAIRE. Chaque CCF √©value une capacit√© pr√©cise (CG1.1, CG1.2, CG2.2)." }
      ],
      successMsg: "Parfait ! Le CAPa √©value tes CAPACIT√âS : ce que tu sais faire concr√®tement, pas juste ce que tu connais par c≈ìur."
    },
    {
      q: "La grille d'√©valuation (le tableau avec les crit√®res de notation), quand la re√ßois-tu ?",
      options: ["Le jour de l'√©preuve seulement", "Avant l'√©preuve, pour que tu puisses te pr√©parer", "Jamais, c'est secret", "Apr√®s l'√©preuve, avec ta note"],
      correct: 1,
      hints: [
        { title: "Non, ce n'est pas √ßa", text: "Le texte officiel dit que la grille te sera donn√©e EN AMONT de l'√©preuve. √áa veut dire avant." },
        { title: "Un indice", text: "C'est une r√®gle importante : tu as le droit de savoir sur quoi tu es not√©. Pas de surprise ! Les enseignants doivent te donner la grille pour que tu puisses te pr√©parer.", example: "Imagine un match de foot o√π on te dit les r√®gles seulement apr√®s... Ce ne serait pas juste !" },
        { title: "Voici la r√©ponse", text: "Tu re√ßois la grille <strong>avant l'√©preuve</strong>. C'est une obligation r√©glementaire : ¬´ La grille d'√©valuation construite par les enseignants sera fournie aux candidats en amont de l'√©preuve. ¬ª" }
      ],
      successMsg: "Exact ! Tu re√ßois la grille AVANT l'√©preuve. Tu sauras exactement sur quoi tu es not√©, c'est ton droit."
    }
  ],

  1: [
    {
      q: "Combien de temps dure l'oral du CCF1 ?",
      options: ["15 minutes", "30 minutes", "1 heure", "45 minutes"],
      correct: 1,
      hints: [
        { title: "Pas celui-l√† !", text: "Attention, 15 minutes c'est l'oral du CCF4 (sport + biologie). Le CCF1, c'est plus long." },
        { title: "Regarde les cartes r√©sum√©", text: "Le CCF1 c'est un oral de 30 minutes, sans temps de pr√©paration. Tu arrives avec ton dossier et tu pr√©sentes directement." },
        { title: "Voici la r√©ponse", text: "L'oral du CCF1 dure <strong>30 minutes maximum</strong>, sans pr√©paration." }
      ],
      successMsg: "Oui ! 30 minutes maximum, sans pr√©paration. Tu arrives avec ton dossier, pr√™t √† pr√©senter."
    },
    {
      q: "Pourquoi y a-t-il 2 enseignants (PSE + Histoire-G√©o) pour le CCF1 ?",
      options: ["Pour te surveiller mieux", "Parce que c'est un seul projet travaill√© sous 2 angles compl√©mentaires", "Parce qu'un seul prof n'a pas le droit de noter", "Pour te poser 2 fois plus de questions"],
      correct: 1,
      hints: [
        { title: "Ce n'est pas une question de surveillance", text: "Les 2 profs sont l√† parce que ton dossier utilise ce que tu as appris dans les DEUX mati√®res. C'est un travail commun." },
        { title: "Pense au th√®me de ton dossier", text: "En PSE tu travailles ton identit√©, ta culture, ton point de vue. En Histoire-G√©o tu √©tudies les rep√®res historiques et g√©ographiques du m√™me th√®me. Les 2 se compl√®tent.", example: "Par exemple sur 'D'o√π je viens' : en PSE tu parles de ta famille, en HG tu situes les migrations sur une carte et dans l'histoire." },
        { title: "Voici la r√©ponse", text: "C'est un <strong>seul projet travaill√© sous 2 angles</strong>. PSE (identit√©, citoyennet√©) + HG (rep√®res, territoire) = un dossier complet. <strong>Une seule √©preuve, une seule note.</strong>" }
      ],
      successMsg: "Exactement ! C'est un seul projet vu sous 2 angles. PSE + HG se compl√®tent, une seule √©preuve, une seule note."
    },
    {
      q: "Qu'est-ce qu'on attend surtout de toi au CCF1 ?",
      options: ["R√©citer ton dossier par c≈ìur", "Lire ton dossier √† voix haute", "Pr√©senter ton travail et donner ton avis personnel argument√©", "R√©pondre √† un QCM sur ton dossier"],
      correct: 2,
      hints: [
        { title: "Non, justement !", text: "R√©citer ou lire, ce n'est pas ¬´ prendre position ¬ª. Rappelle-toi : la capacit√© √©valu√©e c'est CG1.1 ‚Äî PRENDRE POSITION." },
        { title: "Le mot cl√© c'est ARGUMENTER", text: "On veut que tu expliques ce que tu as compris et que tu donnes TON avis avec des raisons. Pas une r√©citation.", example: "Par exemple : ¬´ Je pense que vivre √† la campagne a des avantages parce que... mais aussi des inconv√©nients parce que... ¬ª" },
        { title: "Voici la r√©ponse", text: "On attend que tu <strong>pr√©sentes ton travail et donnes ton avis personnel argument√©</strong>. Le mot cl√© est ¬´ argumenter ¬ª : dire ce que tu penses ET expliquer pourquoi." }
      ],
      successMsg: "Bravo ! Tu pr√©sentes ton travail, tu donnes ton avis et tu argumentes. C'est √ßa ¬´ prendre position ¬ª !"
    },
    {
      q: "Que veut dire ¬´ argumenter ¬ª ?",
      options: ["Parler fort pour convaincre", "Donner son avis ET expliquer pourquoi avec des raisons", "Copier ce que dit le prof", "√ätre d'accord avec tout le monde"],
      correct: 1,
      hints: [
        { title: "Ce n'est pas une question de volume !", text: "Argumenter ce n'est pas parler fort. C'est expliquer le POURQUOI de ce que tu penses." },
        { title: "La formule magique", text: "Argumenter = ¬´ Je pense que... PARCE QUE... ¬ª. Tu donnes ton avis (je pense que) + ta raison (parce que).", example: "¬´ Je pense que manger local c'est mieux PARCE QUE √ßa pollue moins et √ßa aide les agriculteurs de ma r√©gion. ¬ª" },
        { title: "Voici la r√©ponse", text: "<strong>Argumenter = donner son avis ET expliquer pourquoi</strong>. La formule : ¬´ Je pense que... parce que... ¬ª. C'est la comp√©tence la plus importante du CCF1." }
      ],
      successMsg: "Parfait ! Argumenter = ¬´ Je pense que... parce que... ¬ª. C'est le c≈ìur de l'√©preuve !"
    }
  ],

  2: [
    {
      q: "Le CCF2 est un √©crit. Combien de temps as-tu ?",
      options: ["30 minutes", "1 heure √† 1h30", "2 heures", "15 minutes"],
      correct: 1,
      hints: [
        { title: "Non, c'est plus long que √ßa", text: "30 min c'est l'oral du CCF1. Le CCF2 est un √©crit, tu as plus de temps." },
        { title: "Regarde les cartes r√©sum√©", text: "L'√©crit dure entre 1 heure et 1h30. C'est assez de temps pour lire les documents, faire tes calculs et r√©diger ton avis." },
        { title: "Voici la r√©ponse", text: "Tu as entre <strong>1 heure et 1h30</strong> pour le CCF2." }
      ],
      successMsg: "Oui ! Entre 1h et 1h30. Prends le temps de bien lire les documents avant de te lancer."
    },
    {
      q: "√Ä quoi servent les maths dans le CCF2 ?",
      options: ["C'est juste un exercice de maths classique", "Ce sont des outils pour r√©soudre des probl√®mes de la vie courante", "C'est pour v√©rifier si tu connais tes tables de multiplication", "C'est pour calculer ta moyenne g√©n√©rale"],
      correct: 1,
      hints: [
        { title: "Pas exactement", text: "Ce n'est pas un devoir de maths classique ! Les maths sont au service d'une situation concr√®te de la vie quotidienne." },
        { title: "Pense au budget", text: "Par exemple, on te donne un budget familial et tu dois calculer des pourcentages de d√©penses, lire un graphique d'√©volution des prix, comparer des offres. Les maths t'aident √† comprendre et d√©cider.", example: "¬´ Le loyer repr√©sente 35% des revenus. Est-ce raisonnable ? ¬ª ‚Üí tu dois savoir calculer un pourcentage pour r√©pondre." },
        { title: "Voici la r√©ponse", text: "Les maths sont des <strong>outils pour r√©soudre des probl√®mes concrets</strong>. Le sujet te plonge dans une situation r√©elle (budget, consommation) et tu utilises les maths pour y r√©pondre." }
      ],
      successMsg: "Exactement ! Les maths sont des outils au service de la vie quotidienne. Pas des exercices abstraits."
    },
    {
      q: "Si ton calcul est faux mais que ta m√©thode est bonne, que se passe-t-il ?",
      options: ["Tu as 0 point", "Tu peux quand m√™me avoir des points pour la m√©thode", "On te retire des points en plus", "Le prof refait le calcul pour toi"],
      correct: 1,
      hints: [
        { title: "Non, heureusement !", text: "En CCF, on √©value ta capacit√© √† raisonner, pas juste le r√©sultat final. La m√©thode compte." },
        { title: "C'est pour √ßa qu'on te demande de montrer tes calculs", text: "Si tu √©cris ¬´ 150 √ó 0,35 = 48,50 ¬ª (faux, c'est 52,50), le prof voit que tu as compris qu'il fallait multiplier par le pourcentage. Tu perds des points sur le r√©sultat mais tu en gagnes sur la m√©thode.", example: "C'est comme en cuisine : si ta recette est bonne mais que tu as mis un peu trop de sel, on ne jette pas tout le plat !" },
        { title: "Voici la r√©ponse", text: "Tu peux <strong>avoir des points pour la m√©thode</strong> m√™me si le r√©sultat est faux. C'est pour √ßa qu'il faut TOUJOURS montrer tes calculs, ne jamais √©crire juste un chiffre." }
      ],
      successMsg: "Bien jou√© ! Montre TOUJOURS tes calculs. La m√©thode rapporte des points m√™me si le r√©sultat est faux."
    },
    {
      q: "√Ä la fin du CCF2, qu'est-ce qu'on te demande en plus des calculs ?",
      options: ["Rien, c'est juste des calculs", "De recopier les documents", "De donner ton avis personnel argument√© sur la situation", "De faire un dessin"],
      correct: 2,
      hints: [
        { title: "Il manque quelque chose d'important !", text: "Le CCF2 ne se r√©sume pas √† des calculs. Rappelle-toi : on √©value aussi ta capacit√© √† ¬´ prendre une position personnelle et argument√©e ¬ª." },
        { title: "Le mot cl√© revient", text: "Comme au CCF1, on te demande d'ARGUMENTER. Apr√®s tes calculs, tu dois proposer une solution et expliquer pourquoi c'est un bon choix.", example: "¬´ Je conseillerais √† cette famille de choisir le forfait B parce que d'apr√®s mes calculs, il leur ferait √©conomiser 15‚Ç¨ par mois. ¬ª" },
        { title: "Voici la r√©ponse", text: "On te demande de <strong>donner ton avis personnel argument√©</strong>. Tu utilises tes calculs pour justifier un choix ou proposer une solution √† la situation." }
      ],
      successMsg: "Exact ! Apr√®s les calculs, tu donnes ton avis argument√©. Les calculs servent √† justifier ton choix."
    }
  ],

  3: [
    {
      q: "Le CCF4 se d√©roule en 2 temps. Lesquels ?",
      options: ["Un √©crit + un oral", "Une pratique sportive + un oral de biologie", "Un oral + un √©crit de biologie", "Deux √©preuves sportives"],
      correct: 1,
      hints: [
        { title: "Pas tout √† fait", text: "Le CCF4, c'est avant tout une √©preuve de sport. Mais pas que..." },
        { title: "D'abord tu bouges, ensuite tu expliques", text: "D'abord tu fais ton activit√© sportive (APSA), le prof d'EPS t'√©value. Ensuite tu passes un oral de 15 minutes o√π tu expliques ce qui s'est pass√© dans ton corps.", example: "Tu cours ‚Üí ton c≈ìur bat vite ‚Üí tu es essouffl√© ‚Üí √† l'oral tu expliques POURQUOI." },
        { title: "Voici la r√©ponse", text: "C'est <strong>une pratique sportive + un oral de biologie de 15 minutes</strong>. Tu fais du sport, puis tu expliques ce que ton corps a v√©cu." }
      ],
      successMsg: "Oui ! D'abord la pratique sportive, puis un oral de 15 min sur la biologie. Les 2 sont li√©s."
    },
    {
      q: "Quelle part de la note repr√©sente la pratique sportive ?",
      options: ["La moiti√© (¬Ω)", "Un tiers (‚Öì)", "Deux tiers (‚Öî)", "La totalit√©"],
      correct: 2,
      hints: [
        { title: "Pas exactement", text: "La pratique sportive vaut plus que la moiti√©. C'est la plus grosse partie de la note." },
        { title: "Rappelle-toi les proportions", text: "Le sport c'est le gros morceau : ‚Öî de la note. L'oral de biologie c'est ‚Öì. √áa veut dire que si l'√©preuve est sur 20, le sport vaut environ 13 points et l'oral environ 7 points.", example: "C'est logique : on ne peut pas juste parler de sport, il faut aussi le pratiquer !" },
        { title: "Voici la r√©ponse", text: "La pratique sportive vaut <strong>‚Öî (deux tiers) de la note</strong>. L'oral de biologie vaut ‚Öì. Donne tout pendant le sport, c'est la plus grosse partie !" }
      ],
      successMsg: "Bravo ! ‚Öî pour le sport, ‚Öì pour l'oral bio. Le sport est la plus grosse partie, donne tout !"
    },
    {
      q: "√Ä l'oral du CCF4, on te demande de faire le lien entre...",
      options: ["...ton dossier et l'histoire", "...ta pratique sportive et tes connaissances en biologie", "...les maths et le sport", "...ta vie personnelle et la citoyennet√©"],
      correct: 1,
      hints: [
        { title: "Non, √ßa c'est le CCF1 ou le CCF2 !", text: "Le CCF4 concerne le sport et la biologie. On te demande d'expliquer ce qui se passe dans ton corps quand tu fais du sport." },
        { title: "Pense √† ce que tu ressens apr√®s avoir couru", text: "Ton c≈ìur bat vite, tu es essouffl√©, tes muscles sont fatigu√©s. √Ä l'oral, on veut que tu expliques POURQUOI avec ce que tu as appris en cours de biologie.", example: "¬´ Mon c≈ìur battait plus vite parce que mes muscles avaient besoin de plus d'oxyg√®ne pour produire l'√©nergie. ¬ª" },
        { title: "Voici la r√©ponse", text: "On te demande de faire le lien entre <strong>ta pratique sportive et tes connaissances en biologie</strong>. Tu expliques ce que ton corps a v√©cu pendant l'effort." }
      ],
      successMsg: "Parfait ! Tu fais le lien sport ‚Üî biologie. ¬´ Quand je cours, mon c≈ìur bat plus vite parce que... ¬ª"
    },
    {
      q: "Que veut dire APSA ?",
      options: ["Association Pour le Sport Agricole", "Activit√© Physique Sportive et Artistique", "Aide Personnalis√©e de Suivi et d'Accompagnement", "Apprentissage Pratique des Savoirs Appliqu√©s"],
      correct: 1,
      hints: [
        { title: "Non, c'est un terme d'EPS", text: "APSA est le terme officiel pour d√©signer les activit√©s sportives que tu pratiques en cours d'EPS." },
        { title: "D√©cortique les lettres", text: "A = Activit√©, P = Physique, S = Sportive, A = Artistique. √áa inclut la course, la musculation, les sports collectifs, mais aussi la danse !", example: "Exemples d'APSA : course de demi-fond, badminton, musculation, danse, sport collectif..." },
        { title: "Voici la r√©ponse", text: "<strong>APSA = Activit√© Physique Sportive et Artistique</strong>. C'est le terme officiel pour les sports que tu pratiques en EPS." }
      ],
      successMsg: "Bien jou√© ! APSA = Activit√© Physique Sportive et Artistique. Course, muscu, danse, sports co..."
    }
  ]
};

// ============================================
// LOGIQUE
// ============================================
let currentStep = 0;
const totalSteps = 5;
let scores = { 0: 0, 1: 0, 2: 0, 3: 0 };
let totals = { 0: 0, 1: 0, 2: 0, 3: 0 };
let quizStates = {};
let stepsCompleted = [false, false, false, false, false];

function initQuizzes() {
  for (let step = 0; step <= 3; step++) {
    const container = document.getElementById(`quiz-${step}`);
    const questions = allQuestions[step];
    totals[step] = questions.length;
    quizStates[step] = questions.map(() => ({ attempts: 0, answered: false }));

    questions.forEach((qData, qi) => {
      const card = document.createElement('div');
      card.className = 'question-card';
      card.id = `q-${step}-${qi}`;

      let optionsHtml = qData.options.map((opt, oi) =>
        `<div class="q-option" data-step="${step}" data-qi="${qi}" data-oi="${oi}" onclick="selectOption(this)">
          <div class="radio-dot"></div>
          <span>${opt}</span>
        </div>`
      ).join('');

      card.innerHTML = `
        <div class="q-numero">Question ${qi + 1} / ${questions.length}</div>
        <div class="q-texte">${qData.q}</div>
        <div class="q-options">${optionsHtml}</div>
        <button class="q-validate-btn" disabled onclick="validateAnswer(${step}, ${qi})">Valider ma r√©ponse</button>
        <div class="q-feedback" id="fb-${step}-${qi}"></div>
      `;
      container.appendChild(card);
    });
  }
}

function selectOption(el) {
  const step = parseInt(el.dataset.step);
  const qi = parseInt(el.dataset.qi);
  if (quizStates[step][qi].answered) return;

  const card = document.getElementById(`q-${step}-${qi}`);
  card.querySelectorAll('.q-option').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
  card.querySelector('.q-validate-btn').disabled = false;
}

function validateAnswer(step, qi) {
  const qData = allQuestions[step][qi];
  const state = quizStates[step][qi];
  const card = document.getElementById(`q-${step}-${qi}`);
  const fb = document.getElementById(`fb-${step}-${qi}`);
  const selected = card.querySelector('.q-option.selected');
  if (!selected) return;

  const chosenIdx = parseInt(selected.dataset.oi);
  const isCorrect = chosenIdx === qData.correct;

  if (isCorrect) {
    state.answered = true;
    if (state.attempts === 0) scores[step]++;

    card.classList.add('correct');
    card.querySelectorAll('.q-option').forEach(o => o.classList.add('disabled'));
    selected.classList.remove('selected');
    selected.classList.add('correct-answer');

    fb.className = 'q-feedback show success';
    fb.innerHTML = `<div class="fb-title">‚úÖ Bonne r√©ponse !</div>${qData.successMsg}`;

    card.querySelector('.q-validate-btn').style.display = 'none';
    checkStepComplete(step);
  } else {
    state.attempts++;
    selected.classList.remove('selected');
    selected.classList.add('wrong-answer');
    selected.classList.add('disabled');
    selected.onclick = null;

    const hint = qData.hints[Math.min(state.attempts - 1, qData.hints.length - 1)];
    const isReveal = state.attempts >= 3;

    if (isReveal) {
      state.answered = true;
      card.classList.add('reviewing');

      const correctOpt = card.querySelectorAll('.q-option')[qData.correct];
      correctOpt.classList.add('correct-answer');
      card.querySelectorAll('.q-option').forEach(o => o.classList.add('disabled'));

      fb.className = 'q-feedback show reveal';
      fb.innerHTML = `<div class="fb-title">üí° ${hint.title}</div>${hint.text}${hint.example ? `<div class="fb-example">üí¨ ${hint.example}</div>` : ''}`;

      card.querySelector('.q-validate-btn').style.display = 'none';
      checkStepComplete(step);
    } else {
      fb.className = `q-feedback show hint${state.attempts}`;
      fb.innerHTML = `<div class="fb-title">üí≠ ${hint.title}</div>${hint.text}${hint.example ? `<div class="fb-example">üí¨ ${hint.example}</div>` : ''}`;

      card.querySelector('.q-validate-btn').disabled = true;
    }
  }
}

function checkStepComplete(step) {
  const allDone = quizStates[step].every(s => s.answered);
  if (allDone) {
    stepsCompleted[step] = true;
    updateNavigation();
  }
}

function updateNavigation() {
  const prevBtn = document.getElementById('btn-prev');
  const nextBtn = document.getElementById('btn-next');
  const scoreEl = document.getElementById('nav-score');

  prevBtn.style.visibility = currentStep > 0 ? 'visible' : 'hidden';

  if (currentStep === 4) {
    nextBtn.style.display = 'none';
    const restartBtn = document.createElement('button');
    restartBtn.className = 'nav-btn restart';
    restartBtn.textContent = 'üîÑ Recommencer';
    restartBtn.onclick = restartAll;
    if (!document.querySelector('.nav-btn.restart')) {
      nextBtn.parentNode.appendChild(restartBtn);
    }
  } else {
    nextBtn.style.display = '';
    nextBtn.disabled = !stepsCompleted[currentStep];
    nextBtn.textContent = currentStep === 3 ? 'Voir mon bilan ‚Üí' : 'Suivant ‚Üí';
  }

  const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
  const totalQ = Object.values(totals).reduce((a, b) => a + b, 0);
  if (currentStep < 4) {
    scoreEl.textContent = `Score : ${totalScore} / ${totalQ}`;
  } else {
    scoreEl.textContent = '';
  }

  document.getElementById('progress-text').textContent = `√âtape ${currentStep + 1}/${totalSteps}`;
  for (let i = 0; i < totalSteps; i++) {
    const pb = document.getElementById(`pb-${i}`);
    pb.className = 'progress-step';
    if (i < currentStep) pb.classList.add('done');
    else if (i === currentStep) pb.classList.add('active');
  }
}

function nextStep() {
  if (currentStep >= 4) return;
  document.getElementById(`step-${currentStep}`).classList.remove('active');
  currentStep++;
  document.getElementById(`step-${currentStep}`).classList.add('active');
  if (currentStep === 4) showBilan();
  updateNavigation();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function prevStep() {
  if (currentStep <= 0) return;
  document.getElementById(`step-${currentStep}`).classList.remove('active');
  currentStep--;
  document.getElementById(`step-${currentStep}`).classList.add('active');
  const existingRestart = document.querySelector('.nav-btn.restart');
  if (existingRestart) existingRestart.remove();
  document.getElementById('btn-next').style.display = '';
  updateNavigation();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function showBilan() {
  stepsCompleted[4] = true;
  const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
  const totalQ = Object.values(totals).reduce((a, b) => a + b, 0);
  const pct = Math.round((totalScore / totalQ) * 100);

  let level, msg, detail;
  if (pct >= 90) {
    level = 'excellent';
    msg = 'üåü F√©licitations, tu as tout compris !';
    detail = 'Tu ma√Ætrises le fonctionnement des 3 CCF. Tu sais ce qu\'on attend de toi et tu connais le vocabulaire. Tu es pr√™t(e) pour tes √©preuves !';
  } else if (pct >= 70) {
    level = 'bon';
    msg = 'üëè Tr√®s bien, c\'est presque parfait !';
    detail = 'Tu as bien compris le fonctionnement g√©n√©ral. Revois les questions o√π tu as eu besoin de plusieurs essais pour √™tre encore plus √† l\'aise.';
  } else if (pct >= 50) {
    level = 'moyen';
    msg = 'üí™ C\'est un bon d√©but !';
    detail = 'Tu as compris les bases mais certaines choses m√©ritent d\'√™tre revues. N\'h√©site pas √† recommencer le parcours, √ßa ira mieux la prochaine fois !';
  } else {
    level = 'arevoir';
    msg = 'üìñ Pas de panique, on va y arriver !';
    detail = 'Ce n\'est pas grave si tu n\'as pas tout retenu du premier coup. Recommence le parcours tranquillement, relis bien les explications, et tu verras que √ßa va rentrer.';
  }

  const sectionLabels = ['Introduction CCF', 'CCF1 ‚Äî Oral dossier', 'CCF2 ‚Äî √âcrit budget', 'CCF4 ‚Äî Sport + bio'];
  let badgesHtml = '';
  for (let i = 0; i <= 3; i++) {
    const ok = scores[i] === totals[i];
    badgesHtml += `<span class="bilan-badge ${ok ? 'ok' : 'ko'}">${ok ? '‚úÖ' : 'üîÑ'} ${sectionLabels[i]} : ${scores[i]}/${totals[i]}</span>`;
  }

  document.getElementById('bilan-zone').innerHTML = `
    <div class="bilan-score-circle ${level}">
      <div class="big-num">${totalScore}</div>
      <div class="total">/ ${totalQ}</div>
    </div>
    <div class="bilan-message" style="color: var(--${level === 'excellent' ? 'vert' : level === 'bon' ? 'bleu' : level === 'moyen' ? 'orange' : 'rouge-doux'})">${msg}</div>
    <div class="bilan-detail">${detail}</div>
    <div class="bilan-sections">${badgesHtml}</div>
    <p style="font-size: 14px; color: #888; margin-top: 16px;">Tu peux recommencer autant de fois que tu veux. Plus tu fais le parcours, mieux tu comprendras tes √©preuves !</p>
  `;
}

function restartAll() {
  currentStep = 0;
  scores = { 0: 0, 1: 0, 2: 0, 3: 0 };
  stepsCompleted = [false, false, false, false, false];
  quizStates = {};

  document.querySelectorAll('.step-content').forEach(s => s.classList.remove('active'));
  document.getElementById('step-0').classList.add('active');

  for (let step = 0; step <= 3; step++) {
    const container = document.getElementById(`quiz-${step}`);
    const h3 = container.querySelector('h3');
    container.innerHTML = '';
    container.appendChild(h3);
  }

  const existingRestart = document.querySelector('.nav-btn.restart');
  if (existingRestart) existingRestart.remove();
  document.getElementById('btn-next').style.display = '';

  initQuizzes();
  updateNavigation();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// INIT
initQuizzes();
updateNavigation();
</script>


  <div class="footer-site-qr">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAHCAQAAAABUY/ToAAAD90lEQVR4nO2dTYrbQBCFX0UNs2zBHMBHkW+QI+VMcwPpKD5AQL0caFFZVPWfkk3CGNvhvYXxWP5wC4qqrh/1iOLftH37RxAgSZIkyROZxHVNAdgkANsMAEkEm10KEJmB8s3wuNWSfDoSqvukqqqKZfc/sWgGEDP8HdoFVSPW17pPkvcm3bVEVZFLBpCCG9eaAnQFOt8k1wevluQTk0lE1xSAbZ5UrjhErjFDrrG4pa//TZIvT4bhrynLUhI13eZdBWkGkN4s0n3Nb5L8v0izoZbgK9J7VgCQ5RayAgpB3IHt+w4gKoD0qNWSfFbysGQLACBXAJahob5bbgHy4xbgadr8yNWSfDYyuGsxZWC7fIpul0/BdskAcAiAQxSp91evdp8k70fC8vo1qmf0i6qn8Kt9YfJk3tI0ALqCuT3JTqp7LRLtgK5xNB/N9hXbU3u5iDZEspNbSSkqmqdRLeVFs5x90t64otKGSDZZ/RmD97GX0fFYkEOske617pPk/UgPVADc3VhoswhWmyDqDsreKW2IZC/3Q5jU98r2sVtTd8E2RcUZ0YZIVhV3MzYyYq5uqV6NzSNxT01yJA/xJqu65dgLSqvMiorLzRtpD14tyWcju5mOZjmenO0A+gR/Ul0j/RDJs0pu3xL3EtWWWlQ8b4VoQyR7lQJiiWBmKij5fq0eub/aJ9oQyZP6+lBXY9RSVIy99ymRjjZEsqmb/ZDl9qY25wEcAcst5HL1CIr4U7B8vKk8brUkn5E0n+PvdtSea66Fo9ZSK1fZLyN5IlMw22ij1P5iYx9lpsimhlKArjE/brUkn46s/iUXj9R2PGWP1HZLpQ9LP0SyU9tTd0mX1uRs2YFTgs9ng0iOKjk7SowyTXUurWitqf7KfhnJXq3G2AJVmWP0ZL419FkfIvkHuWsZIpiZj/sm1WHUkTZE8qyWwg+tsmmwpq5fxl4HyZMCED/FjGj7PikQfwaxz9Isuiigm0wqAASID10tyWckuxjlZzY0n4M6BVIiXRf46IdIFnV16m6wo0WwMp3fEnzOwpIcFNA9HL1DxZ5HNE0qy8cMbPNuHwkwZW+pvdZ9krwfGdrAkNr5DJgyEHfrtGK7KIAkULuQ3qFIIb/afZK8Hzk816GtudGfXOXVo25IlrGMZKfhEaDSyDC7irmbJEJ9ahrs25P8nfRz0HD4IWfb7Eeg+YEgKQDLftiRH+zbkxzVXEsrTHcDsd76GB+dZl5GstNwDlpUCOIRsM22pxbd5glAmu1YND++Kr1zT02y6fRItNeCotad9DC2jzJjTT9EsiigjisOOkLL7WX5ANRdUMhiDY/Xuk+S9yNrPfFvxf+1QJIkyS8ifwGFwNx2HSW1iQAAAABJRU5ErkJggg==" alt="QR Code mapse.fr">
    <div class="footer-text">
      <div>Retrouve toutes tes fiches sur</div>
      <a href="https://preventionsanteenvironnement.github.io/PSE/" target="_blank">mapse.fr</a>
    </div>
  </div>

</body>
</html>
