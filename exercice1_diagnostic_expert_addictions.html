<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module A4 - Diagnostic Expert : Facteurs de risque addictif - Seconde Bac Pro</title>
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.6;
        }

        .exercice-container {
            width: 100%;
            max-width: 100vw;
            padding: 15px;
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .module-info h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
            text-align: center;
        }

        .objectif {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid var(--warning-pse);
        }

        .competences-travaillees h3 {
            margin-bottom: 10px;
            color: var(--warning-pse);
        }

        .competences-list {
            list-style: none;
            margin-bottom: 15px;
        }

        .competences-list li {
            background: rgba(255,255,255,0.1);
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 5px solid #2ECC71;
        }

        .niveau-cible {
            text-align: center;
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
        }

        /* EXERCICE PRINCIPAL */
        .exercice-principal {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .scenario-intro {
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid var(--warning-pse);
            margin-bottom: 25px;
        }

        .scenario-intro h3 {
            color: var(--dark-pse);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .etude-cas {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--primary-pse);
        }

        .question-section {
            margin: 30px 0;
            padding: 25px;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            border-left: 5px solid var(--primary-pse);
        }

        .question-title {
            color: var(--primary-pse);
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .competence-badge {
            background: var(--primary-pse);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* SYST√àME CLIC-S√âLECTION */
        .element-clickable {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            padding: 12px;
            margin: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-align: center;
        }

        .element-clickable:hover {
            background: #bbdefb;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .element-clickable.selected {
            border: 3px solid var(--warning-pse);
            background: #FFA726;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 167, 38, 0.4);
        }

        .element-clickable.correct {
            background: var(--success-pse) !important;
            border-color: var(--success-pse) !important;
            color: white !important;
        }

        .element-clickable.incorrect {
            background: var(--danger-pse) !important;
            border-color: var(--danger-pse) !important;
            color: white !important;
        }

        .zone-depot {
            min-height: 80px;
            border: 3px dashed #ccc;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            background: #fafafa;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .zone-depot:hover, .zone-depot.active {
            border-color: var(--primary-pse);
            background: #e3f2fd;
            color: var(--primary-pse);
        }

        .zone-depot.filled {
            background: var(--success-pse);
            color: white;
            border-color: var(--success-pse);
        }

        .instructions-interaction {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 5px solid var(--success-pse);
        }

        .instructions-interaction h5 {
            color: var(--success-pse);
            margin-bottom: 8px;
        }

        /* QCM AM√âLIOR√â */
        .qcm-option {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .qcm-option:hover {
            border-color: var(--primary-pse);
            background: #e3f2fd;
            transform: translateY(-1px);
        }

        .qcm-option.selected {
            border-color: var(--warning-pse);
            background: #fff3e0;
        }

        .qcm-option.correct {
            background: #e8f5e8 !important;
            border-color: var(--success-pse) !important;
            color: var(--success-pse);
        }

        .qcm-option.incorrect {
            background: #ffebee !important;
            border-color: var(--danger-pse) !important;
            color: var(--danger-pse);
        }

        .qcm-option::before {
            content: "";
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #ccc;
        }

        .qcm-option.correct::before {
            content: "‚úì";
            background: var(--success-pse);
            border-color: var(--success-pse);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .qcm-option.incorrect::before {
            content: "‚úó";
            background: var(--danger-pse);
            border-color: var(--danger-pse);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* CORRECTION EXPLICITE OBLIGATOIRE */
        .correction-explicite {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            display: none;
        }

        .correction-explicite.visible {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .correction-explicite h4 {
            color: var(--danger-pse);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .correction-explicite .bonne-reponse {
            background: rgba(33, 150, 67, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid var(--success-pse);
        }

        .correction-explicite .explication {
            background: rgba(255, 193, 7, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid var(--warning-pse);
        }

        .btn-action {
            background: var(--primary-pse);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn-action:hover {
            background: var(--secondary-pse);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-validation {
            background: var(--success-pse);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 20px 10px;
            transition: all 0.3s ease;
        }

        .btn-validation:hover {
            background: #1e7e34;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(33, 150, 67, 0.3);
        }

        .score-display {
            background: var(--primary-pse);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
        }

        /* AUTO-√âVALUATION COMP√âTENCES */
        .evaluation-competences {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 5px solid var(--secondary-pse);
        }

        .competence-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 5px solid #ddd;
            transition: all 0.3s ease;
        }

        .competence-item.acquired {
            border-left-color: var(--success-pse);
            background: #e8f5e8;
        }

        .competence-item.partial {
            border-left-color: var(--warning-pse);
            background: #fff8e1;
        }

        .competence-item.not-acquired {
            border-left-color: var(--danger-pse);
            background: #ffebee;
        }

        /* FOOTER RGPD √âPUR√â */
        .rgpd-notice {
            text-align: center;
            padding: 15px;
            background: var(--dark-pse);
            color: white;
            font-size: 0.9em;
            margin-top: 30px;
        }

        /* RESPONSIVE DESIGN */
        @media (min-width: 768px) {
            .exercice-container {
                padding: 20px;
                font-size: 17px;
            }
            
            .cadre-pedagogique {
                padding: 30px;
            }
            
            .exercice-principal {
                padding: 35px;
            }
        }

        @media (min-width: 1024px) {
            .exercice-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 30px;
                font-size: 18px;
            }
            
            .module-info h2 {
                font-size: 2.2em;
            }
        }

        /* ANIMATIONS */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: slideIn 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="exercice-container">
        
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module A4 : Les addictions</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Agir en citoyen responsable vis-√†-vis des comportements √† risques et des conduites addictives
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li><strong>C3</strong> - Expliquer un ph√©nom√®ne physiologique, un enjeu environnemental, une disposition r√©glementaire, en lien avec une mesure de pr√©vention</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Seconde
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            
            <!-- SCENARIO INTRODUCTION -->
            <div class="scenario-intro">
                <h3>üîç MISSION : Diagnostic Expert en Pr√©vention des Addictions</h3>
                <p><strong>Contexte :</strong> Vous √™tes stagiaire au sein du service de pr√©vention de votre lyc√©e professionnel. L'infirmi√®re scolaire vous confie une mission d'analyse : √©tudier diff√©rents cas d'√©l√®ves pour identifier les facteurs de risque addictif et expliquer les m√©canismes biologiques impliqu√©s.</p>
                <p><strong>Objectif :</strong> D√©velopper votre expertise en diagnostic des situations √† risque pour pouvoir ensuite proposer des actions de pr√©vention efficaces.</p>
                <p><strong>Dur√©e estim√©e :</strong> 35-40 minutes</p>
            </div>

            <!-- √âTUDE DE CAS 1 -->
            <div class="etude-cas">
                <h4>üìã CAS N¬∞1 : Mehdi, 16 ans, √©l√®ve en CAP M√©canique</h4>
                <p><em>"Mehdi a commenc√© √† fumer √† 14 ans lors de soir√©es avec ses amis. Son p√®re ayant perdu son emploi, l'ambiance √† la maison est tendue. Il fume maintenant un paquet de cigarettes par jour et dit que c'est le seul moyen de se d√©tendre. Ses copains lui proposent maintenant d'essayer le cannabis."</em></p>
            </div>

            <!-- QUESTION 1 : IDENTIFICATION FACTEURS DE RISQUE -->
            <div class="question-section">
                <div class="question-title">
                    <span class="competence-badge">C2</span>
                    Question 1 : Analyse des facteurs de risque addictif
                </div>
                
                <div class="instructions-interaction">
                    <h5>üì± COMMENT PROC√âDER :</h5>
                    <p><strong>1.</strong> Cliquez sur un facteur dans la liste pour le s√©lectionner (il s'illumine) <strong>2.</strong> Cliquez sur la cat√©gorie correspondante <strong>3.</strong> Le facteur se place automatiquement !</p>
                </div>

                <p><strong>Identifiez dans le cas de Mehdi les diff√©rents facteurs de risque addictif en les classant par cat√©gorie :</strong></p>

                <!-- FACTEURS √Ä CLASSER -->
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h5>Facteurs identifi√©s chez Mehdi :</h5>
                    <div id="facteurs-disponibles" style="display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0;">
                        <div class="element-clickable" data-facteur="age" data-categorie="personnel">√Çge de d√©but : 14 ans</div>
                        <div class="element-clickable" data-facteur="pression" data-categorie="environnemental">Influence du groupe d'amis</div>
                        <div class="element-clickable" data-facteur="stress" data-categorie="personnel">Stress familial (perte d'emploi du p√®re)</div>
                        <div class="element-clickable" data-facteur="nicotine" data-categorie="produit">Potentiel addictog√®ne de la nicotine</div>
                        <div class="element-clickable" data-facteur="frequence" data-categorie="produit">Consommation quotidienne (1 paquet/jour)</div>
                        <div class="element-clickable" data-facteur="disponibilite" data-categorie="environnemental">Disponibilit√© du produit (propositions amis)</div>
                    </div>
                </div>

                <!-- ZONES DE D√âP√îT -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div>
                        <h5>üß† Facteurs personnels</h5>
                        <div class="zone-depot" data-categorie="personnel">Cliquez ici pour placer les facteurs personnels</div>
                        <ul id="zone-personnel" style="list-style: none; padding: 0;"></ul>
                    </div>
                    
                    <div>
                        <h5>üåç Facteurs environnementaux</h5>
                        <div class="zone-depot" data-categorie="environnemental">Cliquez ici pour placer les facteurs environnementaux</div>
                        <ul id="zone-environnemental" style="list-style: none; padding: 0;"></ul>
                    </div>
                    
                    <div>
                        <h5>üíä Facteurs li√©s au produit</h5>
                        <div class="zone-depot" data-categorie="produit">Cliquez ici pour placer les facteurs li√©s au produit</div>
                        <ul id="zone-produit" style="list-style: none; padding: 0;"></ul>
                    </div>
                </div>

                <button class="btn-validation" onclick="verifierClassement()">‚úì V√©rifier mon classement</button>
                
                <div id="correction-q1" class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ CLASSEMENT CORRECT :</strong><br>
                        <strong>Facteurs personnels :</strong> √Çge de d√©but (14 ans), Stress familial<br>
                        <strong>Facteurs environnementaux :</strong> Influence du groupe d'amis, Disponibilit√© du produit<br>
                        <strong>Facteurs li√©s au produit :</strong> Potentiel addictog√®ne de la nicotine, Consommation quotidienne
                    </div>
                    <div class="explication">
                        <strong>üí° EXPLICATION :</strong> Les addictions r√©sultent de l'interaction de 3 types de facteurs. Les facteurs personnels incluent l'√¢ge (cerveau adolescent plus vuln√©rable) et les √©v√©nements stressants. Les facteurs environnementaux concernent l'entourage et la disponibilit√© des produits. Les facteurs li√©s au produit incluent sa toxicit√© et la fr√©quence de consommation. Chez Mehdi, tous ces facteurs sont pr√©sents, ce qui explique l'√©volution rapide vers la d√©pendance.
                    </div>
                </div>
            </div>

            <!-- √âTUDE DE CAS 2 -->
            <div class="etude-cas">
                <h4>üìã CAS N¬∞2 : Circuit de la r√©compense et addiction</h4>
                <p>L'infirmi√®re vous explique : <em>"Pour comprendre pourquoi Mehdi est devenu d√©pendant, il faut comprendre ce qui se passe dans son cerveau. Les substances psychoactives agissent sur un circuit sp√©cifique..."</em></p>
            </div>

            <!-- QUESTION 2 : M√âCANISME BIOLOGIQUE -->
            <div class="question-section">
                <div class="question-title">
                    <span class="competence-badge">C3</span>
                    Question 2 : M√©canisme biologique de l'addiction
                </div>

                <p><strong>Expliquez le m√©canisme de l'addiction en compl√©tant le processus √©tape par √©tape :</strong></p>

                <!-- QCM √âTAPES DU PROCESSUS -->
                <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    
                    <div style="margin: 20px 0;">
                        <h5>√âtape 1 : O√π se trouve le circuit de la r√©compense ?</h5>
                        <div class="qcm-option" data-question="etape1" data-correct="false">Dans le foie</div>
                        <div class="qcm-option" data-question="etape1" data-correct="true">Dans le cerveau</div>
                        <div class="qcm-option" data-question="etape1" data-correct="false">Dans le c≈ìur</div>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5>√âtape 2 : Comment s'appellent les cellules nerveuses qui transmettent les informations ?</h5>
                        <div class="qcm-option" data-question="etape2" data-correct="false">Les lymphocytes</div>
                        <div class="qcm-option" data-question="etape2" data-correct="true">Les neurones</div>
                        <div class="qcm-option" data-question="etape2" data-correct="false">Les globules rouges</div>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5>√âtape 3 : Quelle substance chimique procure la sensation de plaisir ?</h5>
                        <div class="qcm-option" data-question="etape3" data-correct="false">L'adr√©naline</div>
                        <div class="qcm-option" data-question="etape3" data-correct="false">L'insuline</div>
                        <div class="qcm-option" data-question="etape3" data-correct="true">La dopamine</div>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5>√âtape 4 : Comment s'appelle la zone de connexion entre deux neurones ?</h5>
                        <div class="qcm-option" data-question="etape4" data-correct="true">La synapse</div>
                        <div class="qcm-option" data-question="etape4" data-correct="false">La dendrite</div>
                        <div class="qcm-option" data-question="etape4" data-correct="false">L'axone</div>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5>√âtape 5 : Que se passe-t-il avec les substances psychoactives ?</h5>
                        <div class="qcm-option" data-question="etape5" data-correct="false">Elles diminuent la production de dopamine</div>
                        <div class="qcm-option" data-question="etape5" data-correct="true">Elles augmentent massivement la lib√©ration de dopamine</div>
                        <div class="qcm-option" data-question="etape5" data-correct="false">Elles bloquent totalement la dopamine</div>
                    </div>
                </div>

                <button class="btn-validation" onclick="verifierMecanisme()">‚úì V√©rifier mes r√©ponses</button>

                <div id="correction-q2" class="correction-explicite">
                    <h4>‚ùå CORRECTION COMPL√àTE</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ M√âCANISME CORRECT :</strong><br>
                        Le circuit de la r√©compense se trouve dans le <strong>cerveau</strong> et est compos√© de <strong>neurones</strong> qui communiquent au niveau des <strong>synapses</strong>. La sensation de plaisir est due √† la lib√©ration de <strong>dopamine</strong>. Les substances psychoactives <strong>augmentent massivement la lib√©ration de dopamine</strong>, cr√©ant une sensation de plaisir intense qui pousse √† r√©p√©ter l'exp√©rience.
                    </div>
                    <div class="explication">
                        <strong>üí° EXPLICATION APPROFONDIE :</strong> En temps normal, la dopamine est lib√©r√©e lors d'activit√©s naturellement plaisantes (manger, socialiser...). Les substances psychoactives (nicotine, alcool, cannabis...) perturbent ce syst√®me en provoquant une lib√©ration massive et artificielle de dopamine. Le cerveau s'habitue √† ces niveaux √©lev√©s et en demande toujours plus, ce qui explique l'escalade dans la consommation et la difficult√© √† arr√™ter. C'est un m√©canisme neurobiologique, pas un manque de volont√© !
                    </div>
                </div>
            </div>

            <!-- QUESTION 3 : TYPES D'ADDICTION -->
            <div class="question-section">
                <div class="question-title">
                    <span class="competence-badge">C1</span>
                    Question 3 : Types d'addiction et substances
                </div>

                <p><strong>L'infirmi√®re vous pr√©sente diff√©rents cas. Identifiez le type d'addiction et classez les substances :</strong></p>

                <!-- SITUATIONS D'ADDICTION -->
                <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                        <strong>Cas A :</strong> Lisa passe 12h par jour √† jouer aux jeux vid√©o, n√©glige ses cours et ses amis.
                        <div style="margin: 10px 0;">
                            Type d'addiction :
                            <select id="addiction-lisa" style="margin-left: 10px; padding: 5px;">
                                <option value="">Choisir...</option>
                                <option value="comportementale">Addiction comportementale</option>
                                <option value="substance">Addiction √† une substance</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                        <strong>Cas B :</strong> Tom consomme quotidiennement de l'alcool et ne peut plus s'en passer.
                        <div style="margin: 10px 0;">
                            Type d'addiction :
                            <select id="addiction-tom" style="margin-left: 10px; padding: 5px;">
                                <option value="">Choisir...</option>
                                <option value="comportementale">Addiction comportementale</option>
                                <option value="substance">Addiction √† une substance</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                        <strong>Cas C :</strong> Sarah fait des achats compulsifs et s'endette pour acheter des v√™tements.
                        <div style="margin: 10px 0;">
                            Type d'addiction :
                            <select id="addiction-sarah" style="margin-left: 10px; padding: 5px;">
                                <option value="">Choisir...</option>
                                <option value="comportementale">Addiction comportementale</option>
                                <option value="substance">Addiction √† une substance</option>
                            </select>
                        </div>
                    </div>
                </div>

                <p><strong>Maintenant, classez ces substances selon leur statut l√©gal :</strong></p>

                <!-- CLASSIFICATION SUBSTANCES -->
                <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <h5>‚úÖ Substances licites</h5>
                            <div id="zone-licites" style="min-height: 120px; border: 2px dashed #28a745; padding: 15px; border-radius: 8px; background: #f8fff8;">
                                <em>Autoris√©es mais r√©glement√©es</em>
                            </div>
                        </div>
                        <div>
                            <h5>‚ùå Substances illicites</h5>
                            <div id="zone-illicites" style="min-height: 120px; border: 2px dashed #dc3545; padding: 15px; border-radius: 8px; background: #fff8f8;">
                                <em>Interdites par la loi</em>
                            </div>
                        </div>
                    </div>

                    <div id="substances-disponibles" style="display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0;">
                        <div class="element-clickable" data-substance="alcool" data-statut="licite">Alcool</div>
                        <div class="element-clickable" data-substance="tabac" data-statut="licite">Tabac</div>
                        <div class="element-clickable" data-substance="cannabis" data-statut="illicite">Cannabis</div>
                        <div class="element-clickable" data-substance="cocaine" data-statut="illicite">Coca√Øne</div>
                        <div class="element-clickable" data-substance="medicaments" data-statut="licite">M√©dicaments psychotropes</div>
                        <div class="element-clickable" data-substance="ecstasy" data-statut="illicite">Ecstasy</div>
                    </div>
                </div>

                <button class="btn-validation" onclick="verifierTypes()">‚úì V√©rifier mes classifications</button>

                <div id="correction-q3" class="correction-explicite">
                    <h4>‚ùå CORRECTION</h4>
                    <div class="bonne-reponse">
                        <strong>‚úÖ TYPES D'ADDICTION CORRECTS :</strong><br>
                        ‚Ä¢ Lisa : <strong>Addiction comportementale</strong> (pas de substance)<br>
                        ‚Ä¢ Tom : <strong>Addiction √† une substance</strong> (alcool)<br>
                        ‚Ä¢ Sarah : <strong>Addiction comportementale</strong> (achats compulsifs)<br><br>
                        <strong>‚úÖ CLASSIFICATION DES SUBSTANCES :</strong><br>
                        ‚Ä¢ <strong>Licites :</strong> Alcool, Tabac, M√©dicaments psychotropes<br>
                        ‚Ä¢ <strong>Illicites :</strong> Cannabis, Coca√Øne, Ecstasy
                    </div>
                    <div class="explication">
                        <strong>üí° EXPLICATION :</strong> Il existe deux types d'addiction : aux <strong>substances psychoactives</strong> (qui agissent chimiquement sur le cerveau) et <strong>comportementales</strong> (sans substance, mais avec les m√™mes m√©canismes de d√©pendance). Les substances licites sont autoris√©es mais r√©glement√©es (√¢ge, lieux, quantit√©) tandis que les illicites sont totalement interdites. ATTENTION : licite ne veut pas dire sans danger ! L'alcool et le tabac sont les principales causes de mortalit√© √©vitable en France.
                    </div>
                </div>
            </div>

            <!-- AUTO-√âVALUATION COMP√âTENCES -->
            <div class="evaluation-competences">
                <h3>üéØ Auto-√©valuation de tes comp√©tences</h3>
                <div id="competence-c1" class="competence-item">
                    <strong>C1 - Traiter une information :</strong> 
                    <span class="status">En cours d'√©valuation...</span>
                </div>
                <div id="competence-c2" class="competence-item">
                    <strong>C2 - Appliquer une d√©marche d'analyse :</strong>
                    <span class="status">En cours d'√©valuation...</span>
                </div>
                <div id="competence-c3" class="competence-item">
                    <strong>C3 - Expliquer un ph√©nom√®ne physiologique :</strong>
                    <span class="status">En cours d'√©valuation...</span>
                </div>
            </div>

            <!-- SCORE GLOBAL -->
            <div id="score-global" class="score-display" style="display: none;">
                <h3>üìä Ton diagnostic expert : <span id="score-pourcentage">0</span>% de r√©ussite</h3>
                <p id="message-encourage"></p>
                <button class="btn-action" onclick="recommencer()">üîÑ Recommencer l'exercice</button>
                <button class="btn-action" onclick="window.print()">üìÑ Imprimer mes r√©sultats</button>
            </div>

        </main>

    </div>

    <!-- FOOTER RGPD √âPUR√â -->
    <div class="rgpd-notice">
        üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
    </div>

    <script>
        // VARIABLES GLOBALES
        let elementSelectionne = null;
        let scores = {
            q1: 0,
            q2: 0,
            q3: 0
        };
        let competences = {
            C1: { score: 0, total: 0 },
            C2: { score: 0, total: 0 },
            C3: { score: 0, total: 0 }
        };

        // SYST√àME CLIC-S√âLECTION
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion des facteurs de risque
            const facteurs = document.querySelectorAll('[data-facteur]');
            const zones = document.querySelectorAll('[data-categorie]');

            facteurs.forEach(facteur => {
                facteur.addEventListener('click', function() {
                    if (elementSelectionne) {
                        elementSelectionne.classList.remove('selected');
                    }
                    elementSelectionne = this;
                    this.classList.add('selected');
                });
            });

            zones.forEach(zone => {
                zone.addEventListener('click', function() {
                    if (elementSelectionne && elementSelectionne.dataset.facteur) {
                        placerFacteur(this.dataset.categorie);
                    }
                });
            });

            // Gestion des substances
            const substances = document.querySelectorAll('[data-substance]');
            const zonesSubstances = ['zone-licites', 'zone-illicites'];

            substances.forEach(substance => {
                substance.addEventListener('click', function() {
                    if (elementSelectionne) {
                        elementSelectionne.classList.remove('selected');
                    }
                    elementSelectionne = this;
                    this.classList.add('selected');
                });
            });

            document.getElementById('zone-licites').addEventListener('click', function() {
                if (elementSelectionne && elementSelectionne.dataset.substance) {
                    placerSubstance('licites');
                }
            });

            document.getElementById('zone-illicites').addEventListener('click', function() {
                if (elementSelectionne && elementSelectionne.dataset.substance) {
                    placerSubstance('illicites');
                }
            });

            // Gestion QCM
            const qcmOptions = document.querySelectorAll('.qcm-option');
            qcmOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.dataset.question;
                    
                    // D√©s√©lectionner autres options de la m√™me question
                    document.querySelectorAll(`[data-question="${question}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // S√©lectionner cette option
                    this.classList.add('selected');
                });
            });
        });

        function placerFacteur(categorie) {
            if (!elementSelectionne) return;

            const facteur = elementSelectionne.dataset.facteur;
            const categorieCorrecte = elementSelectionne.dataset.categorie;
            const texte = elementSelectionne.textContent;

            // Cr√©er l'√©l√©ment plac√©
            const elementPlace = document.createElement('li');
            elementPlace.innerHTML = `<span style="background: #e3f2fd; padding: 8px 12px; border-radius: 6px; display: block; margin: 5px 0;">${texte}</span>`;
            elementPlace.dataset.facteur = facteur;
            elementPlace.dataset.correct = categorieCorrecte === categorie ? 'true' : 'false';

            // Ajouter √† la zone
            document.getElementById(`zone-${categorie}`).appendChild(elementPlace);

            // Cacher l'√©l√©ment original
            elementSelectionne.style.display = 'none';
            elementSelectionne = null;
        }

        function placerSubstance(zone) {
            if (!elementSelectionne) return;

            const substance = elementSelectionne.dataset.substance;
            const statutCorrect = elementSelectionne.dataset.statut;
            const texte = elementSelectionne.textContent;

            // Cr√©er l'√©l√©ment plac√©
            const elementPlace = document.createElement('div');
            elementPlace.innerHTML = `<span style="background: #f0f8ff; padding: 8px 12px; border-radius: 6px; display: inline-block; margin: 3px;">${texte}</span>`;
            elementPlace.dataset.substance = substance;
            elementPlace.dataset.correct = (zone === 'licites' && statutCorrect === 'licite') || (zone === 'illicites' && statutCorrect === 'illicite') ? 'true' : 'false';

            // Ajouter √† la zone
            document.getElementById(`zone-${zone}`).appendChild(elementPlace);

            // Cacher l'√©l√©ment original
            elementSelectionne.style.display = 'none';
            elementSelectionne = null;
        }

        function verifierClassement() {
            let score = 0;
            let total = 6;

            // V√©rifier tous les placements
            const zones = ['personnel', 'environnemental', 'produit'];
            zones.forEach(zone => {
                const elements = document.querySelectorAll(`#zone-${zone} [data-facteur]`);
                elements.forEach(element => {
                    const isCorrect = element.dataset.correct === 'true';
                    const span = element.querySelector('span');
                    
                    if (isCorrect) {
                        span.style.background = '#e8f5e8';
                        span.style.color = '#2e7d32';
                        span.style.borderLeft = '4px solid #4caf50';
                        score++;
                    } else {
                        span.style.background = '#ffebee';
                        span.style.color = '#d32f2f';
                        span.style.borderLeft = '4px solid #f44336';
                    }
                });
            });

            scores.q1 = Math.round((score / total) * 100);
            
            // Mettre √† jour comp√©tences
            competences.C2.score += score >= 4 ? 1 : 0;
            competences.C2.total += 1;

            // Afficher correction
            document.getElementById('correction-q1').classList.add('visible');
            
            // Scroll vers correction
            document.getElementById('correction-q1').scrollIntoView({ behavior: 'smooth' });
        }

        function verifierMecanisme() {
            let score = 0;
            let total = 5;

            const reponses = [
                { question: 'etape1', correct: 'true' },
                { question: 'etape2', correct: 'true' },
                { question: 'etape3', correct: 'true' },
                { question: 'etape4', correct: 'true' },
                { question: 'etape5', correct: 'true' }
            ];

            reponses.forEach(rep => {
                const options = document.querySelectorAll(`[data-question="${rep.question}"]`);
                options.forEach(option => {
                    const isSelected = option.classList.contains('selected');
                    const isCorrect = option.dataset.correct === rep.correct;
                    
                    if (isCorrect) {
                        option.classList.add('correct');
                        if (isSelected) score++;
                    } else if (isSelected) {
                        option.classList.add('incorrect');
                    }
                });
            });

            scores.q2 = Math.round((score / total) * 100);
            
            // Mettre √† jour comp√©tences
            competences.C3.score += score >= 3 ? 1 : 0;
            competences.C3.total += 1;

            // Afficher correction
            document.getElementById('correction-q2').classList.add('visible');
            document.getElementById('correction-q2').scrollIntoView({ behavior: 'smooth' });
        }

        function verifierTypes() {
            let score = 0;
            let total = 9; // 3 types addiction + 6 substances

            // V√©rifier types d'addiction
            const selectLisa = document.getElementById('addiction-lisa');
            const selectTom = document.getElementById('addiction-tom');
            const selectSarah = document.getElementById('addiction-sarah');

            if (selectLisa.value === 'comportementale') {
                selectLisa.style.background = '#e8f5e8';
                score++;
            } else {
                selectLisa.style.background = '#ffebee';
            }

            if (selectTom.value === 'substance') {
                selectTom.style.background = '#e8f5e8';
                score++;
            } else {
                selectTom.style.background = '#ffebee';
            }

            if (selectSarah.value === 'comportementale') {
                selectSarah.style.background = '#e8f5e8';
                score++;
            } else {
                selectSarah.style.background = '#ffebee';
            }

            // V√©rifier classification substances
            const zonesSubstances = ['licites', 'illicites'];
            zonesSubstances.forEach(zone => {
                const elements = document.querySelectorAll(`#zone-${zone} [data-substance]`);
                elements.forEach(element => {
                    const isCorrect = element.dataset.correct === 'true';
                    const span = element.querySelector('span');
                    
                    if (isCorrect) {
                        span.style.background = '#e8f5e8';
                        span.style.color = '#2e7d32';
                        span.style.border = '2px solid #4caf50';
                        score++;
                    } else {
                        span.style.background = '#ffebee';
                        span.style.color = '#d32f2f';
                        span.style.border = '2px solid #f44336';
                    }
                });
            });

            scores.q3 = Math.round((score / total) * 100);
            
            // Mettre √† jour comp√©tences
            competences.C1.score += score >= 6 ? 1 : 0;
            competences.C1.total += 1;

            // Afficher correction
            document.getElementById('correction-q3').classList.add('visible');
            document.getElementById('correction-q3').scrollIntoView({ behavior: 'smooth' });

            // Calculer score final
            calculerScoreFinal();
        }

        function calculerScoreFinal() {
            const scoreMoyen = Math.round((scores.q1 + scores.q2 + scores.q3) / 3);
            
            document.getElementById('score-pourcentage').textContent = scoreMoyen;
            
            let message = "";
            if (scoreMoyen >= 80) {
                message = "üéâ Excellent ! Tu ma√Ætrises bien les m√©canismes des addictions. Tes comp√©tences d'analyse et d'explication sont solides.";
            } else if (scoreMoyen >= 60) {
                message = "üëç Bien ! Tu comprends les bases. R√©vise les m√©canismes biologiques pour parfaire ton expertise.";
            } else {
                message = "üí™ Continue tes efforts ! Relis le cours sur les facteurs de risque et le circuit de la r√©compense.";
            }
            
            document.getElementById('message-encourage').textContent = message;
            document.getElementById('score-global').style.display = 'block';
            
            // Mettre √† jour √©valuation comp√©tences
            mettreAJourCompetences();
            
            // Scroll vers r√©sultats
            document.getElementById('score-global').scrollIntoView({ behavior: 'smooth' });
        }

        function mettreAJourCompetences() {
            // C1
            const c1Element = document.getElementById('competence-c1');
            const c1Taux = competences.C1.total > 0 ? (competences.C1.score / competences.C1.total) * 100 : 0;
            if (c1Taux >= 70) {
                c1Element.classList.add('acquired');
                c1Element.querySelector('.status').textContent = "‚úÖ Acquise - Tu sais traiter les informations sur les addictions";
            } else {
                c1Element.classList.add('partial');
                c1Element.querySelector('.status').textContent = "‚ö° En cours - Continue √† analyser les donn√©es";
            }

            // C2  
            const c2Element = document.getElementById('competence-c2');
            const c2Taux = competences.C2.total > 0 ? (competences.C2.score / competences.C2.total) * 100 : 0;
            if (c2Taux >= 70) {
                c2Element.classList.add('acquired');
                c2Element.querySelector('.status').textContent = "‚úÖ Acquise - Tu sais analyser les facteurs de risque";
            } else {
                c2Element.classList.add('partial');
                c2Element.querySelector('.status').textContent = "‚ö° En cours - Approfondis la d√©marche d'analyse";
            }

            // C3
            const c3Element = document.getElementById('competence-c3');
            const c3Taux = competences.C3.total > 0 ? (competences.C3.score / competences.C3.total) * 100 : 0;
            if (c3Taux >= 70) {
                c3Element.classList.add('acquired');
                c3Element.querySelector('.status').textContent = "‚úÖ Acquise - Tu expliques bien les m√©canismes biologiques";
            } else {
                c3Element.classList.add('partial');
                c3Element.querySelector('.status').textContent = "‚ö° En cours - R√©vise le circuit de la r√©compense";
            }
        }

        function recommencer() {
            location.reload();
        }

        // Sauvegarde locale anonyme
        function sauvegarderProgres() {
            const progres = {
                scores: scores,
                competences: competences,
                timestamp: Date.now()
            };
            localStorage.setItem('pse_a4_diagnostic', JSON.stringify(progres));
        }

        // Auto-sauvegarde toutes les 2 minutes
        setInterval(sauvegarderProgres, 120000);
    </script>
</body>
</html>