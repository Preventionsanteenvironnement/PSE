<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C3 ‚Äì Parcours du Salari√©</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #059669;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1e293b;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 900px; margin: 0 auto; }
        
        .source-banner {
            background: rgba(255,255,255,0.15);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .source-banner a { color: rgba(255,255,255,0.9); font-size: 11px; text-decoration: none; }
        
        .screen { display: none; }
        .screen.active { display: block; }
        
        /* Intro */
        .intro-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            max-width: 650px;
            margin: 0 auto;
        }
        
        .intro-card h2 { font-size: 28px; margin-bottom: 15px; color: var(--dark); }
        .intro-card > p { color: #64748b; margin-bottom: 20px; }
        
        .objectif-box {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 12px 12px 0;
            text-align: left;
            margin-bottom: 25px;
        }
        
        .objectif-box strong { color: var(--primary); font-size: 11px; }
        .objectif-box p { font-size: 13px; margin-top: 5px; }
        
        .character-select {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .character-option {
            background: #f8fafc;
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 25px 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .character-option:hover { border-color: var(--primary); transform: translateY(-3px); }
        .character-option.selected { border-color: var(--primary); background: #dcfce7; }
        
        .character-option .avatar { font-size: 50px; margin-bottom: 10px; }
        .character-option .name { font-size: 16px; font-weight: 700; color: var(--dark); }
        .character-option .job { font-size: 12px; color: #64748b; }
        
        .btn-start {
            padding: 18px 50px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--primary), #047857);
            color: white;
            font-family: inherit;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-start:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(5, 150, 105, 0.4); }
        .btn-start:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        /* Game */
        .game-header {
            background: white;
            border-radius: 20px;
            padding: 15px 25px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .game-header h2 { font-size: 16px; color: var(--dark); }
        .game-header h2 span { color: var(--primary); }
        
        .header-stats { display: flex; gap: 15px; }
        
        .header-stat {
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
        }
        
        .header-stat.score { background: #fef3c7; color: #92400e; }
        .header-stat.step { background: #dcfce7; color: #166534; }
        
        /* Timeline */
        .timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .timeline-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
            position: relative;
        }
        
        .timeline-step::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 60px;
            width: 40px;
            height: 3px;
            background: #e2e8f0;
        }
        
        .timeline-step:last-child::after { display: none; }
        
        .timeline-step .icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-bottom: 8px;
            transition: all 0.3s;
        }
        
        .timeline-step.active .icon {
            background: var(--primary);
            transform: scale(1.2);
        }
        
        .timeline-step.completed .icon {
            background: var(--success);
        }
        
        .timeline-step .label {
            font-size: 10px;
            color: #64748b;
            text-align: center;
        }
        
        .timeline-step.active .label { color: var(--primary); font-weight: 700; }
        
        /* Situation */
        .situation-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
        }
        
        .situation-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .situation-header .avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
        }
        
        .situation-header .text h3 { font-size: 18px; color: var(--dark); margin-bottom: 5px; }
        .situation-header .text p { font-size: 13px; color: #64748b; line-height: 1.5; }
        
        .situation-question {
            background: #f8fafc;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .situation-question h4 {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .situation-question p {
            font-size: 13px;
            color: var(--primary);
            font-weight: 600;
        }
        
        .picto-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .picto-option {
            background: #f8fafc;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .picto-option:hover:not(:disabled) {
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .picto-option img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 8px;
        }
        
        .picto-option .name { font-size: 10px; font-weight: 600; color: var(--dark); }
        
        .picto-option.correct { border-color: var(--success); background: #dcfce7; }
        .picto-option.wrong { border-color: var(--danger); background: #fee2e2; }
        .picto-option:disabled { cursor: default; }
        
        .feedback-box {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            display: none;
            margin-bottom: 20px;
        }
        
        .feedback-box.show { display: block; animation: fadeIn 0.4s ease; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback-box.success { background: #dcfce7; border: 2px solid var(--success); }
        .feedback-box.error { background: #fee2e2; border: 2px solid var(--danger); }
        
        .feedback-box h4 { font-size: 18px; margin-bottom: 8px; }
        .feedback-box.success h4 { color: #166534; }
        .feedback-box.error h4 { color: #991b1b; }
        .feedback-box p { font-size: 13px; color: #475569; }
        
        .btn-next {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), #047857);
            color: white;
            font-family: inherit;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-next:hover { transform: translateY(-2px); }
        .btn-next:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        /* Results */
        .results-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            max-width: 550px;
            margin: 0 auto;
        }
        
        .results-card .trophy { font-size: 80px; margin-bottom: 15px; }
        .results-card h2 { font-size: 26px; margin-bottom: 10px; color: var(--dark); }
        .results-card > p { color: #64748b; margin-bottom: 25px; }
        
        .results-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        .results-stats .stat { text-align: center; }
        .results-stats .stat .val { font-size: 36px; font-weight: 800; color: var(--primary); }
        .results-stats .stat .lbl { font-size: 12px; color: #64748b; }
        
        @media (max-width: 600px) {
            .picto-options { grid-template-columns: repeat(2, 1fr); }
            .character-select { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <div class="source-banner">
            <a href="https://www.inrs.fr" target="_blank">üìö Source : INRS ‚Äì Institut National de Recherche et de S√©curit√© ‚Äì www.inrs.fr</a>
        </div>
        
        <!-- Intro -->
        <div class="screen active" id="intro-screen">
            <div class="intro-card">
                <h2>üö∂ Parcours du Salari√©</h2>
                <p>Accompagne un salari√© durant sa journ√©e de travail et identifie les pictogrammes rencontr√©s !</p>
                
                <div class="objectif-box">
                    <strong>üéØ OBJECTIF</strong>
                    <p>√ätre capable de <strong>reconna√Ætre</strong> les pictogrammes de s√©curit√© dans des situations de travail concr√®tes.</p>
                </div>
                
                <p style="font-weight: 600; margin-bottom: 15px;">Choisis ton personnage :</p>
                
                <div class="character-select">
                    <div class="character-option" onclick="selectCharacter('emma')" data-char="emma">
                        <div class="avatar">üë©‚Äçüîß</div>
                        <div class="name">Emma</div>
                        <div class="job">Technicienne de laboratoire</div>
                    </div>
                    <div class="character-option" onclick="selectCharacter('lucas')" data-char="lucas">
                        <div class="avatar">üë®‚Äçüè≠</div>
                        <div class="name">Lucas</div>
                        <div class="job">Agent de maintenance</div>
                    </div>
                </div>
                
                <button class="btn-start" id="btn-start" onclick="startGame()" disabled>Commencer la journ√©e ‚òÄÔ∏è</button>
            </div>
        </div>
        
        <!-- Game -->
        <div class="screen" id="game-screen">
            <div class="game-header">
                <h2>Journ√©e de <span id="char-name">Emma</span></h2>
                <div class="header-stats">
                    <div class="header-stat score">‚≠ê <span id="score">0</span> pts</div>
                    <div class="header-stat step">üìç √âtape <span id="step">1</span>/6</div>
                </div>
            </div>
            
            <div class="timeline" id="timeline">
                <!-- G√©n√©r√© dynamiquement -->
            </div>
            
            <div class="situation-card">
                <div class="situation-header">
                    <div class="avatar" id="avatar">üë©‚Äçüîß</div>
                    <div class="text">
                        <h3 id="situation-title">Titre</h3>
                        <p id="situation-desc">Description</p>
                    </div>
                </div>
                
                <div class="situation-question">
                    <h4>‚ùì Question</h4>
                    <p id="question-text">Quel pictogramme Emma doit-elle voir ici ?</p>
                </div>
                
                <div class="picto-options" id="picto-options">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
                
                <div class="feedback-box" id="feedback">
                    <h4 id="feedback-title"></h4>
                    <p id="feedback-text"></p>
                </div>
                
                <button class="btn-next" id="btn-next" onclick="nextStep()" disabled>
                    √âtape suivante ‚Üí
                </button>
            </div>
        </div>
        
        <!-- Results -->
        <div class="screen" id="results-screen">
            <div class="results-card">
                <div class="trophy" id="trophy">üèÜ</div>
                <h2 id="results-title">Journ√©e termin√©e !</h2>
                <p id="results-msg">Tu as accompagn√© le salari√© avec succ√®s !</p>
                
                <div class="results-stats">
                    <div class="stat">
                        <div class="val" id="final-score">0</div>
                        <div class="lbl">Points</div>
                    </div>
                    <div class="stat">
                        <div class="val" id="final-correct">0/6</div>
                        <div class="lbl">Bonnes r√©ponses</div>
                    </div>
                </div>
                
                <button class="btn-start" onclick="restartGame()">üîÑ Nouvelle journ√©e</button>
            </div>
        </div>
        
    </div>
    
    <script>
        const characters = {
            emma: {
                name: "Emma",
                avatar: "üë©‚Äçüîß",
                job: "Technicienne de laboratoire",
                steps: [
                    {
                        icon: "üö™",
                        label: "Arriv√©e",
                        title: "Arriv√©e au laboratoire",
                        desc: "Emma arrive au travail et doit s'√©quiper avant d'entrer dans le laboratoire.",
                        question: "Quel pictogramme indique l'√©quipement obligatoire √† l'entr√©e ?",
                        correct: "lunettes",
                        options: ["lunettes", "casque", "fumer", "sortie"],
                        explanation: "Les lunettes de protection sont obligatoires en laboratoire pour prot√©ger les yeux des projections."
                    },
                    {
                        icon: "üß™",
                        label: "Paillasse",
                        title: "Travail √† la paillasse",
                        desc: "Emma manipule des produits chimiques dangereux √† la paillasse.",
                        question: "Quel pictogramme signale le danger des produits manipul√©s ?",
                        correct: "toxique",
                        options: ["toxique", "chariot", "sortie", "rassemblement"],
                        explanation: "Le pictogramme danger toxique avertit de la pr√©sence de substances nocives."
                    },
                    {
                        icon: "üóÑÔ∏è",
                        label: "Stockage",
                        title: "Acc√®s au local de stockage",
                        desc: "Emma doit r√©cup√©rer des r√©actifs dans l'armoire de stockage des produits chimiques.",
                        question: "Quel pictogramme d'obligation doit-elle respecter ?",
                        correct: "gants",
                        options: ["gants", "antibruit", "entrer", "extincteur"],
                        explanation: "Les gants de protection sont obligatoires pour manipuler des produits chimiques."
                    },
                    {
                        icon: "‚òï",
                        label: "Pause",
                        title: "Pause caf√©",
                        desc: "Emma se rend en salle de pause. Un pictogramme rappelle les r√®gles.",
                        question: "Quel pictogramme est affich√© dans les locaux ?",
                        correct: "fumer",
                        options: ["fumer", "gants", "chute", "lance"],
                        explanation: "L'interdiction de fumer est obligatoire dans tous les locaux de travail."
                    },
                    {
                        icon: "üî•",
                        label: "S√©curit√©",
                        title: "Point s√©curit√© incendie",
                        desc: "Emma passe devant le point s√©curit√© incendie dans le couloir.",
                        question: "Quel pictogramme indique l'emplacement de l'√©quipement anti-incendie ?",
                        correct: "extincteur",
                        options: ["extincteur", "toxique", "gants", "chariot"],
                        explanation: "Le pictogramme extincteur indique o√π trouver un extincteur en cas d'incendie."
                    },
                    {
                        icon: "üö∂",
                        label: "D√©part",
                        title: "Fin de journ√©e",
                        desc: "Emma quitte le b√¢timent en suivant le plan d'√©vacuation.",
                        question: "Quel pictogramme guide vers la sortie ?",
                        correct: "sortie",
                        options: ["sortie", "rassemblement", "alarme", "lunettes"],
                        explanation: "Le pictogramme sortie de secours indique le chemin vers les issues de secours."
                    }
                ]
            },
            lucas: {
                name: "Lucas",
                avatar: "üë®‚Äçüè≠",
                job: "Agent de maintenance",
                steps: [
                    {
                        icon: "üëî",
                        label: "Vestiaire",
                        title: "√âquipement au vestiaire",
                        desc: "Lucas doit s'√©quiper avant d'intervenir dans l'atelier.",
                        question: "Quel √©quipement de protection individuelle est obligatoire ?",
                        correct: "chaussures",
                        options: ["chaussures", "lunettes", "fumer", "alarme"],
                        explanation: "Les chaussures de s√©curit√© prot√®gent les pieds des chutes d'objets et des perforations."
                    },
                    {
                        icon: "‚ö°",
                        label: "√âlectricit√©",
                        title: "Intervention √©lectrique",
                        desc: "Lucas doit intervenir pr√®s d'une armoire √©lectrique.",
                        question: "Quel pictogramme avertit du danger ?",
                        correct: "electricite",
                        options: ["electricite", "toxique", "sortie", "gants"],
                        explanation: "Le pictogramme danger √©lectrique signale un risque d'√©lectrocution."
                    },
                    {
                        icon: "üì¶",
                        label: "Entrep√¥t",
                        title: "Passage dans l'entrep√¥t",
                        desc: "Lucas traverse l'entrep√¥t o√π circulent des chariots √©l√©vateurs.",
                        question: "Quel pictogramme avertit de ce danger ?",
                        correct: "chariot",
                        options: ["chariot", "chute", "fumer", "extincteur"],
                        explanation: "Le pictogramme chariot √©l√©vateur avertit de la circulation d'engins."
                    },
                    {
                        icon: "üîß",
                        label: "Atelier",
                        title: "Travail bruyant √† l'atelier",
                        desc: "Lucas utilise une meuleuse qui produit beaucoup de bruit.",
                        question: "Quel √©quipement de protection est obligatoire ?",
                        correct: "antibruit",
                        options: ["antibruit", "casque", "sortie", "toxique"],
                        explanation: "La protection auditive est obligatoire au-del√† de 85 d√©cibels."
                    },
                    {
                        icon: "üöß",
                        label: "Zone",
                        title: "Zone √† acc√®s restreint",
                        desc: "Lucas passe devant une zone interdite au personnel non autoris√©.",
                        question: "Quel pictogramme interdit l'acc√®s ?",
                        correct: "entrer",
                        options: ["entrer", "toucher", "flamme", "rassemblement"],
                        explanation: "Le pictogramme acc√®s interdit emp√™che l'entr√©e des personnes non autoris√©es."
                    },
                    {
                        icon: "üèÅ",
                        label: "Fin",
                        title: "Point de rassemblement",
                        desc: "Avant de partir, Lucas rep√®re le point de rassemblement en cas d'√©vacuation.",
                        question: "Quel pictogramme indique ce lieu ?",
                        correct: "rassemblement",
                        options: ["rassemblement", "sortie", "secours", "alarme"],
                        explanation: "Le point de rassemblement est le lieu o√π se regrouper apr√®s une √©vacuation."
                    }
                ]
            }
        };
        
        const allPictos = {
            gants: { name: "Port des gants", image: "pictogrammes/images/OBLIGATION-gants.jpg" },
            casque: { name: "Port du casque", image: "pictogrammes/images/OBLIGATION-casque.jpg" },
            chaussures: { name: "Chaussures s√©curit√©", image: "pictogrammes/images/OBLIGATION-chaussures.jpg" },
            lunettes: { name: "Lunettes protection", image: "pictogrammes/images/OBLIGATION-lunettes.jpg" },
            antibruit: { name: "Protection auditive", image: "pictogrammes/images/OBLIGATION-casque-antibruit.jpg" },
            fumer: { name: "Interdiction fumer", image: "pictogrammes/images/INTERDIT-fumer.jpg" },
            flamme: { name: "Flamme interdite", image: "pictogrammes/images/INTERDIT-flamme.jpg" },
            entrer: { name: "Acc√®s interdit", image: "pictogrammes/images/INTERDIT-entrer.jpg" },
            toucher: { name: "Interdit toucher", image: "pictogrammes/images/INTERDIT-toucher.jpg" },
            electricite: { name: "Danger √©lectrique", image: "pictogrammes/images/DANGER-electricite.jpg" },
            chute: { name: "Danger chute", image: "pictogrammes/images/DANGER-chute.jpg" },
            toxique: { name: "Produit toxique", image: "pictogrammes/images/DANGER-produit-toxique.jpg" },
            chariot: { name: "Chariot √©l√©vateur", image: "pictogrammes/images/DANGER-chariot.jpg" },
            extincteur: { name: "Extincteur", image: "pictogrammes/images/INCENDIE-extincteur.jpg" },
            alarme: { name: "Alarme incendie", image: "pictogrammes/images/INCENDIE-alarme.jpg" },
            lance: { name: "Lance incendie", image: "pictogrammes/images/INCENDIE-lance.jpg" },
            sortie: { name: "Sortie secours", image: "pictogrammes/images/SECOURS-sortie-vers-droite.jpg" },
            rassemblement: { name: "Point rassemblement", image: "pictogrammes/images/SECOURS-point-rassemblement.jpg" },
            secours: { name: "Premiers secours", image: "pictogrammes/images/SECOURS-croix.jpg" }
        };
        
        let selectedChar = null;
        let currentStep = 0;
        let score = 0;
        let correctCount = 0;
        let answered = false;
        
        function selectCharacter(char) {
            selectedChar = char;
            document.querySelectorAll('.character-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.char === char);
            });
            document.getElementById('btn-start').disabled = false;
        }
        
        function startGame() {
            document.getElementById('intro-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            
            currentStep = 0;
            score = 0;
            correctCount = 0;
            
            const char = characters[selectedChar];
            document.getElementById('char-name').textContent = char.name;
            document.getElementById('avatar').textContent = char.avatar;
            
            renderTimeline();
            loadStep();
        }
        
        function renderTimeline() {
            const char = characters[selectedChar];
            const timeline = document.getElementById('timeline');
            
            timeline.innerHTML = char.steps.map((step, i) => `
                <div class="timeline-step ${i === 0 ? 'active' : ''}" data-step="${i}">
                    <div class="icon">${step.icon}</div>
                    <div class="label">${step.label}</div>
                </div>
            `).join('');
        }
        
        function loadStep() {
            const char = characters[selectedChar];
            const step = char.steps[currentStep];
            answered = false;
            
            document.getElementById('step').textContent = (currentStep + 1) + '/6';
            document.getElementById('situation-title').textContent = step.title;
            document.getElementById('situation-desc').textContent = step.desc;
            document.getElementById('question-text').textContent = step.question;
            
            // Update timeline
            document.querySelectorAll('.timeline-step').forEach((el, i) => {
                el.classList.remove('active');
                if (i < currentStep) el.classList.add('completed');
                if (i === currentStep) el.classList.add('active');
            });
            
            // Render options
            const optionsContainer = document.getElementById('picto-options');
            const shuffledOptions = [...step.options].sort(() => Math.random() - 0.5);
            
            optionsContainer.innerHTML = shuffledOptions.map(key => {
                const picto = allPictos[key];
                return `
                    <div class="picto-option" data-key="${key}" onclick="checkAnswer('${key}')">
                        <img src="${picto.image}" alt="${picto.name}">
                        <div class="name">${picto.name}</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('feedback').classList.remove('show', 'success', 'error');
            document.getElementById('btn-next').disabled = true;
            document.getElementById('btn-next').textContent = currentStep < 5 ? '√âtape suivante ‚Üí' : 'Voir les r√©sultats üèÜ';
        }
        
        function checkAnswer(key) {
            if (answered) return;
            answered = true;
            
            const char = characters[selectedChar];
            const step = char.steps[currentStep];
            const feedback = document.getElementById('feedback');
            
            document.querySelectorAll('.picto-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.dataset.key === step.correct) {
                    opt.classList.add('correct');
                }
            });
            
            if (key === step.correct) {
                document.querySelector(`.picto-option[data-key="${key}"]`).classList.add('correct');
                score += 15;
                correctCount++;
                
                feedback.classList.add('show', 'success');
                document.getElementById('feedback-title').textContent = 'Bravo ! ‚úÖ';
                document.getElementById('feedback-text').textContent = step.explanation;
            } else {
                document.querySelector(`.picto-option[data-key="${key}"]`).classList.add('wrong');
                
                feedback.classList.add('show', 'error');
                document.getElementById('feedback-title').textContent = 'Pas tout √† fait...';
                document.getElementById('feedback-text').textContent = step.explanation;
            }
            
            document.getElementById('score').textContent = score;
            document.getElementById('btn-next').disabled = false;
        }
        
        function nextStep() {
            currentStep++;
            
            if (currentStep >= 6) {
                showResults();
            } else {
                loadStep();
            }
        }
        
        function showResults() {
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('results-screen').classList.add('active');
            
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-correct').textContent = correctCount + '/6';
            
            const pct = (correctCount / 6) * 100;
            
            if (pct === 100) {
                document.getElementById('trophy').textContent = 'üèÜ';
                document.getElementById('results-title').textContent = 'Parfait !';
                document.getElementById('results-msg').textContent = 'Tu as accompagn√© ' + characters[selectedChar].name + ' sans erreur !';
            } else if (pct >= 66) {
                document.getElementById('trophy').textContent = 'üåü';
                document.getElementById('results-title').textContent = 'Excellent !';
                document.getElementById('results-msg').textContent = 'Tr√®s bonne journ√©e de travail !';
            } else {
                document.getElementById('trophy').textContent = 'üí™';
                document.getElementById('results-title').textContent = 'Continue !';
                document.getElementById('results-msg').textContent = 'R√©vise les pictogrammes et r√©essaie.';
            }
        }
        
        function restartGame() {
            document.getElementById('results-screen').classList.remove('active');
            document.getElementById('intro-screen').classList.add('active');
            selectedChar = null;
            document.querySelectorAll('.character-option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById('btn-start').disabled = true;
        }
    </script>
    
</body>
</html>
