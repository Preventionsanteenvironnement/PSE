<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C.7 - Simulation professionnelle : Conseiller pr√©vention - Terminale Bac Pro</title>
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
            --conseiller-color: #3498DB;
            --salarie-color: #E67E22;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }

        .exercice-container {
            width: 100%;
            max-width: 100vw;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(135deg, var(--primary-pse) 0%, var(--secondary-pse) 100%);
            color: white;
            padding: 20px;
        }

        .module-info h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .objectif {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }

        .competences-travaillees {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }

        .competences-travaillees h3 {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .competences-list {
            list-style: none;
            padding: 0;
        }

        .competences-list li {
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            font-size: 0.95rem;
        }

        .niveau-cible {
            text-align: center;
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
        }

        /* EXERCICE PRINCIPAL */
        .exercice-principal {
            padding: 25px;
        }

        .contexte-simulation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
        }

        .contexte-simulation h3 {
            margin-bottom: 10px;
            font-size: 1.4rem;
        }

        .scenario-info {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid var(--success-pse);
        }

        .profil-salarie {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--salarie-color);
        }

        .dialogue-container {
            background: white;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .dialogue-header {
            background: linear-gradient(135deg, var(--conseiller-color), var(--primary-pse));
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            text-align: center;
        }

        .message {
            padding: 20px;
            margin: 10px;
            border-radius: 15px;
            animation: fadeInMessage 0.6s ease;
            position: relative;
        }

        @keyframes fadeInMessage {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-salarie {
            background: #fff3e0;
            border: 2px solid var(--salarie-color);
            margin-left: 40px;
        }

        .message-salarie::before {
            content: "üë®‚Äçüíº SALARI√â";
            position: absolute;
            top: -8px;
            left: 15px;
            background: var(--salarie-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .message-conseiller {
            background: #e3f2fd;
            border: 2px solid var(--conseiller-color);
            margin-right: 40px;
        }

        .message-conseiller::before {
            content: "üõ°Ô∏è VOUS (Conseiller pr√©vention)";
            position: absolute;
            top: -8px;
            right: 15px;
            background: var(--conseiller-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .choix-reponses {
            padding: 20px;
            background: #f8f9fa;
        }

        .instruction-choix {
            background: var(--primary-pse);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .options-reponse {
            display: grid;
            gap: 12px;
        }

        .option-dialogue {
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            position: relative;
        }

        .option-dialogue:hover {
            border-color: var(--primary-pse);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 134, 171, 0.3);
        }

        .option-dialogue.selected {
            background: var(--primary-pse);
            color: white;
            border-color: var(--primary-pse);
        }

        .strategie-tag {
            position: absolute;
            top: 8px;
            right: 12px;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .tag-scientifique { background: #e8f5e8; color: var(--success-pse); }
        .tag-empathique { background: #fff3e0; color: var(--warning-pse); }
        .tag-pragmatique { background: #e3f2fd; color: var(--conseiller-color); }
        .tag-autoritaire { background: #ffebee; color: var(--danger-pse); }

        .consequence-feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .consequence-positive {
            background: #d4edda;
            border: 2px solid var(--success-pse);
        }

        .consequence-negative {
            background: #f8d7da;
            border: 2px solid var(--danger-pse);
        }

        .consequence-neutre {
            background: #fff3cd;
            border: 2px solid var(--warning-pse);
        }

        .btn-continuer {
            background: var(--success-pse);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .btn-continuer:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 83, 0.4);
        }

        .progress-dialogue {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid var(--primary-pse);
        }

        .barre-progression {
            width: 100%;
            height: 15px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progression-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-pse), var(--secondary-pse));
            width: 0%;
            transition: width 0.6s ease;
        }

        .statistiques-dialogue {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid;
        }

        .stat-confiance { border-left-color: var(--success-pse); }
        .stat-resistance { border-left-color: var(--danger-pse); }
        .stat-comprehension { border-left-color: var(--conseiller-color); }

        .resultats-simulation {
            background: white;
            border: 2px solid var(--primary-pse);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            display: none;
        }

        .resultats-simulation.show {
            display: block;
        }

        .score-final {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-pse);
            margin-bottom: 15px;
        }

        .competences-evaluation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .competence-score {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid;
        }

        .competence-c3 { border-left-color: #2ECC71; }
        .competence-c5 { border-left-color: #9B59B6; }
        .competence-c6 { border-left-color: #1ABC9C; }

        /* FOOTER RGPD */
        .rgpd-notice {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            color: #6c757d;
            font-size: 0.8rem;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .exercice-container {
                margin: 10px;
            }

            .cadre-pedagogique {
                padding: 15px;
            }

            .module-info h2 {
                font-size: 1.5rem;
            }

            .exercice-principal {
                padding: 20px;
            }

            .message-salarie {
                margin-left: 20px;
            }

            .message-conseiller {
                margin-right: 20px;
            }
        }

        @media (min-width: 1024px) {
            .exercice-container {
                max-width: 900px;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body>
    <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
    <div class="exercice-container">
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module C.7 : Le suivi de la sant√© au travail</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Appr√©hender l'importance de la surveillance m√©dicale et des vaccinations obligatoires en milieu professionnel.
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C3</strong> - Expliquer un ph√©nom√®ne physiologique en lien avec une mesure de pr√©vention</li>
                    <li><strong>C5</strong> - Argumenter un choix</li>
                    <li><strong>C6</strong> - Communiquer √† l'√©crit et √† l'oral avec une syntaxe claire et un vocabulaire adapt√©</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Terminale Bac Pro
            </div>
        </div>

        <!-- EXERCICE PRINCIPAL -->
        <main class="exercice-principal">
            <div class="contexte-simulation">
                <h3>üé≠ SIMULATION PROFESSIONNELLE : CONSEILLER PR√âVENTION</h3>
                <p>Vous √™tes conseiller en pr√©vention. Un salari√© refuse de se faire vacciner. Votre mission : le convaincre en utilisant vos comp√©tences de communication et d'argumentation scientifique !</p>
            </div>

            <div class="scenario-info">
                <h4>üéØ VOTRE MISSION</h4>
                <p>Matthias, 32 ans, technicien de laboratoire m√©dical, refuse cat√©goriquement les vaccins obligatoires de son secteur. Il invoque des "risques" et des "libert√©s individuelles". Vous devez le convaincre en respectant sa personnalit√© tout en expliquant scientifiquement l'importance de la vaccination.</p>
                
                <div class="profil-salarie">
                    <strong>üë®‚Äçüíº PROFIL DE MATTHIAS :</strong>
                    <ul style="margin-top: 8px;">
                        <li>Technicien de laboratoire m√©dical (exposition agents biologiques groupe 3)</li>
                        <li>Personnalit√© : M√©fiant, logique, besoin de preuves</li>
                        <li>Vaccins obligatoires refus√©s : H√©patite B, DTP</li>
                        <li>Arguments : "Libert√©s individuelles", "risques des vaccins"</li>
                    </ul>
                </div>
            </div>

            <div class="progress-dialogue">
                <h4>üìä PROGRESSION DU DIALOGUE</h4>
                <div class="barre-progression">
                    <div class="progression-fill" id="progression-fill"></div>
                </div>
                <div id="progression-text">√âtape 1/5 - Premier contact</div>

                <div class="statistiques-dialogue">
                    <div class="stat-item stat-confiance">
                        <div><strong>Confiance</strong></div>
                        <div id="stat-confiance">50%</div>
                    </div>
                    <div class="stat-item stat-resistance">
                        <div><strong>R√©sistance</strong></div>
                        <div id="stat-resistance">70%</div>
                    </div>
                    <div class="stat-item stat-comprehension">
                        <div><strong>Compr√©hension</strong></div>
                        <div id="stat-comprehension">30%</div>
                    </div>
                </div>
            </div>

            <!-- DIALOGUE INTERACTIF -->
            <div class="dialogue-container" id="dialogue-container">
                <div class="dialogue-header">
                    üó£Ô∏è DIALOGUE INTERACTIF - √âTAPE <span id="etape-numero">1</span>
                </div>

                <div id="messages-container">
                    <div class="message message-salarie">
                        "√âcoutez, j'ai re√ßu cette convocation pour des vaccins obligatoires. Franchement, je ne vois pas pourquoi on m'impose √ßa. J'ai le droit de d√©cider pour mon corps, non ? Et puis, on ne sait jamais vraiment ce qu'il y a dans ces vaccins..."
                    </div>
                </div>

                <div class="choix-reponses">
                    <div class="instruction-choix">
                        üéØ Comment r√©pondez-vous ? Choisissez votre strat√©gie :
                    </div>
                    
                    <div class="options-reponse">
                        <div class="option-dialogue" data-strategie="scientifique" data-impact="confiance:+15,resistance:-10,comprehension:+20" onclick="choisirReponse(this, 1)">
                            <div class="strategie-tag tag-scientifique">SCIENTIFIQUE</div>
                            "Je comprends vos interrogations Matthias. Dans votre poste au laboratoire, vous manipulez des agents biologiques du groupe 3. Le vaccin h√©patite B vous prot√®ge sp√©cifiquement contre ce risque professionnel. Voulez-vous que je vous explique le m√©canisme ?"
                        </div>
                        
                        <div class="option-dialogue" data-strategie="empathique" data-impact="confiance:+20,resistance:-5,comprehension:+10" onclick="choisirReponse(this, 2)">
                            <div class="strategie-tag tag-empathique">EMPATHIQUE</div>
                            "Je respecte totalement vos questionnements sur votre corps. C'est normal d'avoir des doutes. Prenons le temps d'en parler ensemble. Qu'est-ce qui vous inqui√®te exactement dans ces vaccins ?"
                        </div>

                        <div class="option-dialogue" data-strategie="pragmatique" data-impact="confiance:+5,resistance:-15,comprehension:+15" onclick="choisirReponse(this, 3)">
                            <div class="strategie-tag tag-pragmatique">PRAGMATIQUE</div>
                            "Matthias, ces vaccins ne sont pas une contrainte arbitraire. En laboratoire m√©dical, vous risquez une contamination h√©patite B qui peut √™tre mortelle. C'est votre s√©curit√© et celle de vos coll√®gues qui est en jeu."
                        </div>

                        <div class="option-dialogue" data-strategie="autoritaire" data-impact="confiance:-10,resistance:+20,comprehension:-5" onclick="choisirReponse(this, 4)">
                            <div class="strategie-tag tag-autoritaire">AUTORITAIRE</div>
                            "Matthias, c'est obligatoire par la loi. Point final. Si vous refusez, vous ne pourrez pas travailler en laboratoire. C'est le r√®glement, pas une n√©gociation."
                        </div>
                    </div>

                    <div class="consequence-feedback" id="feedback-1"></div>
                </div>
            </div>

            <!-- R√âSULTATS FINAUX -->
            <div class="resultats-simulation" id="resultats-simulation">
                <h3>üé≠ BILAN DE LA SIMULATION</h3>
                <div class="score-final" id="score-final"></div>
                <p id="message-final"></p>

                <div style="margin: 20px 0; padding: 15px; border-radius: 10px;" id="scenario-final">
                    <h4 id="titre-scenario"></h4>
                    <p id="description-scenario"></p>
                </div>

                <div class="competences-evaluation">
                    <div class="competence-score competence-c3">
                        <h4>Comp√©tence C3</h4>
                        <p><strong>Expliquer ph√©nom√®nes</strong></p>
                        <div id="score-c3"></div>
                    </div>
                    <div class="competence-score competence-c5">
                        <h4>Comp√©tence C5</h4>
                        <p><strong>Argumenter un choix</strong></p>
                        <div id="score-c5"></div>
                    </div>
                    <div class="competence-score competence-c6">
                        <h4>Comp√©tence C6</h4>
                        <p><strong>Communiquer</strong></p>
                        <div id="score-c6"></div>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <button class="btn-continuer" onclick="recommencerSimulation()">
                        üîÑ Recommencer la simulation
                    </button>
                </div>
            </div>
        </main>

        <!-- FOOTER RGPD -->
        <div class="rgpd-notice">
            üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
        </div>
    </div>

    <script>
        // Variables globales
        let etapeActuelle = 1;
        let scores = {
            confiance: 50,
            resistance: 70,
            comprehension: 30,
            c3: 0, // Explications scientifiques
            c5: 0, // Argumentation
            c6: 0  // Communication
        };

        const etapesDialogue = {
            1: {
                reponses: [
                    {
                        salarie: "Ah bon ? Des agents du groupe 3 ? Je ne savais pas que c'√©tait si dangereux. Mais les vaccins, √ßa peut avoir des effets secondaires non ?",
                        feedback: "üëç Excellente approche ! Matthias est r√©ceptif √† l'explication scientifique.",
                        type: "positive"
                    },
                    {
                        salarie: "Merci de m'√©couter. En fait, j'ai peur des effets secondaires. Mon cousin a eu une r√©action apr√®s un vaccin...",
                        feedback: "üíõ Bonne √©coute, mais il faut maintenant apporter des √©l√©ments scientifiques.",
                        type: "neutre"
                    },
                    {
                        salarie: "D'accord, c'est important la s√©curit√©. Mais comment on peut √™tre s√ªr que le vaccin fonctionne vraiment ?",
                        feedback: "‚öñÔ∏è Approche directe efficace, Matthias comprend l'enjeu s√©curitaire.",
                        type: "positive"
                    },
                    {
                        salarie: "Bon, c'est obligatoire... Mais j'aimerais quand m√™me comprendre pourquoi c'est si important.",
                        feedback: "‚ö†Ô∏è Matthias se ferme. L'approche autoritaire diminue sa coop√©ration.",
                        type: "negative"
                    }
                ]
            },
            2: {
                questions: [
                    "Tr√®s bonne question ! Les effets secondaires graves sont tr√®s rares. Puis-je vous expliquer comment fonctionne votre syst√®me immunitaire ?",
                    "Je comprends vos craintes. Chaque cas est unique. Parlons d'abord des b√©n√©fices : savez-vous ce que fait le virus de l'h√©patite B dans l'organisme ?",
                    "Les vaccins ont √©t√© test√©s sur des milliers de personnes. Voulez-vous que je vous montre les statistiques d'efficacit√© ?",
                    "Les effets secondaires existent mais sont minimes compar√©s aux risques de la maladie. Laissez-moi vous expliquer..."
                ],
                reponses: [
                    {
                        salarie: "Oui, je veux bien comprendre comment √ßa marche exactement dans le corps.",
                        feedback: "üß¨ Parfait ! Votre explication scientifique l'int√©resse.",
                        type: "positive"
                    },
                    {
                        salarie: "L'h√©patite B... je sais que c'est grave, mais le vaccin, comment on peut √™tre s√ªr qu'il prot√®ge ?",
                        feedback: "ü§î Matthias pose les bonnes questions, continuez dans cette direction.",
                        type: "neutre"
                    },
                    {
                        salarie: "Les statistiques, √ßa m'int√©resse. Vous avez des chiffres fiables ?",
                        feedback: "üìä Excellente strat√©gie ! Il a besoin de preuves concr√®tes.",
                        type: "positive"
                    },
                    {
                        salarie: "Minimes... facile √† dire. Moi je veux des d√©tails sur ces effets secondaires.",
                        feedback: "üò§ Il reste m√©fiant. Il faut √™tre plus pr√©cis et transparent.",
                        type: "negative"
                    }
                ]
            }
            // ... Autres √©tapes seraient d√©finies de m√™me
        };

        function choisirReponse(element, numeroReponse) {
            // D√©s√©lectionner les autres options
            document.querySelectorAll('.option-dialogue').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');

            // Calculer l'impact sur les statistiques
            const impact = element.dataset.impact.split(',');
            impact.forEach(change => {
                const [stat, value] = change.split(':');
                const numValue = parseInt(value);
                scores[stat] = Math.max(0, Math.min(100, scores[stat] + numValue));
            });

            // Attribuer points comp√©tences selon la strat√©gie
            const strategie = element.dataset.strategie;
            if (strategie === 'scientifique') {
                scores.c3 += 2; // Explication ph√©nom√®nes
                scores.c6 += 1; // Communication adapt√©e
            } else if (strategie === 'empathique') {
                scores.c6 += 2; // Communication
                scores.c5 += 1; // Argumentation
            } else if (strategie === 'pragmatique') {
                scores.c5 += 2; // Argumentation
                scores.c3 += 1; // Explication
            }
            // Autoritaire ne donne pas de points

            // Afficher la r√©ponse du salari√©
            const reponseData = etapesDialogue[etapeActuelle].reponses[numeroReponse - 1];
            
            setTimeout(() => {
                ajouterMessage('salarie', reponseData.salarie);
                afficherFeedback(reponseData.feedback, reponseData.type);
                mettreAJourStatistiques();
                
                setTimeout(() => {
                    if (etapeActuelle < 5) {
                        passerEtapeSuivante();
                    } else {
                        terminerSimulation();
                    }
                }, 2000);
            }, 1000);
        }

        function ajouterMessage(type, texte) {
            const messagesContainer = document.getElementById('messages-container');
            const nouveauMessage = document.createElement('div');
            nouveauMessage.className = `message message-${type}`;
            nouveauMessage.textContent = texte;
            messagesContainer.appendChild(nouveauMessage);
            nouveauMessage.scrollIntoView({ behavior: 'smooth' });
        }

        function afficherFeedback(message, type) {
            const feedback = document.getElementById(`feedback-${etapeActuelle}`);
            feedback.className = `consequence-feedback consequence-${type}`;
            feedback.textContent = message;
            feedback.style.display = 'block';
        }

        function mettreAJourStatistiques() {
            document.getElementById('stat-confiance').textContent = scores.confiance + '%';
            document.getElementById('stat-resistance').textContent = scores.resistance + '%';
            document.getElementById('stat-comprehension').textContent = scores.comprehension + '%';
        }

        function passerEtapeSuivante() {
            etapeActuelle++;
            
            if (etapeActuelle <= 5) {
                const progression = (etapeActuelle / 5) * 100;
                document.getElementById('progression-fill').style.width = progression + '%';
                document.getElementById('progression-text').textContent = `√âtape ${etapeActuelle}/5 - Dialogue en cours`;
                document.getElementById('etape-numero').textContent = etapeActuelle;
                
                // Simuler les √©tapes suivantes avec des r√©ponses pr√©programm√©es
                if (etapeActuelle === 2) {
                    continuerDialogueEtape2();
                } else if (etapeActuelle >= 3) {
                    // Pour la d√©mo, on termine apr√®s 2 √©tapes interactives
                    terminerSimulation();
                }
            }
        }

        function continuerDialogueEtape2() {
            // Ajouter une question du conseiller bas√©e sur la strat√©gie pr√©c√©dente
            const questionConseiller = etapesDialogue[2].questions[0]; // Simplifi√©e pour la d√©mo
            ajouterMessage('conseiller', questionConseiller);
            
            // Mettre √† jour l'interface pour la nouvelle √©tape
            const choixContainer = document.querySelector('.choix-reponses');
            choixContainer.innerHTML = `
                <div class="instruction-choix">
                    üí° Matthias semble int√©ress√© par l'aspect scientifique. Comment poursuivez-vous ?
                </div>
                
                <div class="options-reponse">
                    <div class="option-dialogue" data-strategie="scientifique" data-impact="comprehension:+25,resistance:-20" onclick="choisirReponse(this, 1)">
                        <div class="strategie-tag tag-scientifique">EXPLICATION D√âTAILL√âE</div>
                        "Parfait ! Le vaccin contient des antig√®nes de l'h√©patite B. Votre syst√®me immunitaire va cr√©er des anticorps sp√©cifiques et des lymphocytes m√©moire. Si vous rencontrez le vrai virus, vous serez prot√©g√© imm√©diatement."
                    </div>
                    
                    <div class="option-dialogue" data-strategie="pragmatique" data-impact="confiance:+15,resistance:-15" onclick="choisirReponse(this, 2)">
                        <div class="strategie-tag tag-pragmatique">EXEMPLES CONCRETS</div>
                        "Dans votre laboratoire, vous manipulez des √©chantillons sanguins. Une seule goutte contamin√©e peut suffire. Le vaccin vous donne une immunit√© de 90% pendant 20 ans minimum."
                    </div>

                    <div class="option-dialogue" data-strategie="empathique" data-impact="confiance:+10,comprehension:+10" onclick="choisirReponse(this, 3)">
                        <div class="strategie-tag tag-empathique">RASSURANCE</div>
                        "Je vois que vous cherchez √† comprendre, c'est tr√®s bien. Le vaccin h√©patite B est utilis√© depuis 40 ans, des millions de personnes l'ont re√ßu sans probl√®me."
                    </div>
                </div>
                
                <div class="consequence-feedback" id="feedback-2"></div>
            `;
        }

        function terminerSimulation() {
            // Calculer le score final
            const scoreConfiance = scores.confiance;
            const scoreResistance = 100 - scores.resistance;
            const scoreComprehension = scores.comprehension;
            const scoreMoyen = Math.round((scoreConfiance + scoreResistance + scoreComprehension) / 3);
            
            document.getElementById('score-final').textContent = `${scoreMoyen}%`;
            
            // D√©terminer l'issue de la simulation
            let scenarioFinal, message, couleurScenario;
            
            if (scoreMoyen >= 80) {
                scenarioFinal = "üéâ SUCC√àS COMPLET";
                message = "F√©licitations ! Matthias accepte la vaccination et comprend son importance.";
                couleurScenario = "#d4edda";
            } else if (scoreMoyen >= 60) {
                scenarioFinal = "üëç SUCC√àS PARTIEL";
                message = "Bien jou√© ! Matthias accepte la vaccination mais reste quelque peu m√©fiant.";
                couleurScenario = "#fff3cd";
            } else if (scoreMoyen >= 40) {
                scenarioFinal = "‚öñÔ∏è SITUATION MITIG√âE";
                message = "Matthias h√©site encore. Il accepte d'y r√©fl√©chir mais n'est pas convaincu.";
                couleurScenario = "#f8d7da";
            } else {
                scenarioFinal = "‚ùå √âCHEC";
                message = "Matthias refuse cat√©goriquement la vaccination. Il faudra revoir votre strat√©gie.";
                couleurScenario = "#f8d7da";
            }
            
            document.getElementById('titre-scenario').textContent = scenarioFinal;
            document.getElementById('description-scenario').textContent = message;
            document.getElementById('scenario-final').style.backgroundColor = couleurScenario;
            
            // Scores par comp√©tence
            document.getElementById('score-c3').innerHTML = `<strong>${Math.min(scores.c3, 6)}/6</strong><br>Explications scientifiques donn√©es`;
            document.getElementById('score-c5').innerHTML = `<strong>${Math.min(scores.c5, 6)}/6</strong><br>Arguments d√©velopp√©s`;
            document.getElementById('score-c6').innerHTML = `<strong>${Math.min(scores.c6, 6)}/6</strong><br>Communication adapt√©e`;
            
            document.getElementById('resultats-simulation').classList.add('show');
            document.getElementById('resultats-simulation').scrollIntoView({ behavior: 'smooth' });
        }

        function recommencerSimulation() {
            location.reload();
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            mettreAJourStatistiques();
        });
    </script>
</body>
</html>