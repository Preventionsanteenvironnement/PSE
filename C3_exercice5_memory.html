<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C3 ‚Äì Memory Pictogrammes</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1e293b;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 900px; margin: 0 auto; }
        
        .source-banner {
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .source-banner a { color: rgba(255,255,255,0.9); font-size: 11px; text-decoration: none; }
        
        .screen { display: none; }
        .screen.active { display: block; }
        
        /* Intro */
        .intro-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 600px;
            margin: 30px auto;
            text-align: center;
        }
        
        .intro-card h2 { font-size: 28px; margin-bottom: 15px; }
        .intro-card > p { color: #64748b; margin-bottom: 20px; }
        
        .objectif-box {
            background: linear-gradient(135deg, #ede9fe, #ddd6fe);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 12px 12px 0;
            text-align: left;
            margin-bottom: 25px;
        }
        
        .objectif-box strong { color: var(--primary); font-size: 11px; }
        .objectif-box p { font-size: 13px; margin-top: 5px; }
        
        .difficulty-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }
        
        .difficulty-btn {
            padding: 15px 25px;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .difficulty-btn:hover { border-color: var(--primary); }
        .difficulty-btn.selected { border-color: var(--primary); background: #ede9fe; }
        
        .difficulty-btn .level { font-size: 24px; margin-bottom: 5px; }
        .difficulty-btn .name { font-size: 14px; font-weight: 700; color: var(--dark); }
        .difficulty-btn .info { font-size: 11px; color: #64748b; }
        
        .btn-start {
            padding: 18px 50px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--primary), #6d28d9);
            color: white;
            font-family: inherit;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-start:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4); }
        
        /* Game */
        .game-header {
            background: white;
            border-radius: 20px;
            padding: 15px 25px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .game-header h2 { font-size: 18px; color: var(--dark); }
        
        .header-stats { display: flex; gap: 15px; }
        
        .header-stat {
            padding: 8px 18px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 14px;
        }
        
        .header-stat.moves { background: #dbeafe; color: #1e40af; }
        .header-stat.pairs { background: #dcfce7; color: #166534; }
        .header-stat.timer { background: #fef3c7; color: #92400e; }
        
        .memory-grid {
            display: grid;
            gap: 12px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .memory-grid.easy { grid-template-columns: repeat(4, 1fr); }
        .memory-grid.medium { grid-template-columns: repeat(5, 1fr); }
        .memory-grid.hard { grid-template-columns: repeat(6, 1fr); }
        
        .memory-card {
            aspect-ratio: 1;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .memory-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }
        
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        
        .memory-card.matched .memory-card-inner {
            transform: rotateY(180deg);
        }
        
        .memory-card.matched {
            cursor: default;
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }
        
        .card-front {
            background: linear-gradient(135deg, var(--primary), #6d28d9);
            color: white;
            font-size: 30px;
        }
        
        .card-back {
            background: white;
            border: 3px solid #e2e8f0;
            transform: rotateY(180deg);
            flex-direction: column;
        }
        
        .card-back img {
            max-width: 60%;
            max-height: 60%;
            object-fit: contain;
        }
        
        .card-back .text {
            font-size: 10px;
            font-weight: 700;
            color: var(--dark);
            text-align: center;
            line-height: 1.2;
            padding: 5px;
        }
        
        .memory-card.matched .card-back {
            border-color: var(--success);
            background: #dcfce7;
        }
        
        /* Results */
        .results-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            margin: 30px auto;
            text-align: center;
        }
        
        .results-card .trophy { font-size: 80px; margin-bottom: 20px; }
        .results-card h2 { font-size: 26px; margin-bottom: 10px; }
        .results-card > p { color: #64748b; margin-bottom: 25px; }
        
        .results-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        .results-stats .stat { text-align: center; }
        .results-stats .stat .val { font-size: 36px; font-weight: 800; color: var(--primary); }
        .results-stats .stat .lbl { font-size: 12px; color: #64748b; }
        
        @media (max-width: 600px) {
            .memory-grid.easy { grid-template-columns: repeat(3, 1fr); }
            .memory-grid.medium { grid-template-columns: repeat(4, 1fr); }
            .memory-grid.hard { grid-template-columns: repeat(4, 1fr); }
            .difficulty-selector { flex-direction: column; }
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <div class="source-banner">
            <a href="https://www.inrs.fr" target="_blank">üìö Source : INRS ‚Äì Institut National de Recherche et de S√©curit√© ‚Äì www.inrs.fr</a>
        </div>
        
        <!-- Intro -->
        <div class="screen active" id="intro-screen">
            <div class="intro-card">
                <h2>üß† Memory Pictogrammes</h2>
                <p>Associe chaque pictogramme √† sa signification !</p>
                
                <div class="objectif-box">
                    <strong>üéØ OBJECTIF</strong>
                    <p>√ätre capable de <strong>m√©moriser</strong> et <strong>associer</strong> les pictogrammes de s√©curit√© √† leur signification.</p>
                </div>
                
                <p style="font-weight: 600; margin-bottom: 15px;">Choisis ton niveau :</p>
                
                <div class="difficulty-selector">
                    <div class="difficulty-btn selected" onclick="selectDifficulty('easy')" data-diff="easy">
                        <div class="level">üå±</div>
                        <div class="name">Facile</div>
                        <div class="info">6 paires</div>
                    </div>
                    <div class="difficulty-btn" onclick="selectDifficulty('medium')" data-diff="medium">
                        <div class="level">üåø</div>
                        <div class="name">Moyen</div>
                        <div class="info">10 paires</div>
                    </div>
                    <div class="difficulty-btn" onclick="selectDifficulty('hard')" data-diff="hard">
                        <div class="level">üå≥</div>
                        <div class="name">Difficile</div>
                        <div class="info">12 paires</div>
                    </div>
                </div>
                
                <button class="btn-start" onclick="startGame()">Jouer ! üéÆ</button>
            </div>
        </div>
        
        <!-- Game -->
        <div class="screen" id="game-screen">
            <div class="game-header">
                <h2>üß† Memory Pictogrammes</h2>
                <div class="header-stats">
                    <div class="header-stat moves">üîÑ <span id="moves">0</span></div>
                    <div class="header-stat pairs">‚úÖ <span id="pairs">0</span>/<span id="total-pairs">6</span></div>
                    <div class="header-stat timer">‚è±Ô∏è <span id="timer">0:00</span></div>
                </div>
            </div>
            
            <div class="memory-grid easy" id="memory-grid"></div>
        </div>
        
        <!-- Results -->
        <div class="screen" id="results-screen">
            <div class="results-card">
                <div class="trophy" id="trophy">üèÜ</div>
                <h2 id="results-title">Bravo !</h2>
                <p id="results-msg">Tu as une excellente m√©moire !</p>
                
                <div class="results-stats">
                    <div class="stat">
                        <div class="val" id="final-moves">0</div>
                        <div class="lbl">Coups</div>
                    </div>
                    <div class="stat">
                        <div class="val" id="final-time">0:00</div>
                        <div class="lbl">Temps</div>
                    </div>
                </div>
                
                <button class="btn-start" onclick="restartGame()">üîÑ Rejouer</button>
            </div>
        </div>
        
    </div>
    
    <script>
        const pictograms = [
            { id: 1, name: "Port des gants", image: "pictogrammes/images/OBLIGATION-gants.jpg" },
            { id: 2, name: "Port du casque", image: "pictogrammes/images/OBLIGATION-casque.jpg" },
            { id: 3, name: "Chaussures s√©curit√©", image: "pictogrammes/images/OBLIGATION-chaussures.jpg" },
            { id: 4, name: "Lunettes protection", image: "pictogrammes/images/OBLIGATION-lunettes.jpg" },
            { id: 5, name: "Protection auditive", image: "pictogrammes/images/OBLIGATION-casque-antibruit.jpg" },
            { id: 6, name: "Interdiction fumer", image: "pictogrammes/images/INTERDIT-fumer.jpg" },
            { id: 7, name: "Flamme interdite", image: "pictogrammes/images/INTERDIT-flamme.jpg" },
            { id: 8, name: "Acc√®s interdit", image: "pictogrammes/images/INTERDIT-entrer.jpg" },
            { id: 9, name: "Danger √©lectrique", image: "pictogrammes/images/DANGER-electricite.jpg" },
            { id: 10, name: "Danger de chute", image: "pictogrammes/images/DANGER-chute.jpg" },
            { id: 11, name: "Produit toxique", image: "pictogrammes/images/DANGER-produit-toxique.jpg" },
            { id: 12, name: "Extincteur", image: "pictogrammes/images/INCENDIE-extincteur.jpg" },
            { id: 13, name: "Alarme incendie", image: "pictogrammes/images/INCENDIE-alarme.jpg" },
            { id: 14, name: "Sortie secours", image: "pictogrammes/images/SECOURS-sortie-vers-droite.jpg" },
            { id: 15, name: "Point rassemblement", image: "pictogrammes/images/SECOURS-point-rassemblement.jpg" }
        ];
        
        let difficulty = 'easy';
        let pairs = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let timerInterval = null;
        let seconds = 0;
        let canFlip = true;
        
        const pairCounts = { easy: 6, medium: 10, hard: 12 };
        
        function selectDifficulty(diff) {
            difficulty = diff;
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.diff === diff);
            });
        }
        
        function startGame() {
            document.getElementById('intro-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            
            moves = 0;
            matchedPairs = 0;
            seconds = 0;
            flippedCards = [];
            canFlip = true;
            
            const pairCount = pairCounts[difficulty];
            document.getElementById('total-pairs').textContent = pairCount;
            document.getElementById('moves').textContent = '0';
            document.getElementById('pairs').textContent = '0';
            document.getElementById('timer').textContent = '0:00';
            
            // Select random pictograms
            const selected = [...pictograms].sort(() => Math.random() - 0.5).slice(0, pairCount);
            
            // Create pairs (image + text)
            const cards = [];
            selected.forEach(picto => {
                cards.push({ id: picto.id, type: 'image', image: picto.image, name: picto.name });
                cards.push({ id: picto.id, type: 'text', name: picto.name });
            });
            
            // Shuffle
            cards.sort(() => Math.random() - 0.5);
            
            // Render grid
            const grid = document.getElementById('memory-grid');
            grid.className = 'memory-grid ' + difficulty;
            grid.innerHTML = '';
            
            cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'memory-card';
                cardEl.dataset.id = card.id;
                cardEl.dataset.index = index;
                
                let backContent = '';
                if (card.type === 'image') {
                    backContent = `<img src="${card.image}" alt="${card.name}">`;
                } else {
                    backContent = `<div class="text">${card.name}</div>`;
                }
                
                cardEl.innerHTML = `
                    <div class="memory-card-inner">
                        <div class="card-face card-front">‚ùì</div>
                        <div class="card-face card-back">${backContent}</div>
                    </div>
                `;
                
                cardEl.onclick = () => flipCard(cardEl);
                grid.appendChild(cardEl);
            });
            
            // Start timer
            timerInterval = setInterval(() => {
                seconds++;
                document.getElementById('timer').textContent = formatTime(seconds);
            }, 1000);
        }
        
        function formatTime(s) {
            const min = Math.floor(s / 60);
            const sec = s % 60;
            return min + ':' + (sec < 10 ? '0' : '') + sec;
        }
        
        function flipCard(cardEl) {
            if (!canFlip) return;
            if (cardEl.classList.contains('flipped')) return;
            if (cardEl.classList.contains('matched')) return;
            if (flippedCards.length >= 2) return;
            
            cardEl.classList.add('flipped');
            flippedCards.push(cardEl);
            
            if (flippedCards.length === 2) {
                moves++;
                document.getElementById('moves').textContent = moves;
                
                const [card1, card2] = flippedCards;
                
                if (card1.dataset.id === card2.dataset.id) {
                    // Match!
                    setTimeout(() => {
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        matchedPairs++;
                        document.getElementById('pairs').textContent = matchedPairs;
                        flippedCards = [];
                        
                        if (matchedPairs === pairCounts[difficulty]) {
                            endGame();
                        }
                    }, 500);
                } else {
                    // No match
                    canFlip = false;
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        flippedCards = [];
                        canFlip = true;
                    }, 1000);
                }
            }
        }
        
        function endGame() {
            clearInterval(timerInterval);
            
            setTimeout(() => {
                document.getElementById('game-screen').classList.remove('active');
                document.getElementById('results-screen').classList.add('active');
                
                document.getElementById('final-moves').textContent = moves;
                document.getElementById('final-time').textContent = formatTime(seconds);
                
                const pairCount = pairCounts[difficulty];
                const perfectMoves = pairCount * 2;
                
                if (moves <= perfectMoves + 5) {
                    document.getElementById('trophy').textContent = 'üèÜ';
                    document.getElementById('results-title').textContent = 'Parfait !';
                    document.getElementById('results-msg').textContent = 'Tu as une m√©moire exceptionnelle !';
                } else if (moves <= perfectMoves + 15) {
                    document.getElementById('trophy').textContent = 'üåü';
                    document.getElementById('results-title').textContent = 'Excellent !';
                    document.getElementById('results-msg').textContent = 'Tr√®s bonne performance !';
                } else {
                    document.getElementById('trophy').textContent = 'üëç';
                    document.getElementById('results-title').textContent = 'Bien jou√© !';
                    document.getElementById('results-msg').textContent = 'Continue √† t\'entra√Æner !';
                }
            }, 800);
        }
        
        function restartGame() {
            document.getElementById('results-screen').classList.remove('active');
            document.getElementById('intro-screen').classList.add('active');
        }
    </script>
    
</body>
</html>
