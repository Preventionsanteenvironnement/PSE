<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module A.5 - Expert Cycles & Contraception - Bac Pro Seconde</title>
    <style>
        :root {
            --primary-pse: #2E86AB;
            --secondary-pse: #A23B72;
            --success-pse: #219653;
            --warning-pse: #F2994A;
            --danger-pse: #EB5757;
            --dark-pse: #2F3542;
            --light-pse: #F1F2F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            min-height: 100vh;
            padding: 15px;
            font-size: 16px;
        }

        .exercice-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: linear-gradient(135deg, var(--primary-pse), var(--secondary-pse));
            color: white;
            padding: 25px;
            margin-bottom: 0;
        }

        .module-info h2 {
            font-size: 1.6em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .objectif {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #FFD700;
        }

        .competences-travaillees h3 {
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .competences-list {
            list-style: none;
            display: grid;
            gap: 8px;
        }

        .competences-list li {
            background: rgba(255,255,255,0.15);
            padding: 10px 15px;
            border-radius: 8px;
        }

        .competences-list li:nth-child(1) { border-left: 5px solid #E74C3C; }
        .competences-list li:nth-child(2) { border-left: 5px solid #3498DB; }
        .competences-list li:nth-child(3) { border-left: 5px solid #2ECC71; }
        .competences-list li:nth-child(4) { border-left: 5px solid #F39C12; }

        .niveau-cible {
            margin-top: 15px;
            font-weight: 600;
            color: #FFD700;
        }

        /* NAVIGATION PRINCIPALE */
        .navigation-principale {
            background: var(--light-pse);
            padding: 20px;
            text-align: center;
        }

        .navigation-tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 16px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .tab-button.completed {
            background: var(--success-pse);
            color: white;
            border-color: var(--success-pse);
        }

        .tab-button.active {
            background: var(--primary-pse);
            color: white;
            border-color: var(--primary-pse);
        }

        .tab-button.locked {
            background: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-pse), var(--primary-pse));
            transition: width 0.5s ease;
            width: 0%;
        }

        /* PARTIES D'EXERCICES */
        .partie-container {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }

        .partie-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .partie-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .partie-header h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .partie-header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* ACTIVIT√âS */
        .activite-block {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .activite-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .activite-number {
            width: 40px;
            height: 40px;
            background: var(--primary-pse);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .activite-title {
            flex: 1;
            font-size: 1.3em;
            color: var(--primary-pse);
            font-weight: 600;
        }

        /* IMAGES ET SCH√âMAS */
        .schema-container {
            text-align: center;
            margin: 25px 0;
        }

        .schema-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .schema-title {
            font-weight: 600;
            color: var(--primary-pse);
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        /* DROPDOWNS */
        .dropdown-container {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .dropdown-label {
            font-weight: 600;
            color: var(--primary-pse);
            min-width: 180px;
        }

        select {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            background: white;
        }

        select.correct {
            border-color: var(--success-pse);
            background: rgba(33, 150, 83, 0.05);
        }

        select.incorrect {
            border-color: var(--danger-pse);
            background: rgba(235, 87, 87, 0.05);
        }

        /* CHRONOLOGIE */
        .chronologie-container {
            display: grid;
            gap: 15px;
            margin: 25px 0;
        }

        .chronologie-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .chronologie-number {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .chronologie-item select {
            margin-left: auto;
            width: 60px;
        }

        /* M√âTHODES CONTRACEPTIVES */
        .methodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .methode-card {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .methode-card:hover {
            border-color: var(--primary-pse);
            box-shadow: 0 10px 30px rgba(46, 134, 171, 0.1);
        }

        .methode-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .methode-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary-pse);
            margin-bottom: 10px;
        }

        .methode-details {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }

        /* CYCLE TIMELINE */
        .cycle-timeline {
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            height: 60px;
            border-radius: 30px;
            position: relative;
            margin: 30px 0;
            display: flex;
            align-items: center;
            padding: 0 20px;
            color: white;
            font-weight: bold;
            overflow: hidden;
        }

        .cycle-phase {
            flex: 1;
            text-align: center;
            position: relative;
            font-size: 0.9em;
        }

        /* BOUTONS */
        .buttons-container {
            text-align: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary-pse);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #1e5f8a;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-pse);
            color: white;
        }

        .btn-success:hover {
            background: #1a7c42;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* FEEDBACK */
        .feedback-card {
            background: linear-gradient(135deg, #2a2a3e, #1e1e2f);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            display: none;
        }

        .feedback-card.show {
            display: block;
            animation: bounceIn 0.6s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .feedback-card h4 {
            margin-bottom: 15px;
            color: #4CAF50;
        }

        .correction-explicite {
            background: white;
            color: var(--dark-pse);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--danger-pse);
        }

        .correction-explicite h4 {
            color: var(--danger-pse);
            margin-bottom: 10px;
        }

        .bonne-reponse {
            background: rgba(33, 150, 83, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid var(--success-pse);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 15px;
            }
            
            .cadre-pedagogique, .partie-container {
                padding: 20px;
            }
            
            .navigation-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .tab-button {
                width: 100%;
                max-width: 300px;
            }
            
            .methodes-grid {
                grid-template-columns: 1fr;
            }
            
            .dropdown-item {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            
            .dropdown-label {
                min-width: auto;
                text-align: center;
            }
        }

        /* RGPD */
        .rgpd-notice {
            background: var(--light-pse);
            padding: 15px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="exercice-container">
        <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module A.5 : La sexualit√© - La contraception</h2>
                <div class="objectif">
                    <strong>Objectif :</strong> Expliquer le processus de reproduction humaine et caract√©riser les diff√©rentes m√©thodes de contraception
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>Comp√©tences travaill√©es dans cet exercice :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse dans une situation donn√©e</li>
                    <li><strong>C3</strong> - Expliquer un ph√©nom√®ne physiologique en lien avec une mesure de pr√©vention</li>
                    <li><strong>C4</strong> - Proposer une solution pour r√©soudre un probl√®me</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>Niveau :</strong> Bac Pro Seconde | <strong>Dur√©e :</strong> 40-45 minutes
            </div>
        </div>

        <!-- NAVIGATION PRINCIPALE -->
        <div class="navigation-principale">
            <h3>üî¨ Expert en Cycles & Contraception</h3>
            <p>5 parties pour ma√Ætriser reproduction, cycles hormonaux et m√©thodes contraceptives</p>
            
            <div class="navigation-tabs">
                <div class="tab-button active" data-partie="1">
                    P1 : Nidation
                </div>
                <div class="tab-button locked" data-partie="2">
                    P2 : Cycles
                </div>
                <div class="tab-button locked" data-partie="3">
                    P3 : Contraception m√©canique
                </div>
                <div class="tab-button locked" data-partie="4">
                    P4 : Contraception hormonale
                </div>
                <div class="tab-button locked" data-partie="5">
                    P5 : Contraception d'urgence
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress"></div>
            </div>
        </div>

        <!-- PARTIE 1 : NIDATION -->
        <div class="partie-container active" id="partie1">
            <div class="partie-header">
                <h3>üéØ Partie 1 : De la f√©condation √† la nidation</h3>
                <p>Suivre le parcours de la cellule-≈ìuf jusqu'√† l'implantation</p>
            </div>

            <!-- R√©f√©rence : fecondation_a_la_nidation_corrige.jpg -->
            <div class="schema-container">
                <div class="schema-title">Processus complet : F√©condation ‚Üí Nidation</div>
                <img src="images/fecondation_a_la_nidation_corrige.jpg" alt="Processus f√©condation nidation complet" style="max-width: 700px;">
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">1</div>
                    <div class="activite-title">Chronologie du processus reproductif</div>
                </div>

                <div class="chronologie-container">
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>D√©p√¥t des spermatozo√Ødes dans le vagin</div>
                        <select id="etape1-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>Remont√©e des spermatozo√Ødes vers l'ut√©rus</div>
                        <select id="etape2-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>Arriv√©e dans les trompes de Fallope</div>
                        <select id="etape3-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>F√©condation (union ovule-spermatozo√Øde)</div>
                        <select id="etape4-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>Formation de la cellule-≈ìuf</div>
                        <select id="etape5-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>Divisions cellulaires (formation de l'embryon)</div>
                        <select id="etape6-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                    <div class="chronologie-item">
                        <div class="chronologie-number">?</div>
                        <div>Nidation dans la paroi ut√©rine</div>
                        <select id="etape7-ordre">
                            <option value="">Position</option>
                            <option value="1">1√®re</option>
                            <option value="2">2√®me</option>
                            <option value="3">3√®me</option>
                            <option value="4">4√®me</option>
                            <option value="5">5√®me</option>
                            <option value="6">6√®me</option>
                            <option value="7">7√®me</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerChronologie()" disabled id="btn-chronologie">Valider la chronologie</button>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">2</div>
                    <div class="activite-title">D√©tails temporels du processus</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Dur√©e trajet trompe ‚Üí ut√©rus :</div>
                        <select id="duree-trajet">
                            <option value="">Choisir...</option>
                            <option value="7jours">Environ 7 jours</option>
                            <option value="24h">24 heures seulement</option>
                            <option value="1mois">1 mois complet</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Moment de la nidation :</div>
                        <select id="moment-nidation">
                            <option value="">Par rapport √† la f√©condation...</option>
                            <option value="7-8jours">7-8 jours apr√®s f√©condation</option>
                            <option value="immediate">Imm√©diatement apr√®s</option>
                            <option value="3semaines">3 semaines apr√®s</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Condition n√©cessaire nidation :</div>
                        <select id="condition-nidation">
                            <option value="">L'ut√©rus doit √™tre...</option>
                            <option value="prepare">Pr√©par√© par les hormones</option>
                            <option value="vide">Compl√®tement vide</option>
                            <option value="contracte">En contraction</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">R√©sultat de la nidation :</div>
                        <select id="resultat-nidation">
                            <option value="">Elle marque le d√©but...</option>
                            <option value="grossesse">De la grossesse clinique</option>
                            <option value="puberte">De la pubert√©</option>
                            <option value="menopause">De la m√©nopause</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerTemporel()" disabled id="btn-temporel">Valider les d√©tails temporels</button>
                </div>
            </div>

            <div class="feedback-card" id="feedback1">
                <h4>‚úÖ Excellente ma√Ætrise du processus reproductif !</h4>
                <p>Vous avez correctement ordonn√© les √©tapes de la reproduction humaine.</p>
                <div class="feedback-explanation" style="background: rgba(0, 0, 0, 0.4); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <strong>üí° Astuce BAC :</strong> La nidation est l'√©tape cl√© qui marque le d√©but de la grossesse. Elle se produit 7-8 jours apr√®s la f√©condation et n√©cessite que l'ut√©rus soit pr√©par√© hormonalement.
                </div>
                <div class="buttons-container" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="passerPartie(2)">Partie 2 : Cycles hormonaux ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- PARTIE 2 : CYCLES -->
        <div class="partie-container" id="partie2">
            <div class="partie-header">
                <h3>üìä Partie 2 : Cycles hormonaux et ovulation</h3>
                <p>Comprendre la r√©gulation hormonale de la reproduction f√©minine</p>
            </div>

            <div class="cycle-timeline">
                <div class="cycle-phase">R√àGLES<br><small>J1-J5</small></div>
                <div class="cycle-phase">FOLLICULAIRE<br><small>J6-J13</small></div>
                <div class="cycle-phase">OVULATION<br><small>J14</small></div>
                <div class="cycle-phase">LUT√âALE<br><small>J15-J28</small></div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">1</div>
                    <div class="activite-title">Phases du cycle menstruel</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Phase menstruelle (J1-J5) :</div>
                        <select id="phase-menstruelle">
                            <option value="">Caract√©ristique principale...</option>
                            <option value="elimination">√âlimination de l'endom√®tre</option>
                            <option value="ovulation">Lib√©ration de l'ovule</option>
                            <option value="fecondation">P√©riode de f√©condation</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Phase folliculaire (J6-J13) :</div>
                        <select id="phase-folliculaire">
                            <option value="">Processus dominant...</option>
                            <option value="maturation">Maturation du follicule ovarien</option>
                            <option value="destruction">Destruction des ovules</option>
                            <option value="repos">Repos ovarien complet</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Ovulation (J14) :</div>
                        <select id="ovulation">
                            <option value="">D√©clench√©e par...</option>
                            <option value="hormone-lh">Le pic d'hormone LH</option>
                            <option value="temperature">La baisse de temp√©rature</option>
                            <option value="stress">Le stress uniquement</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Phase lut√©ale (J15-J28) :</div>
                        <select id="phase-luteale">
                            <option value="">R√¥le principal...</option>
                            <option value="preparation">Pr√©paration ut√©rine √† la nidation</option>
                            <option value="nettoyage">Nettoyage des trompes</option>
                            <option value="blocage">Blocage de la reproduction</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerPhases()" disabled id="btn-phases">Valider les phases</button>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">2</div>
                    <div class="activite-title">Hormones et r√©gulation</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">FSH (hormone folliculo-stimulante) :</div>
                        <select id="hormone-fsh">
                            <option value="">Action principale...</option>
                            <option value="follicule">Stimule la croissance folliculaire</option>
                            <option value="uterus">Pr√©pare directement l'ut√©rus</option>
                            <option value="regles">D√©clenche les r√®gles</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">LH (hormone lut√©inisante) :</div>
                        <select id="hormone-lh">
                            <option value="">Responsable de...</option>
                            <option value="ovulation">D√©clenchement de l'ovulation</option>
                            <option value="regles">D√©but des r√®gles</option>
                            <option value="fecondation">La f√©condation directe</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">≈ístrog√®nes :</div>
                        <select id="oestrogenes">
                            <option value="">Effet sur l'ut√©rus...</option>
                            <option value="epaississement">√âpaississement de l'endom√®tre</option>
                            <option value="contraction">Contractions ut√©rines</option>
                            <option value="destruction">Destruction de l'endom√®tre</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Progest√©rone :</div>
                        <select id="progesterone">
                            <option value="">R√¥le en phase lut√©ale...</option>
                            <option value="maintien">Maintien et vascularisation endom√®tre</option>
                            <option value="ovulation">D√©clenchement nouvelle ovulation</option>
                            <option value="elimination">√âlimination imm√©diate endom√®tre</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerHormones()" disabled id="btn-hormones">Valider la r√©gulation hormonale</button>
                </div>
            </div>

            <div class="feedback-card" id="feedback2">
                <h4>‚úÖ Cycles hormonaux ma√Ætris√©s !</h4>
                <p>Vous comprenez la r√©gulation complexe du cycle reproducteur f√©minin.</p>
                <div class="feedback-explanation" style="background: rgba(0, 0, 0, 0.4); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <strong>üí° Astuce BAC :</strong> Le cycle menstruel est contr√¥l√© par 4 hormones principales : FSH et LH (hypophyse) + ≈ìstrog√®nes et progest√©rone (ovaires). Leurs interactions r√©gulent ovulation et pr√©paration ut√©rine.
                </div>
                <div class="buttons-container" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="passerPartie(3)">Partie 3 : Contraception m√©canique ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- PARTIE 3 : CONTRACEPTION M√âCANIQUE -->
        <div class="partie-container" id="partie3">
            <div class="partie-header">
                <h3>üõ°Ô∏è Partie 3 : M√©thodes contraceptives m√©caniques</h3>
                <p>Analyser les m√©thodes qui agissent par barri√®re physique</p>
            </div>

            <div class="methodes-grid">
                <div class="methode-card">
                    <div class="methode-icon">üî¥</div>
                    <div class="methode-title">Pr√©servatif masculin</div>
                    <div class="methode-details">Barri√®re physique<br>Protection IST<br>Efficacit√©: 85-98%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">üü°</div>
                    <div class="methode-title">Pr√©servatif f√©minin</div>
                    <div class="methode-details">Autonomie f√©minine<br>Double protection<br>Efficacit√©: 79-95%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">üîµ</div>
                    <div class="methode-title">DIU au cuivre</div>
                    <div class="methode-details">Longue dur√©e (10 ans)<br>Sans hormones<br>Efficacit√©: >99%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">‚ö´</div>
                    <div class="methode-title">Diaphragme</div>
                    <div class="methode-details">+ spermicides<br>R√©utilisable<br>Efficacit√©: 84-94%</div>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">1</div>
                    <div class="activite-title">Modes d'action des m√©thodes m√©caniques</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Pr√©servatifs :</div>
                        <select id="action-preservatifs">
                            <option value="">Mode d'action...</option>
                            <option value="barriere">Barri√®re emp√™chant contact spermatozo√Ødes-ovule</option>
                            <option value="hormone">Lib√©ration d'hormones contraceptives</option>
                            <option value="destruction">Destruction des gam√®tes</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">DIU au cuivre :</div>
                        <select id="action-diu">
                            <option value="">M√©canisme principal...</option>
                            <option value="toxique">Effet toxique du cuivre sur spermatozo√Ødes</option>
                            <option value="bouchon">Bouchon physique du col ut√©rin</option>
                            <option value="hormone">Lib√©ration d'hormones bloquantes</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Diaphragme :</div>
                        <select id="action-diaphragme">
                            <option value="">Associ√© obligatoirement √†...</option>
                            <option value="spermicides">Des spermicides</option>
                            <option value="pilule">La pilule contraceptive</option>
                            <option value="preservatif">Un pr√©servatif</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Avantage commun barri√®res :</div>
                        <select id="avantage-barriere">
                            <option value="">Caract√©ristique commune...</option>
                            <option value="reversible">R√©versibilit√© imm√©diate</option>
                            <option value="hormone">Action hormonale puissante</option>
                            <option value="permanent">Effect permanent</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerMecaniques()" disabled id="btn-mecaniques">Valider les m√©canismes</button>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">2</div>
                    <div class="activite-title">Efficacit√© et utilisation</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Efficacit√© maximale DIU :</div>
                        <select id="efficacite-diu">
                            <option value="">Taux de r√©ussite...</option>
                            <option value="99%">Plus de 99%</option>
                            <option value="85%">85% maximum</option>
                            <option value="70%">70% seulement</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Utilisation pr√©servatifs :</div>
                        <select id="utilisation-preservatifs">
                            <option value="">Quand les mettre...</option>
                            <option value="avant">Avant tout contact g√©nital</option>
                            <option value="milieu">Au milieu du rapport</option>
                            <option value="apres">Apr√®s √©jaculation</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Pose DIU :</div>
                        <select id="pose-diu">
                            <option value="">R√©alis√©e par...</option>
                            <option value="medecin">M√©decin ou sage-femme</option>
                            <option value="pharmacien">Pharmacien qualifi√©</option>
                            <option value="soi-meme">Auto-pose possible</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Dur√©e protection DIU :</div>
                        <select id="duree-diu">
                            <option value="">Efficace pendant...</option>
                            <option value="10ans">10 ans maximum</option>
                            <option value="1an">1 an seulement</option>
                            <option value="6mois">6 mois</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerEfficacite()" disabled id="btn-efficacite">Valider efficacit√© et utilisation</button>
                </div>
            </div>

            <div class="feedback-card" id="feedback3">
                <h4>‚úÖ M√©thodes m√©caniques comprises !</h4>
                <p>Vous ma√Ætrisez les contraceptifs par barri√®re physique.</p>
                <div class="feedback-explanation" style="background: rgba(0, 0, 0, 0.4); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <strong>üí° Astuce BAC :</strong> Les m√©thodes m√©caniques agissent par barri√®re physique ou chimique. Le DIU au cuivre est la m√©thode la plus efficace sans hormones. Les pr√©servatifs offrent une double protection (grossesse + IST).
                </div>
                <div class="buttons-container" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="passerPartie(4)">Partie 4 : Contraception hormonale ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- PARTIE 4 : CONTRACEPTION HORMONALE -->
        <div class="partie-container" id="partie4">
            <div class="partie-header">
                <h3>üíä Partie 4 : M√©thodes contraceptives hormonales</h3>
                <p>Comprendre l'action des hormones contraceptives</p>
            </div>

            <div class="methodes-grid">
                <div class="methode-card">
                    <div class="methode-icon">üíä</div>
                    <div class="methode-title">Pilule combin√©e</div>
                    <div class="methode-details">≈ístrog√®nes + progestatif<br>Prise quotidienne<br>Efficacit√©: 91-99%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">üî∏</div>
                    <div class="methode-title">Patch contraceptif</div>
                    <div class="methode-details">Application hebdomadaire<br>Absorption cutan√©e<br>Efficacit√©: 91-99%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">üìç</div>
                    <div class="methode-title">Implant sous-cutan√©</div>
                    <div class="methode-details">Efficacit√© 3 ans<br>Progestatif seul<br>Efficacit√©: >99%</div>
                </div>
                <div class="methode-card">
                    <div class="methode-icon">üü¢</div>
                    <div class="methode-title">DIU hormonal</div>
                    <div class="methode-details">L√©vonorgestrel local<br>Efficace 5 ans<br>Efficacit√©: >99%</div>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">1</div>
                    <div class="activite-title">M√©canismes d'action hormonaux</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Action principale pilule :</div>
                        <select id="action-pilule">
                            <option value="">M√©canisme primaire...</option>
                            <option value="ovulation">Blocage de l'ovulation</option>
                            <option value="destruction">Destruction des spermatozo√Ødes</option>
                            <option value="acceleration">Acc√©l√©ration du cycle</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Effet sur la glaire cervicale :</div>
                        <select id="effet-glaire">
                            <option value="">Modification...</option>
                            <option value="epaississement">√âpaississement (passage difficile)</option>
                            <option value="fluidification">Fluidification (passage facilit√©)</option>
                            <option value="suppression">Suppression compl√®te</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Impact sur l'endom√®tre :</div>
                        <select id="impact-endometre">
                            <option value="">Cons√©quence...</option>
                            <option value="amincissement">Amincissement (nidation difficile)</option>
                            <option value="epaississement">√âpaississement (nidation facilit√©e)</option>
                            <option value="destruction">Destruction imm√©diate</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Hormones de synth√®se :</div>
                        <select id="hormones-synthese">
                            <option value="">Imitent...</option>
                            <option value="naturelles">Les hormones ovariennes naturelles</option>
                            <option value="masculines">Les hormones masculines</option>
                            <option value="thyroidiennes">Les hormones thyro√Ødiennes</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerHormonaux()" disabled id="btn-hormonaux">Valider les m√©canismes hormonaux</button>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">2</div>
                    <div class="activite-title">Avantages et inconv√©nients</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">Avantage pilule bien utilis√©e :</div>
                        <select id="avantage-pilule">
                            <option value="">B√©n√©fice principal...</option>
                            <option value="efficacite">Tr√®s haute efficacit√© contraceptive</option>
                            <option value="protection">Protection contre toutes IST</option>
                            <option value="permanent">Effet contraceptif permanent</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Contrainte majeure pilule :</div>
                        <select id="contrainte-pilule">
                            <option value="">Difficult√© principale...</option>
                            <option value="quotidien">Prise quotidienne r√©guli√®re</option>
                            <option value="couteux">Co√ªt tr√®s √©lev√©</option>
                            <option value="douleur">Douleur √† l'utilisation</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Avantage implant/DIU hormonal :</div>
                        <select id="avantage-longue-duree">
                            <option value="">B√©n√©fice sp√©cifique...</option>
                            <option value="autonomie">Autonomie de plusieurs ann√©es</option>
                            <option value="protection">Protection IST compl√®te</option>
                            <option value="cout">Co√ªt tr√®s faible</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Surveillance m√©dicale :</div>
                        <select id="surveillance">
                            <option value="">Contraception hormonale n√©cessite...</option>
                            <option value="medicale">Prescription et suivi m√©dical</option>
                            <option value="libre">Acc√®s libre sans ordonnance</option>
                            <option value="familiale">Surveillance familiale uniquement</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerAvantages()" disabled id="btn-avantages">Valider avantages/inconv√©nients</button>
                </div>
            </div>

            <div class="feedback-card" id="feedback4">
                <h4>‚úÖ Contraception hormonale ma√Ætris√©e !</h4>
                <p>Vous comprenez les m√©canismes et enjeux des m√©thodes hormonales.</p>
                <div class="feedback-explanation" style="background: rgba(0, 0, 0, 0.4); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <strong>üí° Astuce BAC :</strong> La contraception hormonale agit sur 3 niveaux : blocage ovulation (principal), modification glaire cervicale, amincissement endom√®tre. Elle n√©cessite une prescription m√©dicale et un suivi r√©gulier.
                </div>
                <div class="buttons-container" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="passerPartie(5)">Partie 5 : Contraception d'urgence ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- PARTIE 5 : CONTRACEPTION D'URGENCE -->
        <div class="partie-container" id="partie5">
            <div class="partie-header">
                <h3>üö® Partie 5 : Contraception d'urgence</h3>
                <p>Ma√Ætriser les solutions d'exception et leurs modalit√©s</p>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">1</div>
                    <div class="activite-title">Pilule du lendemain</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">D√©lai maximal efficacit√© :</div>
                        <select id="delai-pilule-lendemain">
                            <option value="">Apr√®s rapport non prot√©g√©...</option>
                            <option value="72h">72 heures maximum</option>
                            <option value="24h">24 heures seulement</option>
                            <option value="1semaine">1 semaine compl√®te</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Mode d'action :</div>
                        <select id="action-urgence">
                            <option value="">M√©canisme principal...</option>
                            <option value="ovulation">Retard/blocage de l'ovulation</option>
                            <option value="destruction">Destruction de l'embryon</option>
                            <option value="acceleration">Acc√©l√©ration des r√®gles</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Efficacit√© selon d√©lai :</div>
                        <select id="efficacite-delai">
                            <option value="">Plus c'est t√¥t...</option>
                            <option value="plus-efficace">Plus c'est efficace</option>
                            <option value="identique">Efficacit√© identique</option>
                            <option value="moins-efficace">Moins c'est efficace</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Fr√©quence d'utilisation :</div>
                        <select id="frequence-urgence">
                            <option value="">Recommandation...</option>
                            <option value="exceptionnelle">Usage exceptionnel uniquement</option>
                            <option value="reguliere">Utilisation r√©guli√®re possible</option>
                            <option value="quotidienne">Remplacement de la pilule</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerUrgence1()" disabled id="btn-urgence1">Valider la pilule du lendemain</button>
                </div>
            </div>

            <div class="activite-block">
                <div class="activite-header">
                    <div class="activite-number">2</div>
                    <div class="activite-title">DIU d'urgence et acc√®s</div>
                </div>

                <div class="dropdown-container">
                    <div class="dropdown-item">
                        <div class="dropdown-label">DIU cuivre d'urgence :</div>
                        <select id="diu-urgence">
                            <option value="">D√©lai d'efficacit√©...</option>
                            <option value="5jours">Jusqu'√† 5 jours apr√®s rapport</option>
                            <option value="24h">24h maximum comme pilule</option>
                            <option value="impossible">Pas d'usage d'urgence possible</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Acc√®s pilule d'urgence :</div>
                        <select id="acces-urgence">
                            <option value="">Disponibilit√©...</option>
                            <option value="libre">Pharmacie sans ordonnance</option>
                            <option value="medecin">Prescription m√©dicale obligatoire</option>
                            <option value="hopital">H√¥pital uniquement</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Gratuit√© pour mineures :</div>
                        <select id="gratuite-mineures">
                            <option value="">En pharmacie...</option>
                            <option value="gratuite">D√©livrance gratuite et anonyme</option>
                            <option value="payante">Payante comme pour adultes</option>
                            <option value="interdite">Interdite aux mineures</option>
                        </select>
                    </div>
                    <div class="dropdown-item">
                        <div class="dropdown-label">Protection future :</div>
                        <select id="protection-future">
                            <option value="">Apr√®s contraception d'urgence...</option>
                            <option value="contraception">Adopter m√©thode contraceptive r√©guli√®re</option>
                            <option value="attendre">Attendre 6 mois avant contraception</option>
                            <option value="inutile">Plus besoin de contraception</option>
                        </select>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-primary" onclick="validerUrgence2()" disabled id="btn-urgence2">Finaliser l'expertise contraceptive</button>
                </div>
            </div>

            <div class="feedback-card" id="feedback5">
                <h4>üéâ EXPERTISE CONTRACEPTIVE COMPL√àTE !</h4>
                <p>Vous ma√Ætrisez tous les aspects des m√©thodes contraceptives !</p>
                
                <div class="competences-bilan" style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>üéØ Bilan des comp√©tences d√©velopp√©es :</h4>
                    <p><strong>C1 - Traitement information :</strong> Vous analysez les donn√©es sur cycles et contraception ‚úÖ</p>
                    <p><strong>C2 - D√©marche d'analyse :</strong> Vous comprenez les processus reproductifs ‚úÖ</p>
                    <p><strong>C3 - Explication physiologique :</strong> Vous expliquez l'action des contraceptifs ‚úÖ</p>
                    <p><strong>C4 - Proposition solution :</strong> Vous savez choisir la m√©thode adapt√©e ‚úÖ</p>
                    
                    <h4 style="margin-top: 20px;">üèÜ Synth√®se de l'expertise :</h4>
                    <p>‚Ä¢ <strong>Processus reproduction :</strong> F√©condation ‚Üí nidation (7-8 jours)</p>
                    <p>‚Ä¢ <strong>R√©gulation :</strong> 4 hormones principales (FSH, LH, ≈ìstrog√®nes, progest√©rone)</p>
                    <p>‚Ä¢ <strong>Contraception m√©canique :</strong> Barri√®res physiques/chimiques</p>
                    <p>‚Ä¢ <strong>Contraception hormonale :</strong> 3 actions (ovulation, glaire, endom√®tre)</p>
                    <p>‚Ä¢ <strong>Contraception d'urgence :</strong> 72h pilule / 5 jours DIU</p>
                    
                    <h4 style="margin-top: 15px;">üéØ Astuce BAC :</h4>
                    <p>Cette approche globale reproduction-cycles-contraception est typique des sujets d'examen PSE !</p>
                </div>
                
                <div class="buttons-container" style="margin-top: 30px;">
                    <button class="btn btn-success" style="font-size: 1.2em; padding: 18px 40px;">üèÜ EXPERT CERTIFI√â !</button>
                </div>
            </div>
        </div>
    </div>

    <!-- RGPD FOOTER -->
    <div class="rgpd-notice">
        üîí Conformit√© RGPD : Cet exercice respecte votre anonymat.
    </div>

    <script>
        let partieActuelle = 1;
        let progress = 0;

        // Bonnes r√©ponses bas√©es sur fecondation_a_la_nidation_corrige.jpg et connaissances PSE
        const bonnesReponses = {
            chronologie: {
                'etape1-ordre': '1', // D√©p√¥t spermatozo√Ødes
                'etape2-ordre': '2', // Remont√©e vers ut√©rus
                'etape3-ordre': '3', // Arriv√©e trompes
                'etape4-ordre': '4', // F√©condation
                'etape5-ordre': '5', // Cellule-≈ìuf
                'etape6-ordre': '6', // Divisions
                'etape7-ordre': '7'  // Nidation
            },
            temporel: {
                'duree-trajet': '7jours',
                'moment-nidation': '7-8jours',
                'condition-nidation': 'prepare',
                'resultat-nidation': 'grossesse'
            },
            phases: {
                'phase-menstruelle': 'elimination',
                'phase-folliculaire': 'maturation',
                'ovulation': 'hormone-lh',
                'phase-luteale': 'preparation'
            },
            hormones_cycle: {
                'hormone-fsh': 'follicule',
                'hormone-lh': 'ovulation',
                'oestrogenes': 'epaississement',
                'progesterone': 'maintien'
            },
            mecaniques: {
                'action-preservatifs': 'barriere',
                'action-diu': 'toxique',
                'action-diaphragme': 'spermicides',
                'avantage-barriere': 'reversible'
            },
            efficacite_meca: {
                'efficacite-diu': '99%',
                'utilisation-preservatifs': 'avant',
                'pose-diu': 'medecin',
                'duree-diu': '10ans'
            },
            hormonaux: {
                'action-pilule': 'ovulation',
                'effet-glaire': 'epaississement',
                'impact-endometre': 'amincissement',
                'hormones-synthese': 'naturelles'
            },
            avantages_hormo: {
                'avantage-pilule': 'efficacite',
                'contrainte-pilule': 'quotidien',
                'avantage-longue-duree': 'autonomie',
                'surveillance': 'medicale'
            },
            urgence1: {
                'delai-pilule-lendemain': '72h',
                'action-urgence': 'ovulation',
                'efficacite-delai': 'plus-efficace',
                'frequence-urgence': 'exceptionnelle'
            },
            urgence2: {
                'diu-urgence': '5jours',
                'acces-urgence': 'libre',
                'gratuite-mineures': 'gratuite',
                'protection-future': 'contraception'
            }
        };

        // Fonction d'√©valuation des comp√©tences
        function trackCompetence(competenceCode, action, success) {
            const performance = {
                competence: competenceCode,
                action: action,
                reussite: success,
                timestamp: Date.now(),
                session_id: 'expert_' + Math.random().toString(36).substr(2, 9)
            };
            
            const performances = JSON.parse(localStorage.getItem('pse_performances') || '[]');
            performances.push(performance);
            localStorage.setItem('pse_performances', JSON.stringify(performances));
        }

        // Gestion des dropdowns
        document.addEventListener('change', function(e) {
            if (e.target.tagName === 'SELECT') {
                verifierCompletion();
            }
        });

        function verifierCompletion() {
            const selects = document.querySelectorAll(`#partie${partieActuelle} select`);
            const allFilled = Array.from(selects).every(select => select.value !== '');
            
            const buttons = document.querySelectorAll(`#partie${partieActuelle} .btn-primary`);
            buttons.forEach(btn => {
                if (allFilled) {
                    btn.disabled = false;
                    btn.style.background = '#4CAF50';
                    btn.textContent = btn.textContent.replace('Valider', '‚úÖ Valider');
                }
            });
        }

        function validerGroup(groupName, competence, feedbackNum) {
            let corrections = [];
            let score = 0;
            
            const reponses = bonnesReponses[groupName];
            
            Object.keys(reponses).forEach(id => {
                const select = document.getElementById(id);
                if (select) {
                    if (select.value === reponses[id]) {
                        select.classList.add('correct');
                        score++;
                        // Mettre √† jour le num√©ro dans chronologie
                        if (groupName === 'chronologie') {
                            const item = select.closest('.chronologie-item');
                            const numberDiv = item.querySelector('.chronologie-number');
                            numberDiv.textContent = select.value;
                            numberDiv.style.background = '#4CAF50';
                            numberDiv.style.color = 'white';
                        }
                    } else {
                        select.classList.add('incorrect');
                        corrections.push({
                            question: id,
                            correct: getOptionText(select, reponses[id]),
                            user: select.options[select.selectedIndex].text
                        });
                    }
                }
            });

            trackCompetence(competence, groupName, score >= Math.floor(Object.keys(reponses).length * 0.7));
            
            if (corrections.length > 0) {
                afficherCorrections(corrections, partieActuelle);
            } else {
                setTimeout(() => {
                    document.getElementById(`feedback${feedbackNum || partieActuelle}`).classList.add('show');
                    if (partieActuelle < 5) {
                        marquerPartieComplete(partieActuelle);
                        updateProgress();
                    }
                }, 500);
            }
        }

        function validerChronologie() { validerGroup('chronologie', 'C2', 1); }
        function validerTemporel() { validerGroup('temporel', 'C3', 1); }
        function validerPhases() { validerGroup('phases', 'C1', 2); }
        function validerHormones() { validerGroup('hormones_cycle', 'C3', 2); }
        function validerMecaniques() { validerGroup('mecaniques', 'C3', 3); }
        function validerEfficacite() { validerGroup('efficacite_meca', 'C1', 3); }
        function validerHormonaux() { validerGroup('hormonaux', 'C3', 4); }
        function validerAvantages() { validerGroup('avantages_hormo', 'C4', 4); }
        function validerUrgence1() { validerGroup('urgence1', 'C1', 5); }
        function validerUrgence2() { 
            validerGroup('urgence2', 'C4', 5);
            setTimeout(() => {
                document.getElementById('feedback5').classList.add('show');
                marquerPartieComplete(5);
                updateProgress();
            }, 500);
        }

        function getOptionText(select, value) {
            const option = select.querySelector(`option[value="${value}"]`);
            return option ? option.text : value;
        }

        function afficherCorrections(corrections, partie) {
            const feedback = document.getElementById(`feedback${partie}`);
            let html = '<div class="correction-explicite"><h4>‚ùå CORRECTION</h4>';
            
            corrections.forEach(item => {
                html += `
                    <div class="bonne-reponse">
                        <strong>‚úÖ ${item.question} :</strong><br>
                        <strong>Bonne r√©ponse :</strong> ${item.correct}<br>
                        <small style="color: #666;">Votre r√©ponse : ${item.user}</small>
                    </div>
                `;
            });

            html += '</div>';
            feedback.innerHTML = html + feedback.innerHTML;
            feedback.classList.add('show');

            setTimeout(() => {
                if (partie < 5) {
                    feedback.innerHTML += `
                        <div class="buttons-container" style="margin-top: 20px;">
                            <button class="btn btn-success" onclick="passerPartie(${partie + 1})">Partie suivante ‚Üí</button>
                        </div>
                    `;
                    marquerPartieComplete(partie);
                    updateProgress();
                }
            }, 2000);
        }

        function passerPartie(numeroParte) {
            document.getElementById(`partie${partieActuelle}`).classList.remove('active');
            document.querySelector(`[data-partie="${partieActuelle}"]`).classList.remove('active');
            
            partieActuelle = numeroParte;
            
            document.getElementById(`partie${numeroParte}`).classList.add('active');
            document.querySelector(`[data-partie="${numeroParte}"]`).classList.add('active');
            document.querySelector(`[data-partie="${numeroParte}"]`).classList.remove('locked');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function marquerPartieComplete(partie) {
            const tab = document.querySelector(`[data-partie="${partie}"]`);
            tab.classList.add('completed');
            tab.classList.remove('active');
            
            if (partie < 5) {
                const nextTab = document.querySelector(`[data-partie="${partie + 1}"]`);
                nextTab.classList.remove('locked');
            }
        }

        function updateProgress() {
            progress += 20;
            document.getElementById('global-progress').style.width = progress + '%';
        }

        // Navigation par onglets
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tab-button') && !e.target.classList.contains('locked')) {
                const partie = parseInt(e.target.dataset.partie);
                if (partie <= partieActuelle || e.target.classList.contains('completed')) {
                    passerPartie(partie);
                }
            }
        });

        // Accessibilit√© clavier
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName === 'BUTTON') {
                e.target.click();
            }
        });
    </script>
</body>
</html>