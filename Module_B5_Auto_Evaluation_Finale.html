<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ AUTO-√âVALUATION FINALE - Module B.5</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3d59;
            --secondary: #2e7d32;
            --accent: #ff6b35;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --text: #2c3e50;
            --text-light: #546e7a;
            --background: #f8fffe;
            --surface: #ffffff;
            --border: #e0f2f1;
            --shadow: 0 8px 32px rgba(30, 61, 89, 0.12);
            --gradient-primary: linear-gradient(135deg, #1e3d59 0%, #2e7d32 100%);
            --gradient-accent: linear-gradient(135deg, #ff6b35 0%, #ff8a50 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--background);
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }

        /* HEADER PRINCIPAL */
        .main-header {
            background: var(--gradient-primary);
            color: white;
            padding: 3rem 2rem;
            border-radius: 24px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .module-title {
            font-family: 'Crimson Text', serif;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .module-subtitle {
            font-size: 1.3rem;
            text-align: center;
            opacity: 0.95;
            margin-bottom: 2rem;
            position: relative;
            z-index: 2;
        }

        .objective-box {
            background: rgba(255,255,255,0.15);
            padding: 1.5rem;
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            z-index: 2;
        }

        .objective-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* COMP√âTENCES */
        .competences-section {
            background: var(--surface);
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .competences-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .competences-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .competence-card {
            background: linear-gradient(135deg, var(--surface) 0%, #f1f8e9 100%);
            padding: 1.2rem;
            border-radius: 12px;
            border-left: 4px solid var(--secondary);
            transition: all 0.3s ease;
        }

        .competence-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 125, 50, 0.15);
        }

        .competence-badge {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* SECTION √âVALUATION */
        .evaluation-section {
            background: var(--surface);
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .evaluation-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .evaluation-title {
            font-family: 'Crimson Text', serif;
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .progress-container {
            background: var(--border);
            height: 8px;
            border-radius: 20px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-bar {
            background: var(--gradient-accent);
            height: 100%;
            width: 0%;
            border-radius: 20px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f5e8 100%);
            border-radius: 12px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 0.2rem;
        }

        /* QUESTIONS */
        .question-container {
            background: var(--surface);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .question-container::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--gradient-accent);
            transition: width 0.3s ease;
        }

        .question-container:hover::before {
            width: 8px;
        }

        .question-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .question-number {
            background: var(--gradient-primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .competence-mini-badge {
            background: var(--accent);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .options-grid {
            display: grid;
            gap: 0.8rem;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.2rem;
            background: #f8f9ff;
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option-item:hover {
            border-color: var(--accent);
            background: #fff4f0;
            transform: translateX(4px);
        }

        .option-item.selected {
            border-color: var(--secondary);
            background: #e8f5e8;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.15);
        }

        .option-item.correct {
            border-color: var(--success);
            background: #e8f5e8;
        }

        .option-item.incorrect {
            border-color: var(--error);
            background: #ffebee;
        }

        .option-radio {
            margin-right: 1rem;
            width: 20px;
            height: 20px;
            border: 2px solid var(--text-light);
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
        }

        .option-item.selected .option-radio {
            border-color: var(--secondary);
        }

        .option-item.selected .option-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: var(--secondary);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .text-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: #f8f9ff;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--secondary);
            background: white;
            box-shadow: 0 0 0 4px rgba(46, 125, 50, 0.1);
        }

        /* EXPLANATION */
        .explanation {
            margin-top: 1rem;
            padding: 1.2rem;
            background: linear-gradient(135deg, #e3f2fd 0%, #e8f5e8 100%);
            border-left: 4px solid var(--secondary);
            border-radius: 8px;
            display: none;
            animation: slideDown 0.4s ease-out;
        }

        .explanation.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }

        /* BOUTONS */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: all 0.4s ease;
            transform: translate(-50%, -50%);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 61, 89, 0.3);
        }

        .btn-accent {
            background: var(--gradient-accent);
            color: white;
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: white;
        }

        /* R√âSULTATS */
        .results-section {
            background: var(--surface);
            padding: 3rem 2rem;
            border-radius: 24px;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            text-align: center;
            display: none;
        }

        .results-section.show {
            display: block;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--secondary) 0deg, var(--accent) 180deg, var(--border) 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background: var(--surface);
            border-radius: 50%;
        }

        .score-text {
            position: relative;
            z-index: 2;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .remediation {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f5e8 100%);
            padding: 2rem;
            border-radius: 16px;
            margin-top: 2rem;
            border-left: 6px solid var(--accent);
        }

        .remediation-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* FOOTER */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
            border-top: 1px solid var(--border);
            margin-top: 3rem;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .module-title {
                font-size: 2rem;
            }
            
            .competences-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER PRINCIPAL -->
        <header class="main-header">
            <h1 class="module-title">MODULE B.5</h1>
            <p class="module-subtitle">Les ressources en √©nergie et le d√©veloppement durable</p>
            <div class="objective-box">
                <div class="objective-title">üéØ OBJECTIF G√âN√âRAL</div>
                <p>√ätre capable de proposer des choix et des actions pour ma√Ætriser la consommation d'√©nergie et limiter les impacts sur l'environnement et la sant√©.</p>
            </div>
        </header>

        <!-- COMP√âTENCES -->
        <section class="competences-section">
            <h2 class="competences-title">üìã Comp√©tences √©valu√©es</h2>
            <div class="competences-grid">
                <div class="competence-card">
                    <div class="competence-badge">C1 - S'INFORMER</div>
                    <p>Rechercher, extraire et organiser l'information</p>
                </div>
                <div class="competence-card">
                    <div class="competence-badge">C2 - ANALYSER</div>
                    <p>Analyser une situation professionnelle</p>
                </div>
                <div class="competence-card">
                    <div class="competence-badge">C3 - COMPRENDRE</div>
                    <p>Expliquer un ph√©nom√®ne li√© au milieu professionnel</p>
                </div>
                <div class="competence-card">
                    <div class="competence-badge">C4 - AGIR</div>
                    <p>Proposer une d√©marche de pr√©vention adapt√©e</p>
                </div>
                <div class="competence-card">
                    <div class="competence-badge">C5 - ARGUMENTER</div>
                    <p>Argumenter un choix</p>
                </div>
            </div>
        </section>

        <!-- SECTION √âVALUATION -->
        <section class="evaluation-section">
            <div class="evaluation-header">
                <h2 class="evaluation-title">üéì Auto-√âvaluation Finale</h2>
                <p>25 questions pour r√©viser l'ensemble du module</p>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="currentQuestion">0</div>
                        <div class="stat-label">Question</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="correctAnswers">0</div>
                        <div class="stat-label">Correctes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalQuestions">25</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="currentScore">0%</div>
                        <div class="stat-label">Score</div>
                    </div>
                </div>
            </div>

            <!-- QUESTIONS -->
            <div id="questionsContainer"></div>

            <!-- BOUTONS NAVIGATION -->
            <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" disabled>‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Suivant ‚Üí</button>
                <button class="btn btn-accent" onclick="calculateFinalScore()" id="finishBtn" style="display: none;">üéØ Calculer mon score</button>
            </div>
        </section>

        <!-- R√âSULTATS -->
        <section class="results-section" id="resultsSection">
            <h2 style="font-family: 'Crimson Text', serif; font-size: 2.2rem; color: var(--primary); margin-bottom: 2rem;">üéâ R√©sultats de votre √©valuation</h2>
            
            <div class="score-circle" id="scoreCircle">
                <div class="score-text" id="finalScore">0%</div>
            </div>
            
            <div id="scoreMessage" style="font-size: 1.3rem; margin-bottom: 1rem; font-weight: 600;"></div>
            
            <div class="remediation" id="remediationSection">
                <h3 class="remediation-title">üìö Conseils de rem√©diation</h3>
                <div id="remediationContent"></div>
            </div>

            <button class="btn btn-secondary" onclick="restartEvaluation()" style="margin-top: 2rem;">üîÑ Refaire l'√©valuation</button>
        </section>

        <!-- FOOTER -->
        <footer class="footer">
            <p style="font-style: italic; opacity: 0.8;">¬© √âdition Delagrave</p>
        </footer>
    </div>

    <script>
        // DONN√âES DES QUESTIONS
        const questions = [
            {
                id: 1,
                competence: "C1",
                text: "Parmi ces √©nergies, lesquelles sont des √©nergies renouvelables ?",
                type: "mcq",
                options: [
                    "Solaire, √©olien, hydraulique",
                    "P√©trole, gaz, charbon", 
                    "Uranium, charbon, solaire",
                    "Gaz, hydraulique, g√©othermie"
                ],
                correct: 0,
                explanation: "Les √©nergies renouvelables sont : solaire, √©olien, hydraulique, g√©othermique et biomasse. Elles se renouvellent naturellement et sont in√©puisables √† l'√©chelle humaine."
            },
            {
                id: 2,
                competence: "C2",
                text: "Quel est le principal probl√®me li√© √† la consommation massive de charbon ?",
                type: "mcq",
                options: [
                    "Il co√ªte tr√®s cher",
                    "Il √©met beaucoup de CO2",
                    "Il est difficile √† extraire",
                    "Il n'est pas efficace"
                ],
                correct: 1,
                explanation: "Le charbon est l'une des sources d'√©nergie les plus √©mettrices de CO2, contribuant directement au r√©chauffement climatique et √† l'effet de serre."
            },
            {
                id: 3,
                competence: "C1",
                text: "Selon les estimations actuelles, les r√©serves prouv√©es de charbon permettraient de subvenir aux besoins pendant :",
                type: "mcq",
                options: [
                    "49 ans",
                    "54 ans", 
                    "139 ans",
                    "200 ans"
                ],
                correct: 2,
                explanation: "Les r√©serves prouv√©es de charbon permettraient 139 ans de consommation, contre 54 ans pour le p√©trole et 49 ans pour le gaz naturel."
            },
            {
                id: 4,
                competence: "C4",
                text: "Pourquoi l'Union europ√©enne a-t-elle int√©r√™t √† d√©velopper les √©nergies renouvelables ?",
                type: "text",
                correct: "Pour r√©duire sa d√©pendance √©nerg√©tique vis-√†-vis d'autres pays et am√©liorer sa souverainet√© √©nerg√©tique.",
                explanation: "L'UE ne poss√®de pas de r√©serves importantes d'√©nergies fossiles, ce qui la rend d√©pendante d'autres pays. Les √©nergies renouvelables permettent une autonomie √©nerg√©tique."
            },
            {
                id: 5,
                competence: "C3",
                text: "Le m√©thane (CH4) est 25 fois plus puissant que le CO2 en effet de serre.",
                type: "boolean",
                options: ["Vrai", "Faux"],
                correct: 0,
                explanation: "Vrai. Le m√©thane a un pouvoir de r√©chauffement 25 fois sup√©rieur au CO2. Il est √©mis notamment par l'agriculture et la d√©composition de mati√®res organiques."
            },
            {
                id: 6,
                competence: "C1",
                text: "Quel est le poste de consommation d'√©nergie le plus important dans un logement ?",
                type: "mcq",
                options: [
                    "L'eau chaude sanitaire (11%)",
                    "Le chauffage (66%)",
                    "L'√©lectrom√©nager (17%)",
                    "La cuisson (6%)"
                ],
                correct: 1,
                explanation: "Le chauffage repr√©sente 66% de la consommation √©nerg√©tique d'un logement, soit les deux tiers. C'est le poste le plus important √† optimiser."
            },
            {
                id: 7,
                competence: "C3",
                text: "Comment le d√©r√®glement climatique influence-t-il la consommation √©nerg√©tique en √©t√© ?",
                type: "text",
                correct: "L'augmentation des temp√©ratures pousse les gens √† utiliser davantage de climatiseurs, ce qui augmente la consommation d'√©lectricit√©.",
                explanation: "Le r√©chauffement climatique entra√Æne des temp√©ratures plus √©lev√©es, multipliant l'usage des climatiseurs et donc la consommation √©lectrique estivale."
            },
            {
                id: 8,
                competence: "C1",
                text: "Quels sont les trois principaux gaz √† effet de serre ?",
                type: "text", 
                correct: "CO2 (dioxyde de carbone), CH4 (m√©thane), N2O (protoxyde d'azote)",
                explanation: "Les principaux GES sont le CO2 (combustion), le CH4 (agriculture, d√©chets) et le N2O (agriculture, industrie). Ils retiennent la chaleur dans l'atmosph√®re."
            },
            {
                id: 9,
                competence: "C3",
                text: "Quelles sont les quatre principales activit√©s humaines √©mettrices de gaz √† effet de serre ?",
                type: "text",
                correct: "Transport, industrie, agriculture, activit√©s domestiques",
                explanation: "Ces quatre secteurs sont les principaux responsables des √©missions de GES : transports (mobilit√©), industrie (production), agriculture (√©levage, cultures), domestique (chauffage, consommation)."
            },
            {
                id: 10,
                competence: "C5",
                text: "Pourquoi un avion √©met-il plus de CO2 qu'un train sur le trajet Paris-Bordeaux ?",
                type: "text",
                correct: "L'avion utilise des √©nergies fossiles (k√©ros√®ne) tandis que l'√©lectricit√© des trains fran√ßais n'√©met pas de CO2 (nucl√©aire).",
                explanation: "L'√©lectricit√© fran√ßaise est principalement nucl√©aire (faible empreinte carbone), tandis que l'aviation utilise du k√©ros√®ne, √©nergie fossile tr√®s √©mettrice."
            },
            {
                id: 11,
                competence: "C1",
                text: "Dans le cycle de vie d'un v√©hicule √©lectrique, quelle √©tape g√©n√®re le plus d'√©missions de CO2 ?",
                type: "mcq",
                options: [
                    "L'utilisation",
                    "La fabrication",
                    "L'entretien",
                    "Le recyclage"
                ],
                correct: 1,
                explanation: "La fabrication d'un v√©hicule √©lectrique (notamment sa batterie) g√©n√®re plus d'√©missions que son utilisation, contrairement aux v√©hicules thermiques."
            },
            {
                id: 12,
                competence: "C5",
                text: "Un v√©hicule √©lectrique a une empreinte carbone plus importante lors de son utilisation que lors de sa fabrication.",
                type: "boolean",
                options: ["Vrai", "Faux"],
                correct: 1,
                explanation: "Faux. C'est l'inverse : l'empreinte carbone est plus importante lors de la fabrication. En utilisation, le v√©hicule √©lectrique √©met tr√®s peu gr√¢ce √† l'√©lectricit√© d√©carbon√©e."
            },
            {
                id: 13,
                competence: "C1",
                text: "Combien de d√©c√®s pr√©matur√©s par an la pollution de l'air cause-t-elle en France ?",
                type: "mcq",
                options: [
                    "10 000",
                    "20 000",
                    "40 000", 
                    "80 000"
                ],
                correct: 2,
                explanation: "La pollution de l'air cause 40 000 d√©c√®s pr√©matur√©s par an en France, principalement due aux particules fines PM2,5 et PM10."
            },
            {
                id: 14,
                competence: "C1",
                text: "Les particules PM2,5 sont plus dangereuses que les PM10.",
                type: "boolean",
                options: ["Vrai", "Faux"],
                correct: 0,
                explanation: "Vrai. Plus les particules sont fines, plus elles p√©n√®trent profond√©ment dans l'organisme. Les PM2,5 atteignent les alv√©oles pulmonaires et passent dans le sang."
            },
            {
                id: 15,
                competence: "C1",
                text: "Quels sont les effets √† court terme de la pollution de l'air sur les yeux et l'appareil respiratoire ?",
                type: "text",
                correct: "Yeux : irritation oculaire. Appareil respiratoire : toux, bronchite",
                explanation: "La pollution provoque rapidement des irritations oculaires et des troubles respiratoires comme la toux et les bronchites, surtout chez les personnes sensibles."
            },
            {
                id: 16,
                competence: "C1",
                text: "Citez trois cons√©quences √† long terme de la pollution sur diff√©rents organes :",
                type: "text",
                correct: "Cerveau : AVC. Poumons : cancer. C≈ìur : troubles cardiovasculaires. Appareil reproducteur : baisse fertilit√©",
                explanation: "La pollution a des effets syst√©miques : maladies neurod√©g√©n√©ratives, cancers pulmonaires, maladies cardiovasculaires, troubles reproductifs."
            },
            {
                id: 17,
                competence: "C1",
                text: "Quel est l'objectif climatique mondial fix√© pour 2050 ?",
                type: "mcq",
                options: [
                    "R√©duire les √©missions de 50%",
                    "Atteindre la neutralit√© carbone",
                    "Doubler les √©nergies renouvelables",
                    "Interdire les √©nergies fossiles"
                ],
                correct: 1,
                explanation: "L'objectif mondial est d'atteindre la neutralit√© carbone d'ici 2050, c'est-√†-dire √©quilibrer les √©missions par des absorptions de CO2."
            },
            {
                id: 18,
                competence: "C4",
                text: "Citez un geste √©cocitoyen pour chaque poste de consommation :",
                type: "text",
                correct: "Logement : √©teindre les lumi√®res, baisser le chauffage. Transport : transports en commun, v√©lo. Num√©rique : d√©brancher les appareils",
                explanation: "Des gestes simples permettent de r√©duire sa consommation : optimisation du chauffage, mobilit√© douce, sobri√©t√© num√©rique."
            },
            {
                id: 19,
                competence: "C2",
                text: "Pourquoi s'inqui√©ter du niveau des r√©serves d'√©nergies fossiles n'est pas la seule priorit√© climatique ?",
                type: "text",
                correct: "Car utiliser toutes les r√©serves provoquerait un r√©chauffement de +6¬∞C, ce qui serait catastrophique pour le climat.",
                explanation: "Le probl√®me n'est pas de manquer d'√©nergies fossiles, mais que leur combustion compl√®te causerait un r√©chauffement climatique intenable."
            },
            {
                id: 20,
                competence: "C3",
                text: "Comment l'accumulation des gaz √† effet de serre provoque-t-elle le r√©chauffement climatique ?",
                type: "text",
                correct: "Les GES retiennent l'√©nergie solaire dans l'atmosph√®re qui devrait repartir vers l'espace, r√©chauffant la Terre.",
                explanation: "Les GES forment une 'couverture' atmosph√©rique qui pi√®ge la chaleur terrestre, emp√™chant son √©vacuation vers l'espace et r√©chauffant la plan√®te."
            },
            {
                id: 21,
                competence: "C1",
                text: "Quels sont les avantages des √©nergies renouvelables ?",
                type: "mcq",
                options: [
                    "Gratuites et in√©puisables",
                    "Toujours disponibles", 
                    "Faciles √† stocker",
                    "Tr√®s rentables"
                ],
                correct: 0,
                explanation: "Les √©nergies renouvelables sont gratuites (soleil, vent, eau) et in√©puisables √† l'√©chelle humaine, contrairement aux √©nergies fossiles."
            },
            {
                id: 22,
                competence: "C1",
                text: "Quel est le principal probl√®me technique des √©nergies renouvelables ?",
                type: "mcq",
                options: [
                    "Leur co√ªt √©lev√©",
                    "Leur impact environnemental",
                    "Leurs difficult√©s de stockage",
                    "Leur faible efficacit√©"
                ],
                correct: 2,
                explanation: "Le stockage est le d√©fi majeur : comment conserver l'√©nergie produite quand le soleil ne brille pas ou que le vent ne souffle pas ?"
            },
            {
                id: 23,
                competence: "C2",
                text: "Quel √©l√©ment du cycle de vie des v√©hicules n'est g√©n√©ralement pas pris en compte dans les calculs d'empreinte carbone ?",
                type: "text",
                correct: "La fin de vie avec le recyclage des mat√©riaux",
                explanation: "Les √©tudes d'empreinte carbone oublient souvent la phase de recyclage/d√©mant√®lement, qui peut pourtant repr√©senter des √©missions significatives."
            },
            {
                id: 24,
                competence: "C4",
                text: "Le poste de consommation num√©rique est en augmentation. Quelle solution proposez-vous ?",
                type: "text", 
                correct: "D√©brancher les box internet et √©teindre les multiprises pendant les absences prolong√©es.",
                explanation: "La consommation num√©rique repr√©sente d√©j√† 25% de l'augmentation √©nerg√©tique. √âteindre compl√®tement les √©quipements √©vite la consommation de veille."
            },
            {
                id: 25,
                competence: "C5",
                text: "Argumentez pourquoi un v√©hicule √©lectrique a une empreinte carbone globalement plus faible qu'un v√©hicule thermique :",
                type: "text",
                correct: "Malgr√© une fabrication plus √©mettrice, l'utilisation d'un v√©hicule √©lectrique √©met tr√®s peu de CO2 contrairement au thermique.",
                explanation: "Sur l'ensemble du cycle de vie (150 000 km), le v√©hicule √©lectrique √©met 9 tonnes de CO2-eq contre 22 tonnes pour le thermique, gr√¢ce √† l'√©lectricit√© d√©carbon√©e."
            }
        ];

        // VARIABLES GLOBALES
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let score = 0;

        // INITIALISATION
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            updateProgress();
        });

        // G√âN√âRER LES QUESTIONS
        function generateQuestions() {
            const container = document.getElementById('questionsContainer');
            
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.id = `question-${question.id}`;
                questionDiv.style.display = index === 0 ? 'block' : 'none';
                
                let optionsHTML = '';
                
                if (question.type === 'mcq' || question.type === 'boolean') {
                    optionsHTML = question.options.map((option, optionIndex) => `
                        <div class="option-item" onclick="selectOption(${question.id}, ${optionIndex})">
                            <div class="option-radio"></div>
                            <span>${option}</span>
                        </div>
                    `).join('');
                } else if (question.type === 'text') {
                    optionsHTML = `
                        <textarea class="text-input" id="text-${question.id}" placeholder="Saisissez votre r√©ponse..." rows="3"></textarea>
                    `;
                }
                
                questionDiv.innerHTML = `
                    <div class="question-header">
                        <div class="question-number">Question ${question.id}/25</div>
                        <div class="competence-mini-badge">${question.competence}</div>
                    </div>
                    <div class="question-text">${question.text}</div>
                    <div class="options-grid">
                        ${optionsHTML}
                    </div>
                    <div class="explanation" id="explanation-${question.id}">
                        <div class="explanation-title">üí° Explication</div>
                        <p>${question.explanation}</p>
                    </div>
                `;
                
                container.appendChild(questionDiv);
            });
        }

        // S√âLECTIONNER UNE OPTION
        function selectOption(questionId, optionIndex) {
            const question = questions.find(q => q.id === questionId);
            const questionDiv = document.getElementById(`question-${questionId}`);
            const options = questionDiv.querySelectorAll('.option-item');
            
            // Nettoyer les s√©lections pr√©c√©dentes
            options.forEach(opt => opt.classList.remove('selected'));
            
            // S√©lectionner la nouvelle option
            options[optionIndex].classList.add('selected');
            
            // Enregistrer la r√©ponse
            userAnswers[questionId] = optionIndex;
            
            // Afficher l'explication
            const explanation = document.getElementById(`explanation-${questionId}`);
            explanation.classList.add('show');
            
            // Marquer comme correct/incorrect
            if (optionIndex === question.correct) {
                options[optionIndex].classList.add('correct');
            } else {
                options[optionIndex].classList.add('incorrect');
                options[question.correct].classList.add('correct');
            }
            
            updateScore();
        }

        // NAVIGATION QUESTIONS
        function nextQuestion() {
            // Sauvegarder r√©ponse texte si applicable
            const currentQuestion = questions[currentQuestionIndex];
            if (currentQuestion.type === 'text') {
                const textInput = document.getElementById(`text-${currentQuestion.id}`);
                userAnswers[currentQuestion.id] = textInput.value.trim();
                
                // Afficher explication pour texte
                const explanation = document.getElementById(`explanation-${currentQuestion.id}`);
                explanation.classList.add('show');
            }
            
            // Cacher question actuelle
            document.getElementById(`question-${questions[currentQuestionIndex].id}`).style.display = 'none';
            
            // Passer √† la suivante
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                document.getElementById(`question-${questions[currentQuestionIndex].id}`).style.display = 'block';
                updateProgress();
                updateButtons();
            } else {
                // Derni√®re question atteinte
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('finishBtn').style.display = 'block';
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                document.getElementById(`question-${questions[currentQuestionIndex].id}`).style.display = 'none';
                currentQuestionIndex--;
                document.getElementById(`question-${questions[currentQuestionIndex].id}`).style.display = 'block';
                updateProgress();
                updateButtons();
                
                // Remettre le bouton suivant si on revient de la fin
                document.getElementById('nextBtn').style.display = 'block';
                document.getElementById('finishBtn').style.display = 'none';
            }
        }

        // MISE √Ä JOUR DES BOUTONS
        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
        }

        // MISE √Ä JOUR PROGRESS
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            updateScore();
        }

        // CALCUL SCORE
        function updateScore() {
            let correct = 0;
            
            questions.forEach(question => {
                if (userAnswers[question.id] !== undefined) {
                    if (question.type === 'text') {
                        // Pour les r√©ponses texte, on consid√®re qu'il y a une r√©ponse
                        if (userAnswers[question.id].length > 0) {
                            correct++;
                        }
                    } else {
                        if (userAnswers[question.id] === question.correct) {
                            correct++;
                        }
                    }
                }
            });
            
            score = correct;
            const percentage = Math.round((correct / questions.length) * 100);
            
            document.getElementById('correctAnswers').textContent = correct;
            document.getElementById('currentScore').textContent = percentage + '%';
        }

        // CALCUL SCORE FINAL
        function calculateFinalScore() {
            // Sauvegarder la derni√®re r√©ponse si texte
            const lastQuestion = questions[questions.length - 1];
            if (lastQuestion.type === 'text') {
                const textInput = document.getElementById(`text-${lastQuestion.id}`);
                userAnswers[lastQuestion.id] = textInput.value.trim();
            }
            
            updateScore();
            
            const percentage = Math.round((score / questions.length) * 100);
            
            // Afficher r√©sultats
            document.querySelector('.evaluation-section').style.display = 'none';
            document.getElementById('resultsSection').classList.add('show');
            document.getElementById('finalScore').textContent = percentage + '%';
            
            // Message selon le score
            let message, remediation;
            
            if (percentage >= 90) {
                message = "üèÜ EXCELLENT ! Ma√Ætrise parfaite du module !";
                remediation = "F√©licitations ! Vous ma√Ætrisez parfaitement les enjeux √©nerg√©tiques et environnementaux. Vous √™tes pr√™t(e) pour approfondir ces sujets.";
            } else if (percentage >= 75) {
                message = "üéâ TR√àS BIEN ! Tr√®s bonne compr√©hension !";
                remediation = "Tr√®s bonne ma√Ætrise globale. Quelques points √† r√©viser mais vous avez acquis l'essentiel des comp√©tences du module.";
            } else if (percentage >= 60) {
                message = "üëç BIEN ! Notions acquises, quelques r√©visions n√©cessaires.";
                remediation = "Bonnes bases acquises. R√©visez les s√©ances 2 et 3 sur les impacts environnementaux et les solutions √©co-citoyennes.";
            } else if (percentage >= 40) {
                message = "üìö √Ä AM√âLIORER. R√©visions importantes n√©cessaires.";
                remediation = "Il faut revoir l'ensemble du module. Concentrez-vous sur : les types d'√©nergies, leurs impacts, et les gestes √©co-citoyens. Relisez les documents.";
            } else {
                message = "üîÑ √Ä REPRENDRE. Module √† retravailler enti√®rement.";
                remediation = "Le module n√©cessite un travail complet. Reprenez chaque s√©ance m√©thodiquement, refaites les auto-√©valuations interm√©diaires avant ce test final.";
            }
            
            document.getElementById('scoreMessage').textContent = message;
            document.getElementById('remediationContent').textContent = remediation;
            
            // Animation du cercle de score
            animateScoreCircle(percentage);
        }

        // ANIMATION CERCLE SCORE
        function animateScoreCircle(percentage) {
            const circle = document.getElementById('scoreCircle');
            const degrees = (percentage / 100) * 360;
            
            setTimeout(() => {
                circle.style.background = `conic-gradient(var(--secondary) 0deg, var(--secondary) ${degrees}deg, var(--border) ${degrees}deg)`;
            }, 500);
        }

        // RECOMMENCER
        function restartEvaluation() {
            currentQuestionIndex = 0;
            userAnswers = {};
            score = 0;
            
            // Nettoyer toutes les questions
            questions.forEach(question => {
                const questionDiv = document.getElementById(`question-${question.id}`);
                const options = questionDiv.querySelectorAll('.option-item');
                options.forEach(opt => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                });
                
                const explanation = document.getElementById(`explanation-${question.id}`);
                explanation.classList.remove('show');
                
                if (question.type === 'text') {
                    document.getElementById(`text-${question.id}`).value = '';
                }
                
                questionDiv.style.display = question.id === 1 ? 'block' : 'none';
            });
            
            // Remettre les boutons
            document.getElementById('nextBtn').style.display = 'block';
            document.getElementById('finishBtn').style.display = 'none';
            document.getElementById('prevBtn').disabled = true;
            
            // Cacher r√©sultats, montrer √©valuation
            document.getElementById('resultsSection').classList.remove('show');
            document.querySelector('.evaluation-section').style.display = 'block';
            
            updateProgress();
        }
    </script>
</body>
</html>