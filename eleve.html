<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participer au Nuage de Mots</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }
        h1 { color: #333; margin-bottom: 1.5rem; font-size: 1.5rem; }
        input[type="text"] {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.2rem;
            box-sizing: border-box; 
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover { background-color: #0056b3; }
        #message { margin-top: 15px; color: green; font-weight: bold; min-height: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Un mot pour le tableau ?</h1>
    <input type="text" id="motInput" placeholder="Ã‰crivez votre mot ici..." autocomplete="off">
    <button id="btnEnvoyer">Envoyer au tableau</button>
    <div id="message"></div>
</div>

<script type="module">
  // Importation des fonctions via CDN (pour que Ã§a marche sans installation complexe)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // TES CLES FIREBASE (Celles que tu m'as donnÃ©es)
  const firebaseConfig = {
    apiKey: "AIzaSyAWdCMvOiAJln3eT9LIAQD3RWJUD0lQcLI",
    authDomain: "devoirs-pse.firebaseapp.com",
    projectId: "devoirs-pse",
    storageBucket: "devoirs-pse.firebasestorage.app",
    messagingSenderId: "614730413904",
    appId: "1:614730413904:web:a5dd478af5de30f6bede55",
    measurementId: "G-7R9N0JL6GG"
  };

  // Initialisation de Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Fonction pour envoyer le mot vers la collection "reponses_live"
  async function envoyerMot() {
      const input = document.getElementById('motInput');
      const messageDiv = document.getElementById('message');
      const mot = input.value.trim(); 

      if (mot === "") return; // Si vide, on ne fait rien

      // Petit effet visuel "En cours..."
      const originalText = document.getElementById('btnEnvoyer').innerText;
      document.getElementById('btnEnvoyer').innerText = "Envoi...";

      try {
          // On envoie Ã  Firebase
          await addDoc(collection(db, "reponses_live"), {
              texte: mot,
              date: serverTimestamp() 
          });

          // SuccÃ¨s
          messageDiv.innerText = "EnvoyÃ© ! ðŸ‘";
          messageDiv.style.color = "green";
          input.value = ""; 
          
          // On remet le bouton normal
          document.getElementById('btnEnvoyer').innerText = originalText;

          // On efface le message aprÃ¨s 2 sec
          setTimeout(() => { messageDiv.innerText = ""; }, 2000);

      } catch (e) {
          console.error("Erreur d'ajout: ", e);
          messageDiv.innerText = "Erreur de connexion.";
          messageDiv.style.color = "red";
          document.getElementById('btnEnvoyer').innerText = originalText;
      }
  }

  // Ã‰couteur sur le bouton
  document.getElementById('btnEnvoyer').addEventListener('click', envoyerMot);
</script>

</body>
</html>