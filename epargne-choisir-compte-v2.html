<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PSE D2 - Epargne : choisir un compte (avec documents)</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --accent2:#0f766e;
      --line:#e5e7eb;
      --ok:#16a34a;
      --bad:#dc2626;
      --warn:#b45309;
      --shadow:0 10px 25px rgba(0,0,0,.06);
      --radius:18px;
      --pad:18px;
      --max:1040px;
      --focus:0 0 0 3px rgba(15,118,110,.22);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --fontDys: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --fs: 16.5px;
      --lh: 1.45;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      font-size:var(--fs);
      line-height:var(--lh);
      color:var(--ink);
      background:linear-gradient(180deg, #fff, var(--bg));
    }
    body.dyslexie{font-family:var(--fontDys); letter-spacing:.35px; word-spacing:.1em}
    .wrap{max-width:var(--max); margin:0 auto; padding:22px 16px 36px}
    header{
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between;
      padding:18px; background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow);
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px; border-radius:999px; border:1px solid var(--line);
      color:var(--muted); background:#fff;
      font-size:13px; font-weight:950;
    }
    h1{margin:10px 0 4px; font-size:22px; line-height:1.2}
    .sub{color:var(--muted); margin:0}
    .h-right{display:flex; flex-direction:column; gap:10px; align-items:flex-end}
    .toggles{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      border:1px solid var(--line); background:#fff; color:var(--ink);
      padding:10px 12px; border-radius:12px; cursor:pointer;
      font-weight:950; font-size:14px;
      display:inline-flex; align-items:center; gap:8px;
      box-shadow:0 2px 8px rgba(0,0,0,.04);
      user-select:none;
    }
    .btn:hover{border-color:#d1d5db}
    .btn:focus{outline:none; box-shadow:var(--focus)}
    .btn.primary{background:linear-gradient(180deg, #0f766e, #0b5f58); color:#fff; border-color:#0b5f58}
    .pill{
      font-family:var(--mono);
      padding:6px 10px; border-radius:999px; border:1px solid var(--line);
      background:#fff; color:var(--muted); font-size:13px; font-weight:950;
    }
    .grid{display:grid; grid-template-columns:1fr; gap:14px; margin-top:14px}
    @media (min-width: 980px){ .grid{grid-template-columns: 1.15fr .85fr;} }
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:var(--pad);
      min-width:0;
    }
    .card h2{margin:0 0 10px; font-size:18px}
    .muted{color:var(--muted)}
    .note{
      border-left:5px solid var(--accent2);
      background:linear-gradient(180deg, rgba(15,118,110,.08), rgba(15,118,110,.03));
      padding:10px 12px; border-radius:14px;
    }
    .hr{height:1px; background:var(--line); margin:14px 0}

    .docBox{
      border:1px solid var(--line);
      border-radius:18px;
      overflow:hidden;
      background:#fff;
    }
    .docHead{
      padding:10px 12px;
      background:rgba(17,24,39,.03);
      border-bottom:1px solid var(--line);
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .docHead b{font-size:14px}
    .docHead .small{color:var(--muted); font-size:13px}
    .docImg{display:block; width:100%; height:auto}

    .q{
      margin-top:10px;
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px;
      background:linear-gradient(180deg, rgba(17,24,39,.02), rgba(17,24,39,.00));
    }
    .qhead{
      display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;
      margin-bottom:8px;
    }
    .qtitle{font-weight:950}
    .scoreTag{
      font-family:var(--mono);
      font-size:13px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      color:var(--muted);
      font-weight:950;
    }
    .rows{display:grid; gap:10px; margin-top:10px}
    .row{
      display:grid; grid-template-columns:1fr; gap:10px;
      padding:10px; border:1px solid var(--line); border-radius:16px; background:#fff;
    }
    @media (min-width: 780px){ .row{grid-template-columns: 1.2fr .8fr;} }
    select, input[type="text"], textarea{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      font-size:15px;
    }
    select:focus, input:focus, textarea:focus{outline:none; box-shadow:var(--focus)}
    textarea{min-height:92px; resize:vertical}
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; border:1px solid var(--line);
      background:#fff; font-weight:950; font-size:13px; color:var(--muted);
    }
    .ok{color:var(--ok); border-color:rgba(22,163,74,.3); background:rgba(22,163,74,.06)}
    .bad{color:var(--bad); border-color:rgba(220,38,38,.3); background:rgba(220,38,38,.06)}
    .warnTag{color:var(--warn); border-color:rgba(180,83,9,.3); background:rgba(180,83,9,.06)}
    .feedback{margin-top:10px}
    .fbLine{margin:6px 0; padding:8px 10px; border-radius:14px; border:1px solid var(--line); background:#fff}

    .progress{
      width:100%; height:12px; border-radius:999px;
      background:#eef2f7; overflow:hidden; border:1px solid var(--line);
    }
    .bar{height:100%; width:0%; background:linear-gradient(90deg, #0f766e, #7c2d12)}
    .footer{
      margin-top:14px;
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .small{font-size:13px; color:var(--muted)}
    .mono{font-family:var(--mono)}

    .person{
      display:flex; gap:12px; align-items:flex-start;
    }
    .avatar{
      width:74px; height:74px; border-radius:16px; border:1px solid var(--line);
      overflow:hidden; flex:0 0 auto; background:#fff;
    }
    .avatar img{width:100%; height:100%; object-fit:cover; display:block}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="h-left">
        <div class="badge">PSE THEMATIQUE D2 • CAP • Seance 2</div>
        <h1>L’epargne</h1>
        <p class="sub">
          Objectif : etre capable d’identifier le role de l’epargne de precaution et de choisir un compte epargne adapte a une situation.
        </p>
      </div>

      <div class="h-right">
        <div class="pill" id="saveState">Sauvegarde : active</div>
        <div class="toggles">
          <button class="btn" id="btnDys" type="button" aria-pressed="false">Mode lecture</button>
          <button class="btn" id="btnReset" type="button">Reinitialiser</button>
        </div>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>Cours express</h2>

        <div class="note">
          <b>Definition</b>
          L’epargne est de l’argent qui n’est pas depense immediatement, mais garde pour une utilisation future.
        </div>

        <div class="hr"></div>

        <div class="note">
          <b>Epargne de precaution</b>
          Epargne necessaire pour faire face a un imprévu (ex : panne de voiture, appareil menager, frais de sante).
        </div>

        <div class="hr"></div>

        <div class="note">
          <b>2 criteres pour choisir un compte epargne</b>
          <div class="small" style="margin-top:6px">
            1) Disponibilite de l’argent (disponible ou bloque)
            <br/>2) Rentabilite (taux d’interet)
          </div>
        </div>

        <div class="hr"></div>

        <div class="docBox">
          <div class="docHead">
            <b>Document D – Exemples de comptes epargne (1er fevrier 2025)</b>
            <span class="small">Les exercices ci-dessous s’appuient sur ce document</span>
          </div>
          <img class="docImg" src="doc-d-comptes-epargne-2025-02-01.jpg" alt="Document D comptes epargne" />
        </div>

        <div class="hr"></div>

        <div class="footer">
          <div style="min-width:220px; flex:1">
            <div class="small">Progression</div>
            <div class="progress" aria-label="progression">
              <div class="bar" id="bar"></div>
            </div>
          </div>
          <div class="pill mono" id="globalScore">Score : 0 / 18</div>
        </div>

        <div class="small" style="margin-top:10px">
          Note finale sur 20 : score auto /18 + points C6 (0 a 2) ajoutes par l’enseignant.
        </div>
      </section>

      <section class="card" id="devoir">
        <h2>Devoir en autonomie</h2>
        <p class="muted" style="margin-top:-2px">Bareme : 18 points auto + 2 points C6 (enseignant).</p>

        <div class="q" id="q1">
          <div class="qhead">
            <div class="qtitle">Exercice 1 – Identifier le role de l’epargne de precaution</div>
            <div class="scoreTag">C3 • 3 pts</div>
          </div>

          <label class="small" for="q1txt">Ecrire une phrase qui explique a quoi sert l’epargne de precaution.</label>
          <textarea id="q1txt" placeholder="Ex : Elle sert a..."></textarea>

          <div class="actions">
            <button class="btn" type="button" id="btnHelp1">Verifier (aide)</button>
            <span class="tag warnTag" id="q1tag">A faire</span>
          </div>
          <div class="feedback" id="q1fb"></div>
        </div>

        <div class="q" id="q2">
          <div class="qhead">
            <div class="qtitle">Exercice 2 – Indiquer 2 criteres</div>
            <div class="scoreTag">C3 • 3 pts</div>
          </div>

          <div class="rows">
            <div class="row">
              <div><b>Critere 1</b></div>
              <div><input id="q2c1" type="text" placeholder="ex : disponibilite de l’argent" /></div>
            </div>
            <div class="row">
              <div><b>Critere 2</b></div>
              <div><input id="q2c2" type="text" placeholder="ex : rentabilite (taux d’interet)" /></div>
            </div>
          </div>

          <div class="actions">
            <button class="btn" type="button" data-correct="q2">Corriger</button>
            <span class="tag warnTag" id="q2tag">A faire</span>
          </div>
          <div class="feedback" id="q2fb"></div>
        </div>

        <div class="q" id="q3">
          <div class="qhead">
            <div class="qtitle">Exercice 3 – Choisir le compte le plus adapte et argumenter</div>
            <div class="scoreTag">C5 • 9 pts</div>
          </div>

          <div class="rows" id="q3rows"></div>

          <div class="actions">
            <button class="btn" type="button" data-correct="q3">Corriger</button>
            <span class="tag warnTag" id="q3tag">A faire</span>
          </div>
          <div class="feedback" id="q3fb"></div>
        </div>

        <div class="hr"></div>

        <div class="actions">
          <button class="btn primary" type="button" id="btnFinal">Calculer le score auto</button>
          <button class="btn" type="button" id="btnExport">Exporter la copie</button>
        </div>

        <div class="feedback" id="finalFb"></div>
      </section>
    </div>
  </div>

  <script>
    const STORE_KEY = "pse_d2_epargne_doc_v2";

    const state = {
      dys:false,
      q1:{text:""},
      q2:{c1:"", c2:""},
      q3:{}
    };

    const COMPTES = [
      {v:"la", t:"Livret A"},
      {v:"lj", t:"Livret jeune"},
      {v:"pel", t:"PEL"},
      {v:"lep", t:"LEP"}
    ];

    // 3 situations + photos (Bastien et Alba + une situation bonus)
    const ex3 = [
      {
        id:"s1",
        name:"Bastien",
        age:16,
        img:"bastien.jpg",
        text:"Lyceen professionnel. Il souhaite commencer a epargner les allocations qu’il percoit lors de ses PFMP. Il veut pouvoir retirer son argent quand il le souhaite.",
        answer:"lj",
        must:["12 a 25 ans", "argent disponible"]
      },
      {
        id:"s2",
        name:"Alba",
        age:18,
        img:"alba.jpg",
        text:"Apprentie. Elle gagne 10 692 euros par an et veut epargner pour acheter une voiture dans un an. Elle cherche un bon taux et une disponibilite a tout moment si besoin.",
        answer:"lep",
        must:["condition de revenus", "taux interessant", "disponible"]
      },
      {
        id:"s3",
        name:"Situation bonus",
        age:null,
        img:null,
        text:"Une personne accepte de bloquer son argent car elle prepare un projet immobilier et veut acceder a un pret avantageux.",
        answer:"pel",
        must:["argent bloque", "projet logement"]
      }
    ];

    function $(sel, root=document){ return root.querySelector(sel); }
    function $all(sel, root=document){ return [...root.querySelectorAll(sel)]; }

    function save(){
      localStorage.setItem(STORE_KEY, JSON.stringify(state));
      $("#saveState").textContent = "Sauvegarde : active";
    }

    function load(){
      const raw = localStorage.getItem(STORE_KEY);
      if(!raw) return;
      try{
        const payload = JSON.parse(raw);
        if(payload && typeof payload === "object"){
          Object.assign(state, payload);
          state.q1 = payload.q1 || state.q1;
          state.q2 = payload.q2 || state.q2;
          state.q3 = payload.q3 || state.q3;
        }
      }catch(e){}
    }

    function setDys(on){
      state.dys = on;
      document.body.classList.toggle("dyslexie", on);
      const btn = $("#btnDys");
      btn.setAttribute("aria-pressed", on ? "true" : "false");
      btn.textContent = on ? "Mode lecture : active" : "Mode lecture";
      save();
    }

    function resetAll(){
      localStorage.removeItem(STORE_KEY);
      location.reload();
    }

    function tag(el, kind, text){
      el.className = "tag " + (kind || "");
      el.textContent = text;
    }

    function mkLine(host, text, ok, warn){
      const line = document.createElement("div");
      line.className = "fbLine";
      line.textContent = text;
      if(ok){
        line.style.borderColor = "rgba(22,163,74,.28)";
        line.style.background = "rgba(22,163,74,.06)";
      }else if(warn){
        line.style.borderColor = "rgba(180,83,9,.28)";
        line.style.background = "rgba(180,83,9,.06)";
      }else{
        line.style.borderColor = "rgba(220,38,38,.28)";
        line.style.background = "rgba(220,38,38,.06)";
      }
      host.appendChild(line);
    }

    function buildQ3(){
      const host = $("#q3rows");
      host.innerHTML = "";
      ex3.forEach(s=>{
        const row = document.createElement("div");
        row.className = "row";
        const left = document.createElement("div");
        left.innerHTML = `
          <div class="person">
            ${s.img ? `
              <div class="avatar"><img src="${s.img}" alt="${s.name}"></div>
            ` : `
              <div class="avatar" aria-hidden="true"></div>
            `}
            <div>
              <b>${s.name}${s.age ? ", " + s.age + " ans" : ""}</b>
              <div class="small muted" style="margin-top:6px">${s.text}</div>
              <div class="small muted" style="margin-top:6px">Indice : ${s.must.join(" • ")}</div>
            </div>
          </div>
        `;
        const right = document.createElement("div");
        right.innerHTML = `
          <label class="small" for="q3_${s.id}_sel">Choisir le compte</label>
          <select id="q3_${s.id}_sel">
            <option value="">Selectionner</option>
            ${COMPTES.map(c=>`<option value="${c.v}">${c.t}</option>`).join("")}
          </select>
          <label class="small" for="q3_${s.id}_arg" style="margin-top:8px; display:block">Argumenter (1 phrase)</label>
          <input id="q3_${s.id}_arg" type="text" placeholder="ex : age / condition / taux / disponibilite..." />
        `;
        row.appendChild(left);
        row.appendChild(right);
        host.appendChild(row);
      });
    }

    function bind(){
      $("#q1txt").addEventListener("input", ()=>{
        state.q1.text = $("#q1txt").value;
        save();
      });

      $("#q2c1").addEventListener("input", ()=>{
        state.q2.c1 = $("#q2c1").value;
        save();
      });
      $("#q2c2").addEventListener("input", ()=>{
        state.q2.c2 = $("#q2c2").value;
        save();
      });

      ex3.forEach(s=>{
        const sel = $(`#q3_${s.id}_sel`);
        const arg = $(`#q3_${s.id}_arg`);
        function sync(){
          state.q3[s.id] = state.q3[s.id] || {};
          state.q3[s.id].sel = sel.value;
          state.q3[s.id].arg = arg.value;
          save();
        }
        sel.addEventListener("change", sync);
        arg.addEventListener("input", sync);
      });

      $("#btnHelp1").addEventListener("click", helpQ1);
    }

    function applyLoaded(){
      setDys(!!state.dys);

      $("#q1txt").value = state.q1.text || "";
      $("#q2c1").value = state.q2.c1 || "";
      $("#q2c2").value = state.q2.c2 || "";

      ex3.forEach(s=>{
        const o = state.q3[s.id] || {};
        $(`#q3_${s.id}_sel`).value = o.sel || "";
        $(`#q3_${s.id}_arg`).value = o.arg || "";
      });
    }

    function helpQ1(){
      const t = ($("#q1txt").value || "").trim();
      const fb = $("#q1fb");
      fb.innerHTML = "";

      const hasImprevu = /(imprevu|coup dur|panne|sante|reparation)/i.test(t);
      const hasReserve = /(reserve|mettre de cote|epargne)/i.test(t);
      const lenOk = t.length >= 80;

      mkLine(fb, lenOk ? "Longueur : suffisante" : "Longueur : ecrire une phrase plus complete", lenOk, !lenOk && t.length>0);
      mkLine(fb, hasImprevu ? "Imprevu : present" : "Imprevu : ajouter un exemple (panne, sante...)", hasImprevu, !hasImprevu && t.length>0);
      mkLine(fb, hasReserve ? "Idee de reserve : presente" : "Reserve : ecrire mettre de cote / reserve", hasReserve, !hasReserve && t.length>0);

      const p1 = Math.round(([lenOk,hasImprevu,hasReserve].filter(Boolean).length/3)*3);
      tag($("#q1tag"), p1===3 ? "ok" : (p1>=2 ? "warnTag" : "bad"), `Score : ${p1} / 3`);
      computeProgress();
      updateGlobalScore();
      return p1;
    }

    function correctQ2(){
      const fb = $("#q2fb");
      fb.innerHTML = "";

      const c1 = ($("#q2c1").value || "").toLowerCase();
      const c2 = ($("#q2c2").value || "").toLowerCase();

      const hasDisp = (s)=> /(disponibil|retir|tout moment|bloqu)/i.test(s);
      const hasRent = (s)=> /(taux|interet|rentab|rapport)/i.test(s);

      let good = 0;
      if(hasDisp(c1) || hasDisp(c2)) good++;
      if(hasRent(c1) || hasRent(c2)) good++;

      mkLine(fb, good>=1 ? "Disponibilite : reperee" : "Disponibilite : a indiquer (argent disponible ou bloque)", good>=1, good===0 && (c1||c2));
      mkLine(fb, good===2 ? "Rentabilite : reperee" : "Rentabilite : a indiquer (taux d’interet)", good===2, good===1 && (c1||c2));

      const pts = Math.round((good/2)*3);
      tag($("#q2tag"), pts===3 ? "ok" : (pts>=2 ? "warnTag" : "bad"), `Score : ${pts} / 3`);
      return pts;
    }

    function correctQ3(){
      const fb = $("#q3fb");
      fb.innerHTML = "";

      let checks = 0;
      let got = 0;

      ex3.forEach(s=>{
        const o = state.q3[s.id] || {};
        const selOk = (o.sel || "") === s.answer;
        const argOk = ((o.arg || "").trim().length >= 15);
        checks += 2;
        got += (selOk ? 1 : 0) + (argOk ? 1 : 0);

        const line = document.createElement("div");
        line.className = "fbLine";
        const okAll = selOk && argOk;
        line.textContent = okAll ? "Correct" : (selOk ? "Choix OK, argument a completer" : "A revoir");
        line.style.borderColor = okAll ? "rgba(22,163,74,.28)" : (selOk ? "rgba(180,83,9,.28)" : "rgba(220,38,38,.28)");
        line.style.background = okAll ? "rgba(22,163,74,.06)" : (selOk ? "rgba(180,83,9,.06)" : "rgba(220,38,38,.06)");
        fb.appendChild(line);

        if(!selOk){
          mkLine(fb, "Indice : " + s.must.join(" • "), false, true);
        }
      });

      const pts = Math.round((got / checks) * 9);
      tag($("#q3tag"), pts===9 ? "ok" : (pts>=6 ? "warnTag" : "bad"), `Score : ${pts} / 9`);
      return pts;
    }

    function computeProgress(){
      const q1Done = ($("#q1txt").value || "").trim().length > 0;
      const q2Done = ($("#q2c1").value || "").trim().length > 0 && ($("#q2c2").value || "").trim().length > 0;
      const q3Done = ex3.every(s=>{
        const o = state.q3[s.id] || {};
        return (o.sel||"") && ((o.arg||"").trim().length>0);
      });
      const done = [q1Done,q2Done,q3Done].filter(Boolean).length;
      const pct = Math.round((done/3)*100);
      $("#bar").style.width = pct + "%";
    }

    function updateGlobalScore(){
      // q1 score from current text
      const t = ($("#q1txt").value || "").trim();
      const hasImprevu = /(imprevu|coup dur|panne|sante|reparation)/i.test(t);
      const hasReserve = /(reserve|mettre de cote|epargne)/i.test(t);
      const lenOk = t.length >= 80;
      const p1 = Math.round(([lenOk,hasImprevu,hasReserve].filter(Boolean).length/3)*3);

      const p2 = correctQ2();
      const p3 = correctQ3();
      const total = p1+p2+p3; // /18

      $("#globalScore").textContent = `Score : ${total} / 18`;
      return total;
    }

    function finalScore(){
      const total = updateGlobalScore();
      computeProgress();

      const fb = $("#finalFb");
      fb.innerHTML = "";
      const line = document.createElement("div");
      line.className = "fbLine";
      line.style.borderColor = "rgba(15,118,110,.28)";
      line.style.background = "rgba(15,118,110,.06)";
      line.innerHTML = `<b>Score auto</b> : <span class="mono">${total} / 18</span> • Note finale : <span class="mono">${total} / 18</span> + points C6 (0 a 2) par l’enseignant`;
      fb.appendChild(line);
    }

    function exportCopy(){
      const total = updateGlobalScore();

      const lines = [];
      lines.push("PSE D2 - L’epargne (Document D)");
      lines.push("Nom : ____________________   Prenom : ____________________   Classe : __________");
      lines.push("");

      lines.push("Exercice 1 - Role de l’epargne de precaution");
      lines.push($("#q1txt").value || "");
      lines.push("");

      lines.push("Exercice 2 - 2 criteres");
      lines.push("- Critere 1 : " + ($("#q2c1").value || ""));
      lines.push("- Critere 2 : " + ($("#q2c2").value || ""));
      lines.push("");

      lines.push("Exercice 3 - Choisir et argumenter");
      ex3.forEach(s=>{
        const o = state.q3[s.id] || {};
        lines.push(`- ${s.name}${s.age ? " ("+s.age+" ans)" : ""} -> ${o.sel||""} ; Argument : ${o.arg||""}`);
      });
      lines.push("");
      lines.push(`Total auto : ${total}/18`);
      lines.push("Points C6 : +0 a +2 (enseignant)");
      lines.push("Fin");

      const blob = new Blob([lines.join("\n")], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "copie_pse_epargne_documentD.txt";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    function bindCorrectors(){
      $all("[data-correct]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.dataset.correct;
          if(id==="q2") correctQ2();
          if(id==="q3") correctQ3();
          helpQ1();
          updateGlobalScore();
          computeProgress();
        });
      });
    }

    function init(){
      load();
      buildQ3();
      bind();
      applyLoaded();
      bindCorrectors();

      $("#btnDys").addEventListener("click", ()=> setDys(!state.dys));
      $("#btnReset").addEventListener("click", resetAll);

      $("#btnFinal").addEventListener("click", finalScore);
      $("#btnExport").addEventListener("click", exportCopy);

      window.addEventListener("click", computeProgress);
      window.addEventListener("keyup", computeProgress);

      computeProgress();
      updateGlobalScore();
    }

    init();
  </script>
</body>
</html>
