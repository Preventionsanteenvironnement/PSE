<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C3 ‚Äì Jeu de Tri des Pictogrammes</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --obligation: #0ea5e9;
            --interdiction: #dc2626;
            --avertissement: #eab308;
            --incendie: #b91c1c;
            --secours: #16a34a;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        .source-banner {
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .source-banner a { color: rgba(255,255,255,0.9); font-size: 11px; text-decoration: none; }
        
        .header {
            background: white;
            border-radius: 20px;
            padding: 20px 25px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .header-left h1 { font-size: 22px; color: var(--dark); }
        .header-left p { font-size: 12px; color: #64748b; }
        
        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .stat-box {
            padding: 10px 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 80px;
        }
        
        .stat-box.score { background: linear-gradient(135deg, #fef3c7, #fde68a); }
        .stat-box.remaining { background: linear-gradient(135deg, #dbeafe, #bfdbfe); }
        .stat-box.timer { background: linear-gradient(135deg, #fee2e2, #fecaca); }
        
        .stat-box .value { font-size: 24px; font-weight: 800; }
        .stat-box .label { font-size: 10px; color: #64748b; }
        
        .game-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }
        
        .drop-zones {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .drop-zone {
            background: rgba(255,255,255,0.1);
            border: 3px dashed rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 15px 10px;
            min-height: 400px;
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            border-color: white;
            background: rgba(255,255,255,0.2);
            transform: scale(1.02);
        }
        
        .drop-zone-header {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            color: white;
        }
        
        .drop-zone.obligation .drop-zone-header { background: var(--obligation); }
        .drop-zone.interdiction .drop-zone-header { background: var(--interdiction); }
        .drop-zone.avertissement .drop-zone-header { background: var(--avertissement); color: #78350f; }
        .drop-zone.incendie .drop-zone-header { background: var(--incendie); }
        .drop-zone.secours .drop-zone-header { background: var(--secours); }
        
        .drop-zone-header .icon { font-size: 24px; display: block; margin-bottom: 5px; }
        .drop-zone-header .name { font-size: 11px; font-weight: 700; }
        
        .drop-zone-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-height: 300px;
        }
        
        .picto-source {
            background: white;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }
        
        .picto-source h3 {
            font-size: 14px;
            color: var(--dark);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .picto-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 10px;
            cursor: grab;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .picto-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .picto-card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }
        
        .picto-card img {
            width: 45px;
            height: 45px;
            object-fit: contain;
        }
        
        .picto-card .name {
            font-size: 11px;
            font-weight: 600;
            color: var(--dark);
            flex: 1;
        }
        
        .picto-card.correct {
            background: #dcfce7;
            border-color: var(--success);
        }
        
        .picto-card.wrong {
            background: #fee2e2;
            border-color: var(--danger);
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .picto-mini {
            background: rgba(255,255,255,0.9);
            border-radius: 8px;
            padding: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .picto-mini img {
            width: 35px;
            height: 35px;
            object-fit: contain;
        }
        
        .picto-mini .name {
            font-size: 9px;
            font-weight: 600;
            color: var(--dark);
        }
        
        /* √âcrans de jeu */
        .game-screen {
            display: none;
        }
        
        .game-screen.active {
            display: block;
        }
        
        .intro-screen, .results-screen {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            margin: 50px auto;
        }
        
        .intro-screen h2, .results-screen h2 {
            font-size: 28px;
            margin-bottom: 15px;
        }
        
        .intro-screen p, .results-screen p {
            color: #64748b;
            margin-bottom: 25px;
        }
        
        .intro-screen .rules {
            background: #f8fafc;
            border-radius: 15px;
            padding: 20px;
            text-align: left;
            margin-bottom: 25px;
        }
        
        .intro-screen .rules h4 {
            font-size: 14px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .intro-screen .rules li {
            font-size: 13px;
            color: #475569;
            margin-bottom: 8px;
            margin-left: 20px;
        }
        
        .btn-start {
            padding: 15px 50px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--primary), #8b5cf6);
            color: white;
            font-family: inherit;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }
        
        .results-screen .trophy { font-size: 80px; margin-bottom: 20px; }
        
        .results-screen .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }
        
        .results-screen .stat {
            text-align: center;
        }
        
        .results-screen .stat .val {
            font-size: 36px;
            font-weight: 800;
            color: var(--primary);
        }
        
        .results-screen .stat .lbl {
            font-size: 12px;
            color: #64748b;
        }
        
        .objectif-box {
            background: linear-gradient(135deg, #e0e7ff, #ede9fe);
            border-left: 4px solid var(--primary);
            padding: 12px 18px;
            border-radius: 0 10px 10px 0;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .objectif-box strong { color: var(--primary); font-size: 11px; }
        .objectif-box p { font-size: 13px; margin-top: 5px; }
        
        @media (max-width: 1000px) {
            .game-area { grid-template-columns: 1fr; }
            .drop-zones { grid-template-columns: repeat(3, 1fr); }
            .picto-source { max-height: none; }
        }
        
        @media (max-width: 600px) {
            .drop-zones { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <div class="source-banner">
            <a href="https://www.inrs.fr" target="_blank">üìö Source : INRS ‚Äì Institut National de Recherche et de S√©curit√© ‚Äì www.inrs.fr</a>
        </div>
        
        <!-- √âcran intro -->
        <div class="game-screen active" id="intro-screen">
            <div class="intro-screen">
                <h2>üß© Jeu de Tri des Pictogrammes</h2>
                <p>Glisse chaque pictogramme vers sa cat√©gorie !</p>
                
                <div class="objectif-box">
                    <strong>üéØ OBJECTIF</strong>
                    <p>√ätre capable de <strong>classer</strong> les pictogrammes de s√©curit√© selon leur cat√©gorie (forme et couleur).</p>
                </div>
                
                <div class="rules">
                    <h4>üìã R√®gles du jeu</h4>
                    <ul>
                        <li>Glisse chaque pictogramme vers la bonne zone color√©e</li>
                        <li>üîµ <strong>Bleu = Obligation</strong> (ce qu'il FAUT faire)</li>
                        <li>üî¥ <strong>Rouge barr√© = Interdiction</strong> (ce qu'il NE FAUT PAS faire)</li>
                        <li>‚ö†Ô∏è <strong>Jaune triangle = Avertissement/Danger</strong></li>
                        <li>üßØ <strong>Rouge carr√© = Incendie</strong></li>
                        <li>üü¢ <strong>Vert = Secours/√âvacuation</strong></li>
                        <li>+10 points par bonne r√©ponse, -5 par erreur</li>
                    </ul>
                </div>
                
                <button class="btn-start" onclick="startGame()">Commencer ! üöÄ</button>
            </div>
        </div>
        
        <!-- √âcran de jeu -->
        <div class="game-screen" id="game-screen">
            <div class="header">
                <div class="header-left">
                    <h1>üß© Tri des Pictogrammes</h1>
                    <p>Module C3 ‚Äì Glisse chaque pictogramme vers sa cat√©gorie</p>
                </div>
                <div class="header-right">
                    <div class="stat-box score">
                        <div class="value" id="score">0</div>
                        <div class="label">Points</div>
                    </div>
                    <div class="stat-box remaining">
                        <div class="value" id="remaining">15</div>
                        <div class="label">Restants</div>
                    </div>
                    <div class="stat-box timer">
                        <div class="value" id="timer">0:00</div>
                        <div class="label">Temps</div>
                    </div>
                </div>
            </div>
            
            <div class="game-area">
                <div class="drop-zones">
                    <div class="drop-zone obligation" data-category="obligation" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        <div class="drop-zone-header">
                            <span class="icon">üîµ</span>
                            <span class="name">OBLIGATION</span>
                        </div>
                        <div class="drop-zone-content" id="zone-obligation"></div>
                    </div>
                    
                    <div class="drop-zone interdiction" data-category="interdiction" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        <div class="drop-zone-header">
                            <span class="icon">üî¥</span>
                            <span class="name">INTERDICTION</span>
                        </div>
                        <div class="drop-zone-content" id="zone-interdiction"></div>
                    </div>
                    
                    <div class="drop-zone avertissement" data-category="avertissement" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        <div class="drop-zone-header">
                            <span class="icon">‚ö†Ô∏è</span>
                            <span class="name">AVERTISSEMENT</span>
                        </div>
                        <div class="drop-zone-content" id="zone-avertissement"></div>
                    </div>
                    
                    <div class="drop-zone incendie" data-category="incendie" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        <div class="drop-zone-header">
                            <span class="icon">üßØ</span>
                            <span class="name">INCENDIE</span>
                        </div>
                        <div class="drop-zone-content" id="zone-incendie"></div>
                    </div>
                    
                    <div class="drop-zone secours" data-category="secours" ondragover="allowDrop(event)" ondrop="drop(event)" ondragleave="dragLeave(event)">
                        <div class="drop-zone-header">
                            <span class="icon">üü¢</span>
                            <span class="name">SECOURS</span>
                        </div>
                        <div class="drop-zone-content" id="zone-secours"></div>
                    </div>
                </div>
                
                <div class="picto-source">
                    <h3>üì¶ Pictogrammes √† trier</h3>
                    <div id="source-container"></div>
                </div>
            </div>
        </div>
        
        <!-- √âcran r√©sultats -->
        <div class="game-screen" id="results-screen">
            <div class="results-screen">
                <div class="trophy" id="result-trophy">üèÜ</div>
                <h2 id="result-title">Bravo !</h2>
                <p id="result-message">Tu as termin√© le tri !</p>
                
                <div class="stats">
                    <div class="stat">
                        <div class="val" id="final-score">0</div>
                        <div class="lbl">Points</div>
                    </div>
                    <div class="stat">
                        <div class="val" id="final-correct">0</div>
                        <div class="lbl">Corrects</div>
                    </div>
                    <div class="stat">
                        <div class="val" id="final-time">0:00</div>
                        <div class="lbl">Temps</div>
                    </div>
                </div>
                
                <button class="btn-start" onclick="restartGame()">üîÑ Rejouer</button>
            </div>
        </div>
        
    </div>
    
    <script>
        const pictograms = [
            // Obligation (5)
            { id: 1, name: "Port des gants", image: "pictogrammes/images/OBLIGATION-gants.jpg", category: "obligation" },
            { id: 2, name: "Port du casque", image: "pictogrammes/images/OBLIGATION-casque.jpg", category: "obligation" },
            { id: 3, name: "Chaussures de s√©curit√©", image: "pictogrammes/images/OBLIGATION-chaussures.jpg", category: "obligation" },
            { id: 4, name: "Lunettes de protection", image: "pictogrammes/images/OBLIGATION-lunettes.jpg", category: "obligation" },
            { id: 5, name: "Protection auditive", image: "pictogrammes/images/OBLIGATION-casque-antibruit.jpg", category: "obligation" },
            
            // Interdiction (4)
            { id: 6, name: "Interdiction de fumer", image: "pictogrammes/images/INTERDIT-fumer.jpg", category: "interdiction" },
            { id: 7, name: "Flamme interdite", image: "pictogrammes/images/INTERDIT-flamme.jpg", category: "interdiction" },
            { id: 8, name: "Acc√®s interdit", image: "pictogrammes/images/INTERDIT-entrer.jpg", category: "interdiction" },
            { id: 9, name: "Interdit de toucher", image: "pictogrammes/images/INTERDIT-toucher.jpg", category: "interdiction" },
            
            // Avertissement (3)
            { id: 10, name: "Danger √©lectrique", image: "pictogrammes/images/DANGER-electricite.jpg", category: "avertissement" },
            { id: 11, name: "Danger de chute", image: "pictogrammes/images/DANGER-chute.jpg", category: "avertissement" },
            { id: 12, name: "Produit toxique", image: "pictogrammes/images/DANGER-produit-toxique.jpg", category: "avertissement" },
            
            // Incendie (2)
            { id: 13, name: "Extincteur", image: "pictogrammes/images/INCENDIE-extincteur.jpg", category: "incendie" },
            { id: 14, name: "Alarme incendie", image: "pictogrammes/images/INCENDIE-alarme.jpg", category: "incendie" },
            
            // Secours (2)
            { id: 15, name: "Sortie de secours", image: "pictogrammes/images/SECOURS-sortie-vers-droite.jpg", category: "secours" },
            { id: 16, name: "Point rassemblement", image: "pictogrammes/images/SECOURS-point-rassemblement.jpg", category: "secours" }
        ];
        
        let score = 0;
        let correctCount = 0;
        let remaining = 0;
        let timerInterval = null;
        let seconds = 0;
        let draggedElement = null;
        
        function startGame() {
            document.getElementById('intro-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            
            score = 0;
            correctCount = 0;
            seconds = 0;
            
            // Shuffle and display pictograms
            const shuffled = [...pictograms].sort(() => Math.random() - 0.5);
            remaining = shuffled.length;
            
            const container = document.getElementById('source-container');
            container.innerHTML = '';
            
            shuffled.forEach(p => {
                const card = document.createElement('div');
                card.className = 'picto-card';
                card.draggable = true;
                card.id = 'picto-' + p.id;
                card.dataset.category = p.category;
                card.dataset.name = p.name;
                card.innerHTML = `
                    <img src="${p.image}" alt="${p.name}">
                    <span class="name">${p.name}</span>
                `;
                
                card.addEventListener('dragstart', dragStart);
                card.addEventListener('dragend', dragEnd);
                
                container.appendChild(card);
            });
            
            updateDisplay();
            
            // Clear drop zones
            ['obligation', 'interdiction', 'avertissement', 'incendie', 'secours'].forEach(cat => {
                document.getElementById('zone-' + cat).innerHTML = '';
            });
            
            // Start timer
            timerInterval = setInterval(() => {
                seconds++;
                document.getElementById('timer').textContent = formatTime(seconds);
            }, 1000);
        }
        
        function formatTime(s) {
            const min = Math.floor(s / 60);
            const sec = s % 60;
            return min + ':' + (sec < 10 ? '0' : '') + sec;
        }
        
        function dragStart(e) {
            draggedElement = e.target.closest('.picto-card');
            draggedElement.classList.add('dragging');
            e.dataTransfer.setData('text/plain', draggedElement.id);
        }
        
        function dragEnd(e) {
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
            }
            document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('drag-over'));
        }
        
        function allowDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }
        
        function dragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }
        
        function drop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            
            const cardId = e.dataTransfer.getData('text/plain');
            const card = document.getElementById(cardId);
            const zoneCategory = e.currentTarget.dataset.category;
            const cardCategory = card.dataset.category;
            
            if (cardCategory === zoneCategory) {
                // Correct!
                score += 10;
                correctCount++;
                
                // Move to zone
                const mini = document.createElement('div');
                mini.className = 'picto-mini';
                mini.innerHTML = `
                    <img src="${card.querySelector('img').src}" alt="">
                    <span class="name">${card.dataset.name}</span>
                `;
                document.getElementById('zone-' + zoneCategory).appendChild(mini);
                
                card.remove();
                remaining--;
            } else {
                // Wrong
                score = Math.max(0, score - 5);
                card.classList.add('wrong');
                setTimeout(() => card.classList.remove('wrong'), 500);
            }
            
            updateDisplay();
            
            if (remaining === 0) {
                endGame();
            }
        }
        
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('remaining').textContent = remaining;
        }
        
        function endGame() {
            clearInterval(timerInterval);
            
            setTimeout(() => {
                document.getElementById('game-screen').classList.remove('active');
                document.getElementById('results-screen').classList.add('active');
                
                document.getElementById('final-score').textContent = score;
                document.getElementById('final-correct').textContent = correctCount + '/' + pictograms.length;
                document.getElementById('final-time').textContent = formatTime(seconds);
                
                const pct = (correctCount / pictograms.length) * 100;
                
                if (pct === 100) {
                    document.getElementById('result-trophy').textContent = 'üèÜ';
                    document.getElementById('result-title').textContent = 'Parfait !';
                    document.getElementById('result-message').textContent = 'Tu ma√Ætrises le classement des pictogrammes !';
                } else if (pct >= 75) {
                    document.getElementById('result-trophy').textContent = 'üåü';
                    document.getElementById('result-title').textContent = 'Excellent !';
                    document.getElementById('result-message').textContent = 'Tr√®s bon travail de classification !';
                } else {
                    document.getElementById('result-trophy').textContent = 'üí™';
                    document.getElementById('result-title').textContent = 'Continue !';
                    document.getElementById('result-message').textContent = 'R√©vise les formes et couleurs des cat√©gories.';
                }
            }, 500);
        }
        
        function restartGame() {
            document.getElementById('results-screen').classList.remove('active');
            document.getElementById('intro-screen').classList.add('active');
        }
    </script>
    
</body>
</html>
