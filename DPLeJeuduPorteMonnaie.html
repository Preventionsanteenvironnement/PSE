<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jeu : Je peux acheter ?</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      background-color:#e0f2f1;
      margin:0;
      padding:20px;
      display:flex;
      flex-direction:column;
      align-items:center;
      overflow-x:hidden;
    }

    h1{color:#00695c;text-align:center;margin:10px 0 0 0}

    .topbar{
      width:100%;
      max-width:900px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    .topbar button{
      border:none;
      padding:10px 16px;
      border-radius:20px;
      font-size:1rem;
      cursor:pointer;
      color:#fff;
      user-select:none;
      box-shadow:0 4px 0 rgba(0,0,0,.2);
    }
    .topbar button:active{transform:translateY(4px);box-shadow:none}

    .audio-btn{background:#e91e63}
    .sound-btn{background:#2c3e50}
    .reset-btn{background:#607d8b}

    .game-scene{
      display:flex;
      justify-content:center;
      align-items:stretch;
      gap:30px;
      margin-top:25px;
      width:100%;
      max-width:900px;
      flex-wrap:wrap;
    }

    .wallet-card,.item-card{
      background:#fff;
      border-radius:20px;
      padding:26px;
      text-align:center;
      width:260px;
      box-shadow:0 10px 0 rgba(0,0,0,.1);
    }

    .wallet-card{border:5px solid #00897b}
    .item-card{border:5px solid #ff9800}

    .big-icon{font-size:5rem;display:block;margin-bottom:10px}
    .big-price{font-size:3rem;font-weight:800;color:#333}
    .label{font-size:1.1rem;text-transform:uppercase;color:#777;margin-bottom:10px;display:block}

    .buttons-area{
      margin-top:35px;
      display:flex;
      gap:18px;
      flex-wrap:wrap;
      justify-content:center;
    }

    .btn-choice{
      padding:18px 34px;
      font-size:2rem;
      border:none;
      border-radius:15px;
      cursor:pointer;
      transition:transform .1s;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-width:200px;
      box-shadow:0 8px 0 rgba(0,0,0,.2);
      color:#fff;
      user-select:none;
      touch-action:manipulation;
    }
    .btn-yes{background-color:#4caf50}
    .btn-no{background-color:#f44336}
    .btn-choice:active{transform:translateY(8px);box-shadow:none}
    .btn-choice span{font-size:1.1rem;margin-top:6px}

    #feedback{
      margin-top:22px;
      font-size:1.8rem;
      font-weight:800;
      min-height:56px;
      text-align:center;
      padding:0 10px;
    }

    #next-btn{
      margin-top:10px;
      padding:14px 26px;
      font-size:1.4rem;
      background:#2196f3;
      color:#fff;
      border:none;
      border-radius:50px;
      cursor:pointer;
      display:none;
      box-shadow:0 6px 0 rgba(0,0,0,.2);
      user-select:none;
    }
    #next-btn:active{transform:translateY(6px);box-shadow:none}

    .end-screen{
      display:none;
      width:100%;
      max-width:900px;
      margin-top:35px;
      background:#fff;
      border-radius:18px;
      padding:26px;
      text-align:center;
      box-shadow:0 10px 20px rgba(0,0,0,.12);
      border-left:10px solid #00695c;
    }
    .end-screen h2{margin:0 0 10px 0;color:#2e7d32;font-size:2.4rem}
    .end-screen p{font-size:1.5rem;margin:8px 0 18px 0}
    .end-screen button{
      padding:16px 22px;
      font-size:1.2rem;
      background:#2196f3;
      color:#fff;
      border:none;
      border-radius:12px;
      cursor:pointer;
      box-shadow:0 6px 0 rgba(0,0,0,.2);
    }
    .end-screen button:active{transform:translateY(6px);box-shadow:none}

    @media(max-width:520px){
      .wallet-card,.item-card{width:92%;max-width:360px}
      .big-price{font-size:2.6rem}
      .btn-choice{min-width:160px;padding:16px 20px}
    }
  </style>
</head>
<body>

  <div class="topbar">
    <button class="audio-btn" onclick="lireQuestion()">üîä √âcouter la question</button>
    <button class="sound-btn" id="btn-sound" onclick="toggleSound()">üîà Son : ON</button>
    <button class="reset-btn" onclick="recommencer()">üîÑ Recommencer</button>
  </div>

  <h1>Est-ce que je peux acheter ?</h1>

  <div class="game-scene" id="scene">
    <div class="wallet-card">
      <span class="label">J'ai</span>
      <span class="big-icon">üí∂</span>
      <span class="big-price" id="wallet-amount">...</span>
    </div>

    <div class="item-card">
      <span class="label">√áa co√ªte</span>
      <span class="big-icon" id="item-icon">...</span>
      <span class="big-price" id="item-price">...</span>
    </div>
  </div>

  <div id="feedback"></div>

  <div class="buttons-area" id="buttons-container">
    <button class="btn-choice btn-no" onclick="repondre(false)">üëé<span>NON</span></button>
    <button class="btn-choice btn-yes" onclick="repondre(true)">üëç<span>OUI</span></button>
  </div>

  <button id="next-btn" onclick="prochainTour()">Suivant ‚û°</button>

  <div class="end-screen" id="end-screen">
    <h2>üåü Bravo ! üåü</h2>
    <p>Tu as fini l'exercice</p>
    <button onclick="recommencer()">Recommencer</button>
  </div>

<script>
  const questions = [
    { wallet: 20, price: 5,  icon: "üçî", name: "Burger",   canBuy: true  },
    { wallet: 10, price: 50, icon: "‚úàÔ∏è", name: "Avion",    canBuy: false },

    { wallet: 30, price: 25, icon: "üëü", name: "Baskets",  canBuy: true  },
    { wallet: 50, price: 80, icon: "üö≤", name: "V√©lo",     canBuy: false },

    { wallet: 40, price: 38, icon: "üß¢", name: "Casquette",canBuy: true  },
    { wallet: 60, price: 65, icon: "üéÆ", name: "Jeu vid√©o",canBuy: false }
  ];

  let currentQuestionIndex = 0;
  let currentQ = null;
  let soundEnabled = true;

  function toggleSound(){
    soundEnabled = !soundEnabled;
    const btn = document.getElementById("btn-sound");
    btn.textContent = soundEnabled ? "üîà Son : ON" : "üîá Son : OFF";
    try { if(!soundEnabled && window.speechSynthesis) window.speechSynthesis.cancel(); } catch(e){}
  }

  function speak(txt){
    if(!soundEnabled) return;
    try{
      if(!window.speechSynthesis) return;
      window.speechSynthesis.cancel();
      const msg = new SpeechSynthesisUtterance(txt);
      msg.lang = "fr-FR";
      window.speechSynthesis.speak(msg);
    }catch(e){}
  }

  function initGame(){
    currentQuestionIndex = 0;
    showQuestion(currentQuestionIndex);
    document.getElementById("end-screen").style.display = "none";
    document.getElementById("scene").style.display = "flex";
    document.getElementById("feedback").style.display = "block";
    document.getElementById("buttons-container").style.display = "flex";
    document.getElementById("next-btn").style.display = "none";
  }

  function showQuestion(index){
    if(index >= questions.length){
      finDuJeu();
      return;
    }

    currentQ = questions[index];

    document.getElementById("wallet-amount").innerText = currentQ.wallet + " ‚Ç¨";
    document.getElementById("item-price").innerText = currentQ.price + " ‚Ç¨";
    document.getElementById("item-icon").innerText = currentQ.icon;

    document.getElementById("feedback").innerText = "";
    document.getElementById("next-btn").style.display = "none";
    document.getElementById("buttons-container").style.display = "flex";
  }

  function lireQuestion(){
    if(!currentQ) return;
    speak("J'ai " + currentQ.wallet + " euros. L'objet co√ªte " + currentQ.price + " euros. Est-ce que je peux acheter ?");
  }

  function repondre(reponseEleve){
    if(!currentQ) return;

    const feedback = document.getElementById("feedback");

    if (reponseEleve === currentQ.canBuy) {
      feedback.style.color = "green";
      feedback.innerText = "üéâ BRAVO ! C'est juste !";
      speak("Bravo ! C'est juste.");

      document.getElementById("buttons-container").style.display = "none";
      document.getElementById("next-btn").style.display = "block";

    } else {
      feedback.style.color = "red";

      if(currentQ.canBuy){
        feedback.innerText = "‚ùå Faux. Tu as assez d'argent : ton argent est plus grand.";
        speak("Faux. Tu as assez d'argent.");
      } else {
        feedback.innerText = "‚ùå Faux. C'est trop cher : ton argent est plus petit.";
        speak("Faux. C'est trop cher, tu n'as pas assez.");
      }
    }
  }

  function prochainTour(){
    currentQuestionIndex++;
    showQuestion(currentQuestionIndex);
  }

  function finDuJeu(){
    document.getElementById("scene").style.display = "none";
    document.getElementById("buttons-container").style.display = "none";
    document.getElementById("next-btn").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("end-screen").style.display = "block";
    speak("Bravo ! Tu as fini l'exercice.");
  }

  function recommencer(){
    try { if(window.speechSynthesis) window.speechSynthesis.cancel(); } catch(e){}
    initGame();
  }

  initGame();
</script>

</body>
</html>
