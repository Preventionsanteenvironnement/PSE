<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes">
    <title>PSE â€“ Je peux acheter ?</title>
    <style>
        :root {
            --bg: #e0f2f1;
            --primary: #00897b;
            --success: #4caf50;
            --danger: #f44336;
            --focus: #ff9800;
            --font-size: 1rem;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", Arial, sans-serif;
            font-size: var(--font-size);
            background-color: var(--bg);
            margin: 0;
            padding: 15px;
            min-height: 100vh;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           EN-TÃŠTE : OBJECTIF + COMPÃ‰TENCE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            background: linear-gradient(135deg, #00897b, #00695c);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 1.8rem;
        }

        .objectif-box {
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .objectif-box strong {
            font-size: 1.1rem;
        }

        .competence-tag {
            display: inline-block;
            background: #ff9800;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.95rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTRÃ”LES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .ctrl-btn {
            color: #fff;
            border: none;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
            user-select: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ctrl-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-consigne { background: #e91e63; }
        .btn-son { background: #2c3e50; }
        .btn-zoom-plus { background: #4caf50; }
        .btn-zoom-moins { background: #ff9800; }
        .btn-reset { background: #607d8b; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONSIGNE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .consigne-box {
            background: #fff;
            border: 4px solid var(--primary);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 15px;
            text-align: center;
        }

        .consigne-box .etape {
            background: var(--primary);
            color: white;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .consigne-box p {
            font-size: 1.2rem;
            margin: 0;
            line-height: 1.5;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PROGRESSION
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .progress-box {
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            height: 100%;
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCÃˆNE DE JEU
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .game-scene {
            display: flex;
            justify-content: center;
            align-items: stretch;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            width: 280px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: scale(1.02);
        }

        .wallet-card {
            border: 5px solid var(--primary);
            background: linear-gradient(135deg, #e0f2f1, #b2dfdb);
        }

        .item-card {
            border: 5px solid #ff9800;
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
        }

        .card-label {
            font-size: 1.1rem;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .card-icon {
            font-size: 5rem;
            display: block;
            margin-bottom: 10px;
        }

        .card-amount {
            font-size: 3rem;
            font-weight: 900;
        }

        .wallet-card .card-amount {
            color: var(--primary);
        }

        .item-card .card-amount {
            color: #e65100;
        }

        .item-name {
            font-size: 1.2rem;
            color: #666;
            margin-top: 5px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           COMPARAISON VISUELLE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .comparison-hint {
            background: #f5f5f5;
            border: 3px dashed #999;
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.3rem;
        }

        .comparison-hint .val-wallet {
            color: var(--primary);
            font-weight: bold;
            font-size: 1.5rem;
        }

        .comparison-hint .val-price {
            color: #e65100;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .comparison-hint .operator {
            font-size: 2rem;
            margin: 0 15px;
            color: #333;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BOUTONS OUI / NON
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .buttons-area {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn-choice {
            padding: 20px 40px;
            font-size: 2rem;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 180px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
            color: white;
            user-select: none;
            transition: transform 0.1s;
        }

        .btn-choice:active {
            transform: translateY(8px);
            box-shadow: none;
        }

        .btn-choice:hover {
            transform: scale(1.05);
        }

        .btn-yes {
            background: linear-gradient(135deg, #4caf50, #388e3c);
        }

        .btn-no {
            background: linear-gradient(135deg, #f44336, #c62828);
        }

        .btn-choice .btn-text {
            font-size: 1.2rem;
            margin-top: 8px;
            font-weight: bold;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FEEDBACK
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .feedback-zone {
            text-align: center;
            min-height: 100px;
        }

        .feedback-msg {
            font-size: 1.8rem;
            font-weight: bold;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .feedback-msg.ok {
            background: #e8f5e9;
            color: var(--success);
            border: 3px solid var(--success);
        }

        .feedback-msg.ko {
            background: #ffebee;
            color: var(--danger);
            border: 3px solid var(--danger);
        }

        .feedback-explanation {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 15px;
        }

        .btn-next {
            background: linear-gradient(135deg, #2196f3, #1565c0);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            display: none;
            margin: 0 auto;
            animation: bounce 2s infinite;
        }

        .btn-next.visible {
            display: inline-block;
        }

        .btn-next:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-8px); }
            60% { transform: translateY(-4px); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ã‰CRAN FIN
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .end-screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 5px solid var(--primary);
        }

        .end-screen.visible {
            display: block;
        }

        .end-screen .trophy {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .end-screen h2 {
            color: var(--success);
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .end-screen .score {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .end-screen .score .correct {
            color: var(--success);
            font-weight: bold;
        }

        .end-screen .btn-replay {
            background: linear-gradient(135deg, #2196f3, #1565c0);
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
        }

        .end-screen .btn-replay:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CALCULATRICE FLOTTANTE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .calc-container {
            position: fixed;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 500;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }

        .calc-toggle {
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calc-toggle:hover {
            transform: scale(1.1);
        }

        .calc-toggle.active {
            background: linear-gradient(135deg, #7b1fa2, #4a148c);
        }

        .calculatrice {
            background: linear-gradient(135deg, #37474f, #263238);
            border-radius: 15px;
            padding: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
            width: 200px;
            display: none;
            border: 2px solid #546e7a;
        }

        .calculatrice.visible {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid #546e7a;
        }

        .calc-title {
            color: #b0bec5;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .calc-minimize {
            background: none;
            border: none;
            color: #b0bec5;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .calc-screen {
            background: linear-gradient(135deg, #c5e1a5, #aed581);
            color: #1b5e20;
            font-size: 1.6rem;
            padding: 8px 12px;
            text-align: right;
            border-radius: 8px;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
            min-height: 40px;
            font-weight: bold;
            border: 2px inset #8bc34a;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
        }

        .calc-btn {
            padding: 10px 5px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: #546e7a;
            color: white;
            transition: all 0.1s;
        }

        .calc-btn:hover { background: #78909c; }
        .calc-btn:active { transform: scale(0.95); }
        .calc-btn.op { background: #ff9800; }
        .calc-btn.eq { background: #4caf50; }
        .calc-btn.clear { background: #f44336; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FEEDBACK GLOBAL
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #feedback-global {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: #fff;
            padding: 25px 40px;
            border-radius: 20px;
            font-size: 2rem;
            display: none;
            z-index: 1000;
            text-align: center;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 600px) {
            .calc-container {
                right: 5px;
                top: auto;
                bottom: 10px;
                transform: none;
            }
            
            .calculatrice {
                width: 180px;
            }

            .card {
                width: 100%;
                max-width: 300px;
            }

            .card-amount {
                font-size: 2.5rem;
            }

            .btn-choice {
                min-width: 140px;
                padding: 15px 25px;
            }
        }
    </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     EN-TÃŠTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="header">
    <h1>ğŸ’¶ Je peux acheter ?</h1>
    <div class="objectif-box">
        <strong>ğŸ¯ OBJECTIF :</strong> Comparer mon argent au prix de l'objet pour savoir si je peux l'acheter.
    </div>
    <span class="competence-tag">C2 â€“ GÃ©rer son budget</span>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTRÃ”LES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="controls">
    <button class="ctrl-btn btn-consigne" onclick="lireConsigne()">ğŸ”Š Consigne</button>
    <button class="ctrl-btn btn-son" id="btn-son" onclick="toggleSon()">ğŸ”ˆ Son : ON</button>
    <button class="ctrl-btn btn-zoom-plus" onclick="zoomPlus()">ğŸ”+ Agrandir</button>
    <button class="ctrl-btn btn-zoom-moins" onclick="zoomMoins()">ğŸ”- RÃ©duire</button>
    <button class="ctrl-btn btn-reset" onclick="location.reload()">ğŸ”„ Recommencer</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONSIGNE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="consigne-box">
    <span class="etape">QUESTION</span>
    <p>
        <strong>Regarde</strong> ton argent et le prix de l'objet.<br>
        <strong>Clique</strong> sur <span style="color: var(--success);">ğŸ‘ OUI</span> si tu as assez, ou <span style="color: var(--danger);">ğŸ‘ NON</span> si c'est trop cher.
    </p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PROGRESSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="progress-box">
    <strong>Question <span id="current-q">1</span> / <span id="total-q">8</span></strong>
    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCÃˆNE DE JEU
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="game-area">
    <div class="game-scene" id="scene">
        <div class="card wallet-card">
            <span class="card-label">ğŸ’° J'ai</span>
            <span class="card-icon">ğŸ’¶</span>
            <span class="card-amount" id="wallet-amount">0 â‚¬</span>
        </div>

        <div class="card item-card">
            <span class="card-label">ğŸ·ï¸ Ã‡a coÃ»te</span>
            <span class="card-icon" id="item-icon">ğŸ</span>
            <span class="card-amount" id="item-price">0 â‚¬</span>
            <span class="item-name" id="item-name">Objet</span>
        </div>
    </div>

    <!-- Aide Ã  la comparaison -->
    <div class="comparison-hint" id="comparison-hint">
        <span class="val-wallet" id="hint-wallet">0</span>
        <span class="operator">?</span>
        <span class="val-price" id="hint-price">0</span>
    </div>

    <!-- Boutons rÃ©ponse -->
    <div class="buttons-area" id="buttons-area">
        <button class="btn-choice btn-no" onclick="repondre(false)">
            ğŸ‘
            <span class="btn-text">NON</span>
        </button>
        <button class="btn-choice btn-yes" onclick="repondre(true)">
            ğŸ‘
            <span class="btn-text">OUI</span>
        </button>
    </div>

    <!-- Feedback -->
    <div class="feedback-zone" id="feedback-zone">
        <div class="feedback-msg" id="feedback-msg" style="display: none;"></div>
        <div class="feedback-explanation" id="feedback-explanation"></div>
        <button class="btn-next" id="btn-next" onclick="questionSuivante()">Question suivante â¡ï¸</button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     Ã‰CRAN FIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="end-screen" id="end-screen">
    <div class="trophy">ğŸ†ğŸŒŸğŸ‰</div>
    <h2>BRAVO !</h2>
    <p class="score">Tu as rÃ©pondu correctement Ã  <span class="correct" id="score">0</span> questions !</p>
    <button class="btn-replay" onclick="location.reload()">ğŸ”„ Rejouer</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CALCULATRICE FLOTTANTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="calc-container">
    <button class="calc-toggle" id="calc-toggle" onclick="toggleCalculatrice()" title="Calculatrice">
        ğŸ§®
    </button>
    
    <div class="calculatrice" id="calculatrice">
        <div class="calc-header">
            <span class="calc-title">CALCULATRICE</span>
            <button class="calc-minimize" onclick="toggleCalculatrice()">â–¼</button>
        </div>
        <div class="calc-screen" id="calc-screen">0</div>
        <div class="calc-buttons">
            <button class="calc-btn clear" onclick="calcClear()">C</button>
            <button class="calc-btn" onclick="calcBackspace()">âŒ«</button>
            <button class="calc-btn op" onclick="calcOp('/')">/</button>
            <button class="calc-btn op" onclick="calcOp('Ã—')">Ã—</button>
            
            <button class="calc-btn" onclick="calcNum(7)">7</button>
            <button class="calc-btn" onclick="calcNum(8)">8</button>
            <button class="calc-btn" onclick="calcNum(9)">9</button>
            <button class="calc-btn op" onclick="calcOp('-')">âˆ’</button>
            
            <button class="calc-btn" onclick="calcNum(4)">4</button>
            <button class="calc-btn" onclick="calcNum(5)">5</button>
            <button class="calc-btn" onclick="calcNum(6)">6</button>
            <button class="calc-btn op" onclick="calcOp('+')">+</button>
            
            <button class="calc-btn" onclick="calcNum(1)">1</button>
            <button class="calc-btn" onclick="calcNum(2)">2</button>
            <button class="calc-btn" onclick="calcNum(3)">3</button>
            <button class="calc-btn eq" onclick="calcEqual()" style="grid-row: span 2;">=</button>
            
            <button class="calc-btn" onclick="calcNum(0)" style="grid-column: span 2;">0</button>
            <button class="calc-btn" onclick="calcDot()">.</button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FEEDBACK GLOBAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="feedback-global"></div>

<script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DONNÃ‰ES - Prix rÃ©alistes du quotidien
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const questions = [
        { wallet: 10, price: 3,  icon: "ğŸ¥ª", name: "Sandwich", canBuy: true },
        { wallet: 5,  price: 8,  icon: "ğŸ•", name: "Pizza", canBuy: false },
        { wallet: 20, price: 15, icon: "ğŸ“š", name: "Livre", canBuy: true },
        { wallet: 15, price: 25, icon: "ğŸ§", name: "Ã‰couteurs", canBuy: false },
        { wallet: 50, price: 45, icon: "ğŸ‘Ÿ", name: "Baskets", canBuy: true },
        { wallet: 30, price: 60, icon: "ğŸ®", name: "Jeu vidÃ©o", canBuy: false },
        { wallet: 8,  price: 8,  icon: "ğŸ¬", name: "Place cinÃ©", canBuy: true },
        { wallet: 25, price: 30, icon: "ğŸ§¥", name: "Veste", canBuy: false }
    ];

    let currentIndex = 0;
    let score = 0;
    let soundEnabled = true;
    let zoomLevel = 1;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INITIALISATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function init() {
        document.getElementById("total-q").textContent = questions.length;
        afficherQuestion();
        setTimeout(() => lireConsigne(), 500);
    }

    function afficherQuestion() {
        if (currentIndex >= questions.length) {
            finDuJeu();
            return;
        }

        const q = questions[currentIndex];

        // Afficher les valeurs
        document.getElementById("wallet-amount").textContent = q.wallet + " â‚¬";
        document.getElementById("item-price").textContent = q.price + " â‚¬";
        document.getElementById("item-icon").textContent = q.icon;
        document.getElementById("item-name").textContent = q.name;

        // Hint de comparaison
        document.getElementById("hint-wallet").textContent = q.wallet + " â‚¬";
        document.getElementById("hint-price").textContent = q.price + " â‚¬";

        // Reset UI
        document.getElementById("current-q").textContent = currentIndex + 1;
        document.getElementById("buttons-area").style.display = "flex";
        document.getElementById("feedback-msg").style.display = "none";
        document.getElementById("feedback-explanation").textContent = "";
        document.getElementById("btn-next").classList.remove("visible");

        // Progression
        const percent = (currentIndex / questions.length) * 100;
        document.getElementById("progress-fill").style.width = percent + "%";

        speak("J'ai " + q.wallet + " euros. " + q.name + " coÃ»te " + q.price + " euros. Est-ce que je peux acheter ?");
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RÃ‰PONSE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function repondre(reponseEleve) {
        const q = questions[currentIndex];
        const feedbackMsg = document.getElementById("feedback-msg");
        const feedbackExpl = document.getElementById("feedback-explanation");

        // Masquer les boutons
        document.getElementById("buttons-area").style.display = "none";
        feedbackMsg.style.display = "block";

        if (reponseEleve === q.canBuy) {
            // CORRECT
            score++;
            feedbackMsg.className = "feedback-msg ok";
            feedbackMsg.textContent = "ğŸ‰ BRAVO ! C'est juste !";
            
            if (q.canBuy) {
                feedbackExpl.textContent = q.wallet + " â‚¬ â‰¥ " + q.price + " â‚¬ â†’ Tu as assez d'argent !";
            } else {
                feedbackExpl.textContent = q.wallet + " â‚¬ < " + q.price + " â‚¬ â†’ C'est trop cher !";
            }
            
            speak("Bravo ! C'est juste !");
            playFeedback(true, "âœ“ Bravo !");

        } else {
            // INCORRECT
            feedbackMsg.className = "feedback-msg ko";
            feedbackMsg.textContent = "âŒ Ce n'est pas Ã§a...";
            
            if (q.canBuy) {
                feedbackExpl.textContent = "Tu as " + q.wallet + " â‚¬ et Ã§a coÃ»te " + q.price + " â‚¬. " + q.wallet + " est PLUS GRAND que " + q.price + ", donc tu PEUX acheter.";
                speak("Faux. Tu as " + q.wallet + " euros et Ã§a coÃ»te " + q.price + " euros. Tu as assez d'argent, tu peux acheter.");
            } else {
                feedbackExpl.textContent = "Tu as " + q.wallet + " â‚¬ et Ã§a coÃ»te " + q.price + " â‚¬. " + q.wallet + " est PLUS PETIT que " + q.price + ", donc tu NE PEUX PAS acheter.";
                speak("Faux. Tu as " + q.wallet + " euros mais Ã§a coÃ»te " + q.price + " euros. C'est trop cher, tu ne peux pas acheter.");
            }
            
            playFeedback(false, "âœ— Erreur");
        }

        document.getElementById("btn-next").classList.add("visible");
    }

    function questionSuivante() {
        currentIndex++;
        afficherQuestion();
    }

    function finDuJeu() {
        document.getElementById("game-area").style.display = "none";
        document.getElementById("end-screen").classList.add("visible");
        document.getElementById("score").textContent = score + " / " + questions.length;
        
        document.getElementById("progress-fill").style.width = "100%";

        speak("Bravo ! Tu as terminÃ© l'exercice avec " + score + " bonnes rÃ©ponses sur " + questions.length + " !");
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // FEEDBACK
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function playFeedback(isGood, text) {
        const fb = document.getElementById("feedback-global");
        fb.textContent = text;
        fb.style.display = "block";
        fb.style.backgroundColor = isGood ? "rgba(46, 125, 50, 0.95)" : "rgba(198, 40, 40, 0.95)";
        setTimeout(() => fb.style.display = "none", 1200);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AUDIO
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function speak(text) {
        if (!soundEnabled) return;
        try {
            if (!window.speechSynthesis) return;
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = "fr-FR";
            msg.rate = 0.9;
            window.speechSynthesis.speak(msg);
        } catch(e) {}
    }

    function toggleSon() {
        soundEnabled = !soundEnabled;
        document.getElementById("btn-son").textContent = soundEnabled ? "ğŸ”ˆ Son : ON" : "ğŸ”‡ Son : OFF";
        if (!soundEnabled && window.speechSynthesis) {
            window.speechSynthesis.cancel();
        }
    }

    function lireConsigne() {
        speak("Regarde combien tu as d'argent, et regarde le prix de l'objet. Si tu as assez d'argent, clique sur OUI. Si c'est trop cher, clique sur NON.");
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ZOOM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function zoomPlus() {
        if (zoomLevel < 1.5) {
            zoomLevel += 0.1;
            document.body.style.fontSize = zoomLevel + 'rem';
            speak("Texte agrandi");
        }
    }

    function zoomMoins() {
        if (zoomLevel > 0.8) {
            zoomLevel -= 0.1;
            document.body.style.fontSize = zoomLevel + 'rem';
            speak("Texte rÃ©duit");
        }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CALCULATRICE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let calcDisplay = "0";
    let calcPrevious = null;
    let calcOperator = null;
    let calcNewNumber = true;

    function toggleCalculatrice() {
        const calc = document.getElementById("calculatrice");
        const toggleBtn = document.getElementById("calc-toggle");
        
        calc.classList.toggle("visible");
        toggleBtn.classList.toggle("active");
        
        if (calc.classList.contains("visible")) {
            speak("Calculatrice ouverte");
        }
    }

    function updateCalcScreen() {
        document.getElementById("calc-screen").textContent = calcDisplay;
    }

    function calcNum(n) {
        if (calcNewNumber) {
            calcDisplay = String(n);
            calcNewNumber = false;
        } else {
            if (calcDisplay.length < 10) {
                calcDisplay += String(n);
            }
        }
        updateCalcScreen();
    }

    function calcDot() {
        if (!calcDisplay.includes(".")) {
            calcDisplay += ".";
            calcNewNumber = false;
        }
        updateCalcScreen();
    }

    function calcOp(op) {
        calcPrevious = parseFloat(calcDisplay);
        calcOperator = op;
        calcNewNumber = true;
    }

    function calcEqual() {
        if (calcPrevious === null || calcOperator === null) return;
        
        const current = parseFloat(calcDisplay);
        let result = 0;
        
        switch(calcOperator) {
            case '+': result = calcPrevious + current; break;
            case '-': result = calcPrevious - current; break;
            case 'Ã—': result = calcPrevious * current; break;
            case '/': result = current !== 0 ? calcPrevious / current : 0; break;
        }
        
        calcDisplay = String(Math.round(result * 100) / 100);
        calcPrevious = null;
        calcOperator = null;
        calcNewNumber = true;
        updateCalcScreen();
    }

    function calcClear() {
        calcDisplay = "0";
        calcPrevious = null;
        calcOperator = null;
        calcNewNumber = true;
        updateCalcScreen();
    }

    function calcBackspace() {
        if (calcDisplay.length > 1) {
            calcDisplay = calcDisplay.slice(0, -1);
        } else {
            calcDisplay = "0";
            calcNewNumber = true;
        }
        updateCalcScreen();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DÃ‰MARRAGE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    init();
</script>

</body>
</html>
