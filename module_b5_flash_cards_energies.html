<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Cards B.5 - √ânergies et D√©veloppement Durable - Terminale Bac Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #4CAF50;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: rgba(255,255,255,0.7);
            --bg-card: rgba(255,255,255,0.1);
            --border-color: rgba(255,255,255,0.2);
        }

        body.light-mode {
            --text-primary: #1a1a2e;
            --text-secondary: rgba(26,26,46,0.7);
            --bg-card: rgba(26,26,46,0.1);
            --border-color: rgba(26,26,46,0.2);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 50%, #667eea 100%) !important;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        /* EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE */
        .cadre-pedagogique {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .module-info h2 {
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.8rem;
            font-weight: 900;
            margin-bottom: 15px;
        }

        .objectif {
            background: rgba(102, 126, 234, 0.2);
            border-left: 4px solid var(--primary);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1rem;
        }

        .competences-travaillees h3 {
            color: var(--text-primary);
            margin: 20px 0 15px 0;
            font-size: 1.2rem;
        }

        .competences-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            list-style: none;
        }

        .competences-list li {
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .competences-list li:nth-child(1) { background: rgba(16, 185, 129, 0.3); border: 1px solid #10b981; }
        .competences-list li:nth-child(2) { background: rgba(102, 126, 234, 0.3); border: 1px solid #667eea; }
        .competences-list li:nth-child(3) { background: rgba(245, 158, 11, 0.3); border: 1px solid #f59e0b; }
        .competences-list li:nth-child(4) { background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; }
        .competences-list li:nth-child(5) { background: rgba(168, 85, 247, 0.3); border: 1px solid #a855f7; }

        .niveau-cible {
            background: linear-gradient(135deg, var(--danger), #f5576c);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            margin-top: 20px;
            font-weight: 700;
            font-size: 1rem;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .btn-back {
            background: var(--bg-card);
            color: var(--text-primary);
            padding: 12px 24px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            border: 2px solid var(--border-color);
            cursor: pointer;
        }
        
        .btn-back:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .theme-toggle {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            padding: 12px;
            border-radius: 50px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }
        
        .score-bar {
            display: flex;
            align-items: center;
            gap: 20px;
            background: var(--bg-card);
            padding: 12px 25px;
            border-radius: 50px;
            border: 2px solid var(--border-color);
        }
        
        .score-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
            font-weight: 600;
        }
        
        .score-item .icon {
            font-size: 20px;
        }
        
        /* √âcrans */
        .screen {
            display: none;
            animation: fadeIn 0.6s ease;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* √âcran d'accueil */
        .welcome-screen {
            text-align: center;
            padding: 40px 0;
        }
        
        .welcome-title {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .welcome-subtitle {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 40px;
        }
        
        /* Objectifs */
        .objectifs-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
            border: 2px solid rgba(102, 126, 234, 0.5);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: left;
            backdrop-filter: blur(10px);
        }
        
        .objectifs-card h3 {
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .objectif-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 15px;
            line-height: 1.6;
        }
        
        .objectif-item:last-child {
            border-bottom: none;
        }
        
        .objectif-item .check {
            color: var(--success);
            font-size: 20px;
            flex-shrink: 0;
        }
        
        /* Niveaux */
        .niveaux-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .niveau-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .niveau-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            border-color: var(--primary);
        }
        
        .niveau-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .niveau-card.locked:hover {
            transform: none;
            box-shadow: none;
        }
        
        .niveau-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .niveau-numero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 900;
        }
        
        .niveau-info h3 {
            font-size: 18px;
            font-weight: 700;
        }
        
        .niveau-info p {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .niveau-progress {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #2ECC71);
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .progress-percent {
            font-weight: 700;
            color: var(--success);
        }
        
        /* Jeu */
        .game-header {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .level-info h2 {
            font-size: 24px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .card-counter {
            background: rgba(102, 126, 234, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            border: 1px solid var(--primary);
        }
        
        /* Cartes de jeu */
        .game-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 25px;
            min-height: 400px;
            position: relative;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .game-card:hover {
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }
        
        .card-type {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--warning), #f59e0b);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .question-section {
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 20px;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 25px;
            color: var(--text-primary);
        }
        
        .keyword-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .keyword-display {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 30px;
            border-radius: 20px;
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 20px;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .keyword-input {
            width: 100%;
            max-width: 400px;
            padding: 15px 25px;
            border: 2px solid var(--border-color);
            border-radius: 25px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 18px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .keyword-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .option-btn {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
            color: var(--text-primary);
        }
        
        .option-btn:hover {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(5px);
        }
        
        .option-btn.selected {
            border-color: var(--primary);
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .option-letter {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            flex-shrink: 0;
        }
        
        .vf-container {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .vf-btn {
            background: var(--bg-card);
            border: 3px solid var(--border-color);
            border-radius: 20px;
            padding: 25px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            font-weight: 900;
            color: var(--text-primary);
            min-width: 150px;
        }
        
        .vf-btn.vrai:hover, .vf-btn.vrai.selected {
            border-color: var(--success);
            background: rgba(76, 175, 80, 0.2);
            color: var(--success);
        }
        
        .vf-btn.faux:hover, .vf-btn.faux.selected {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }
        
        /* Boutons d'action */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
            border-color: var(--primary);
        }
        
        /* Overlay de feedback */
        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .feedback-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .feedback-card {
            background: var(--bg-card);
            border-radius: 30px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            transform: scale(0.8);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
        }
        
        .feedback-overlay.visible .feedback-card {
            transform: scale(1);
        }
        
        .feedback-card.correct {
            border: 3px solid var(--success);
            box-shadow: 0 20px 40px rgba(76, 175, 80, 0.3);
        }
        
        .feedback-card.incorrect {
            border: 3px solid var(--danger);
            box-shadow: 0 20px 40px rgba(239, 68, 68, 0.3);
        }
        
        .feedback-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .feedback-title {
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 15px;
        }
        
        .feedback-points {
            background: linear-gradient(135deg, var(--success), #2ECC71);
            color: white;
            padding: 10px 25px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 25px;
        }
        
        .feedback-explanation {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .feedback-explanation h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .keyword-box {
            background: linear-gradient(135deg, var(--warning), #f59e0b);
            color: white;
            padding: 12px 20px;
            border-radius: 15px;
            margin: 15px 0;
            font-weight: 700;
            text-align: center;
        }
        
        .tip-box {
            background: rgba(102, 126, 234, 0.2);
            border-left: 4px solid var(--primary);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .tip-box h5 {
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        /* √âcran de r√©sultats */
        .results-screen {
            text-align: center;
            padding: 40px 0;
        }
        
        .results-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 30px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .results-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .results-title {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .results-score {
            font-size: 48px;
            font-weight: 900;
            color: var(--success);
            margin-bottom: 30px;
        }
        
        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: 900;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        .errors-recap {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .errors-recap h4 {
            color: var(--danger);
            margin-bottom: 15px;
        }
        
        .errors-recap ul {
            list-style: none;
            padding: 0;
        }
        
        .errors-recap li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        /* Streak popup */
        .streak-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 20px 40px;
            border-radius: 25px;
            font-size: 24px;
            font-weight: 900;
            z-index: 1001;
            display: none;
            animation: streakPop 1.5s ease;
        }
        
        @keyframes streakPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        /* Confettis */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 999;
            animation: confettiDrop 3s linear forwards;
        }
        
        @keyframes confettiDrop {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        /* Hint section */
        .hint-section {
            background: rgba(245, 158, 11, 0.1);
            border: 2px solid var(--warning);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .hint-section.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .welcome-title {
                font-size: 36px;
            }
            
            .question-text {
                font-size: 18px;
            }
            
            .keyword-display {
                font-size: 20px;
                padding: 15px 25px;
            }
            
            .vf-container {
                flex-direction: column;
                align-items: center;
            }
            
            .vf-btn {
                min-width: 200px;
            }
            
            .results-score {
                font-size: 36px;
            }
            
            .results-title {
                font-size: 28px;
            }
        }

        /* RGPD Footer */
        .rgpd-footer {
            text-align: center;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 40px;
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <!-- EN-T√äTE P√âDAGOGIQUE OBLIGATOIRE -->
    <div class="container">
        <div class="cadre-pedagogique">
            <div class="module-info">
                <h2>Module B.5 : Les ressources en √©nergie et le d√©veloppement durable</h2>
                <div class="objectif">
                    <strong>üéØ Objectif :</strong> Adopter un comportement √©cocitoyen afin de pr√©server les ressources en √©nergie
                </div>
            </div>
            
            <div class="competences-travaillees">
                <h3>üèÜ Comp√©tences travaill√©es dans ces flash cards :</h3>
                <ul class="competences-list">
                    <li><strong>C1</strong> - Traiter une information</li>
                    <li><strong>C2</strong> - Appliquer une d√©marche d'analyse</li>
                    <li><strong>C3</strong> - Expliquer un ph√©nom√®ne environnemental</li>
                    <li><strong>C4</strong> - Proposer des solutions</li>
                    <li><strong>C6</strong> - Communiquer avec vocabulaire adapt√©</li>
                </ul>
            </div>
            
            <div class="niveau-cible">
                <strong>üöÄ Niveau : Bac Pro Terminale - Flash Cards R√©vision √ânergies</strong>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">üåô</button>
            <div class="score-bar">
                <div class="score-item">
                    <span class="icon">üèÜ</span>
                    <span id="totalPoints">0</span>
                </div>
                <div class="score-item">
                    <span class="icon">üî•</span>
                    <span id="currentStreak">0</span>
                </div>
            </div>
        </div>
        
        <!-- √âcran d'accueil -->
        <div class="screen active" id="homeScreen">
            <div class="welcome-screen">
                <h1 class="welcome-title">‚ö° FLASH CARDS √âNERGIES</h1>
                <p class="welcome-subtitle">Ma√Ætrise tous les concepts √©nerg√©tiques pour ton BAC PRO !</p>
                
                <div class="objectifs-card">
                    <h3>üéØ Objectifs de r√©vision</h3>
                    <div class="objectif-item">
                        <span class="check">‚úì</span>
                        <span>M√©moriser le vocabulaire √©nerg√©tique essentiel (√©nergies renouvelables/non-renouvelables)</span>
                    </div>
                    <div class="objectif-item">
                        <span class="check">‚úì</span>
                        <span>Ma√Ætriser les calculs d'empreinte carbone et d'√©conomies d'√©nergie</span>
                    </div>
                    <div class="objectif-item">
                        <span class="check">‚úì</span>
                        <span>Comprendre les liens entre √©nergie, environnement et d√©veloppement durable</span>
                    </div>
                    <div class="objectif-item">
                        <span class="check">‚úì</span>
                        <span>Identifier les solutions d'√©conomie d'√©nergie en contexte professionnel</span>
                    </div>
                    <div class="objectif-item">
                        <span class="check">‚úì</span>
                        <span>Se pr√©parer efficacement aux √©preuves PSE sur les ressources √©nerg√©tiques</span>
                    </div>
                </div>
                
                <div class="niveaux-grid">
                    <div class="niveau-card" onclick="startLevel(1)">
                        <div class="niveau-header">
                            <div class="niveau-numero">1</div>
                            <div class="niveau-info">
                                <h3>üå± Vocabulaire de base</h3>
                                <p>Types d'√©nergies et d√©finitions essentielles</p>
                            </div>
                        </div>
                        <div class="niveau-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="level1Bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percent" id="level1Percent">0%</div>
                        </div>
                    </div>
                    
                    <div class="niveau-card" onclick="startLevel(2)" id="level2Card">
                        <div class="niveau-header">
                            <div class="niveau-numero">2</div>
                            <div class="niveau-info">
                                <h3>üßÆ Calculs √©nerg√©tiques</h3>
                                <p>Empreinte carbone et √©conomies d'√©nergie</p>
                            </div>
                        </div>
                        <div class="niveau-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="level2Bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percent" id="level2Percent">0%</div>
                        </div>
                    </div>
                    
                    <div class="niveau-card" onclick="startLevel(3)" id="level3Card">
                        <div class="niveau-header">
                            <div class="niveau-numero">3</div>
                            <div class="niveau-info">
                                <h3>üåç Impact climatique</h3>
                                <p>Liens √©nergie-environnement-climat</p>
                            </div>
                        </div>
                        <div class="niveau-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="level3Bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percent" id="level3Percent">0%</div>
                        </div>
                    </div>
                    
                    <div class="niveau-card" onclick="startLevel(4)" id="level4Card">
                        <div class="niveau-header">
                            <div class="niveau-numero">4</div>
                            <div class="niveau-info">
                                <h3>üí° Solutions professionnelles</h3>
                                <p>√âconomies d'√©nergie en entreprise</p>
                            </div>
                        </div>
                        <div class="niveau-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="level4Bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percent" id="level4Percent">0%</div>
                        </div>
                    </div>
                    
                    <div class="niveau-card" onclick="startLevel(5)" id="level5Card">
                        <div class="niveau-header">
                            <div class="niveau-numero">5</div>
                            <div class="niveau-info">
                                <h3>üèÜ Expertise compl√®te</h3>
                                <p>Ma√Ætrise totale pour l'√©preuve BAC</p>
                            </div>
                        </div>
                        <div class="niveau-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="level5Bar" style="width: 0%"></div>
                            </div>
                            <div class="progress-percent" id="level5Percent">0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- √âcran de jeu -->
        <div class="screen" id="gameScreen">
            <div class="game-header">
                <div class="level-info">
                    <h2 id="levelTitle">Niveau 1 - Vocabulaire</h2>
                </div>
                <div class="card-counter" id="cardCounter">1/10</div>
            </div>
            
            <div class="game-card">
                <div class="card-type" id="cardType">MOT-CL√â</div>
                <div class="question-section" id="questionSection">
                    <!-- Contenu dynamique -->
                </div>
                <div class="hint-section" id="hintSection">
                    <div id="hintText"></div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="showHint()">üí° Indice</button>
                    <button class="btn btn-primary" onclick="validateAnswer()">‚úì Valider</button>
                </div>
            </div>
        </div>
        
        <!-- √âcran de r√©sultats -->
        <div class="screen" id="resultsScreen">
            <div class="results-screen">
                <div class="results-card">
                    <div class="results-icon" id="resultsIcon">üéâ</div>
                    <h2 class="results-title" id="resultsTitle">Niveau r√©ussi !</h2>
                    <div class="results-score" id="resultsScore">85%</div>
                    
                    <div class="results-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="correctCount">8/10</div>
                            <div class="stat-label">Bonnes r√©ponses</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="pointsEarned">+75</div>
                            <div class="stat-label">Points gagn√©s</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="bestStreak">5</div>
                            <div class="stat-label">Meilleure s√©rie</div>
                        </div>
                    </div>
                    
                    <div class="errors-recap" id="errorsRecap" style="display: none;">
                        <h4>üìù Points √† revoir</h4>
                        <ul id="errorsList"></ul>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="goHome()">üè† Accueil</button>
                        <button class="btn btn-primary" id="nextLevelBtn" onclick="nextLevel()">‚û°Ô∏è Niveau suivant</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Overlay de feedback -->
        <div class="feedback-overlay" id="feedbackOverlay">
            <div class="feedback-card" id="feedbackCard">
                <div class="feedback-icon" id="feedbackIcon">‚úÖ</div>
                <h3 class="feedback-title" id="feedbackTitle">Bravo !</h3>
                <div class="feedback-points" id="feedbackPoints">+10 points</div>
                <div class="feedback-explanation" id="feedbackExplanation">
                    <!-- Contenu dynamique -->
                </div>
                <button class="btn btn-primary" onclick="nextCard()">Continuer</button>
            </div>
        </div>
        
        <!-- Popup streak -->
        <div class="streak-popup" id="streakPopup">üî• 3 de suite !</div>

        <!-- Footer RGPD -->
        <div class="rgpd-footer">
            üîí Conformit√© RGPD : Ces flash cards respectent votre anonymat.
        </div>
    </div>
    
    <script>
        // Donn√©es des niveaux
        const levels = {
            1: {
                title: "üå± Vocabulaire de base",
                cards: [
                    {
                        type: 'keyword',
                        keyword: '√©nergies renouvelables',
                        question: '√ânergies qui se renouvellent naturellement et rapidement',
                        answer: '√©nergies renouvelables',
                        explanation: 'Les √©nergies renouvelables sont des sources d\'√©nergie qui se reconstituent plus rapidement qu\'elles ne sont consomm√©es. Elles incluent le solaire, l\'√©olien, l\'hydraulique, la g√©othermie et la biomasse.',
                        hint: 'Elles se "renouvellent" sans s\'√©puiser !',
                        tip: 'Au BAC : Toujours pr√©ciser les 5 types principaux (solaire, √©olien, hydraulique, g√©othermie, biomasse)'
                    },
                    {
                        type: 'qcm',
                        question: 'Quel pourcentage du budget √©nerg√©tique d\'un logement repr√©sente le chauffage ?',
                        options: ['66%', '45%', '30%', '20%'],
                        answer: 0,
                        keyword: 'chauffage domestique',
                        explanation: 'Le chauffage repr√©sente 66% de la consommation √©nerg√©tique d\'un logement, ce qui en fait le poste le plus important √† optimiser pour r√©aliser des √©conomies.',
                        hint: 'C\'est le poste majoritaire dans un logement !',
                        tip: 'Au BAC : M√©moriser 66% chauffage, 17% √©lectrom√©nager, 11% eau chaude, 6% cuisson'
                    },
                    {
                        type: 'vf',
                        question: 'Le p√©trole est une √©nergie renouvelable car il provient d\'organismes vivants.',
                        answer: false,
                        keyword: '√©nergies fossiles',
                        explanation: 'FAUX. Bien que le p√©trole soit d\'origine organique, il s\'est form√© sur des millions d\'ann√©es. Il ne peut pas se renouveler √† l\'√©chelle humaine, c\'est donc une √©nergie fossile non-renouvelable.',
                        hint: 'Combien de temps faut-il pour que le p√©trole se forme ?',
                        tip: 'Au BAC : Fossile = millions d\'ann√©es de formation = non-renouvelable'
                    },
                    {
                        type: 'keyword',
                        keyword: 'empreinte carbone',
                        question: 'Quantit√© totale de CO‚ÇÇ √©mise par une activit√© ou un produit',
                        answer: 'empreinte carbone',
                        explanation: 'L\'empreinte carbone mesure les √©missions de CO‚ÇÇ (et √©quivalents) g√©n√©r√©es directement et indirectement par une activit√©, un produit ou une personne sur l\'ensemble de son cycle de vie.',
                        hint: 'Elle laisse une "trace" de CO‚ÇÇ !',
                        tip: 'Au BAC : Inclut √©missions directes ET indirectes (fabrication, transport, utilisation, fin de vie)'
                    },
                    {
                        type: 'qcm',
                        question: 'Quelle √©nergie √©met le moins de CO‚ÇÇ pour un trajet Paris-Bordeaux ?',
                        options: ['Avion (90 kg CO‚ÇÇ)', 'Voiture (40 kg CO‚ÇÇ)', 'Car (10 kg CO‚ÇÇ)', 'Train (2 kg CO‚ÇÇ)'],
                        answer: 3,
                        keyword: 'transport d√©carbon√©',
                        explanation: 'Le train √©met seulement 2 kg de CO‚ÇÇ, soit 45 fois moins que l\'avion ! Ceci gr√¢ce au mix √©lectrique fran√ßais (nucl√©aire + renouvelables) tr√®s peu √©metteur de CO‚ÇÇ.',
                        hint: 'Quel transport utilise l\'√©lectricit√© fran√ßaise ?',
                        tip: 'Au BAC : Retenir le facteur 45 entre train et avion en France'
                    },
                    {
                        type: 'vf',
                        question: 'L\'√©nergie nucl√©aire est consid√©r√©e comme renouvelable.',
                        answer: false,
                        keyword: '√©nergie nucl√©aire',
                        explanation: 'FAUX. L\'√©nergie nucl√©aire utilise l\'uranium, une ressource finie extraite de mines. Bien qu\'elle √©mette peu de CO‚ÇÇ, elle n\'est pas renouvelable car l\'uranium s\'√©puise.',
                        hint: 'L\'uranium se trouve-t-il en quantit√© infinie ?',
                        tip: 'Au BAC : Nucl√©aire = faible CO‚ÇÇ mais pas renouvelable (uranium fini)'
                    },
                    {
                        type: 'keyword',
                        keyword: 'transition √©nerg√©tique',
                        question: 'Passage des √©nergies fossiles vers des √©nergies plus durables',
                        answer: 'transition √©nerg√©tique',
                        explanation: 'La transition √©nerg√©tique d√©signe l\'√©volution du syst√®me √©nerg√©tique vers des sources plus durables (renouvelables) et plus efficaces, pour r√©duire les √©missions de GES.',
                        hint: 'C\'est un changement, une "transition" !',
                        tip: 'Au BAC : Transition = objectif neutralit√© carbone 2050'
                    },
                    {
                        type: 'qcm',
                        question: 'Combien de temps le CO‚ÇÇ reste-t-il dans l\'atmosph√®re ?',
                        options: ['10 ans', '50 ans', '100 ans', '500 ans'],
                        answer: 2,
                        keyword: 'persistance CO‚ÇÇ',
                        explanation: 'Le CO‚ÇÇ persiste environ 100 ans dans l\'atmosph√®re, c\'est pourquoi les √©missions d\'aujourd\'hui auront un impact climatique pendant un si√®cle.',
                        hint: 'C\'est l\'√©chelle d\'un si√®cle !',
                        tip: 'Au BAC : 100 ans = impact long terme des √©missions actuelles'
                    }
                ]
            },
            2: {
                title: "üßÆ Calculs √©nerg√©tiques",
                cards: [
                    {
                        type: 'qcm',
                        question: 'Une entreprise consomme 2400 tonnes CO‚ÇÇ/an. Pour atteindre -40%, combien doit-elle √©conomiser ?',
                        options: ['960 tonnes', '1440 tonnes', '600 tonnes', '800 tonnes'],
                        answer: 0,
                        keyword: 'calcul √©conomie CO‚ÇÇ',
                        explanation: '2400 √ó 40% = 960 tonnes √† √©conomiser. L\'objectif final sera 2400 - 960 = 1440 tonnes CO‚ÇÇ/an maximum.',
                        hint: 'Calculer 40% de 2400 !',
                        tip: 'Au BAC : Toujours d√©composer (pourcentage √ó valeur initiale)'
                    },
                    {
                        type: 'keyword',
                        keyword: 'retour sur investissement',
                        question: 'ROI = Temps n√©cessaire pour r√©cup√©rer un investissement gr√¢ce aux √©conomies',
                        answer: 'retour sur investissement',
                        explanation: 'ROI = Co√ªt d\'investissement √∑ √âconomies annuelles. Par exemple : 100 000‚Ç¨ investis pour 25 000‚Ç¨/an d\'√©conomies = ROI de 4 ans.',
                        hint: 'Combien de temps pour "retourner" l\'argent investi ?',
                        tip: 'Au BAC : ROI = Investissement √∑ √âconomies par an'
                    },
                    {
                        type: 'vf',
                        question: 'Isoler un b√¢timent pour 80 000‚Ç¨ avec 28 800‚Ç¨/an d\'√©conomies = ROI de 3,6 ans.',
                        answer: false,
                        keyword: 'calcul ROI',
                        explanation: 'FAUX. ROI = 80 000 √∑ 28 800 = 2,78 ans (‚âà 2,8 ans). Le calcul correct donne moins de 3 ans.',
                        hint: 'Divise 80 000 par 28 800 !',
                        tip: 'Au BAC : V√©rifier ses calculs, erreur de division fr√©quente'
                    },
                    {
                        type: 'qcm',
                        question: 'Budget 150 000‚Ç¨. Isolation (80k‚Ç¨) + LED (35k‚Ç¨) + Syst√®me (120k‚Ç¨) = ?',
                        options: ['235k‚Ç¨ (d√©passement)', '155k‚Ç¨ (d√©passement)', '115k‚Ç¨ (OK)', '200k‚Ç¨ (d√©passement)'],
                        answer: 2,
                        keyword: 'gestion budget',
                        explanation: 'Isolation + LED = 80 000 + 35 000 = 115 000‚Ç¨. C\'est sous le budget de 150 000‚Ç¨. Le syst√®me √† 120k‚Ç¨ ne peut pas √™tre ajout√©.',
                        hint: 'Additionne les deux premi√®res solutions !',
                        tip: 'Au BAC : Toujours v√©rifier la somme vs budget disponible'
                    },
                    {
                        type: 'keyword',
                        keyword: 'tonne √©quivalent CO‚ÇÇ',
                        question: 'Unit√© de mesure standardis√©e des gaz √† effet de serre',
                        answer: 'tonne √©quivalent CO‚ÇÇ',
                        explanation: 'La tonne √©quivalent CO‚ÇÇ permet de comparer tous les GES (CO‚ÇÇ, CH‚ÇÑ, N‚ÇÇO...) sur une base commune. Par exemple, 1 tonne de m√©thane = 25 tonnes √©q. CO‚ÇÇ.',
                        hint: 'Unit√© pour comparer tous les gaz √† effet de serre !',
                        tip: 'Au BAC : M√©thane 25x plus puissant que CO‚ÇÇ'
                    },
                    {
                        type: 'vf',
                        question: 'Une voiture √©lectrique a toujours une empreinte carbone nulle.',
                        answer: false,
                        keyword: 'ACV v√©hicule √©lectrique',
                        explanation: 'FAUX. La fabrication d\'une voiture √©lectrique √©met beaucoup de CO‚ÇÇ (batteries). Sur le cycle de vie complet, elle √©met moins qu\'une thermique mais pas z√©ro.',
                        hint: 'Et la fabrication de la batterie ?',
                        tip: 'Au BAC : Cycle de vie = fabrication + utilisation + fin de vie'
                    },
                    {
                        type: 'qcm',
                        question: 'Chauffage = 1200 tonnes CO‚ÇÇ. R√©duction de 30% = combien d\'√©conomies ?',
                        options: ['360 tonnes', '840 tonnes', '300 tonnes', '400 tonnes'],
                        answer: 0,
                        keyword: 'calcul pourcentage',
                        explanation: '1200 √ó 30% = 1200 √ó 0,30 = 360 tonnes CO‚ÇÇ √©conomis√©es. Consommation finale : 1200 - 360 = 840 tonnes.',
                        hint: '30% de 1200 = ?',
                        tip: 'Au BAC : 30% = 0,30 en d√©cimal'
                    },
                    {
                        type: 'keyword',
                        keyword: 'efficacit√© √©nerg√©tique',
                        question: 'Ratio entre l\'√©nergie utile et l\'√©nergie consomm√©e',
                        answer: 'efficacit√© √©nerg√©tique',
                        explanation: 'L\'efficacit√© √©nerg√©tique mesure la capacit√© √† produire le m√™me service (chauffage, √©clairage...) avec moins d\'√©nergie. Plus elle est √©lev√©e, mieux c\'est.',
                        hint: 'Faire plus avec moins d\'√©nergie !',
                        tip: 'Au BAC : Efficacit√© = r√©duction consommation √† service √©gal'
                    }
                ]
            },
            3: {
                title: "üåç Impact climatique", 
                cards: [
                    {
                        type: 'keyword',
                        keyword: 'effet de serre',
                        question: 'Ph√©nom√®ne naturel de r√©tention de chaleur par l\'atmosph√®re',
                        answer: 'effet de serre',
                        explanation: 'L\'effet de serre est vital : sans lui, la temp√©rature moyenne serait de -19¬∞C au lieu de +15¬∞C. Le probl√®me est son amplification par les activit√©s humaines.',
                        hint: 'Les gaz "retiennent" la chaleur comme une serre !',
                        tip: 'Au BAC : Effet naturel n√©cessaire mais amplifi√© par l\'homme'
                    },
                    {
                        type: 'vf',
                        question: 'Sans effet de serre, la Terre serait habitable normalement.',
                        answer: false,
                        keyword: 'temp√©rature terrestre',
                        explanation: 'FAUX. Sans effet de serre naturel, la temp√©rature moyenne serait de -19¬∞C au lieu de +15¬∞C actuels. La Terre serait une boule de glace inhabitable.',
                        hint: 'Quelle serait la temp√©rature sans effet de serre ?',
                        tip: 'Au BAC : -19¬∞C sans effet de serre, +15¬∞C avec effet naturel'
                    },
                    {
                        type: 'qcm',
                        question: 'Principal gaz √† effet de serre d\'origine humaine :',
                        options: ['Vapeur d\'eau', 'Dioxyde de carbone (CO‚ÇÇ)', 'M√©thane (CH‚ÇÑ)', 'Protoxyde d\'azote (N‚ÇÇO)'],
                        answer: 1,
                        keyword: 'CO‚ÇÇ anthropique',
                        explanation: 'Le CO‚ÇÇ repr√©sente environ 76% des √©missions humaines de GES. Il provient principalement de la combustion des √©nergies fossiles.',
                        hint: 'Quel gaz produit-on en br√ªlant charbon/p√©trole/gaz ?',
                        tip: 'Au BAC : CO‚ÇÇ = 76% des √©missions humaines de GES'
                    },
                    {
                        type: 'keyword',
                        keyword: 'r√©chauffement climatique',
                        question: 'Augmentation des temp√©ratures moyennes due aux activit√©s humaines',
                        answer: 'r√©chauffement climatique',
                        explanation: 'Le r√©chauffement climatique r√©sulte de l\'accumulation des GES qui amplifient l\'effet de serre. Cons√©quences : fonte des glaces, mont√©e des oc√©ans, √©v√©nements extr√™mes.',
                        hint: 'La plan√®te se "r√©chauffe" √† cause de l\'homme !',
                        tip: 'Au BAC : Cause = GES / Cons√©quences = fonte, mont√©e des eaux, extr√™mes'
                    },
                    {
                        type: 'vf',
                        question: 'Le m√©thane est 25 fois plus puissant que le CO‚ÇÇ comme gaz √† effet de serre.',
                        answer: true,
                        keyword: 'pouvoir r√©chauffant',
                        explanation: 'VRAI. Le m√©thane (CH‚ÇÑ) a un pouvoir de r√©chauffement 25 fois sup√©rieur au CO‚ÇÇ. Il provient de l\'agriculture (√©levage) et des d√©chets organiques.',
                        hint: 'Le m√©thane est beaucoup plus "puissant" !',
                        tip: 'Au BAC : CH‚ÇÑ = 25x CO‚ÇÇ / Sources = agriculture, d√©chets'
                    },
                    {
                        type: 'qcm',
                        question: '√âconomiser 960 tonnes CO‚ÇÇ √©quivaut aux √©missions de combien de voitures par an ?',
                        options: ['50 voitures', '200 voitures', '500 voitures', '1000 voitures'],
                        answer: 1,
                        keyword: '√©quivalence CO‚ÇÇ',
                        explanation: 'Une voiture √©met environ 4,8 tonnes CO‚ÇÇ/an. 960 √∑ 4,8 = 200 voitures. C\'est un excellent moyen de visualiser l\'impact.',
                        hint: 'Combien une voiture √©met-elle par an ?',
                        tip: 'Au BAC : 1 voiture ‚âà 5 tonnes CO‚ÇÇ/an (ordre de grandeur)'
                    },
                    {
                        type: 'keyword',
                        keyword: 'neutralit√© carbone',
                        question: '√âquilibre entre √©missions de CO‚ÇÇ et capacit√© d\'absorption',
                        answer: 'neutralit√© carbone',
                        explanation: 'Neutralit√© carbone = ne pas √©mettre plus de CO‚ÇÇ qu\'on peut en absorber (for√™ts, sols, technologies). Objectif France : 2050.',
                        hint: '√âquilibre parfait entre √©missions et absorption !',
                        tip: 'Au BAC : Objectif 2050 / Absorption = for√™ts + sols + technologie'
                    },
                    {
                        type: 'vf',
                        question: 'Les √©nergies renouvelables √©mettent z√©ro CO‚ÇÇ.',
                        answer: false,
                        keyword: 'ACV √©nergies renouvelables',
                        explanation: 'FAUX. Les renouvelables √©mettent tr√®s peu de CO‚ÇÇ en fonctionnement, mais leur fabrication (panneaux, √©oliennes) g√©n√®re des √©missions. Elles restent 10-40 fois moins √©mettrices que les fossiles.',
                        hint: 'Et la fabrication des panneaux solaires ?',
                        tip: 'Au BAC : Renouvelables = tr√®s faibles √©missions (fabrication comprise)'
                    }
                ]
            },
            4: {
                title: "üí° Solutions professionnelles",
                cards: [
                    {
                        type: 'qcm',
                        question: 'Pour une entreprise, quelle action a le plus d\'impact sur les √©conomies CO‚ÇÇ ?',
                        options: ['Changer l\'√©clairage', 'Isoler les b√¢timents', '√âteindre les ordinateurs', 'Tri des d√©chets'],
                        answer: 1,
                        keyword: 'priorisation efficacit√©',
                        explanation: 'L\'isolation des b√¢timents agit sur le chauffage/climatisation (50-60% des consommations). Impact maximum pour un co√ªt acceptable.',
                        hint: 'Quel poste repr√©sente le plus de consommation ?',
                        tip: 'Au BAC : Toujours attaquer le plus gros poste en premier'
                    },
                    {
                        type: 'keyword',
                        keyword: 'audit √©nerg√©tique',
                        question: 'Diagnostic complet des consommations d\'√©nergie d\'un b√¢timent',
                        answer: 'audit √©nerg√©tique',
                        explanation: 'L\'audit √©nerg√©tique analyse tous les postes de consommation, identifie les gisements d\'√©conomies et propose des solutions chiffr√©es avec leur rentabilit√©.',
                        hint: 'Diagnostic m√©dical mais pour l\'√©nergie !',
                        tip: 'Au BAC : Audit = pr√©alable obligatoire avant investissements'
                    },
                    {
                        type: 'vf',
                        question: 'Il faut toujours commencer par les actions les plus rentables (ROI court).',
                        answer: true,
                        keyword: 'strat√©gie investissement',
                        explanation: 'VRAI. En entreprise, prioriser les actions avec ROI < 3-4 ans permet de lib√©rer rapidement de la tr√©sorerie pour financer les actions suivantes.',
                        hint: 'Quel investissement r√©cup√®re l\'argent le plus vite ?',
                        tip: 'Au BAC : ROI court = cash flow positif rapide'
                    },
                    {
                        type: 'qcm',
                        question: 'Syst√®me de management de l\'√©nergie ISO 50001, quel est son objectif ?',
                        options: ['Certifier les b√¢timents', 'Am√©liorer en continu l\'efficacit√©', 'Contr√¥ler les factures', 'Former le personnel'],
                        answer: 1,
                        keyword: 'ISO 50001',
                        explanation: 'La norme ISO 50001 vise l\'am√©lioration continue de la performance √©nerg√©tique par une d√©marche syst√©matique : mesurer, analyser, am√©liorer.',
                        hint: 'ISO = norme d\'am√©lioration continue !',
                        tip: 'Au BAC : ISO 50001 = roue de Deming appliqu√©e √† l\'√©nergie'
                    },
                    {
                        type: 'keyword',
                        keyword: 'comptage divisionnaire',
                        question: 'Mesure s√©par√©e des consommations par zone ou usage',
                        answer: 'comptage divisionnaire',
                        explanation: 'Le comptage divisionnaire permet d\'identifier pr√©cis√©ment qui consomme quoi, pour cibler les actions et sensibiliser les utilisateurs.',
                        hint: 'Diviser la consommation totale en parties !',
                        tip: 'Au BAC : Mesurer = 1√®re √©tape pour √©conomiser'
                    },
                    {
                        type: 'vf',
                        question: 'Les certificats d\'√©conomies d\'√©nergie (CEE) permettent de financer des travaux.',
                        answer: true,
                        keyword: 'CEE financement',
                        explanation: 'VRAI. Les CEE obligent les fournisseurs d\'√©nergie √† financer des travaux d\'√©conomie d\'√©nergie chez leurs clients. Prime pouvant atteindre 20-30% du co√ªt.',
                        hint: 'Qui doit payer selon la r√©glementation ?',
                        tip: 'Au BAC : CEE = obligation fournisseurs = aide financi√®re'
                    },
                    {
                        type: 'qcm',
                        question: 'Dans un bureau, quelle mesure simple √©conomise le plus d\'√©nergie ?',
                        options: ['√âteindre les √©crans', 'Baisser chauffage 1¬∞C', 'LED partout', 'D√©brancher imprimantes'],
                        answer: 1,
                        keyword: '√©co-gestes bureau',
                        explanation: 'Baisser le chauffage de 1¬∞C = 6-8% d\'√©conomie sur le poste majoritaire. Plus d\'impact que tous les autres gestes r√©unis.',
                        hint: 'Quel poste consomme 60-70% en bureau ?',
                        tip: 'Au BAC : 1¬∞C en moins = 7% √©conomie chauffage'
                    },
                    {
                        type: 'keyword',
                        keyword: 'b√¢timent passif',
                        question: 'Construction tr√®s performante n√©cessitant tr√®s peu de chauffage',
                        answer: 'b√¢timent passif',
                        explanation: 'Le b√¢timent passif consomme < 15 kWh/m¬≤/an pour le chauffage gr√¢ce √† une isolation renforc√©e, √©tanch√©it√© parfaite et r√©cup√©ration de chaleur.',
                        hint: 'Il reste "passif", sans besoin d\'√©nergie !',
                        tip: 'Au BAC : Passif < 15 kWh/m¬≤/an (90% moins qu\'ancien)'
                    }
                ]
            },
            5: {
                title: "üèÜ Expertise compl√®te",
                cards: [
                    {
                        type: 'qcm',
                        question: 'La France vise la neutralit√© carbone. Quelle ann√©e ?',
                        options: ['2030', '2040', '2050', '2060'],
                        answer: 2,
                        keyword: 'objectif France 2050',
                        explanation: 'La France s\'est engag√©e √† atteindre la neutralit√© carbone d\'ici 2050, conform√©ment √† l\'Accord de Paris sur le climat.',
                        hint: 'Milieu du 21√®me si√®cle !',
                        tip: 'Au BAC : 2050 = objectif neutralit√© France et Europe'
                    },
                    {
                        type: 'keyword',
                        keyword: 'sobri√©t√© √©nerg√©tique',
                        question: 'R√©duction des consommations par changement de comportements',
                        answer: 'sobri√©t√© √©nerg√©tique',
                        explanation: 'La sobri√©t√© vise √† consommer moins en modifiant nos usages : baisser le chauffage, moins de trajets, appareils moins puissants. Compl√©mentaire √† l\'efficacit√©.',
                        hint: '√ätre "sobre" = consommer avec mod√©ration !',
                        tip: 'Au BAC : Sobri√©t√© (moins) ‚â† Efficacit√© (mieux)'
                    },
                    {
                        type: 'vf',
                        question: 'Le secteur du b√¢timent repr√©sente 40% de la consommation √©nerg√©tique fran√ßaise.',
                        answer: true,
                        keyword: 'consommation b√¢timent',
                        explanation: 'VRAI. Le b√¢timent (r√©sidentiel + tertiaire) consomme environ 40% de l\'√©nergie finale en France, d\'o√π l\'importance de la r√©novation √©nerg√©tique.',
                        hint: 'Quel secteur consomme le plus en France ?',
                        tip: 'Au BAC : B√¢timent 40% > Transport 30% > Industrie 20%'
                    },
                    {
                        type: 'qcm',
                        question: 'Principe de la cog√©n√©ration :',
                        options: ['Produire froid + chaud', '√âlectricit√© + chaleur', 'Solaire + √©olien', 'Gaz + √©lectricit√©'],
                        answer: 1,
                        keyword: 'cog√©n√©ration',
                        explanation: 'La cog√©n√©ration produit simultan√©ment √©lectricit√© et chaleur √† partir d\'une seule source d\'√©nergie. Rendement global > 80% vs 40% centrale classique.',
                        hint: 'Co-g√©n√©ration = g√©n√©rer deux √©nergies !',
                        tip: 'Au BAC : Cog√© = √©lectricit√© + chaleur = rendement double'
                    },
                    {
                        type: 'keyword',
                        keyword: '√©conomie circulaire',
                        question: 'Mod√®le limitant gaspillage par r√©emploi et recyclage',
                        answer: '√©conomie circulaire',
                        explanation: 'L\'√©conomie circulaire s\'oppose au mod√®le lin√©aire "extraire-produire-jeter". Elle vise √† maintenir les produits et mat√©riaux en usage le plus longtemps possible.',
                        hint: 'Mod√®le en cercle vs ligne droite !',
                        tip: 'Au BAC : Circulaire = r√©duire, r√©utiliser, recycler'
                    },
                    {
                        type: 'vf',
                        question: 'L\'hydrog√®ne vert est produit par √©lectrolyse avec √©lectricit√© renouvelable.',
                        answer: true,
                        keyword: 'hydrog√®ne vert',
                        explanation: 'VRAI. L\'hydrog√®ne vert utilise l\'√©lectrolyse (d√©composition H‚ÇÇO) aliment√©e par √©lectricit√© 100% renouvelable. Stockage d\'√©nergie et d√©carbonation industrie/transport lourd.',
                        hint: 'Vert = avec √©nergie renouvelable !',
                        tip: 'Au BAC : H2 vert (renouvelables) ‚â† H2 gris (gaz fossile)'
                    },
                    {
                        type: 'qcm',
                        question: 'Smart grid (r√©seau intelligent) permet principalement de :',
                        options: ['Augmenter production', 'Optimiser distribution', 'R√©duire tarifs', 'Stocker √©nergie'],
                        answer: 1,
                        keyword: 'smart grid',
                        explanation: 'Le smart grid optimise la distribution √©lectrique en temps r√©el selon production (variable avec renouvelables) et consommation. Efficacit√© et stabilit√© du r√©seau.',
                        hint: 'R√©seau "intelligent" qui s\'adapte !',
                        tip: 'Au BAC : Smart grid = adaptation production/consommation temps r√©el'
                    },
                    {
                        type: 'keyword',
                        keyword: 'mix √©nerg√©tique',
                        question: 'R√©partition des diff√©rentes sources dans la production d\'√©nergie',
                        answer: 'mix √©nerg√©tique',
                        explanation: 'Le mix √©nerg√©tique fran√ßais : 70% nucl√©aire, 20% renouvelables, 10% fossiles. D√©fi : augmenter les renouvelables tout en maintenant la s√©curit√© d\'approvisionnement.',
                        hint: 'M√©lange de toutes les sources d\'√©nergie !',
                        tip: 'Au BAC : Mix FR = 70% nucl√©aire (tr√®s d√©carbon√©)'
                    }
                ]
            }
        };
        
        // Variables globales
        let currentLevel = 1;
        let currentCardIndex = 0;
        let levelProgress = [0, 0, 0, 0, 0, 0]; // Index 0 non utilis√©
        let totalPoints = 0;
        let currentStreak = 0;
        let bestStreak = 0;
        let levelPoints = 0;
        let levelCorrect = 0;
        let levelErrors = [];
        let hintUsed = false;
        
        // D√©marrer un niveau
        function startLevel(level) {
            if (levelProgress[level - 1] < 60 && level > 1) return; // Niveau verrouill√©
            
            currentLevel = level;
            currentCardIndex = 0;
            levelPoints = 0;
            levelCorrect = 0;
            levelErrors = [];
            
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            
            document.getElementById('levelTitle').textContent = levels[level].title;
            
            showCard();
        }
        
        // Afficher une carte
        function showCard() {
            const card = levels[currentLevel].cards[currentCardIndex];
            const questionSection = document.getElementById('questionSection');
            
            document.getElementById('cardCounter').textContent = `${currentCardIndex + 1}/${levels[currentLevel].cards.length}`;
            document.getElementById('cardType').textContent = card.type.toUpperCase();
            document.getElementById('hintSection').classList.remove('visible');
            hintUsed = false;
            
            if (card.type === 'keyword') {
                questionSection.innerHTML = `
                    <div class="keyword-section">
                        <div class="keyword-display">${card.keyword}</div>
                        <p class="question-text">${card.question}</p>
                        <input type="text" class="keyword-input" id="keywordAnswer" placeholder="Votre r√©ponse..." onkeypress="if(event.key==='Enter') validateAnswer()">
                    </div>
                `;
                document.getElementById('keywordAnswer').focus();
            }
            else if (card.type === 'qcm') {
                let optionsHTML = card.options.map((opt, i) => `
                    <button class="option-btn" data-index="${i}" onclick="selectOption(this)">
                        <span class="option-letter">${String.fromCharCode(65 + i)}</span>
                        <span>${opt}</span>
                    </button>
                `).join('');
                
                questionSection.innerHTML = `
                    <p class="question-text">${card.question}</p>
                    <div class="options-container">${optionsHTML}</div>
                `;
            }
            else if (card.type === 'vf') {
                questionSection.innerHTML = `
                    <p class="question-text">${card.question}</p>
                    <div class="vf-container">
                        <button class="vf-btn vrai" onclick="selectVF(this, true)">‚úì VRAI</button>
                        <button class="vf-btn faux" onclick="selectVF(this, false)">‚úó FAUX</button>
                    </div>
                `;
            }
        }
        
        function selectOption(btn) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }
        
        function selectVF(btn, value) {
            document.querySelectorAll('.vf-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            btn.dataset.value = value;
        }
        
        function showHint() {
            const card = levels[currentLevel].cards[currentCardIndex];
            if (card.hint) {
                document.getElementById('hintText').innerHTML = `üí° <strong>Indice :</strong> ${card.hint}`;
                document.getElementById('hintSection').classList.add('visible');
                hintUsed = true;
            }
        }
        
        function validateAnswer() {
            const card = levels[currentLevel].cards[currentCardIndex];
            let isCorrect = false;
            let userAnswer = '';
            
            if (card.type === 'keyword') {
                userAnswer = document.getElementById('keywordAnswer').value.trim().toLowerCase();
                const normalize = str => str.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
                isCorrect = normalize(userAnswer) === normalize(card.answer) || 
                           userAnswer.includes(normalize(card.answer)) ||
                           normalize(card.answer).includes(userAnswer);
            }
            else if (card.type === 'qcm') {
                const selected = document.querySelector('.option-btn.selected');
                if (!selected) { alert('S√©lectionne une r√©ponse !'); return; }
                userAnswer = parseInt(selected.dataset.index);
                isCorrect = userAnswer === card.answer;
            }
            else if (card.type === 'vf') {
                const selected = document.querySelector('.vf-btn.selected');
                if (!selected) { alert('S√©lectionne VRAI ou FAUX !'); return; }
                userAnswer = selected.dataset.value === 'true';
                isCorrect = userAnswer === card.answer;
            }
            
            showFeedback(isCorrect, card);
        }
        
        function showFeedback(isCorrect, card) {
            const overlay = document.getElementById('feedbackOverlay');
            const feedbackCard = document.getElementById('feedbackCard');
            
            let points = 0;
            if (isCorrect) {
                points = hintUsed ? 5 : 10;
                levelCorrect++;
                currentStreak++;
                if (currentStreak > bestStreak) bestStreak = currentStreak;
                
                // Streak bonus
                if (currentStreak === 3) showStreakPopup('üî• 3 de suite !');
                else if (currentStreak === 5) showStreakPopup('üî•üî• 5 de suite !');
                else if (currentStreak === 10) showStreakPopup('üî•üî•üî• INCROYABLE !');
            } else {
                currentStreak = 0;
                levelErrors.push(card.keyword || card.question.replace(/<[^>]*>/g, '').substring(0, 50) + '...');
            }
            
            levelPoints += points;
            totalPoints += points;
            updateScoreDisplay();
            
            feedbackCard.className = 'feedback-card ' + (isCorrect ? 'correct' : 'incorrect');
            document.getElementById('feedbackIcon').textContent = isCorrect ? '‚úÖ' : '‚ùå';
            document.getElementById('feedbackTitle').textContent = isCorrect ? 
                (currentStreak >= 3 ? 'Excellent ! üî•' : 'Bravo !') : 'Pas tout √† fait...';
            document.getElementById('feedbackPoints').textContent = isCorrect ? `+${points} points` : '0 point';
            document.getElementById('feedbackPoints').style.display = isCorrect ? 'block' : 'none';
            
            document.getElementById('feedbackExplanation').innerHTML = `
                <h4>üìö Explication</h4>
                <p>${card.explanation}</p>
                <div class="keyword-box">üîë <span>${card.keyword}</span></div>
                ${card.tip ? `<div class="tip-box"><h5>üí° Astuce BAC</h5><p>${card.tip}</p></div>` : ''}
            `;
            
            overlay.classList.add('visible');
        }
        
        function showStreakPopup(text) {
            const popup = document.getElementById('streakPopup');
            popup.textContent = text;
            popup.style.display = 'block';
            setTimeout(() => { popup.style.display = 'none'; }, 1500);
        }
        
        function nextCard() {
            document.getElementById('feedbackOverlay').classList.remove('visible');
            currentCardIndex++;
            
            if (currentCardIndex >= levels[currentLevel].cards.length) {
                showResults();
            } else {
                showCard();
            }
        }
        
        function showResults() {
            const total = levels[currentLevel].cards.length;
            const percent = Math.round((levelCorrect / total) * 100);
            
            levelProgress[currentLevel] = Math.max(levelProgress[currentLevel], percent);
            
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');
            
            document.getElementById('resultsIcon').textContent = percent >= 80 ? 'üéâ' : percent >= 50 ? 'üëç' : 'üí™';
            document.getElementById('resultsTitle').textContent = percent >= 80 ? 'Niveau r√©ussi !' : percent >= 50 ? 'Pas mal !' : 'Continue !';
            document.getElementById('resultsScore').textContent = percent + '%';
            document.getElementById('correctCount').textContent = levelCorrect + '/' + total;
            document.getElementById('pointsEarned').textContent = '+' + levelPoints;
            document.getElementById('bestStreak').textContent = bestStreak;
            
            // Erreurs
            const errorsRecap = document.getElementById('errorsRecap');
            if (levelErrors.length > 0) {
                errorsRecap.style.display = 'block';
                document.getElementById('errorsList').innerHTML = levelErrors.map(e => `<li>üìù ${e}</li>`).join('');
            } else {
                errorsRecap.style.display = 'none';
            }
            
            // Confettis si r√©ussi
            if (percent >= 80) {
                createConfetti();
            }
            
            // Bouton niveau suivant
            document.getElementById('nextLevelBtn').style.display = (currentLevel < 5 && percent >= 60) ? 'flex' : 'none';
            
            updateHomeProgress();
        }
        
        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4CAF50', '#FFD700'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }
        
        function goHome() {
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('homeScreen').classList.add('active');
            updateHomeProgress();
        }
        
        function nextLevel() {
            if (currentLevel < 5) {
                startLevel(currentLevel + 1);
                document.getElementById('resultsScreen').classList.remove('active');
            }
        }
        
        function updateScoreDisplay() {
            document.getElementById('totalPoints').textContent = totalPoints;
            document.getElementById('currentStreak').textContent = currentStreak;
        }
        
        function updateHomeProgress() {
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`level${i}Percent`).textContent = levelProgress[i] + '%';
                document.getElementById(`level${i}Bar`).style.width = levelProgress[i] + '%';
                
                // Verrouillage des niveaux
                const card = document.getElementById(`level${i}Card`);
                if (i > 1 && levelProgress[i-1] < 60) {
                    if (card) card.classList.add('locked');
                } else {
                    if (card) card.classList.remove('locked');
                }
            }
        }
        
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            document.getElementById('themeToggle').textContent = 
                document.body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
        }
        
        // Init
        updateScoreDisplay();
        updateHomeProgress();
    </script>
</body>
</html>