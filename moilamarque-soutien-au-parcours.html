<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S√©ance 5 : Moi, la Marque - Image & R√©putation</title>
  <style>
    * { box-sizing: border-box; }

    html { font-size: 16px; }

    body {
      margin: 0; padding: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: #f5f3ff; color: #333;
      line-height: 1.6;
      overflow-x: hidden;
    }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      overflow: hidden;
      border: 1px solid #e0e7ff;
    }

    header {
      background: linear-gradient(135deg, #4f46e5, #4338ca);
      color: white;
      padding: 25px 30px;
      position: relative;
    }
    header h1 { margin: 0; font-size: 1.6rem; }
    header p { margin: 5px 0 0; opacity: 0.9; font-size: 0.95rem; }

    .font-controls{
      position: sticky;
      top: 10px;
      z-index: 50;
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding: 12px 12px 0;
      max-width: 1000px;
      margin: 0 auto;
    }
    .font-btn{
      border: none;
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 800;
      cursor: pointer;
      background: #4f46e5;
      color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
      touch-action: manipulation;
    }
    .font-btn:active{ transform: translateY(1px); }

    .progress-bar {
      display: flex;
      justify-content: space-between;
      padding: 20px 30px;
      background: #eef2ff;
      border-bottom: 1px solid #c7d2fe;
      gap: 10px;
      flex-wrap: wrap;
    }
    .step {
      display: flex; align-items: center; gap: 8px;
      font-size: 0.85rem;
      color: #818cf8; font-weight: 700;
      flex: 1 1 160px;
      min-width: 150px;
    }
    .step-circle {
      width: 28px; height: 28px; border-radius: 50%;
      background: #e0e7ff; color: #6366f1;
      display: flex; align-items: center; justify-content: center;
      flex: 0 0 28px;
    }
    .step.active { color: #4f46e5; }
    .step.active .step-circle { background: #4f46e5; color: white; }
    .step.completed .step-circle { background: #16a34a; color: white; }

    .page-content {
      padding: 30px 40px;
      display: none;
      animation: fadeIn 0.4s ease;
    }
    .page-content.active { display: block; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      color: #3730a3;
      font-size: 1.4rem;
      border-bottom: 2px solid #c7d2fe;
      padding-bottom: 10px;
      margin-top: 0;
    }
    h3 {
      color: #4f46e5;
      font-size: 1.1rem;
      margin-top: 25px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .social-check {
      background: #fafafa;
      border: 1px solid #e5e7eb;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .social-check input { width: 18px; height: 18px; accent-color: #4f46e5; }

    .translation-box {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 15px;
    }
    .bad-sms {
      background: #fee2e2;
      border: 1px solid #fecaca;
      padding: 15px;
      border-radius: 8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: #b91c1c;
      overflow-wrap: anywhere;
    }

    .pitch-builder {
      background: #f5f3ff;
      border: 2px dashed #818cf8;
      padding: 20px;
      border-radius: 10px;
    }
    .pitch-input {
      border: none;
      border-bottom: 2px solid #4f46e5;
      background: transparent;
      padding: 2px 5px;
      color: #3730a3;
      font-weight: 800;
      width: min(220px, 100%);
      text-align: center;
      font-size: 1rem;
      border-radius: 0;
    }
    .pitch-input:focus { outline: none; border-bottom-color: #ec4899; }

    .circle-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .network-circle {
      padding: 15px;
      border-radius: 8px;
      border-left: 5px solid;
    }
    .c1 { background: #eff6ff; border-color: #3b82f6; }
    .c2 { background: #f0fdf4; border-color: #22c55e; }
    .c3 { background: #fff7ed; border-color: #f97316; }

    textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      min-height: 80px;
      margin-top: 8px;
      font-family: inherit;
      font-size: 0.95rem;
      background: #f9fafb;
      resize: vertical;
    }
    textarea:focus { outline: none; border-color: #4f46e5; background: #fff; }

    .nav-buttons {
      padding: 20px 40px;
      background: #f9fafb;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn {
      padding: 10px 24px;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      font-size: 0.95rem;
      transition: 0.2s;
      touch-action: manipulation;
    }
    .btn-prev { background: #e5e7eb; color: #374151; }
    .btn-next { background: #4f46e5; color: white; }
    .btn-save { background: #16a34a; color: white; }
    .btn:hover { opacity: 0.95; transform: translateY(-1px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    .hidden { display: none; }

    @media (max-width: 820px) {
      .container { margin: 12px; }
      .page-content { padding: 20px 16px; }
      header { padding: 18px 16px; }
      .progress-bar { padding: 14px 16px; }
      .nav-buttons { padding: 14px 16px; }
      .translation-box { grid-template-columns: 1fr; }
    }

    @media print {
      body { background: #fff; }
      .font-controls, .nav-buttons { display: none !important; }
      header, .container { box-shadow: none; border: none; }
      .page-content { display: block !important; border-bottom: 1px dashed #ccc; padding-bottom: 20px; }
    }
  </style>
</head>

<body>
  <div class="font-controls" aria-label="Taille du texte">
    <button class="font-btn" type="button" onclick="changeSize(-1)">A-</button>
    <button class="font-btn" type="button" onclick="changeSize(1)">A+</button>
  </div>

  <div class="container">
    <header>
      <h1>S√©ance 5 : Moi, la Marque üíé</h1>
      <p>Construire mon Image Pro, ma R√©putation et mon R√©seau.</p>
    </header>

    <div class="progress-bar">
      <div class="step active" id="step1"><div class="step-circle">1</div><span>E-R√©putation</span></div>
      <div class="step" id="step2"><div class="step-circle">2</div><span>Codes Pro</span></div>
      <div class="step" id="step3"><div class="step-circle">3</div><span>Mon Pitch</span></div>
      <div class="step" id="step4"><div class="step-circle">4</div><span>Mon R√©seau</span></div>
    </div>

    <div class="page-content active" id="page1">
      <h2>Page 1 : Le Grand Nettoyage Num√©rique üßπ</h2>
      <p>Avant m√™me de te rencontrer, un patron regarde ton image en ligne. Que voit-il ?</p>

      <h3>1. Check-list de s√©curit√©</h3>
      <div class="social-check">
        <input type="checkbox" id="check_insta">
        <label for="check_insta">Mon compte Instagram/TikTok est en priv√© (ou ne contient rien de choquant).</label>
      </div>
      <div class="social-check">
        <input type="checkbox" id="check_mail">
        <label for="check_mail">J'ai une adresse mail s√©rieuse et pas une adresse fantaisie.</label>
      </div>
      <div class="social-check">
        <input type="checkbox" id="check_pp">
        <label for="check_pp">Ma photo WhatsApp est correcte (pas de geste choquant, pas de torse nu, etc.).</label>
      </div>

      <h3>2. Le test "Recherche"</h3>
      <label>Fais une recherche sur toi et observe ce qui ressort. Y a-t-il un contenu √† supprimer ou masquer ?</label>
      <textarea id="google_search" placeholder="R.A.S. ou bien : Je vois une vieille photo, un ancien compte, un commentaire..."></textarea>
    </div>

    <div class="page-content" id="page2">
      <h2>Page 2 : Le D√©codeur (Bilinguisme) üó£Ô∏è</h2>
      <p>En AGOrA, tu repr√©sentes l'entreprise. Tu dois savoir passer du langage "pote" au langage "pro".</p>

      <h3>1. Challenge Traduction</h3>
      <p>Tu dois pr√©venir ton responsable que tu es malade. Voici le SMS catastrophe :</p>

      <div class="translation-box">
        <div>
          <label>‚ùå Version catastrophe</label>
          <div class="bad-sms">
            Wesh madame j'suis malade la tete elle tourne de ouf jviens pas auj a+
          </div>
        </div>
        <div>
          <label>‚úÖ Version pro</label>
          <textarea id="traduction_pro" placeholder="Bonjour, je vous informe que..."></textarea>
        </div>
      </div>

      <h3>2. Le Dress Code</h3>
      <label>Pour un entretien, comment comptes-tu t'habiller ? D√©cris une tenue pr√©cise.</label>
      <textarea id="dress_code" placeholder="Ex : pantalon propre, haut uni, chaussures propres..."></textarea>
    </div>

    <div class="page-content" id="page3">
      <h2>Page 3 : Savoir se pr√©senter en 30 secondes ‚è±Ô∏è</h2>
      <p>Tu ne dis pas seulement "je cherche un stage" : tu expliques ce que tu sais faire.</p>

      <h3>1. Construis ton pitch AGOrA</h3>
      <p>Compl√®te pour cr√©er une phrase d'accroche.</p>

      <div class="pitch-builder">
        Bonjour, je suis en Seconde Bac Pro <strong>AGOrA</strong>.
        <br><br>
        Je me forme √† la gestion et au <input type="text" class="pitch-input" id="pitch_skill" placeholder="ex : num√©rique / accueil">.
        <br><br>
        Je suis une personne <input type="text" class="pitch-input" id="pitch_qualite" placeholder="ex : s√©rieuse / ponctuelle">.
        <br><br>
        Je peux vous aider sur <input type="text" class="pitch-input" id="pitch_aide" placeholder="ex : accueil / courrier"> pendant 3 semaines.
      </div>

      <p style="font-size: 0.85rem; color: #666; margin-top: 10px;">
        Astuce : apprends cette phrase et entra√Æne-toi √† la dire √† l‚Äôoral.
      </p>
    </div>

    <div class="page-content" id="page4">
      <h2>Page 4 : Mon R√©seau (La Carte au Tr√©sor) üï∏Ô∏è</h2>
      <p>Tu connais forc√©ment des personnes qui travaillent et qui peuvent te donner des pistes.</p>

      <div class="circle-container">
        <div class="network-circle c1">
          <strong>‚≠ï Cercle 1 : Famille et proches</strong>
          <p style="margin:5px 0 10px; font-size:0.85rem;">Personnes proches qui travaillent.</p>
          <textarea id="reseau_c1" style="min-height:50px;" placeholder="Ex : une personne qui travaille en mairie, en commerce, en entreprise..."></textarea>
        </div>

        <div class="network-circle c2">
          <strong>‚≠ï Cercle 2 : Voisins et connaissances</strong>
          <p style="margin:5px 0 10px; font-size:0.85rem;">Voisins, associations, clubs, commer√ßants, parents de camarades.</p>
          <textarea id="reseau_c2" style="min-height:50px;" placeholder="Ex : un commer√ßant, un coach, une association..."></textarea>
        </div>

        <div class="network-circle c3">
          <strong>‚≠ï Cercle 3 : Anciens lieux de stage</strong>
          <p style="margin:5px 0 10px; font-size:0.85rem;">Les entreprises qui t‚Äôont d√©j√† vu travailler.</p>
          <textarea id="reseau_c3" style="min-height:50px;" placeholder="Ex : entreprise du stage de 3e, contact pro, piste de secteur..."></textarea>
        </div>
      </div>

      <div style="margin-top: 30px; text-align: center;">
        <p><strong>Bravo</strong> Tu as un plan d‚Äôaction pour ton image, ton pitch et ton r√©seau.</p>
      </div>
    </div>

    <div class="nav-buttons">
      <button class="btn btn-prev" id="prevBtn" onclick="changePage(-1)" disabled>Pr√©c√©dent</button>
      <div style="flex-grow:1;"></div>
      <button class="btn btn-next" id="nextBtn" onclick="changePage(1)">Suivant</button>
      <button class="btn btn-save hidden" id="saveBtn" onclick="saveWork()">üíæ Enregistrer</button>
    </div>
  </div>

  <script>
    let currentSize = 16;

    function changeSize(delta) {
      currentSize += delta;
      if (currentSize < 12) currentSize = 12;
      if (currentSize > 24) currentSize = 24;
      document.documentElement.style.fontSize = currentSize + 'px';
      const h1 = document.querySelector('h1');
      if(h1) h1.style.fontSize = (2 * (currentSize/16)) + 'rem';
    }

    let currentPage = 1;
    const totalPages = 4;

    function changePage(direction) {
      document.getElementById(`page${currentPage}`).classList.remove('active');
      document.getElementById(`step${currentPage}`).classList.remove('active');
      if(direction > 0) document.getElementById(`step${currentPage}`).classList.add('completed');

      currentPage += direction;

      document.getElementById(`page${currentPage}`).classList.add('active');
      document.getElementById(`step${currentPage}`).classList.add('active');

      document.getElementById('prevBtn').disabled = (currentPage === 1);

      if (currentPage === totalPages) {
        document.getElementById('nextBtn').classList.add('hidden');
        document.getElementById('saveBtn').classList.remove('hidden');
      } else {
        document.getElementById('nextBtn').classList.remove('hidden');
        document.getElementById('nextBtn').innerText = "Suivant";
        document.getElementById('saveBtn').classList.add('hidden');
      }
      window.scrollTo(0, 0);
    }

    function saveWork() {
      document.querySelectorAll('input').forEach(i => {
        if(i.type === 'checkbox') {
          if(i.checked) i.setAttribute('checked', 'checked');
          else i.removeAttribute('checked');
        } else {
          i.setAttribute('value', i.value);
        }
      });
      document.querySelectorAll('textarea').forEach(t => t.textContent = t.value);

      const htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
      const blob = new Blob([htmlContent], {type: "text/html"});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = "Seance5_ImagePro.html";
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getFirestore, collection, addDoc, updateDoc, doc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAWdCMvOiAJln3eT9LIAQD3RWJUD0lQcLI",
      authDomain: "devoirs-pse.firebaseapp.com",
      projectId: "devoirs-pse",
      storageBucket: "devoirs-pse.appspot.com",
      messagingSenderId: "614730413904",
      appId: "1:614730413904:web:a5dd478af5de30f6bede55"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let currentDocId = null;
    let startTime = Date.now();

    function getIdentity() { return localStorage.getItem("cockpit_student_id"); }

    async function demarrerVisite() {
      try {
        let userCode = getIdentity() || "ANONYME";
        let userClass = localStorage.getItem("cockpit_student_class") || "VISITEUR";
        const pageName = document.title || window.location.pathname.split("/").pop();
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);

        const ref = await addDoc(collection(db, "statistiques_usage"), {
          page: pageName,
          userCode: userCode,
          classe: userClass,
          device: isMobile ? "Mobile" : "Desktop",
          action: "Consultation",
          duree: 0,
          timestamp: serverTimestamp(),
          date: new Date().toISOString()
        });

        currentDocId = ref.id;

        setInterval(async () => {
          if (currentDocId && document.visibilityState === "visible") {
            try {
              await updateDoc(doc(db, "statistiques_usage", currentDocId), {
                duree: Math.floor((Date.now() - startTime) / 1000)
              });
            } catch (e) {}
          }
        }, 10000);

      } catch (e) { console.warn("Erreur Tracker", e); }
    }

    demarrerVisite();
  </script>
</body>
</html>
