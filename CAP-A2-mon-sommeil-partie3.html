Nom du fichier HTML : a2-activite3-manque-sommeil.html

Images : sylvie.jpg, catherine.jpg, eric.jpg

<!doctype html>
<html lang=fr>
<head>
  <meta charset=utf-8>
  <meta name=viewport content=width=device-width,initial-scale=1>
  <title>Module A2 • Activité 3 • Conséquences du manque de sommeil</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#101a2f;
      --text:#f2f5ff;
      --muted:#c7d2fe;
      --line:rgba(255,255,255,.14);
      --ok:#22c55e;
      --no:#ef4444;
      --accent:#60a5fa;
      --focus:#fbbf24;

      --scale:1;
      --spacing:0;
      --lineh:1.4;
      --font: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      --imgzoom:1;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      background:linear-gradient(180deg,#081026 0%, #0b1220 55%, #081026 100%);
      color:var(--text);
      line-height:var(--lineh);
      font-size:calc(18px * var(--scale));
      letter-spacing:calc(0px + var(--spacing));
    }
    .skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip:focus{
      left:12px;top:12px;width:auto;height:auto;z-index:1000;
      background:var(--focus);color:#111827;padding:10px 12px;border-radius:12px;
      border:0;outline:4px solid rgba(251,191,36,.35)
    }

    header{padding:18px 16px 12px;max-width:1100px;margin:0 auto}
    .badgeRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px}
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      background:rgba(96,165,250,.14);
      border:1px solid rgba(96,165,250,.35);
      padding:8px 12px;border-radius:999px;
      font-weight:900
    }
    .badge small{font-weight:800;color:var(--muted)}
    h1{margin:8px 0;font-size:calc(32px * var(--scale));letter-spacing:.2px}
    .objective{
      background:rgba(255,255,255,.06);
      border:1px solid var(--line);
      padding:12px 14px;border-radius:16px;
      color:var(--muted);
      max-width:1100px;margin:0 auto
    }

    main{max-width:1100px;margin:0 auto;padding:14px 16px 28px}
    .sectionTitle{margin:18px 0 10px;font-size:calc(24px * var(--scale));font-weight:900}
    .card{
      background:rgba(16,26,47,.92);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.28);
      margin:10px 0 14px
    }

    .a11yBar{max-width:1100px;margin:12px auto 0;padding:0 16px}
    .a11yCard{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;padding:12px;display:grid;gap:12px
    }
    .a11yRow{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
    .a11yTitle{font-weight:900;font-size:calc(18px * var(--scale))}
    .a11yControls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .toggle{
      display:inline-flex;gap:10px;align-items:center;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.04)
    }
    .toggle input{width:calc(22px * var(--scale));height:calc(22px * var(--scale));accent-color:var(--accent)}
    .toggle span{font-weight:900;font-size:calc(16px * var(--scale))}
    .sliderBox{
      display:flex;flex-direction:column;gap:6px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.04);
      min-width:260px
    }
    .sliderBox label{font-weight:900;font-size:calc(16px * var(--scale))}
    .sliderLine{display:flex;gap:10px;align-items:center;justify-content:space-between}
    input[type=range]{width:100%;accent-color:var(--accent)}
    .val{min-width:74px;text-align:right;font-weight:900;color:var(--muted);font-size:calc(16px * var(--scale))}
    .smallHint{color:var(--muted);font-size:calc(15px * var(--scale))}
    body.dys{--font: Verdana, Arial, system-ui, sans-serif;--spacing:.6px;--lineh:1.65}

    .scoreBar{max-width:1100px;margin:0 auto;padding:0 16px}
    .scoreCard{
      display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;padding:12px
    }
    .scoreLeft{display:flex;gap:10px;align-items:center;flex-wrap:wrap;font-weight:900}
    .scoreNum{
      background:rgba(34,197,94,.12);
      border:1px solid rgba(34,197,94,.35);
      padding:6px 10px;border-radius:999px
    }
    .scoreHint{color:var(--muted);font-weight:800}

    .gridPerson{
      display:grid;
      grid-template-columns:1fr;
      gap:14px;
      align-items:start;
    }
    @media (min-width:860px){
      .gridPerson{grid-template-columns:320px 1fr}
    }

    .imgWrap{
      width:100%;
      max-width:320px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.16);
      background:#0b1220;
      margin:0 auto;
      image-rendering: pixelated;
    }
    .imgWrap img{
      width:100%;
      height:auto;
      display:block;
      transform-origin:center;
      transform:scale(var(--imgzoom));
    }

    .nameLine{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
      font-weight:900;
      margin:0 0 8px 0;
      font-size:calc(20px * var(--scale));
    }
    .rolePill{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      padding:6px 10px;border-radius:999px;
      font-weight:900;color:var(--muted);
      font-size:calc(14px * var(--scale));
    }

    .textBox{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      padding:12px;
      color:var(--muted);
    }

    .taskTitle{
      margin:14px 0 6px 0;
      font-weight:900;
      font-size:calc(18px * var(--scale));
      color:var(--text);
    }

    .checkGrid{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (min-width:860px){
      .checkGrid.two{grid-template-columns:1fr 1fr}
    }

    .group{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      padding:12px;
      position:relative;
    }
    .groupHead{
      display:flex;gap:10px;align-items:flex-start;justify-content:space-between;
      margin-bottom:8px;
    }
    .groupHead h3{
      margin:0;
      font-size:calc(18px * var(--scale));
      font-weight:900;
    }
    .mark{
      min-width:40px;
      display:flex;
      justify-content:flex-end;
      font-size:calc(20px * var(--scale));
      font-weight:900;
    }
    .group.ok{border-color:rgba(34,197,94,.55)}
    .group.no{border-color:rgba(239,68,68,.55)}
    .group.ok .mark{color:var(--ok)}
    .group.no .mark{color:var(--no)}

    .opt{
      display:flex;gap:12px;align-items:flex-start;
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
    }
    .opt input{
      width:calc(22px * var(--scale));
      height:calc(22px * var(--scale));
      accent-color:var(--accent);
      margin-top:2px;
      flex:0 0 auto;
    }
    .opt label{display:block;cursor:pointer;width:100%}
    .opt:focus-within{
      outline:4px solid rgba(251,191,36,.35);
      border-color:rgba(251,191,36,.45);
    }

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;align-items:center}
    button{
      font-size:calc(18px * var(--scale));
      padding:12px 14px;border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(96,165,250,.16);
      color:var(--text);cursor:pointer;font-weight:900
    }
    button.secondary{background:rgba(255,255,255,.06)}
    button:focus{outline:4px solid rgba(251,191,36,.35);border-color:rgba(251,191,36,.45)}

    .feedback{
      margin-top:12px;
      padding:12px;border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.04)
    }
    .feedback.ok{border-color:rgba(34,197,94,.55)}
    .feedback.no{border-color:rgba(239,68,68,.55)}

    details summary{cursor:pointer;font-weight:900;color:var(--text);outline:none}
    details summary:focus{outline:4px solid rgba(251,191,36,.35);border-radius:12px}
    .hint{margin-top:10px;color:var(--muted)}

    @media (prefers-reduced-motion: reduce){*{scroll-behavior:auto}}
  </style>
</head>

<body>
  <a class=skip href=#contenu>Aller au contenu</a>

  <header>
    <div class=badgeRow>
      <div class=badge>Module A2</div>
      <div class=badge>Compétences <small>• C1 et C2</small></div>
      <div class=badge>Activité 3</div>
    </div>
    <h1>Les conséquences du manque de sommeil</h1>
    <div class=objective>
      <strong>Objectif</strong><br>
      Repérer des effets du manque de sommeil et des conséquences sociales et professionnelles.
    </div>
  </header>

  <div class=a11yBar aria-label=Options daccessibilité>
    <div class=a11yCard>
      <div class=a11yRow>
        <div class=a11yTitle>Options pour mieux lire</div>
        <div class=a11yControls>
          <label class=toggle>
            <input id=toggleDys type=checkbox>
            <span>Mode dys</span>
          </label>

          <div class=sliderBox>
            <label for=fontScale>Taille du texte</label>
            <div class=sliderLine>
              <input id=fontScale type=range min=100 max=170 value=100 step=5>
              <div class=val id=fontScaleVal>100%</div>
            </div>
            <div class=smallHint>Augmente si tu vois mal</div>
          </div>

          <div class=sliderBox>
            <label for=imgZoom>Zoom images</label>
            <div class=sliderLine>
              <input id=imgZoom type=range min=100 max=220 value=100 step=10>
              <div class=val id=imgZoomVal>100%</div>
            </div>
            <div class=smallHint>Pour agrandir les personnages</div>
          </div>

          <button type=button class=secondary id=btnResetA11y>Réinitialiser</button>
        </div>
      </div>
    </div>
  </div>

  <div class=scoreBar>
    <div class=scoreCard aria-label=Score>
      <div class=scoreLeft>
        <div class=scoreNum id=scoreText>Score 0 sur 7</div>
        <div class=scoreHint>Le score augmente quand une partie devient juste</div>
      </div>
      <div class=actions style=margin:0>
        <button type=button class=secondary id=btnResetAll>Tout réinitialiser</button>
      </div>
    </div>
  </div>

  <main id=contenu>
    <h2 class=sectionTitle>Consigne</h2>
    <section class=card aria-label=Consigne>
      <div class=textBox>
        Lis chaque témoignage. Puis coche les bonnes cases.
      </div>
      <div class=help style="margin-top:12px">
        <details>
          <summary>Aide</summary>
          <div class=hint>
            Effets = ce que la personne ressent dans son corps ou dans sa tête.<br>
            Conséquences sociales = avec les autres, la famille, les amis.<br>
            Conséquences professionnelles = au travail, efficacité, accidents, arrêts.
          </div>
        </details>
      </div>
    </section>

    <h2 class=sectionTitle>Témoignage 1</h2>
    <section class=card aria-label="Témoignage Sylvie">
      <div class=gridPerson>
        <div>
          <div class=imgWrap>
            <img src=sylvie.jpg alt="Sylvie, personne en tenue professionnelle, debout, bras croisés, souriante.">
          </div>
        </div>

        <div>
          <div class=nameLine>
            Sylvie <span class=rolePill>ASH à l hôpital</span>
          </div>

          <div class=textBox>
            Je dors très mal. Je suis fatiguée. Au travail, je suis moins attentive. J ai glissé sur un sol mouillé et je me suis blessée. J ai été arrêtée.
          </div>

          <div class=taskTitle>1) Effets</div>
          <div class="checkGrid two group" id=g1>
            <div class=groupHead>
              <h3>Coche les bons effets</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=s1e1 type=checkbox value=A>
              <label for=s1e1>Troubles du sommeil</label>
            </div>
            <div class=opt>
              <input id=s1e2 type=checkbox value=B>
              <label for=s1e2>Fatigue</label>
            </div>
            <div class=opt>
              <input id=s1e3 type=checkbox value=C>
              <label for=s1e3>Baisse de la vigilance</label>
            </div>
            <div class=opt>
              <input id=s1e4 type=checkbox value=D>
              <label for=s1e4>Vision parfaite</label>
            </div>
            <div class=opt>
              <input id=s1e5 type=checkbox value=E>
              <label for=s1e5>Appétit normal et stable</label>
            </div>
          </div>

          <div class=taskTitle>2) Conséquence professionnelle</div>
          <div class="checkGrid two group" id=g2>
            <div class=groupHead>
              <h3>Coche la bonne conséquence au travail</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=s1p1 type=checkbox value=A>
              <label for=s1p1>Accident du travail et arrêt</label>
            </div>
            <div class=opt>
              <input id=s1p2 type=checkbox value=B>
              <label for=s1p2>Promotion immédiate</label>
            </div>
            <div class=opt>
              <input id=s1p3 type=checkbox value=C>
              <label for=s1p3>Moins de devoirs à la maison</label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <h2 class=sectionTitle>Témoignage 2</h2>
    <section class=card aria-label="Témoignage Catherine">
      <div class=gridPerson>
        <div>
          <div class=imgWrap>
            <img src=catherine.jpg alt="Catherine, personne en tenue de travail, debout de face, bras le long du corps.">
          </div>
        </div>

        <div>
          <div class=nameLine>
            Catherine <span class=rolePill>Travail de nuit</span>
          </div>

          <div class=textBox>
            Je suis très fatiguée. Je suis souvent de mauvaise humeur. Au travail, je suis moins efficace et je me dispute avec des collègues. À la maison, je vois moins ma famille.
          </div>

          <div class=taskTitle>3) Effets</div>
          <div class="checkGrid two group" id=g3>
            <div class=groupHead>
              <h3>Coche les bons effets</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=c1e1 type=checkbox value=A>
              <label for=c1e1>Fatigue</label>
            </div>
            <div class=opt>
              <input id=c1e2 type=checkbox value=B>
              <label for=c1e2>Mauvaise humeur</label>
            </div>
            <div class=opt>
              <input id=c1e3 type=checkbox value=C>
              <label for=c1e3>Énergie très élevée</label>
            </div>
            <div class=opt>
              <input id=c1e4 type=checkbox value=D>
              <label for=c1e4>Sommeil parfait</label>
            </div>
          </div>

          <div class=taskTitle>4) Conséquences sociales</div>
          <div class="checkGrid two group" id=g4>
            <div class=groupHead>
              <h3>Coche les bonnes conséquences sociales</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=c1s1 type=checkbox value=A>
              <label for=c1s1>Disputes avec les collègues</label>
            </div>
            <div class=opt>
              <input id=c1s2 type=checkbox value=B>
              <label for=c1s2>Voit moins sa famille</label>
            </div>
            <div class=opt>
              <input id=c1s3 type=checkbox value=C>
              <label for=c1s3>Plus de sorties avec les amis</label>
            </div>
            <div class=opt>
              <input id=c1s4 type=checkbox value=D>
              <label for=c1s4>Vie familiale plus simple</label>
            </div>
          </div>

          <div class=taskTitle>5) Conséquence professionnelle</div>
          <div class="checkGrid two group" id=g5>
            <div class=groupHead>
              <h3>Coche la bonne conséquence au travail</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=c1p1 type=checkbox value=A>
              <label for=c1p1>Moins d efficacité au travail</label>
            </div>
            <div class=opt>
              <input id=c1p2 type=checkbox value=B>
              <label for=c1p2>Meilleure concentration</label>
            </div>
            <div class=opt>
              <input id=c1p3 type=checkbox value=C>
              <label for=c1p3>Plus de vacances scolaires</label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <h2 class=sectionTitle>Témoignage 3</h2>
    <section class=card aria-label="Témoignage Éric">
      <div class=gridPerson>
        <div>
          <div class=imgWrap>
            <img src=eric.jpg alt="Éric, personne en tenue de travail, debout, bras croisés, souriant.">
          </div>
        </div>

        <div>
          <div class=nameLine>
            Éric <span class=rolePill>Travail de nuit</span>
          </div>

          <div class=textBox>
            Je mange à des heures irrégulières et je grignote. J ai du mal à digérer. Je suis fatigué et j ai souvent des maux de tête. Je sors moins avec mes amis et j ai arrêté le sport.
          </div>

          <div class=taskTitle>6) Effets</div>
          <div class="checkGrid two group" id=g6>
            <div class=groupHead>
              <h3>Coche les bons effets</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=e1e1 type=checkbox value=A>
              <label for=e1e1>Problèmes digestifs</label>
            </div>
            <div class=opt>
              <input id=e1e2 type=checkbox value=B>
              <label for=e1e2>Fatigue</label>
            </div>
            <div class=opt>
              <input id=e1e3 type=checkbox value=C>
              <label for=e1e3>Maux de tête</label>
            </div>
            <div class=opt>
              <input id=e1e4 type=checkbox value=D>
              <label for=e1e4>Déséquilibre alimentaire et grignotage</label>
            </div>
            <div class=opt>
              <input id=e1e5 type=checkbox value=E>
              <label for=e1e5>Force physique augmentée</label>
            </div>
          </div>

          <div class=taskTitle>7) Conséquences sociales</div>
          <div class="checkGrid two group" id=g7>
            <div class=groupHead>
              <h3>Coche les bonnes conséquences sociales</h3>
              <div class=mark aria-hidden=true></div>
            </div>

            <div class=opt>
              <input id=e1s1 type=checkbox value=A>
              <label for=e1s1>Sort moins avec ses amis</label>
            </div>
            <div class=opt>
              <input id=e1s2 type=checkbox value=B>
              <label for=e1s2>Arrêt du sport</label>
            </div>
            <div class=opt>
              <input id=e1s3 type=checkbox value=C>
              <label for=e1s3>Plus de soirées que avant</label>
            </div>
            <div class=opt>
              <input id=e1s4 type=checkbox value=D>
              <label for=e1s4>Plus de temps libre le soir</label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class=card aria-label=Validation>
      <div class=actions>
        <button type=button id=btnCheck>Vérifier</button>
        <button type=button class=secondary id=btnClear>Effacer mes choix</button>
      </div>
      <div id=fb class=feedback aria-live=polite>Choisis puis clique sur Vérifier.</div>
    </section>
  </main>

  <script>
    (function(){
      var root=document.documentElement;
      var body=document.body;

      var totalGroups=7;
      var scoreKey='a2_act3_score_v1';
      var scoredKey='a2_act3_scored_v1';

      var expected = {
        g1:['A','B','C'],
        g2:['A'],
        g3:['A','B'],
        g4:['A','B'],
        g5:['A'],
        g6:['A','B','C','D'],
        g7:['A','B']
      };

      function getScore(){
        var v=parseInt(localStorage.getItem(scoreKey)||'0',10);
        if(isNaN(v)) v=0;
        return v;
      }
      function setScore(v){
        localStorage.setItem(scoreKey,String(v));
        updateScoreUI();
      }
      function getScoredMap(){
        try{
          return JSON.parse(localStorage.getItem(scoredKey)||'{}') || {};
        }catch(e){
          return {};
        }
      }
      function setScoredMap(obj){
        localStorage.setItem(scoredKey, JSON.stringify(obj));
      }
      function updateScoreUI(){
        document.getElementById('scoreText').textContent='Score '+getScore()+' sur '+totalGroups;
      }

      function selectedValues(groupId){
        var g=document.getElementById(groupId);
        var inputs=g.querySelectorAll('input[type=checkbox]');
        var vals=[];
        for(var i=0;i<inputs.length;i++){
          if(inputs[i].checked) vals.push(inputs[i].value);
        }
        return vals.sort();
      }

      function sameArray(a,b){
        if(a.length!==b.length) return false;
        for(var i=0;i<a.length;i++){
          if(a[i]!==b[i]) return false;
        }
        return true;
      }

      function markGroup(groupId, isOk){
        var g=document.getElementById(groupId);
        g.classList.remove('ok'); g.classList.remove('no');
        var mark=g.querySelector('.mark');
        if(isOk===null){
          if(mark) mark.textContent='';
          return;
        }
        if(isOk){
          g.classList.add('ok');
          if(mark) mark.textContent='✓';
        }else{
          g.classList.add('no');
          if(mark) mark.textContent='✗';
        }
      }

      function checkAll(){
        var any=false;
        var okCount=0;
        var done=0;

        var scoredMap=getScoredMap();

        for(var gid in expected){
          var sel=selectedValues(gid);
          if(sel.length===0){
            markGroup(gid,null);
            continue;
          }
          any=true;
          done++;
          var ok=sameArray(sel, expected[gid].slice().sort());
          markGroup(gid, ok);
          if(ok){
            okCount++;
            if(scoredMap[gid]!==1){
              scoredMap[gid]=1;
              setScore(getScore()+1);
            }
          }
        }

        setScoredMap(scoredMap);

        var fb=document.getElementById('fb');
        fb.classList.remove('ok'); fb.classList.remove('no');

        if(!any){
          fb.textContent='Choisis puis clique sur Vérifier.';
          return;
        }

        if(done<totalGroups){
          fb.classList.add('no');
          fb.textContent='Tu as répondu à '+done+' partie(s). Score de cette vérification : '+okCount+' juste(s).';
          return;
        }

        if(okCount===totalGroups){
          fb.classList.add('ok');
          fb.textContent='Bravo. Tout est correct.';
        }else{
          fb.classList.add('no');
          fb.textContent='Il reste des erreurs. Corrige les blocs en rouge puis revérifie.';
        }
      }

      function clearAll(){
        for(var gid in expected){
          var g=document.getElementById(gid);
          var inputs=g.querySelectorAll('input[type=checkbox]');
          for(var i=0;i<inputs.length;i++) inputs[i].checked=false;
          markGroup(gid,null);
        }
        var fb=document.getElementById('fb');
        fb.classList.remove('ok'); fb.classList.remove('no');
        fb.textContent='Choisis puis clique sur Vérifier.';
      }

      function resetAll(){
        localStorage.setItem(scoreKey,'0');
        localStorage.setItem(scoredKey,'{}');
        updateScoreUI();
        clearAll();
      }

      document.getElementById('btnCheck').addEventListener('click', checkAll);
      document.getElementById('btnClear').addEventListener('click', clearAll);
      document.getElementById('btnResetAll').addEventListener('click', resetAll);

      /* A11Y */
      var toggleDys=document.getElementById('toggleDys');
      var fontScale=document.getElementById('fontScale');
      var fontScaleVal=document.getElementById('fontScaleVal');
      var imgZoom=document.getElementById('imgZoom');
      var imgZoomVal=document.getElementById('imgZoomVal');
      var btnResetA11y=document.getElementById('btnResetA11y');

      function applyA11y(){
        var s=parseInt(fontScale.value,10)/100;
        root.style.setProperty('--scale',String(s));
        fontScaleVal.textContent=fontScale.value+'%';

        var z=parseInt(imgZoom.value,10)/100;
        root.style.setProperty('--imgzoom',String(z));
        imgZoomVal.textContent=imgZoom.value+'%';

        if(toggleDys.checked){ body.classList.add('dys'); }
        else{ body.classList.remove('dys'); }

        localStorage.setItem('a2_sleep_dys', toggleDys.checked ? '1' : '0');
        localStorage.setItem('a2_sleep_scale', fontScale.value);
        localStorage.setItem('a2_sleep_imgzoom', imgZoom.value);
      }

      function loadA11y(){
        var dys=localStorage.getItem('a2_sleep_dys');
        var scale=localStorage.getItem('a2_sleep_scale');
        var zoom=localStorage.getItem('a2_sleep_imgzoom');

        toggleDys.checked=(dys==='1');
        if(scale) fontScale.value=scale;
        if(zoom) imgZoom.value=zoom;

        applyA11y();
      }

      btnResetA11y.addEventListener('click',function(){
        toggleDys.checked=false;
        fontScale.value=100;
        imgZoom.value=100;
        applyA11y();
      });

      toggleDys.addEventListener('change',applyA11y);
      fontScale.addEventListener('input',applyA11y);
      imgZoom.addEventListener('input',applyA11y);

      updateScoreUI();
      loadA11y();
    })();
  </script>
</body>
</html>
