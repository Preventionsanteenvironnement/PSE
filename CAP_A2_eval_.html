<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module A2 : Le Sommeil - Ã‰valuation Accessible</title>
    <style>
        :root { --bg-color: #ffffff; --text-color: #000000; --font-size: 1.2rem; }
        .high-contrast { --bg-color: #000000; --text-color: #ffff00; }
        
        body { 
            font-family: Arial, sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-color);
            font-size: var(--font-size);
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .accessibility-bar {
            position: sticky; top: 0; background: #f0f0f0; padding: 15px;
            display: flex; gap: 10px; z-index: 1000; border: 2px solid #000;
            flex-wrap: wrap; justify-content: center; margin-bottom: 20px;
        }
        .btn-acc { padding: 10px; cursor: pointer; font-weight: bold; border: 2px solid #000; background: #fff; border-radius: 5px; }

        h1 { text-align: center; text-transform: uppercase; border-bottom: 4px solid var(--text-color); margin-bottom: 30px; }

        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background: #fff; color: #000; }
        th, td { border: 2px solid #000; padding: 10px; text-align: center; font-size: 0.9em; }

        .section-title { background-color: #333; color: #fff; padding: 10px; margin-top: 40px; text-transform: uppercase; border-radius: 5px; }
        .doc-header { font-weight: bold; color: #d35400; margin-top: 15px; padding: 10px; background-color: #fff5f0; border-left: 6px solid #d35400; }
        
        .question-block { 
            margin: 25px 0; padding: 20px; border: 2px solid var(--text-color); 
            background-color: rgba(0, 0, 0, 0.03); border-radius: 12px;
        }

        .indicator { float: right; font-weight: bold; color: blue; background: #eef2f3; padding: 5px; border-radius: 5px; }

        .img-container { text-align: center; margin: 20px 0; }
        .img-container img { max-width: 85%; height: auto; border: 2px solid var(--text-color); border-radius: 5px; }

        .audio-btn { background: #4CAF50; color: white; border: none; padding: 8px 12px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; }

        .qcm-option { margin: 15px 0; display: flex; align-items: center; }
        input[type="checkbox"], input[type="radio"] { width: 30px; height: 30px; margin-right: 15px; cursor: pointer; }
        
        /* Textarea auto-extensibles */
        textarea { 
            width: 100%; font-size: 1.2rem; padding: 12px; border: 2px solid #000; 
            background: #fff; color: #000; margin-top: 10px; border-radius: 5px;
            resize: none; overflow: hidden; min-height: 50px; font-family: inherit;
        }

        .points-input { width: 60px; text-align: center; border: 3px solid blue; font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="accessibility-bar">
    <button class="btn-acc" onclick="changeFontSize(0.1)">A+ Texte Plus Grand</button>
    <button class="btn-acc" onclick="changeFontSize(-0.1)">A- Texte Plus Petit</button>
    <button class="btn-acc" onclick="toggleContrast()">ðŸŒ“ Mode Contraste</button>
    <button class="btn-acc" style="background: #2196F3; color: white;" onclick="window.print()">ðŸ’¾ Enregistrer / Imprimer</button>
</div>

<div class="container">
    <h1>Module A2 : Le Sommeil - Ã‰valuation</h1>

    <table>
        <thead>
            <tr>
                <th>CompÃ©tence</th>
                <th>IntitulÃ©</th>
                <th>BarÃ¨me</th>
                <th>Points obtenus</th>
            </tr>
        </thead>
        <tbody>
            <tr><td><b>C1</b></td><td style="text-align:left">Traiter une information</td><td>/ 7</td><td id="res-C1">0</td></tr>
            <tr><td><b>C2</b></td><td style="text-align:left">Appliquer une mÃ©thode d'analyse</td><td>/ 5</td><td id="res-C2">0</td></tr>
            <tr><td><b>C4</b></td><td style="text-align:left">Proposer une solution</td><td>/ 6</td><td id="res-C4">0</td></tr>
            <tr><td><b>C6</b></td><td style="text-align:left">Communiquer Ã  l'Ã©crit</td><td>/ 2</td><td><input type="number" class="points-input" data-comp="C6" max="2" value="0" oninput="updateTotal()"></td></tr>
            <tr style="background:#ffeb3b; font-weight:bold; font-size:1.2rem;">
                <td colspan="3">NOTE FINALE</td>
                <td id="total-score">0 / 20</td>
            </tr>
        </tbody>
    </table>

    <div class="section-title">Analyse de la situation <button class="audio-btn" onclick="speak('Analyse de la situation')">ðŸ”Š</button></div>
    <div class="img-container"><img src="situation.jpg" alt="Situation"></div>

    <div class="question-block">
        <div class="indicator">C2 <input type="number" class="points-input score-val" data-comp="C2" max="1" value="0" oninput="updateTotal()"> / 1</div>
        <b>1. Cocher le problÃ¨me de Jade : <button class="audio-btn" onclick="speak('Cocher le problÃ¨me de Jade')">ðŸ”Š</button></b>
        <div class="qcm-option"><input type="radio" name="q1"> Elle est trÃ¨s fatiguÃ©e et ne dort pas assez.</div>
        <div class="qcm-option"><input type="radio" name="q1"> Elle a faim le matin.</div>
    </div>

    <div class="question-block">
        <div class="indicator">C2 <input type="number" class="points-input score-val" data-comp="C2" max="2" value="0" oninput="updateTotal()"> / 2</div>
        <b>2. Expliquer pourquoi Jade est fatiguÃ©e : <button class="audio-btn" onclick="speak('Expliquer pourquoi Jade est fatiguÃ©e')">ðŸ”Š</button></b><br>
        <textarea oninput="autoGrow(this)" placeholder="Ã‰cris ta rÃ©ponse ici..."></textarea>
    </div>

    <div class="section-title">ActivitÃ© 1 : Le rythme <button class="audio-btn" onclick="speak('ActivitÃ© 1. Le rythme')">ðŸ”Š</button></div>
    <div class="doc-header">Document A : Le cycle de 24 heures</div>
    <div class="img-container"><img src="docA.jpg" alt="Doc A"></div>

    <div class="question-block">
        <div class="indicator">C1 <input type="number" class="points-input score-val" data-comp="C1" max="1" value="0" oninput="updateTotal()"> / 1</div>
        <b>3. Quelle est la durÃ©e d'un cycle naturel ? <button class="audio-btn" onclick="speak('Quelle est la durÃ©e d un cycle')">ðŸ”Š</button></b>
        <div class="qcm-option"><input type="radio" name="q3"> 12 heures</div>
        <div class="qcm-option"><input type="radio" name="q3"> 24 heures</div>
    </div>

    <div class="question-block">
        <div class="indicator">C1 <input type="number" class="points-input score-val" data-comp="C1" max="2" value="0" oninput="updateTotal()"> / 2</div>
        <b>4. Nommer l'hormone du sommeil trouvÃ©e dans le document : <button class="audio-btn" onclick="speak('Nommer l hormone du sommeil')">ðŸ”Š</button></b>
        <textarea oninput="autoGrow(this)" placeholder="Recopie le nom ici..."></textarea>
    </div>

    <div class="section-title">ActivitÃ© 2 : Le sommeil <button class="audio-btn" onclick="speak('ActivitÃ© 2. Le sommeil')">ðŸ”Š</button></div>
    <div class="doc-header">Document B : Les 5 phases</div>
    <div class="img-container"><img src="docB.jpg" alt="Doc B"></div>

    <div class="question-block">
        <div class="indicator">C1 <input type="number" class="points-input score-val" data-comp="C1" max="4" value="0" oninput="updateTotal()"> / 4</div>
        <b>5. Combien y a-t-il de phases ? Et laquelle repose le corps ? <button class="audio-btn" onclick="speak('Combien y a t il de phases et laquelle repose le corps')">ðŸ”Š</button></b>
        <textarea oninput="autoGrow(this)" placeholder="RÃ©ponds ici en utilisant le document B..."></textarea>
    </div>

    <div class="section-title">ActivitÃ© 4 : Habitudes <button class="audio-btn" onclick="speak('ActivitÃ© 4. Habitudes')">ðŸ”Š</button></div>
    <div class="img-container"><img src="docD.jpg" alt="Doc D"></div>

    <div class="question-block">
        <div class="indicator">C4 <input type="number" class="points-input score-val" data-comp="C4" max="6" value="0" oninput="updateTotal()"> / 6</div>
        <b>6. Trier les images (Donner les numÃ©ros) : <button class="audio-btn" onclick="speak('Donner les numÃ©ros des images bien ou mal pour dormir')">ðŸ”Š</button></b><br>
        <p>Bien pour dormir :</p>
        <textarea oninput="autoGrow(this)" placeholder="Ex: 6, 7, 8..."></textarea>
        <p>Mauvais pour dormir :</p>
        <textarea oninput="autoGrow(this)" placeholder="Ex: 1, 2, 3..."></textarea>
    </div>

</div>

<script>
    // Ajuster la hauteur des textarea automatiquement
    function autoGrow(element) {
        element.style.height = "5px";
        element.style.height = (element.scrollHeight) + "px";
    }

    function changeFontSize(delta) {
        let currentSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size'));
        document.documentElement.style.setProperty('--font-size', (currentSize + delta) + 'rem');
    }

    function toggleContrast() { document.body.classList.toggle('high-contrast'); }

    function speak(text) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'fr-FR';
        window.speechSynthesis.speak(msg);
    }

    function updateTotal() {
        let scores = { C1: 0, C2: 0, C4: 0, C6: 0 };
        document.querySelectorAll('.points-input').forEach(input => {
            scores[input.dataset.comp] += parseFloat(input.value) || 0;
        });
        document.getElementById('res-C1').textContent = scores.C1;
        document.getElementById('res-C2').textContent = scores.C2;
        document.getElementById('res-C4').textContent = scores.C4;
        document.getElementById('total-score').textContent = (scores.C1 + scores.C2 + scores.C4 + scores.C6) + " / 20";
    }
</script>
</body>
</html>