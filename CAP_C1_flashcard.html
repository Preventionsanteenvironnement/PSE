<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flashcards PSE - Contrats de Travail</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap');

        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }

        /* Animation du fond Ultra-Moderne */
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body {
            margin: 0; padding: 0;
            background: linear-gradient(-45deg, #1A2980, #26D0CE, #6a11cb, #2575fc);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; color: #fff; overflow-x: hidden;
        }

        /* En-t√™te Glassmorphism */
        header {
            width: 100%; padding: 15px 20px; text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        header h1 { margin: 0; font-size: 1.2rem; font-weight: 800; letter-spacing: 1px; text-transform: uppercase;}
        header p { margin: 2px 0 0 0; font-size: 0.85rem; opacity: 0.8; }

        /* Barre de progression */
        .progress-wrapper {
            width: 85vw; max-width: 400px; margin: 20px 0 10px 0;
            display: flex; flex-direction: column; align-items: center;
        }
        .stats { font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; opacity: 0.9; }
        .progress-container {
            width: 100%; height: 8px; background: rgba(0, 0, 0, 0.3);
            border-radius: 10px; overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.5);
        }
        .progress-bar {
            height: 100%; width: 0%; border-radius: 10px;
            background: linear-gradient(90deg, #00f2fe 0%, #4facfe 100%);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.8);
        }

        /* SC√àNE 3D & CARTE (Adapt√©e Mobile) */
        #game-container {
            display: flex; flex-direction: column; align-items: center;
            width: 100%; flex-grow: 1; justify-content: center; padding-bottom: 20px;
        }

        .scene {
            width: 85vw; max-width: 380px;
            height: 55vh; max-height: 450px; min-height: 320px;
            perspective: 1000px; cursor: pointer; position: relative;
        }

        .card {
            width: 100%; height: 100%; position: absolute;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            transform-style: preserve-3d; -webkit-transform-style: preserve-3d;
        }

        .card.is-flipped {
            transform: rotateY(180deg); -webkit-transform: rotateY(180deg);
        }

        /* Faces de la carte en Verre (Glassmorphism) */
        .card-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; -webkit-backface-visibility: hidden;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2), inset 0 0 20px rgba(255,255,255,0.05);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 25px; text-align: center;
        }

        .card-back {
            transform: rotateY(180deg); -webkit-transform: rotateY(180deg);
            background: rgba(10, 10, 10, 0.4); border: 1px solid rgba(0, 242, 254, 0.5);
        }

        .category-badge {
            position: absolute; top: 15px;
            background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3);
            padding: 6px 15px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;
            text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .question-text { font-size: 1.3rem; font-weight: 600; line-height: 1.4; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .answer-text { font-size: 1.3rem; font-weight: 800; color: #4ade80; margin-bottom: 15px; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .explanation-text { font-size: 0.95rem; font-weight: 300; line-height: 1.5; color: #e2e8f0; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px; }

        .flip-icon { position: absolute; bottom: 20px; font-size: 1.5rem; animation: bounce 2s infinite; opacity: 0.7; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }

        /* Boutons d'action */
        .controls {
            display: flex; justify-content: space-between; gap: 15px;
            width: 85vw; max-width: 380px; margin-top: 25px;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }

        .controls.visible { opacity: 1; pointer-events: auto; }

        .btn {
            flex: 1; padding: 16px 10px; border: none; border-radius: 50px;
            font-size: 1rem; font-weight: 800; color: white; text-transform: uppercase;
            cursor: pointer; transition: transform 0.1s, box-shadow 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        
        .btn-wrong {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            box-shadow: 0 4px 15px rgba(255, 75, 43, 0.4); border: 1px solid rgba(255,255,255,0.2);
        }
        .btn-correct {
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            box-shadow: 0 4px 15px rgba(0, 176, 155, 0.4); border: 1px solid rgba(255,255,255,0.2);
        }

        /* √âcran de fin */
        #end-screen {
            display: none; width: 90vw; max-width: 400px; text-align: center;
            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.3); padding: 30px 20px; border-radius: 20px; margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        #end-screen h2 { color: #4ade80; font-size: 1.8rem; margin-top: 0; }
        
        .btn-restart {
            background: linear-gradient(90deg, #00f2fe 0%, #4facfe 100%); color: white;
            border: none; padding: 15px 30px; font-size: 1.1rem; border-radius: 50px;
            cursor: pointer; margin-top: 25px; font-weight: bold; width: 100%; box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

    </style>
</head>
<body>

    <header>
        <h1>Flashcards Pro</h1>
        <p>Module C1 : Diff√©rencier les contrats</p>
    </header>

    <div class="progress-wrapper" id="progress-wrapper">
        <div class="stats" id="stats-display">Carte 1 / 25</div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>

    <div id="game-container">
        <div class="scene" onclick="flipCard()">
            <div class="card" id="flashcard">
                
                <div class="card-face card-front">
                    <div class="category-badge" id="category-front">Cat√©gorie</div>
                    <div class="question-text" id="question-text">Chargement...</div>
                    <div class="flip-icon">üëÜ</div>
                </div>

                <div class="card-face card-back">
                    <div class="category-badge" id="category-back">Cat√©gorie</div>
                    <div class="answer-text" id="answer-text">R√©ponse</div>
                    <div class="explanation-text" id="explanation-text">Explications d√©taill√©es...</div>
                </div>

            </div>
        </div>

        <div class="controls" id="controls">
            <button class="btn btn-wrong" onclick="markReview(event)">üî¥ √Ä revoir</button>
            <button class="btn btn-correct" onclick="markKnown(event)">üü¢ Acquis</button>
        </div>
    </div>

    <div id="end-screen">
        <h2>üéâ F√©licitations !</h2>
        <p style="font-size: 1rem; opacity: 0.9;">Tu as ma√Ætris√© les 25 notions indispensables sur les contrats de travail.</p>
        
        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; text-align: left; margin-top: 20px;">
            <strong style="color: #00f2fe;">‚è±Ô∏è Mode Speedrun</strong><br>
            <span style="font-size: 0.85rem; color: #ccc;">Rejoue pour battre ton record de vitesse sans te tromper !</span>
        </div>

        <button class="btn-restart" onclick="location.reload()">Recommencer l'entra√Ænement</button>
    </div>

    <script>
        // BASE DE DONN√âES EXACTE - 25 NOTIONS DU CAP (√Çges, Sp√©cificit√©s, Droits)
        const flashcards = [
            { cat: "√Çge & Dur√©e", q: "√Ä partir de quel √¢ge minimum l√©gal peut-on signer un CDI, un CDD ou un contrat d'int√©rim ?", a: "D√®s 16 ans.", expl: "Un jeune peut travailler d√®s 16 ans sous certaines conditions strictes." },
            { cat: "√Çge & Dur√©e", q: "Quel est l'√¢ge requis pour signer un Contrat d'Apprentissage ?", a: "De 16 √† 29 ans r√©volus.", expl: "Pr√©vu pour une dur√©e de 6 mois √† 3 ans, il permet de pr√©parer un dipl√¥me en alternance." },
            { cat: "√Çge & Dur√©e", q: "Quel est l'√¢ge requis pour un Contrat de Professionnalisation ?", a: "D√®s 16 ans.", expl: "Il s'adresse aux 16-25 ans (et 26 ans et + pour les demandeurs d'emploi) pour acqu√©rir une qualification." },
            { cat: "Sp√©cificit√©s CDI", q: "Le CDI (Contrat √† Dur√©e Ind√©termin√©e) indique-t-il une date de fin de contrat ?", a: "NON.", expl: "C'est un contrat sans limitation de dur√©e. Seule la date d'embauche est inscrite." },
            { cat: "Sp√©cificit√©s CDI", q: "Comment un salari√© peut-il rompre un CDI de son plein gr√© ?", a: "En d√©missionnant, avec un pr√©avis.", expl: "Le pr√©avis est un d√©lai l√©gal de travail √† respecter avant de quitter d√©finitivement le poste." },
            { cat: "Sp√©cificit√©s CDD", q: "Pourquoi un employeur signe-t-il un CDD avec un salari√© ?", a: "Pour une t√¢che pr√©cise et temporaire.", expl: "Exemples l√©gaux : remplacer un salari√© absent ou faire face √† un pic d'activit√© (No√´l, soldes)." },
            { cat: "Sp√©cificit√©s CDD", q: "Quelles sont les 2 indemnit√©s vers√©es obligatoirement √† la fin d'un CDD ?", a: "L'indemnit√© de fin de contrat ET les cong√©s pay√©s.", expl: "L'indemnit√© de fin de contrat (prime de pr√©carit√©) compense l'instabilit√© de ce type d'emploi." },
            { cat: "L'Int√©rim", q: "Quelles sont les 3 parties impliqu√©es dans un contrat d'Int√©rim (Temporaire) ?", a: "L'int√©rimaire, l'agence (ETT) et l'entreprise utilisatrice.", expl: "L'Entreprise de Travail Temporaire (ex: Adecco) est ton v√©ritable employeur et te met √† disposition." },
            { cat: "L'Int√©rim", q: "Comment s'appelle la prime touch√©e √† la fin d'une mission d'Int√©rim ?", a: "Les indemnit√©s de fin de mission.", expl: "Elles ont le m√™me objectif que la prime de pr√©carit√© du CDD." },
            { cat: "L'Alternance", q: "O√π se d√©roule la formation d'un apprenti ?", a: "En alternance : au CFA et en Entreprise.", expl: "CFA signifie : Centre de Formation d'Apprentis." },
            { cat: "Mentions Obligatoires", q: "Quel est le SEUL contrat de travail qui n'est pas obligatoirement √©crit ?", a: "Le CDI √† temps plein.", expl: "Il peut √™tre oral. En revanche, le CDD, l'Apprentissage et l'Int√©rim doivent TOUJOURS √™tre r√©dig√©s par √©crit." },
            { cat: "Mentions Obligatoires", q: "Cite 4 informations qui doivent obligatoirement figurer sur le contrat.", a: "Identit√©s, Date d'embauche, R√©mun√©ration, Lieu/Horaires.", expl: "Il faut aussi la d√©signation de l'emploi (qualification)." },
            { cat: "Mentions Obligatoires", q: "Qu'est-ce que la P√©riode d'Essai ?", a: "Une p√©riode au d√©but du contrat pour tester le salari√©.", expl: "Durant cette p√©riode, l'employeur OU l'employ√© peut rompre le contrat sans pr√©avis ni indemnit√©." },
            { cat: "Obligations Salari√©", q: "Quelles sont les obligations du salari√© face √† son travail et ses horaires ?", a: "R√©aliser le travail demand√© et respecter les horaires.", expl: "C'est la contrepartie logique au salaire qu'il per√ßoit." },
            { cat: "Obligations Salari√©", q: "Quelle est l'obligation du salari√© par rapport aux r√®gles de l'entreprise ?", a: "Respecter le r√®glement int√©rieur.", expl: "Ce r√®glement inclut toutes les consignes de s√©curit√©." },
            { cat: "Droits Salari√©", q: "En plus du salaire, de quel droit majeur b√©n√©ficie un salari√© d√©clar√© ?", a: "B√©n√©ficier d'une couverture sociale.", expl: "Il cotise pour la maladie, le ch√¥mage et la retraite." },
            { cat: "Obligations Employeur", q: "Quelle est l'obligation principale de l'employeur √† la fin du mois ?", a: "Verser le salaire correspondant au travail effectu√©.", expl: "Il doit aussi respecter les clauses du contrat et le Code du travail." },
            { cat: "Droits Employeur", q: "Quel droit poss√®de l'employeur si le salari√© commet une faute ?", a: "Le droit de le sanctionner.", expl: "C'est le pouvoir disciplinaire de l'employeur." },
            { cat: "L√©gislation", q: "Un patron a-t-il le droit de faire payer une AMENDE √† un salari√© en retard ?", a: "NON. C'est strictement ill√©gal.", expl: "Les sanctions financi√®res (retenues sur salaire) sont interdites. Il faut utiliser une sanction disciplinaire (ex: avertissement)." },
            { cat: "L√©gislation", q: "Que signifie le sigle SMIC ?", a: "Salaire Minimum Interprofessionnel de Croissance.", expl: "Il est ill√©gal de r√©mun√©rer un employ√© majeur en dessous de ce seuil." },
            { cat: "Pr√©vention (C3)", q: "Que signifie le sigle EPI ?", a: "√âquipement de Protection Individuelle.", expl: "Exemples : casque, gants, lunettes, chaussures de s√©curit√©." },
            { cat: "Pr√©vention (C3)", q: "Le port des EPI est-il un choix ou une obligation ?", a: "Une obligation.", expl: "Ne pas les porter est une faute professionnelle sanctionnable." },
            { cat: "Pr√©vention (C3)", q: "Quelle est la structure (les 2 mots) pour lier un risque √† une pr√©vention ?", a: "¬´ Parce que... donc... ¬ª", expl: "Exemple : 'Parce que le sol est glissant, donc je dois porter mes chaussures de s√©curit√©.'" },
            { cat: "Analyse (C2)", q: "Une agence immobili√®re exige un emploi stable sans date de fin pour louer un appartement. Quel contrat choisir ?", a: "Un CDI.", expl: "Seul le CDI garantit cette s√©curit√© √† long terme." },
            { cat: "Analyse (C2)", q: "Peut-on signer un CDD pour remplacer une employ√©e en cong√© maternit√© ?", a: "OUI. C'est le contrat obligatoire pour √ßa.", expl: "Le remplacement est une situation temporaire, le CDD est donc parfaitement adapt√©." }
        ];

        // LOGIQUE JAVASCRIPT CORRIG√âE
        let deck = [...flashcards];
        // M√©lange al√©atoire des cartes
        deck.sort(() => Math.random() - 0.5); 
        
        let currentCardIndex = 0;
        let totalCards = deck.length;
        let isFlipped = false;

        const cardElement = document.getElementById("flashcard");
        const catFront = document.getElementById("category-front");
        const catBack = document.getElementById("category-back");
        const qText = document.getElementById("question-text");
        const aText = document.getElementById("answer-text");
        const explText = document.getElementById("explanation-text");
        const controls = document.getElementById("controls");
        const progressBar = document.getElementById("progress-bar");
        const statsDisplay = document.getElementById("stats-display");

        // Charge la carte en haut du paquet
        function loadCard() {
            if (deck.length === 0) {
                showEndScreen();
                return;
            }

            let card = deck[0];
            catFront.innerText = card.cat;
            catBack.innerText = card.cat;
            qText.innerHTML = card.q;
            aText.innerHTML = card.a;
            explText.innerHTML = card.expl;

            // Assurer que la carte est bien de face sans transition parasite
            cardElement.style.transition = "none";
            cardElement.classList.remove("is-flipped");
            cardElement.style.transform = ""; 
            isFlipped = false;
            controls.classList.remove("visible");

            // R√©activer les transitions apr√®s un micro-d√©lai
            setTimeout(() => {
                cardElement.style.transition = "transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1)";
            }, 50);
        }

        // Action de retourner la carte
        function flipCard() {
            if(deck.length === 0) return;
            if (!isFlipped) {
                cardElement.classList.add("is-flipped");
                controls.classList.add("visible");
                isFlipped = true;
            }
        }

        // Bouton "Acquis"
        function markKnown(event) {
            event.stopPropagation(); // Emp√™che de d√©clencher le clic de la carte
            deck.shift(); // Supprime la carte sue du paquet
            currentCardIndex++;
            updateProgress();
            
            // Animation d'√©vacuation
            cardElement.style.transform = "translateX(120vw) rotateY(180deg) rotateZ(10deg)";
            
            setTimeout(() => { loadCard(); }, 400);
        }

        // Bouton "√Ä revoir"
        function markReview(event) {
            event.stopPropagation();
            let missedCard = deck.shift();
            deck.push(missedCard); // Remet la carte √† la fin du paquet
            
            // Animation d'√©vacuation vers la gauche
            cardElement.style.transform = "translateX(-120vw) rotateY(180deg) rotateZ(-10deg)";
            
            setTimeout(() => { loadCard(); }, 400);
        }

        function updateProgress() {
            let percent = (currentCardIndex / totalCards) * 100;
            progressBar.style.width = percent + "%";
            statsDisplay.innerText = `Valid√©es : ${currentCardIndex} / ${totalCards} (Restantes : ${deck.length})`;
        }

        function showEndScreen() {
            document.getElementById("progress-wrapper").style.display = "none";
            document.getElementById("game-container").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
        }

        // Initialisation
        window.onload = () => {
            loadCard();
            updateProgress();
        };
    </script>
</body>
</html>