<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPS C1.3 - Valeurs et Buts</title>
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f4f8;
            color: #1e293b;
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 40px;
        }

        .container {
            max-width: 520px;
            margin: 0 auto;
            padding: 16px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: #3b82f6;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 12px;
            transition: color 0.2s;
        }

        .back-btn:hover { color: #1d4ed8; }

        .header-card {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            border-radius: 15px;
            padding: 28px 24px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .header-card .emoji { font-size: 2.2rem; margin-bottom: 8px; }
        .header-card h1 { font-size: 1.6rem; margin-bottom: 8px; font-weight: 700; }
        .header-card p { font-size: 0.92rem; opacity: 0.92; line-height: 1.5; }

        .card {
            background: white;
            border-radius: 15px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            animation: fadeIn 0.4s ease;
        }

        .card-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 16px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section { display: none; }
        .section.active { display: block; }

        .intro-text {
            font-size: 0.9rem;
            color: #475569;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .compass-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 16px 0;
        }

        .compass-box {
            border-radius: 12px;
            padding: 14px 12px;
            text-align: center;
            font-size: 0.85rem;
            line-height: 1.45;
        }

        .compass-box.valeur {
            background: #dbeafe;
            border: 2px solid #93c5fd;
            color: #1e40af;
        }

        .compass-box.but {
            background: #fef3c7;
            border: 2px solid #fcd34d;
            color: #92400e;
        }

        .compass-box .box-icon {
            font-size: 1.4rem;
            display: block;
            margin-bottom: 6px;
        }

        .compass-box .box-label {
            font-weight: 700;
            display: block;
            margin-bottom: 4px;
        }

        .highlight-text {
            font-size: 0.88rem;
            color: #1e293b;
            background: #f0f9ff;
            border-left: 3px solid #3b82f6;
            padding: 12px 14px;
            border-radius: 0 10px 10px 0;
            margin: 16px 0;
            line-height: 1.55;
        }

        .btn-primary {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 24px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            font-family: inherit;
            margin-top: 8px;
            transition: transform 0.15s, box-shadow 0.15s;
            box-shadow: 0 3px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 18px rgba(37, 99, 235, 0.35);
        }

        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563eb, #3b82f6);
            border-radius: 20px;
            transition: width 0.4s ease;
        }

        .progress-text {
            font-size: 0.8rem;
            color: #94a3b8;
            text-align: right;
            margin-bottom: 16px;
        }

        .statement-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px 16px;
            margin-bottom: 16px;
            text-align: center;
        }

        .statement-text {
            font-size: 1.05rem;
            font-weight: 600;
            color: #1e293b;
            line-height: 1.5;
        }

        .quiz-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .quiz-btn {
            padding: 14px 12px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            background: white;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.92rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .quiz-btn.valeur { color: #1e40af; }
        .quiz-btn.valeur:hover { border-color: #3b82f6; background: #dbeafe; }
        .quiz-btn.nonvaleur { color: #92400e; }
        .quiz-btn.nonvaleur:hover { border-color: #f59e0b; background: #fef3c7; }
        .quiz-btn:disabled { opacity: 0.5; cursor: default; }

        .feedback-card {
            border-radius: 12px;
            padding: 14px 16px;
            margin-bottom: 12px;
            font-size: 0.88rem;
            line-height: 1.5;
            animation: fadeIn 0.3s ease;
        }

        .feedback-card.correct {
            background: #dcfce7;
            border: 2px solid #86efac;
            color: #166534;
        }

        .feedback-card.wrong {
            background: #fee2e2;
            border: 2px solid #fca5a5;
            color: #991b1b;
        }

        .feedback-icon { font-weight: 700; margin-right: 4px; }

        .btn-next {
            display: block;
            width: 100%;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-size: 0.92rem;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
            transition: background 0.2s;
        }

        .btn-next:hover { background: #2563eb; }

        .context-card {
            background: #dbeafe;
            border-radius: 12px;
            padding: 12px 14px;
            margin-bottom: 10px;
            font-size: 0.88rem;
            font-weight: 600;
            color: #1e40af;
        }

        .scenario-text {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 14px 16px;
            margin-bottom: 14px;
            font-size: 0.92rem;
            line-height: 1.5;
            color: #475569;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            background: white;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.88rem;
            font-weight: 600;
            margin-bottom: 8px;
            transition: all 0.2s;
            text-align: left;
            line-height: 1.5;
        }

        .option-btn.concordant { color: #1e40af; }
        .option-btn.concordant:hover { border-color: #3b82f6; background: #dbeafe; }
        .option-btn.discordant { color: #92400e; }
        .option-btn.discordant:hover { border-color: #f59e0b; background: #fef3c7; }
        .option-btn:disabled { opacity: 0.5; cursor: default; }

        .score-display {
            text-align: center;
            padding: 20px;
        }

        .score-number {
            font-size: 3rem;
            font-weight: 800;
            color: #2563eb;
            line-height: 1.1;
        }

        .score-total {
            font-size: 1.1rem;
            color: #94a3b8;
            font-weight: 500;
        }

        .score-message {
            margin-top: 14px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            line-height: 1.45;
        }

        .synthesis-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px 14px;
            background: #dbeafe;
            border-radius: 10px;
            margin-bottom: 8px;
            font-size: 0.88rem;
            color: #1e3a5f;
            line-height: 1.5;
        }

        .synthesis-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
    </style>
</head>
<body>

<div class="container">
    <a href="index.html" class="back-btn">‚Üê Retour</a>

    <div class="header-card">
        <div class="emoji">üß≠</div>
        <h1>Ma boussole int√©rieure</h1>
        <p>Apprends √† distinguer tes valeurs de tes objectifs pour mieux te guider</p>
    </div>

    <!-- SECTION 1 : INTRO -->
    <div id="section-intro" class="section active">
        <div class="card">
            <div class="card-title">üß≠ Valeurs et objectifs</div>
            <p class="intro-text">Les <strong>valeurs</strong> sont comme une boussole : elles indiquent une direction g√©n√©rale de vie. Les <strong>objectifs</strong> sont des destinations concr√®tes sur cette route.</p>

            <div class="compass-grid">
                <div class="compass-box valeur">
                    <span class="box-icon">üß≠</span>
                    <span class="box-label">VALEUR</span>
                    ¬´ La solidarit√© ¬ª
                    <br><small>‚Üí Direction de vie durable</small>
                </div>
                <div class="compass-box but">
                    <span class="box-icon">üéØ</span>
                    <span class="box-label">OBJECTIF</span>
                    ¬´ Organiser une collecte ¬ª
                    <br><small>‚Üí Action concr√®te et pr√©cise</small>
                </div>
            </div>

            <div class="highlight-text">
                Une valeur ne s'atteint jamais ¬´ pour de bon ¬ª : on peut toujours continuer √† la suivre. Un objectif, lui, peut √™tre coch√© une fois accompli. Quand nos objectifs sont guid√©s par nos valeurs, la motivation est plus forte et plus durable.
            </div>

            <button class="btn-primary" onclick="startQuiz()">üéØ Commencer le d√©fi</button>
        </div>
    </div>

    <!-- SECTION 2 : QUIZ -->
    <div id="section-quiz" class="section">
        <div class="card">
            <div class="card-title">üéØ Valeur ou pas ?</div>
            <div class="progress-bar"><div class="progress-fill" id="quiz-progress"></div></div>
            <div class="progress-text" id="quiz-progress-text"></div>
            <div id="quiz-container"></div>
        </div>
    </div>

    <!-- SECTION 3 : CONCORDANCE -->
    <div id="section-concordance" class="section">
        <div class="card">
            <div class="card-title">üîó But concordant ou discordant ?</div>
            <p class="intro-text">Un <strong>but concordant</strong> est en accord avec les valeurs de la personne : il g√©n√®re de la motivation naturelle. Un <strong>but discordant</strong> est impos√© ou en contradiction avec ses valeurs : il g√©n√®re de la pression.</p>
            <div class="progress-bar"><div class="progress-fill" id="conc-progress"></div></div>
            <div class="progress-text" id="conc-progress-text"></div>
            <div id="conc-container"></div>
        </div>
    </div>

    <!-- SECTION 4 : BILAN -->
    <div id="section-bilan" class="section">
        <div class="card">
            <div class="score-display">
                <div class="score-number" id="final-score">0</div>
                <div class="score-total">/ 16</div>
                <div class="score-message" id="score-message"></div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">Ce qu'il faut retenir</div>
            <div class="synthesis-item">
                <span class="synthesis-icon">üß≠</span>
                <span>Une valeur est une direction de vie durable qui guide nos choix au quotidien.</span>
            </div>
            <div class="synthesis-item">
                <span class="synthesis-icon">üéØ</span>
                <span>Un objectif est une action concr√®te qu'on peut atteindre. Il est diff√©rent d'une valeur.</span>
            </div>
            <div class="synthesis-item">
                <span class="synthesis-icon">üîó</span>
                <span>Un but concordant est align√© avec nos valeurs : il g√©n√®re une motivation profonde et durable.</span>
            </div>
            <div class="synthesis-item">
                <span class="synthesis-icon">‚ö°</span>
                <span>Un but discordant cr√©e de la tension car il ne correspond pas √† ce qui compte pour nous.</span>
            </div>

            <button class="btn-primary" onclick="resetAll()" style="margin-top:16px;">üîÑ Refaire l'exercice</button>
        </div>
    </div>
</div>

<footer style="text-align:center; padding:20px 16px; color:#94a3b8; font-size:0.78rem;">
    Comp√©tences psychosociales ‚Äî R√©f√©rentiel Sant√© publique France 2025
</footer>

<script>
    /* ========== DATA ========== */
    var quizItems = [
        { statement: "La solidarit√©", answer: "valeur", explanation: "C'est une direction de vie qui guide nos actions envers les autres, de mani√®re durable." },
        { statement: "Avoir une bonne note en fran√ßais", answer: "nonvaleur", explanation: "C'est un objectif concret et ponctuel. La valeur derri√®re pourrait √™tre la curiosit√© ou la r√©ussite." },
        { statement: "L'honn√™tet√©", answer: "valeur", explanation: "C'est un principe qui oriente durablement nos choix et nos comportements." },
        { statement: "√ätre stress√© avant un examen", answer: "nonvaleur", explanation: "C'est une √©motion passag√®re, pas une direction de vie." },
        { statement: "Le respect des autres", answer: "valeur", explanation: "C'est un guide pour nos relations, qui oriente nos comportements au quotidien." },
        { statement: "Acheter le dernier smartphone", answer: "nonvaleur", explanation: "C'est un d√©sir mat√©riel ponctuel, pas une direction de vie durable." },
        { statement: "La curiosit√©", answer: "valeur", explanation: "C'est une disposition qui pousse √† explorer et apprendre tout au long de la vie." },
        { statement: "Obtenir un dipl√¥me", answer: "nonvaleur", explanation: "C'est un but concret et atteignable. La valeur derri√®re pourrait √™tre l'apprentissage ou l'autonomie." },
        { statement: "La justice", answer: "valeur", explanation: "C'est un principe fondamental qui guide nos choix et nos actions en soci√©t√©." },
        { statement: "Se sentir en col√®re", answer: "nonvaleur", explanation: "C'est une √©motion passag√®re, pas une direction de vie. On ne choisit pas une √©motion comme guide." }
    ];

    var concItems = [
        { situation: "Un √©l√®ve choisit de faire un stage dans une association caritative. Il a toujours aim√© aider les autres.", answer: "concordant", explanation: "Ce but est en accord avec sa valeur de solidarit√©. Il g√©n√®re naturellement de la motivation et de la satisfaction." },
        { situation: "Un √©l√®ve choisit une fili√®re uniquement parce que ses parents l'exigent, alors que √ßa ne l'int√©resse pas du tout.", answer: "discordant", explanation: "Ce but est impos√© de l'ext√©rieur et ne correspond pas aux int√©r√™ts de l'√©l√®ve. Il risque de g√©n√©rer de la pression et du d√©couragement." },
        { situation: "Une √©l√®ve s'inscrit au club de th√©√¢tre car elle adore s'exprimer sur sc√®ne et valorise la cr√©ativit√©.", answer: "concordant", explanation: "Ce choix est en harmonie avec sa valeur de cr√©ativit√© et d'expression. La motivation sera forte et durable." },
        { situation: "Un √©l√®ve s'entra√Æne tr√®s dur en sport uniquement pour impressionner les autres et √™tre populaire.", answer: "discordant", explanation: "Le but est bas√© sur la validation des autres, pas sur un int√©r√™t authentique. La motivation est fragile et d√©pend du regard ext√©rieur." },
        { situation: "Une √©l√®ve consacre du temps √† la lecture car elle est passionn√©e par la d√©couverte de nouvelles id√©es.", answer: "concordant", explanation: "Ce but est align√© avec sa valeur de curiosit√© et d'apprentissage. Il nourrit un int√©r√™t profond." },
        { situation: "Un √©l√®ve participe √† un projet de recyclage parce qu'il est convaincu de l'importance de prot√©ger l'environnement.", answer: "concordant", explanation: "Ce but est align√© avec sa valeur de respect de l'environnement. L'engagement sera authentique et durable." }
    ];

    /* ========== STATE ========== */
    var shuffledQuiz = [];
    var currentQuiz = 0;
    var quizScore = 0;

    var shuffledConc = [];
    var currentConc = 0;
    var concScore = 0;

    /* ========== UTILITIES ========== */
    function shuffle(arr) {
        var a = arr.slice();
        for (var i = a.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            var tmp = a[i]; a[i] = a[j]; a[j] = tmp;
        }
        return a;
    }

    function showSection(id) {
        var sections = document.querySelectorAll('.section');
        for (var i = 0; i < sections.length; i++) sections[i].classList.remove('active');
        document.getElementById(id).classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ========== QUIZ ========== */
    function startQuiz() {
        shuffledQuiz = shuffle(quizItems);
        currentQuiz = 0;
        quizScore = 0;
        showSection('section-quiz');
        renderQuiz();
    }

    function renderQuiz() {
        var item = shuffledQuiz[currentQuiz];
        var total = shuffledQuiz.length;
        var pct = (currentQuiz / total) * 100;

        document.getElementById('quiz-progress').style.width = pct + '%';
        document.getElementById('quiz-progress-text').textContent = 'Question ' + (currentQuiz + 1) + ' / ' + total;

        var html = '';
        html += '<div class="statement-card"><div class="statement-text">' + item.statement + '</div></div>';
        html += '<div class="quiz-buttons">';
        html += '<button class="quiz-btn valeur" onclick="answerQuiz(\'valeur\')">üß≠ Valeur</button>';
        html += '<button class="quiz-btn nonvaleur" onclick="answerQuiz(\'nonvaleur\')">‚ùå Pas une valeur</button>';
        html += '</div>';
        html += '<div id="quiz-feedback"></div>';

        document.getElementById('quiz-container').innerHTML = html;
    }

    function answerQuiz(answer) {
        var item = shuffledQuiz[currentQuiz];
        var correct = answer === item.answer;
        if (correct) quizScore++;

        var btns = document.querySelectorAll('.quiz-btn');
        for (var i = 0; i < btns.length; i++) btns[i].disabled = true;

        var fbClass = correct ? 'correct' : 'wrong';
        var fbIcon = correct ? '‚úì' : '‚úó';
        var rightLabel = item.answer === 'valeur' ? 'une valeur' : 'pas une valeur';
        var fbText = correct
            ? '<span class="feedback-icon">' + fbIcon + '</span> Bonne r√©ponse ! ' + item.explanation
            : '<span class="feedback-icon">' + fbIcon + '</span> C\'est ' + rightLabel + '. ' + item.explanation;

        var isLast = currentQuiz >= shuffledQuiz.length - 1;
        var btnLabel = isLast ? 'Passer aux situations ‚Üí' : 'Suivant ‚Üí';
        var btnAction = isLast ? 'startConcordance()' : 'nextQuiz()';

        var html = '<div class="feedback-card ' + fbClass + '">' + fbText + '</div>';
        html += '<button class="btn-next" onclick="' + btnAction + '">' + btnLabel + '</button>';

        document.getElementById('quiz-feedback').innerHTML = html;
    }

    function nextQuiz() {
        currentQuiz++;
        renderQuiz();
    }

    /* ========== CONCORDANCE ========== */
    function startConcordance() {
        shuffledConc = shuffle(concItems);
        currentConc = 0;
        concScore = 0;
        showSection('section-concordance');
        renderConc();
    }

    function renderConc() {
        var item = shuffledConc[currentConc];
        var total = shuffledConc.length;
        var pct = (currentConc / total) * 100;

        document.getElementById('conc-progress').style.width = pct + '%';
        document.getElementById('conc-progress-text').textContent = (currentConc + 1) + ' / ' + total;

        var html = '';
        html += '<div class="scenario-text">' + item.situation + '</div>';
        html += '<div class="quiz-buttons">';
        html += '<button class="option-btn concordant" onclick="answerConc(\'concordant\')">üîó Concordant</button>';
        html += '<button class="option-btn discordant" onclick="answerConc(\'discordant\')">‚ö° Discordant</button>';
        html += '</div>';
        html += '<div id="conc-feedback"></div>';

        document.getElementById('conc-container').innerHTML = html;
    }

    function answerConc(answer) {
        var item = shuffledConc[currentConc];
        var correct = answer === item.answer;
        if (correct) concScore++;

        var btns = document.querySelectorAll('.option-btn');
        for (var i = 0; i < btns.length; i++) btns[i].disabled = true;

        var fbClass = correct ? 'correct' : 'wrong';
        var fbIcon = correct ? '‚úì' : '‚úó';
        var rightLabel = item.answer === 'concordant' ? 'concordant' : 'discordant';
        var fbText = correct
            ? '<span class="feedback-icon">' + fbIcon + '</span> Bonne r√©ponse ! ' + item.explanation
            : '<span class="feedback-icon">' + fbIcon + '</span> Ce but est ' + rightLabel + '. ' + item.explanation;

        var isLast = currentConc >= shuffledConc.length - 1;
        var btnLabel = isLast ? 'Voir mon bilan ‚Üí' : 'Suite ‚Üí';
        var btnAction = isLast ? 'showBilan()' : 'nextConc()';

        var html = '<div class="feedback-card ' + fbClass + '">' + fbText + '</div>';
        html += '<button class="btn-next" onclick="' + btnAction + '">' + btnLabel + '</button>';

        document.getElementById('conc-feedback').innerHTML = html;
    }

    function nextConc() {
        currentConc++;
        renderConc();
    }

    /* ========== BILAN ========== */
    function showBilan() {
        var total = quizScore + concScore;
        document.getElementById('final-score').textContent = total;

        var msg = '';
        if (total >= 14) msg = 'üåü Excellent ! Tu sais distinguer les valeurs des objectifs et rep√©rer la concordance.';
        else if (total >= 10) msg = 'üëè Bien jou√© ! Tu as une bonne compr√©hension des valeurs et de leur r√¥le.';
        else msg = 'üí™ C\'est un bon d√©but ! Continue √† r√©fl√©chir √† ce qui guide tes choix.';

        document.getElementById('score-message').textContent = msg;
        showSection('section-bilan');
    }

    /* ========== RESET ========== */
    function resetAll() {
        currentQuiz = 0; quizScore = 0;
        currentConc = 0; concScore = 0;
        showSection('section-intro');
    }
</script>

</body>
</html>
