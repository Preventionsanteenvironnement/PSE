<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module C3 ‚Äì Speed Challenge</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1e293b;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 700px; margin: 0 auto; }
        
        .source-banner {
            background: rgba(255,255,255,0.15);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .source-banner a { color: rgba(255,255,255,0.95); font-size: 11px; text-decoration: none; }
        
        .screen { display: none; }
        .screen.active { display: block; }
        
        /* Intro */
        .intro-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
        }
        
        .intro-card h2 { font-size: 32px; margin-bottom: 15px; }
        .intro-card > p { color: #64748b; margin-bottom: 20px; }
        
        .objectif-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 12px 12px 0;
            text-align: left;
            margin-bottom: 25px;
        }
        
        .objectif-box strong { color: #92400e; font-size: 11px; }
        .objectif-box p { font-size: 13px; margin-top: 5px; }
        
        .rules-box {
            background: #f8fafc;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: left;
        }
        
        .rules-box h4 { color: var(--primary); margin-bottom: 12px; }
        .rules-box li { font-size: 13px; color: #475569; margin-bottom: 8px; margin-left: 20px; }
        
        .btn-start {
            padding: 20px 60px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--primary), #d97706);
            color: white;
            font-family: inherit;
            font-size: 20px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
        }
        
        .btn-start:hover { transform: translateY(-3px) scale(1.02); }
        
        /* Game */
        .game-container {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
        }
        
        .stat-box {
            background: #f8fafc;
            padding: 15px 25px;
            border-radius: 15px;
            min-width: 100px;
        }
        
        .stat-box .value {
            font-size: 32px;
            font-weight: 900;
        }
        
        .stat-box.score .value { color: #92400e; }
        .stat-box.combo .value { color: #dc2626; }
        .stat-box.time .value { color: #1e40af; }
        
        .stat-box .label { font-size: 11px; color: #64748b; }
        
        .countdown {
            font-size: 100px;
            font-weight: 900;
            color: var(--primary);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .picto-display {
            margin: 30px 0;
        }
        
        .picto-display img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .timer-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #059669);
            border-radius: 10px;
            transition: width 0.1s linear;
        }
        
        .timer-fill.warning { background: linear-gradient(90deg, var(--primary), #d97706); }
        .timer-fill.danger { background: linear-gradient(90deg, var(--danger), #dc2626); }
        
        .category-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .category-btn {
            padding: 15px 10px;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }
        
        .category-btn:hover:not(:disabled) {
            transform: translateY(-3px);
        }
        
        .category-btn .icon { font-size: 24px; display: block; margin-bottom: 5px; }
        .category-btn .name { font-size: 10px; font-weight: 700; color: var(--dark); }
        
        .category-btn.obligation { border-color: #0ea5e9; }
        .category-btn.obligation:hover { background: #e0f2fe; }
        .category-btn.interdiction { border-color: #dc2626; }
        .category-btn.interdiction:hover { background: #fee2e2; }
        .category-btn.avertissement { border-color: #eab308; }
        .category-btn.avertissement:hover { background: #fef9c3; }
        .category-btn.incendie { border-color: #b91c1c; }
        .category-btn.incendie:hover { background: #fee2e2; }
        .category-btn.secours { border-color: #16a34a; }
        .category-btn.secours:hover { background: #dcfce7; }
        
        .category-btn.correct {
            background: #dcfce7 !important;
            border-color: var(--success) !important;
            animation: correctPulse 0.3s;
        }
        
        .category-btn.wrong {
            background: #fee2e2 !important;
            border-color: var(--danger) !important;
            animation: shake 0.3s;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .category-btn:disabled { cursor: default; }
        
        .combo-display {
            font-size: 24px;
            font-weight: 800;
            color: var(--danger);
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .combo-display.show { opacity: 1; animation: comboIn 0.5s ease; }
        
        @keyframes comboIn {
            0% { transform: scale(0.5); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        /* Game Over */
        .game-over {
            display: none;
        }
        
        .game-over.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .game-over h2 { font-size: 28px; color: var(--danger); margin-bottom: 10px; }
        .game-over p { color: #64748b; margin-bottom: 20px; }
        
        .final-score {
            font-size: 60px;
            font-weight: 900;
            color: var(--primary);
            margin: 20px 0;
        }
        
        .high-score {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 10px 25px;
            border-radius: 50px;
            display: inline-block;
            margin-bottom: 25px;
            font-weight: 700;
            color: #92400e;
        }
        
        /* Results */
        .results-card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
        }
        
        .results-card .trophy { font-size: 80px; margin-bottom: 15px; }
        .results-card h2 { font-size: 28px; margin-bottom: 10px; }
        .results-card > p { color: #64748b; margin-bottom: 20px; }
        
        .results-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        .results-stats .stat { text-align: center; }
        .results-stats .stat .val { font-size: 36px; font-weight: 800; color: var(--primary); }
        .results-stats .stat .lbl { font-size: 12px; color: #64748b; }
        
        @media (max-width: 600px) {
            .category-buttons { grid-template-columns: repeat(3, 1fr); }
            .game-stats { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>
    
    <div class="container">
        
        <div class="source-banner">
            <a href="https://www.inrs.fr" target="_blank">üìö Source : INRS ‚Äì Institut National de Recherche et de S√©curit√© ‚Äì www.inrs.fr</a>
        </div>
        
        <!-- Intro -->
        <div class="screen active" id="intro-screen">
            <div class="intro-card">
                <h2>‚ö° Speed Challenge</h2>
                <p>Identifie la cat√©gorie des pictogrammes le plus vite possible !</p>
                
                <div class="objectif-box">
                    <strong>üéØ OBJECTIF</strong>
                    <p>√ätre capable de <strong>reconna√Ætre rapidement</strong> la cat√©gorie d'un pictogramme de s√©curit√©.</p>
                </div>
                
                <div class="rules-box">
                    <h4>‚ö° R√®gles du Speed Challenge</h4>
                    <ul>
                        <li>Un pictogramme appara√Æt, clique sur sa cat√©gorie !</li>
                        <li>Tu as <strong>3 secondes</strong> pour r√©pondre</li>
                        <li>Bonne r√©ponse = <strong>+10 points</strong></li>
                        <li>Combo (s√©rie) = <strong>+bonus</strong> !</li>
                        <li>3 erreurs ou temps √©coul√© = <strong>Game Over</strong></li>
                    </ul>
                </div>
                
                <button class="btn-start" onclick="startGame()">‚ö° GO ! ‚ö°</button>
            </div>
        </div>
        
        <!-- Game -->
        <div class="screen" id="game-screen">
            <div class="game-container">
                <div class="game-stats">
                    <div class="stat-box score">
                        <div class="value" id="score">0</div>
                        <div class="label">SCORE</div>
                    </div>
                    <div class="stat-box combo">
                        <div class="value" id="combo">0</div>
                        <div class="label">COMBO üî•</div>
                    </div>
                    <div class="stat-box time">
                        <div class="value" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                        <div class="label">VIES</div>
                    </div>
                </div>
                
                <div id="countdown-display" style="display: none;">
                    <div class="countdown" id="countdown">3</div>
                </div>
                
                <div id="game-active" style="display: none;">
                    <div class="picto-display">
                        <img id="current-picto" src="" alt="Pictogramme">
                    </div>
                    
                    <div class="timer-bar">
                        <div class="timer-fill" id="timer-fill" style="width: 100%;"></div>
                    </div>
                    
                    <div class="category-buttons" id="category-buttons">
                        <button class="category-btn obligation" onclick="answer('obligation')">
                            <span class="icon">üîµ</span>
                            <span class="name">Obligation</span>
                        </button>
                        <button class="category-btn interdiction" onclick="answer('interdiction')">
                            <span class="icon">üî¥</span>
                            <span class="name">Interdiction</span>
                        </button>
                        <button class="category-btn avertissement" onclick="answer('avertissement')">
                            <span class="icon">‚ö†Ô∏è</span>
                            <span class="name">Danger</span>
                        </button>
                        <button class="category-btn incendie" onclick="answer('incendie')">
                            <span class="icon">üßØ</span>
                            <span class="name">Incendie</span>
                        </button>
                        <button class="category-btn secours" onclick="answer('secours')">
                            <span class="icon">üü¢</span>
                            <span class="name">Secours</span>
                        </button>
                    </div>
                    
                    <div class="combo-display" id="combo-display">üî• COMBO x5 !</div>
                </div>
                
                <div class="game-over" id="game-over">
                    <h2>üí• GAME OVER</h2>
                    <p>Tu as fait de ton mieux !</p>
                    <div class="final-score" id="final-score">0</div>
                    <div class="high-score" id="high-score-display">üèÜ Meilleur score : 0</div>
                    <br><br>
                    <button class="btn-start" onclick="restartGame()">üîÑ Rejouer</button>
                </div>
            </div>
        </div>
        
    </div>
    
    <script>
        const pictograms = [
            { name: "Port des gants", image: "pictogrammes/images/OBLIGATION-gants.jpg", category: "obligation" },
            { name: "Port du casque", image: "pictogrammes/images/OBLIGATION-casque.jpg", category: "obligation" },
            { name: "Chaussures s√©curit√©", image: "pictogrammes/images/OBLIGATION-chaussures.jpg", category: "obligation" },
            { name: "Lunettes protection", image: "pictogrammes/images/OBLIGATION-lunettes.jpg", category: "obligation" },
            { name: "Protection auditive", image: "pictogrammes/images/OBLIGATION-casque-antibruit.jpg", category: "obligation" },
            { name: "Protection respiratoire", image: "pictogrammes/images/OBLIGATION-protection-voies-espiratoires.jpg", category: "obligation" },
            { name: "Interdiction fumer", image: "pictogrammes/images/INTERDIT-fumer.jpg", category: "interdiction" },
            { name: "Flamme interdite", image: "pictogrammes/images/INTERDIT-flamme.jpg", category: "interdiction" },
            { name: "Acc√®s interdit", image: "pictogrammes/images/INTERDIT-entrer.jpg", category: "interdiction" },
            { name: "Interdit toucher", image: "pictogrammes/images/INTERDIT-toucher.jpg", category: "interdiction" },
            { name: "Interdit pi√©tons", image: "pictogrammes/images/INTERDIT-pietons.jpg", category: "interdiction" },
            { name: "Danger √©lectrique", image: "pictogrammes/images/DANGER-electricite.jpg", category: "avertissement" },
            { name: "Danger chute", image: "pictogrammes/images/DANGER-chute.jpg", category: "avertissement" },
            { name: "Produit toxique", image: "pictogrammes/images/DANGER-produit-toxique.jpg", category: "avertissement" },
            { name: "Produit inflammable", image: "pictogrammes/images/DANGER-produit-inflammable.jpg", category: "avertissement" },
            { name: "Chariot √©l√©vateur", image: "pictogrammes/images/DANGER-chariot.jpg", category: "avertissement" },
            { name: "Extincteur", image: "pictogrammes/images/INCENDIE-extincteur.jpg", category: "incendie" },
            { name: "Alarme incendie", image: "pictogrammes/images/INCENDIE-alarme.jpg", category: "incendie" },
            { name: "Lance incendie", image: "pictogrammes/images/INCENDIE-lance.jpg", category: "incendie" },
            { name: "Sortie secours", image: "pictogrammes/images/SECOURS-sortie-vers-droite.jpg", category: "secours" },
            { name: "Point rassemblement", image: "pictogrammes/images/SECOURS-point-rassemblement.jpg", category: "secours" },
            { name: "Premiers secours", image: "pictogrammes/images/SECOURS-croix.jpg", category: "secours" },
            { name: "D√©fibrillateur", image: "pictogrammes/images/SECOURS-defibrillateur.jpg", category: "secours" }
        ];
        
        let score = 0;
        let combo = 0;
        let lives = 3;
        let currentPicto = null;
        let timerInterval = null;
        let timeLeft = 3000;
        let canAnswer = false;
        let highScore = localStorage.getItem('speedHighScore') || 0;
        
        function startGame() {
            document.getElementById('intro-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            
            score = 0;
            combo = 0;
            lives = 3;
            
            updateDisplay();
            
            document.getElementById('game-over').classList.remove('show');
            document.getElementById('game-active').style.display = 'none';
            document.getElementById('countdown-display').style.display = 'block';
            
            // Countdown
            let count = 3;
            document.getElementById('countdown').textContent = count;
            
            const countdownInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    document.getElementById('countdown').textContent = count;
                } else {
                    clearInterval(countdownInterval);
                    document.getElementById('countdown-display').style.display = 'none';
                    document.getElementById('game-active').style.display = 'block';
                    nextPicto();
                }
            }, 1000);
        }
        
        function nextPicto() {
            canAnswer = true;
            timeLeft = 3000;
            
            // Random pictogram
            currentPicto = pictograms[Math.floor(Math.random() * pictograms.length)];
            document.getElementById('current-picto').src = currentPicto.image;
            
            // Reset buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('correct', 'wrong');
                btn.disabled = false;
            });
            
            // Start timer
            document.getElementById('timer-fill').style.width = '100%';
            document.getElementById('timer-fill').className = 'timer-fill';
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft -= 50;
                const percent = (timeLeft / 3000) * 100;
                document.getElementById('timer-fill').style.width = percent + '%';
                
                if (percent < 30) {
                    document.getElementById('timer-fill').className = 'timer-fill danger';
                } else if (percent < 60) {
                    document.getElementById('timer-fill').className = 'timer-fill warning';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    wrongAnswer();
                }
            }, 50);
        }
        
        function answer(category) {
            if (!canAnswer) return;
            canAnswer = false;
            clearInterval(timerInterval);
            
            const btn = document.querySelector('.category-btn.' + category);
            
            if (category === currentPicto.category) {
                // Correct!
                btn.classList.add('correct');
                combo++;
                const bonus = Math.min(combo, 10);
                score += 10 + bonus;
                
                if (combo >= 3) {
                    document.getElementById('combo-display').textContent = 'üî• COMBO x' + combo + ' !';
                    document.getElementById('combo-display').classList.add('show');
                    setTimeout(() => {
                        document.getElementById('combo-display').classList.remove('show');
                    }, 800);
                }
                
                updateDisplay();
                
                setTimeout(nextPicto, 500);
            } else {
                btn.classList.add('wrong');
                document.querySelector('.category-btn.' + currentPicto.category).classList.add('correct');
                wrongAnswer();
            }
        }
        
        function wrongAnswer() {
            combo = 0;
            lives--;
            updateDisplay();
            
            document.querySelectorAll('.category-btn').forEach(btn => btn.disabled = true);
            
            if (lives <= 0) {
                gameOver();
            } else {
                setTimeout(nextPicto, 1000);
            }
        }
        
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('combo').textContent = combo;
            document.getElementById('lives').textContent = '‚ù§Ô∏è'.repeat(lives) + 'üñ§'.repeat(3 - lives);
        }
        
        function gameOver() {
            canAnswer = false;
            
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('speedHighScore', highScore);
            }
            
            document.getElementById('game-active').style.display = 'none';
            document.getElementById('game-over').classList.add('show');
            document.getElementById('final-score').textContent = score;
            document.getElementById('high-score-display').textContent = 'üèÜ Meilleur score : ' + highScore;
        }
        
        function restartGame() {
            startGame();
        }
    </script>
    
</body>
</html>
